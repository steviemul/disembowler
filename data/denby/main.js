function o_(e,t,r){e=e.split("."),r=r||o_a,e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||void 0===t?r=r[i]?r[i]:r[i]={}:r[i]=t}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function r(e){var t=e.length,r=Z.type(e);return"function"!==r&&!Z.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e))}function i(e,t,r){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==r});if(t.nodeType)return Z.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(se.test(t))return Z.filter(t,e,r);t=Z.filter(t,e)}return Z.grep(e,function(e){return W.call(t,e)>=0!==r})}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=fe[e]={};return Z.each(e.match(he)||[],function(e,r){t[r]=!0}),t}function n(){J.removeEventListener("DOMContentLoaded",n,!1),e.removeEventListener("load",n,!1),Z.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+s.uid++}function c(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(be,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:ye.test(r)?Z.parseJSON(r):r)}catch(e){}Ee.set(e,t,r)}else r=void 0;return r}function l(){return!0}function u(){return!1}function d(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=Ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var r=0,i=e.length;i>r;r++)ve.set(e[r],"globalEval",!t||ve.get(t[r],"globalEval"))}function g(e,t){var r,i,a,o,n,s,c,l;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),n=ve.set(t,o),l=o.events)){delete n.handle,n.events={};for(a in l)for(r=0,i=l[a].length;i>r;r++)Z.event.add(t,a,l[a][r])}Ee.hasData(e)&&(s=Ee.access(e),c=Z.extend({},s),Ee.set(t,c))}}function v(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],r):r}function E(e,t){var r=t.nodeName.toLowerCase();"input"===r&&_e.test(e.type)?t.checked=e.checked:("input"===r||"textarea"===r)&&(t.defaultValue=e.defaultValue)}function y(t,r){var i,a=Z(r.createElement(t)).appendTo(r.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(a[0]))?i.display:Z.css(a[0],"display");return a.detach(),o}function b(e){var t=J,r=He[e];return r||(r=y(e,t),"none"!==r&&r||(Ge=(Ge||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ge[0].contentDocument,t.write(),t.close(),r=y(e,t),Ge.detach()),He[e]=r),r}function I(e,t,r){var i,a,o,n,s=e.style;return r=r||Ye(e),r&&(n=r.getPropertyValue(t)||r[t]),r&&(""!==n||Z.contains(e.ownerDocument,e)||(n=Z.style(e,t)),je.test(n)&&Ve.test(t)&&(i=s.width,a=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=n,n=r.width,s.width=i,s.minWidth=a,s.maxWidth=o)),void 0!==n?n+"":n}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var r=t[0].toUpperCase()+t.slice(1),i=t,a=ze.length;a--;)if(t=ze[a]+r,t in e)return t;return i}function _(e,t,r){var i=$e.exec(t);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):t}function P(e,t,r,i,a){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,n=0;4>o;o+=2)"margin"===r&&(n+=Z.css(e,r+Te[o],!0,a)),i?("content"===r&&(n-=Z.css(e,"padding"+Te[o],!0,a)),"margin"!==r&&(n-=Z.css(e,"border"+Te[o]+"Width",!0,a))):(n+=Z.css(e,"padding"+Te[o],!0,a),"padding"!==r&&(n+=Z.css(e,"border"+Te[o]+"Width",!0,a)));return n}function A(e,t,r){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,o=Ye(e),n="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=a||null==a){if(a=I(e,t,o),(0>a||null==a)&&(a=e.style[t]),je.test(a))return a;i=n&&(X.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+P(e,t,r||(n?"border":"content"),i,o)+"px"}function C(e,t){for(var r,i,a,o=[],n=0,s=e.length;s>n;n++)i=e[n],i.style&&(o[n]=ve.get(i,"olddisplay"),r=i.style.display,t?(o[n]||"none"!==r||(i.style.display=""),""===i.style.display&&Se(i)&&(o[n]=ve.access(i,"olddisplay",b(i.nodeName)))):(a=Se(i),"none"===r&&a||ve.set(i,"olddisplay",a?r:Z.css(i,"display"))));for(n=0;s>n;n++)i=e[n],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[n]||"":"none"));return e}function R(e,t,r,i,a){return new R.prototype.init(e,t,r,i,a)}function O(){return setTimeout(function(){Xe=void 0}),Xe=Z.now()}function N(e,t){var r,i=0,a={height:e};for(t=t?1:0;4>i;i+=2-t)r=Te[i],a["margin"+r]=a["padding"+r]=e;return t&&(a.opacity=a.width=e),a}function D(e,t,r){for(var i,a=(rt[t]||[]).concat(rt["*"]),o=0,n=a.length;n>o;o++)if(i=a[o].call(r,t,e))return i}function L(e,t,r){var i,a,o,n,s,c,l,u,d=this,p={},h=e.style,f=e.nodeType&&Se(e),m=ve.get(e,"fxshow");r.queue||(s=Z._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,Z.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],l=Z.css(e,"display"),u="none"===l?ve.get(e,"olddisplay")||b(e.nodeName):l,"inline"===u&&"none"===Z.css(e,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]}));for(i in t)if(a=t[i],Qe.exec(a)){if(delete t[i],o=o||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!m||void 0===m[i])continue;f=!0}p[i]=m&&m[i]||Z.style(e,i)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(h.display=l);else{m?"hidden"in m&&(f=m.hidden):m=ve.access(e,"fxshow",{}),o&&(m.hidden=!f),f?Z(e).show():d.done(function(){Z(e).hide()}),d.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(i in p)n=D(f?m[i]:0,i,d),i in m||(m[i]=n.start,f&&(n.end=n.start,n.start="width"===i||"height"===i?1:0))}}function w(e,t){var r,i,a,o,n;for(r in e)if(i=Z.camelCase(r),a=t[i],o=e[r],Z.isArray(o)&&(a=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),n=Z.cssHooks[i],n&&"expand"in n){o=n.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=a)}else t[i]=a}function M(e,t,r){var i,a,o=0,n=tt.length,s=Z.Deferred().always(function(){delete c.elem}),c=function(){if(a)return!1;for(var t=Xe||O(),r=Math.max(0,l.startTime+l.duration-t),i=r/l.duration||0,o=1-i,n=0,c=l.tweens.length;c>n;n++)l.tweens[n].run(o);return s.notifyWith(e,[l,o,r]),1>o&&c?r:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Xe||O(),duration:r.duration,tweens:[],createTween:function(t,r){var i=Z.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var r=0,i=t?l.tweens.length:0;if(a)return this;for(a=!0;i>r;r++)l.tweens[r].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(w(u,l.opts.specialEasing);n>o;o++)if(i=tt[o].call(l,e,u,l.opts))return i;return Z.map(u,D,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function k(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,a=0,o=t.toLowerCase().match(he)||[];if(Z.isFunction(r))for(;i=o[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function U(e,t,r,i){function a(s){var c;return o[s]=!0,Z.each(e[s]||[],function(e,s){var l=s(t,r,i);return"string"!=typeof l||n||o[l]?n?!(c=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),c}var o={},n=e===yt;return a(t.dataTypes[0])||!o["*"]&&a("*")}function x(e,t){var r,i,a=Z.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((a[r]?e:i||(i={}))[r]=t[r]);return i&&Z.extend(!0,e,i),e}function F(e,t,r){for(var i,a,o,n,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){c.unshift(a);break}if(c[0]in r)o=c[0];else{for(a in r){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}n||(n=a)}o=o||n}return o?(o!==c[0]&&c.unshift(o),r[o]):void 0}function G(e,t,r,i){var a,o,n,s,c,l={},u=e.dataTypes.slice();if(u[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(o=u.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(n=l[c+" "+o]||l["* "+o],!n)for(a in l)if(s=a.split(" "),s[1]===o&&(n=l[c+" "+s[0]]||l["* "+s[0]])){n===!0?n=l[a]:l[a]!==!0&&(o=s[0],u.unshift(s[1]));break}if(n!==!0)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function H(e,t,r,i){var a;if(Z.isArray(t))Z.each(t,function(t,a){r||_t.test(e)?i(e,a):H(e+"["+("object"==typeof a?t:"")+"]",a,r,i)});else if(r||"object"!==Z.type(t))i(e,t);else for(a in t)H(e+"["+a+"]",t[a],r,i)}function V(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var j=[],Y=j.slice,q=j.concat,$=j.push,W=j.indexOf,B={},K=B.toString,z=B.hasOwnProperty,X={},J=e.document,Q="2.1.3",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,re=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:j.sort,splice:j.splice},Z.extend=Z.fn.extend=function(){var e,t,r,i,a,o,n=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof n&&(l=n,n=arguments[s]||{},s++),"object"==typeof n||Z.isFunction(n)||(n={}),s===c&&(n=this,s--);c>s;s++)if(null!=(e=arguments[s]))for(t in e)r=n[t],i=e[t],n!==i&&(l&&i&&(Z.isPlainObject(i)||(a=Z.isArray(i)))?(a?(a=!1,o=r&&Z.isArray(r)?r:[]):o=r&&Z.isPlainObject(r)?r:{},n[t]=Z.extend(l,o,i)):void 0!==i&&(n[t]=i));return n},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"===Z.type(e)&&!e.nodeType&&!Z.isWindow(e)&&!(e.constructor&&!z.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?B[K.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(te,"ms-").replace(re,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var a,o=0,n=e.length,s=r(e);if(i){if(s)for(;n>o&&(a=t.apply(e[o],i),a!==!1);o++);else for(o in e)if(a=t.apply(e[o],i),a===!1)break}else if(s)for(;n>o&&(a=t.call(e[o],o,e[o]),a!==!1);o++);else for(o in e)if(a=t.call(e[o],o,e[o]),a===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(r(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):$.call(i,e)),i},inArray:function(e,t,r){return null==t?-1:W.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,a=e.length;r>i;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,r){for(var i,a=[],o=0,n=e.length,s=!r;n>o;o++)i=!t(e[o],o),i!==s&&a.push(e[o]);return a},map:function(e,t,i){var a,o=0,n=e.length,s=r(e),c=[];if(s)for(;n>o;o++)a=t(e[o],o,i),null!=a&&c.push(a);else for(o in e)a=t(e[o],o,i),null!=a&&c.push(a);return q.apply([],c)},guid:1,proxy:function(e,t){var r,i,a;return"string"==typeof t&&(r=e[t],t=e,e=r),Z.isFunction(e)?(i=Y.call(arguments,2),a=function(){return e.apply(t||this,i.concat(Y.call(arguments)))},a.guid=e.guid=e.guid||Z.guid++,a):void 0},now:Date.now,support:X}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){B["[object "+t+"]"]=t.toLowerCase()});var ae=function(e){function t(e,t,r,i){var a,o,n,s,c,l,d,h,f,m;if((t?t.ownerDocument||t:H)!==L&&D(t),t=t||L,r=r||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return r;if(!i&&M){if(11!==s&&(a=Ee.exec(e)))if(n=a[1]){if(9===s){if(o=t.getElementById(n),!o||!o.parentNode)return r;if(o.id===n)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(n))&&F(t,o)&&o.id===n)return r.push(o),r}else{if(a[2])return Q.apply(r,t.getElementsByTagName(e)),r;if((n=a[3])&&I.getElementsByClassName)return Q.apply(r,t.getElementsByClassName(n)),r}if(I.qsa&&(!k||!k.test(e))){if(h=d=G,f=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=P(e),(d=t.getAttribute("id"))?h=d.replace(be,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",c=l.length;c--;)l[c]=h+p(l[c]);f=ye.test(e)&&u(t.parentNode)||t,m=l.join(",")}if(m)try{return Q.apply(r,f.querySelectorAll(m)),r}catch(e){}finally{d||t.removeAttribute("id")}}}return C(e.replace(ce,"$1"),t,r,i)}function r(){function e(r,i){return t.push(r+" ")>T.cacheLength&&delete e[t.shift()],e[r+" "]=i}var t=[];return e}function i(e){return e[G]=!0,e}function a(e){var t=L.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var r=e.split("|"),i=e.length;i--;)T.attrHandle[r[i]]=t}function n(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||B)-(~e.sourceIndex||B);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function s(e){return function(t){var r=t.nodeName.toLowerCase();return"input"===r&&t.type===e}}function c(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(r,i){for(var a,o=e([],r.length,t),n=o.length;n--;)r[a=o[n]]&&(r[a]=!(i[a]=r[a]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,r=e.length,i="";r>t;t++)i+=e[t].value;return i}function h(e,t,r){var i=t.dir,a=r&&"parentNode"===i,o=j++;return t.first?function(t,r,o){for(;t=t[i];)if(1===t.nodeType||a)return e(t,r,o)}:function(t,r,n){var s,c,l=[V,o];if(n){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,r,n))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if(c=t[G]||(t[G]={}),(s=c[i])&&s[0]===V&&s[1]===o)return l[2]=s[2];if(c[i]=l,l[2]=e(t,r,n))return!0}}}function f(e){return e.length>1?function(t,r,i){for(var a=e.length;a--;)if(!e[a](t,r,i))return!1;return!0}:e[0]}function m(e,r,i){for(var a=0,o=r.length;o>a;a++)t(e,r[a],i);return i}function g(e,t,r,i,a){for(var o,n=[],s=0,c=e.length,l=null!=t;c>s;s++)(o=e[s])&&(!r||r(o,i,a))&&(n.push(o),l&&t.push(s));return n}function v(e,t,r,a,o,n){return a&&!a[G]&&(a=v(a)),o&&!o[G]&&(o=v(o,n)),i(function(i,n,s,c){var l,u,d,p=[],h=[],f=n.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),E=!e||!i&&t?v:g(v,p,e,s,c),y=r?o||(i?e:f||a)?[]:n:E;if(r&&r(E,y,s,c),a)for(l=g(y,h),a(l,[],s,c),u=l.length;u--;)(d=l[u])&&(y[h[u]]=!(E[h[u]]=d));if(i){if(o||e){if(o){for(l=[],u=y.length;u--;)(d=y[u])&&l.push(E[u]=d);o(null,y=[],l,c)}for(u=y.length;u--;)(d=y[u])&&(l=o?ee(i,d):p[u])>-1&&(i[l]=!(n[l]=d))}}else y=g(y===n?y.splice(f,y.length):y),o?o(null,n,y,c):Q.apply(n,y)})}function E(e){for(var t,r,i,a=e.length,o=T.relative[e[0].type],n=o||T.relative[" "],s=o?1:0,c=h(function(e){return e===t},n,!0),l=h(function(e){return ee(t,e)>-1},n,!0),u=[function(e,r,i){var a=!o&&(i||r!==R)||((t=r).nodeType?c(e,r,i):l(e,r,i));return t=null,a}];a>s;s++)if(r=T.relative[e[s].type])u=[h(f(u),r)];else{if(r=T.filter[e[s].type].apply(null,e[s].matches),r[G]){for(i=++s;a>i&&!T.relative[e[i].type];i++);return v(s>1&&f(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ce,"$1"),r,i>s&&E(e.slice(s,i)),a>i&&E(e=e.slice(i)),a>i&&p(e))}u.push(r)}return f(u)}function y(e,r){var a=r.length>0,o=e.length>0,n=function(i,n,s,c,l){var u,d,p,h=0,f="0",m=i&&[],v=[],E=R,y=i||o&&T.find.TAG("*",l),b=V+=null==E?1:Math.random()||.1,I=y.length;for(l&&(R=n!==L&&n);f!==I&&null!=(u=y[f]);f++){if(o&&u){for(d=0;p=e[d++];)if(p(u,n,s)){c.push(u);break}l&&(V=b)}a&&((u=!p&&u)&&h--,i&&m.push(u))}if(h+=f,a&&f!==h){for(d=0;p=r[d++];)p(m,v,n,s);if(i){if(h>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(c));v=g(v)}Q.apply(c,v),l&&!i&&v.length>0&&h+r.length>1&&t.uniqueSort(c)}return l&&(V=b,R=E),m};return a?i(n):n}var b,I,T,S,_,P,A,C,R,O,N,D,L,w,M,k,U,x,F,G="sizzle"+1*new Date,H=e.document,V=0,j=0,Y=r(),q=r(),$=r(),W=function(e,t){return e===t&&(N=!0),0},B=1<<31,K={}.hasOwnProperty,z=[],X=z.pop,J=z.push,Q=z.push,Z=z.slice,ee=function(e,t){for(var r=0,i=e.length;i>r;r++)if(e[r]===t)return r;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=ie.replace("w","w#"),oe="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ae+"))|)"+re+"*\\]",ne=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(re+"+","g"),ce=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),ue=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),de=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),pe=new RegExp(ne),he=new RegExp("^"+ae+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,Ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,Ie=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Te=function(e,t,r){var i="0x"+t-65536;return i!==i||r?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){D()};try{Q.apply(z=Z.call(H.childNodes),H.childNodes),z[H.childNodes.length].nodeType}catch(e){Q={apply:z.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}I=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,r,i=e?e.ownerDocument||e:H;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,w=i.documentElement,r=i.defaultView,r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",Se,!1):r.attachEvent&&r.attachEvent("onunload",Se)),M=!_(i),I.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),I.getElementsByTagName=a(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),I.getElementsByClassName=ve.test(i.getElementsByClassName),I.getById=a(function(e){return w.appendChild(e).id=G,!i.getElementsByName||!i.getElementsByName(G).length}),I.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&M){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},T.filter.ID=function(e){var t=e.replace(Ie,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(Ie,Te);return function(e){var r="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),T.find.TAG=I.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):I.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],a=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[a++];)1===r.nodeType&&i.push(r);return i}return o},T.find.CLASS=I.getElementsByClassName&&function(e,t){return M?t.getElementsByClassName(e):void 0},U=[],k=[],(I.qsa=ve.test(i.querySelectorAll))&&(a(function(e){w.appendChild(e).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||k.push("\\["+re+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+G+"-]").length||k.push("~="),e.querySelectorAll(":checked").length||k.push(":checked"),e.querySelectorAll("a#"+G+"+*").length||k.push(".#.+[+~]")}),a(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&k.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||k.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),k.push(",.*:")})),(I.matchesSelector=ve.test(x=w.matches||w.webkitMatchesSelector||w.mozMatchesSelector||w.oMatchesSelector||w.msMatchesSelector))&&a(function(e){I.disconnectedMatch=x.call(e,"div"),x.call(e,"[s!='']:x"),U.push("!=",ne)}),k=k.length&&new RegExp(k.join("|")),U=U.length&&new RegExp(U.join("|")),t=ve.test(w.compareDocumentPosition),F=t||ve.test(w.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return N=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!I.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===H&&F(H,e)?-1:t===i||t.ownerDocument===H&&F(H,t)?1:O?ee(O,e)-ee(O,t):0:4&r?-1:1)}:function(e,t){if(e===t)return N=!0,0;var r,a=0,o=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!o||!s)return e===i?-1:t===i?1:o?-1:s?1:O?ee(O,e)-ee(O,t):0;if(o===s)return n(e,t);for(r=e;r=r.parentNode;)c.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;c[a]===l[a];)a++;return a?n(c[a],l[a]):c[a]===H?-1:l[a]===H?1:0},i):L},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==L&&D(e),r=r.replace(de,"='$1']"),!(!I.matchesSelector||!M||U&&U.test(r)||k&&k.test(r)))try{var i=x.call(e,r);if(i||I.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(r,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&D(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&D(e);var r=T.attrHandle[t.toLowerCase()],i=r&&K.call(T.attrHandle,t.toLowerCase())?r(e,t,!M):void 0;return void 0!==i?i:I.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],i=0,a=0;if(N=!I.detectDuplicates,O=!I.sortStable&&e.slice(0),e.sort(W),N){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return O=null,e},S=t.getText=function(e){var t,r="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=S(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)r+=S(t);return r},T=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ie,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(Ie,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&pe.test(r)&&(t=P(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ie,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Y[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&Y(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,i){return function(a){var o=t.attr(a,e);return null==o?"!="===r:!r||(o+="","="===r?o===i:"!="===r?o!==i:"^="===r?i&&0===o.indexOf(i):"*="===r?i&&o.indexOf(i)>-1:"$="===r?i&&o.slice(-i.length)===i:"~="===r?(" "+o.replace(se," ")+" ").indexOf(i)>-1:"|="===r&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,r,i,a){var o="nth"!==e.slice(0,3),n="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,r,c){var l,u,d,p,h,f,m=o!==n?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),E=!c&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[n?g.firstChild:g.lastChild],n&&E){for(u=g[G]||(g[G]={}),l=u[e]||[],h=l[0]===V&&l[1],p=l[0]===V&&l[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(p=h=0)||f.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[V,h,p];break}}else if(E&&(l=(t[G]||(t[G]={}))[e])&&l[0]===V)p=l[1];else for(;(d=++h&&d&&d[m]||(p=h=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(E&&((d[G]||(d[G]={}))[e]=[V,p]),d!==t)););return p-=a,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(e,r){var a,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[G]?o(r):o.length>1?(a=[e,e,"",r],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,a=o(e,r),n=a.length;n--;)i=ee(e,a[n]),e[i]=!(t[i]=a[n])}):function(e){return o(e,0,a)}):o}},pseudos:{not:i(function(e){var t=[],r=[],a=A(e.replace(ce,"$1"));return a[G]?i(function(e,t,r,i){for(var o,n=a(e,null,i,[]),s=e.length;s--;)(o=n[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,a(t,null,o,r),t[0]=null,!r.pop()}}),has:i(function(e){return function(r){return t(e,r).length>0}}),contains:i(function(e){return e=e.replace(Ie,Te),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ie,Te).toLowerCase(),function(t){var r;do if(r=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return r=r.toLowerCase(),r===e||0===r.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===w},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,r){return[0>r?r+t:r]}),even:l(function(e,t){for(var r=0;t>r;r+=2)e.push(r);return e}),odd:l(function(e,t){for(var r=1;t>r;r+=2)e.push(r);return e}),lt:l(function(e,t,r){for(var i=0>r?r+t:r;--i>=0;)e.push(i);return e}),gt:l(function(e,t,r){for(var i=0>r?r+t:r;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=c(b);return d.prototype=T.filters=T.pseudos,T.setFilters=new d,P=t.tokenize=function(e,r){var i,a,o,n,s,c,l,u=q[e+" "];if(u)return r?0:u.slice(0);for(s=e,c=[],l=T.preFilter;s;){(!i||(a=le.exec(s)))&&(a&&(s=s.slice(a[0].length)||s),c.push(o=[])),i=!1,(a=ue.exec(s))&&(i=a.shift(),o.push({value:i,type:a[0].replace(ce," ")}),s=s.slice(i.length));for(n in T.filter)!(a=fe[n].exec(s))||l[n]&&!(a=l[n](a))||(i=a.shift(),o.push({value:i,type:n,matches:a}),s=s.slice(i.length));if(!i)break}return r?s.length:s?t.error(e):q(e,c).slice(0)},A=t.compile=function(e,t){var r,i=[],a=[],o=$[e+" "];if(!o){for(t||(t=P(e)),r=t.length;r--;)o=E(t[r]),o[G]?i.push(o):a.push(o);o=$(e,y(a,i)),o.selector=e}return o},C=t.select=function(e,t,r,i){var a,o,n,s,c,l="function"==typeof e&&e,d=!i&&P(e=l.selector||e);if(r=r||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(n=o[0]).type&&I.getById&&9===t.nodeType&&M&&T.relative[o[1].type]){if(t=(T.find.ID(n.matches[0].replace(Ie,Te),t)||[])[0],!t)return r;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(a=fe.needsContext.test(e)?0:o.length;a--&&(n=o[a],!T.relative[s=n.type]);)if((c=T.find[s])&&(i=c(n.matches[0].replace(Ie,Te),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(a,1),e=i.length&&p(o),!e)return Q.apply(r,i),r;break}}return(l||A(e,d))(i,t,!M,r,ye.test(e)&&u(t.parentNode)||t),r},I.sortStable=G.split("").sort(W).join("")===G,I.detectDuplicates=!!N,D(),I.sortDetached=a(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,r){return r?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),I.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,r){return r||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,r){var i;return r?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=ae,Z.expr=ae.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ae.uniqueSort,Z.text=ae.getText,Z.isXMLDoc=ae.isXML,Z.contains=ae.contains;var oe=Z.expr.match.needsContext,ne=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){
return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,r=this.length,i=[],a=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;r>t;t++)if(Z.contains(a[t],this))return!0}));for(t=0;r>t;t++)Z.find(e,a[t],i);return i=this.pushStack(r>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&oe.test(e)?Z(e):e||[],!1).length}});var ce,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=Z.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||ce).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ne.test(r[1])&&Z.isPlainObject(t))for(r in t)Z.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=J.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ce.ready?ce.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ue.prototype=Z.fn,ce=Z(J);var de=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,r){for(var i=[],a=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&Z(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),Z.fn.extend({has:function(e){var t=Z(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,a=this.length,o=[],n=oe.test(e)||"string"!=typeof e?Z(e,t||this.context):0;a>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(n?n.index(r)>-1:1===r.nodeType&&Z.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?W.call(Z(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,r){return Z.dir(e,"parentNode",r)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,r){return Z.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return Z.dir(e,"previousSibling",r)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(r,i){var a=Z.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(a=Z.filter(i,a)),this.length>1&&(pe[e]||Z.unique(a),de.test(e)&&a.reverse()),this.pushStack(a)}});var he=/\S+/g,fe={};Z.Callbacks=function(e){e="string"==typeof e?fe[e]||o(e):Z.extend({},e);var t,r,i,a,n,s,c=[],l=!e.once&&[],u=function(o){for(t=e.memory&&o,r=!0,s=a||0,a=0,n=c.length,i=!0;c&&n>s;s++)if(c[s].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,c&&(l?l.length&&u(l.shift()):t?c=[]:d.disable())},d={add:function(){if(c){var r=c.length;!function t(r){Z.each(r,function(r,i){var a=Z.type(i);"function"===a?e.unique&&d.has(i)||c.push(i):i&&i.length&&"string"!==a&&t(i)})}(arguments),i?n=c.length:t&&(a=r,u(t))}return this},remove:function(){return c&&Z.each(arguments,function(e,t){for(var r;(r=Z.inArray(t,c,r))>-1;)c.splice(r,1),i&&(n>=r&&n--,s>=r&&s--)}),this},has:function(e){return e?Z.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],n=0,this},disable:function(){return c=l=t=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,t||d.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||r&&!l||(t=t||[],t=[e,t.slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(r){Z.each(t,function(t,o){var n=Z.isFunction(e[t])&&e[t];a[o[1]](function(){var e=n&&n.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,n?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},a={};return i.pipe=i.then,Z.each(t,function(e,o){var n=o[2],s=o[3];i[o[1]]=n.add,s&&n.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),a[o[0]]=function(){return a[o[0]+"With"](this===a?i:this,arguments),this},a[o[0]+"With"]=n.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,r,i,a=0,o=Y.call(arguments),n=o.length,s=1!==n||e&&Z.isFunction(e.promise)?n:0,c=1===s?e:Z.Deferred(),l=function(e,r,i){return function(a){r[e]=this,i[e]=arguments.length>1?Y.call(arguments):a,i===t?c.notifyWith(r,i):--s||c.resolveWith(r,i)}};if(n>1)for(t=new Array(n),r=new Array(n),i=new Array(n);n>a;a++)o[a]&&Z.isFunction(o[a].promise)?o[a].promise().done(l(a,i,o)).fail(c.reject).progress(l(a,r,t)):--s;return s||c.resolveWith(i,o),c.promise()}});var me;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(me.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return me||(me=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1))),me.promise(t)},Z.ready.promise();var ge=Z.access=function(e,t,r,i,a,o,n){var s=0,c=e.length,l=null==r;if("object"===Z.type(r)){a=!0;for(s in r)Z.access(e,t,s,r[s],!0,o,n)}else if(void 0!==i&&(a=!0,Z.isFunction(i)||(n=!0),l&&(n?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(Z(e),r)})),t))for(;c>s;s++)t(e[s],r,n?i:i.call(e[s],s,t(e[s],r)));return a?e:l?t.call(e):c?t(e[0],r):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=Z.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=s.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,Z.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,a=this.key(e),o=this.cache[a];if("string"==typeof t)o[t]=r;else if(Z.isEmptyObject(o))Z.extend(this.cache[a],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,a,o=this.key(e),n=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(a=Z.camelCase(t),t in n?i=[t,a]:(i=a,i=i in n?[i]:i.match(he)||[])),r=i.length;for(;r--;)delete n[i[r]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new s,Ee=new s,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(e){return Ee.hasData(e)||ve.hasData(e)},data:function(e,t,r){return Ee.access(e,t,r)},removeData:function(e,t){Ee.remove(e,t)},_data:function(e,t,r){return ve.access(e,t,r)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var r,i,a,o=this[0],n=o&&o.attributes;if(void 0===e){if(this.length&&(a=Ee.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(r=n.length;r--;)n[r]&&(i=n[r].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),c(o,i,a[i])));ve.set(o,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){Ee.set(this,e)}):ge(this,function(t){var r,i=Z.camelCase(e);if(o&&void 0===t){if(r=Ee.get(o,e),void 0!==r)return r;if(r=Ee.get(o,i),void 0!==r)return r;if(r=c(o,i,void 0),void 0!==r)return r}else this.each(function(){var r=Ee.get(this,i);Ee.set(this,i,t),-1!==e.indexOf("-")&&void 0!==r&&Ee.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ee.remove(this,e)})}}),Z.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),r&&(!i||Z.isArray(r)?i=ve.access(e,t,Z.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=Z.queue(e,t),i=r.length,a=r.shift(),o=Z._queueHooks(e,t),n=function(){Z.dequeue(e,t)};"inprogress"===a&&(a=r.shift(),i--),a&&("fx"===t&&r.unshift("inprogress"),delete o.stop,a.call(e,n,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ve.get(e,r)||ve.access(e,r,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",r])})})}}),Z.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?Z.queue(this[0],e):void 0===t?this:this.each(function(){var r=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,a=Z.Deferred(),o=this,n=this.length,s=function(){--i||a.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";n--;)r=ve.get(o[n],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(s));return s(),a.promise(t)}});var Ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Se=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},_e=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),r=J.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),X.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Pe="undefined";X.focusinBubbles="onfocusin"in e;var Ae=/^key/,Ce=/^(?:mouse|pointer|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,Oe=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,r,i,a){var o,n,s,c,l,u,d,p,h,f,m,g=ve.get(e);if(g)for(r.handler&&(o=r,r=o.handler,a=o.selector),r.guid||(r.guid=Z.guid++),(c=g.events)||(c=g.events={}),(n=g.handle)||(n=g.handle=function(t){return typeof Z!==Pe&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],l=t.length;l--;)s=Oe.exec(t[l])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h&&(d=Z.event.special[h]||{},h=(a?d.delegateType:d.bindType)||h,d=Z.event.special[h]||{},u=Z.extend({type:h,origType:m,data:i,handler:r,guid:r.guid,selector:a,needsContext:a&&Z.expr.match.needsContext.test(a),namespace:f.join(".")},o),(p=c[h])||(p=c[h]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,f,n)!==!1||e.addEventListener&&e.addEventListener(h,n,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),a?p.splice(p.delegateCount++,0,u):p.push(u),Z.event.global[h]=!0)},remove:function(e,t,r,i,a){var o,n,s,c,l,u,d,p,h,f,m,g=ve.hasData(e)&&ve.get(e);if(g&&(c=g.events)){for(t=(t||"").match(he)||[""],l=t.length;l--;)if(s=Oe.exec(t[l])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h){for(d=Z.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,p=c[h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),n=o=p.length;o--;)u=p[o],!a&&m!==u.origType||r&&r.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));n&&!p.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||Z.removeEvent(e,h,g.handle),delete c[h])}else for(h in c)Z.event.remove(e,h+t[l],r,i,!0);Z.isEmptyObject(c)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(t,r,i,a){var o,n,s,c,l,u,d,p=[i||J],h=z.call(t,"type")?t.type:t,f=z.call(t,"namespace")?t.namespace.split("."):[];if(n=s=i=i||J,3!==i.nodeType&&8!==i.nodeType&&!Re.test(h+Z.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),l=h.indexOf(":")<0&&"on"+h,t=t[Z.expando]?t:new Z.Event(h,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),r=null==r?[t]:Z.makeArray(r,[t]),d=Z.event.special[h]||{},a||!d.trigger||d.trigger.apply(i,r)!==!1)){if(!a&&!d.noBubble&&!Z.isWindow(i)){for(c=d.delegateType||h,Re.test(c+h)||(n=n.parentNode);n;n=n.parentNode)p.push(n),s=n;s===(i.ownerDocument||J)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(n=p[o++])&&!t.isPropagationStopped();)t.type=o>1?c:d.bindType||h,u=(ve.get(n,"events")||{})[t.type]&&ve.get(n,"handle"),u&&u.apply(n,r),u=l&&n[l],u&&u.apply&&Z.acceptData(n)&&(t.result=u.apply(n,r),t.result===!1&&t.preventDefault());return t.type=h,a||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),r)!==!1||!Z.acceptData(i)||l&&Z.isFunction(i[h])&&!Z.isWindow(i)&&(s=i[l],s&&(i[l]=null),Z.event.triggered=h,i[h](),Z.event.triggered=void 0,s&&(i[l]=s)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,r,i,a,o,n=[],s=Y.call(arguments),c=(ve.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(n=Z.event.handlers.call(this,e,c),t=0;(a=n[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,r=0;(o=a.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Z.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,a,o,n=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(i=[],r=0;s>r;r++)o=t[r],a=o.selector+" ",void 0===i[a]&&(i[a]=o.needsContext?Z(a,this).index(c)>=0:Z.find(a,this,null,[c]).length),i[a]&&i.push(o);i.length&&n.push({elem:c,handlers:i})}return s<t.length&&n.push({elem:this,handlers:t.slice(s)}),n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,a,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||J,i=r.documentElement,a=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,r,i,a=e.type,o=e,n=this.fixHooks[a];for(n||(this.fixHooks[a]=n=Ce.test(a)?this.mouseHooks:Ae.test(a)?this.keyHooks:{}),i=n.props?this.props.concat(n.props):this.props,e=new Z.Event(o),t=i.length;t--;)r=i[t],e[r]=o[r];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),n.filter?n.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var a=Z.extend(new Z.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(a,null,t):Z.event.dispatch.call(t,a),a.isDefaultPrevented()&&r.preventDefault()}},Z.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:u):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,a=e.relatedTarget,o=e.handleObj;return(!a||a!==i&&!Z.contains(i,a))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),X.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,a=ve.access(i,t);a||i.addEventListener(e,r,!0),ve.access(i,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this,a=ve.access(i,t)-1;a?ve.access(i,t,a):(i.removeEventListener(e,r,!0),ve.remove(i,t))}}}),Z.fn.extend({on:function(e,t,r,i,a){var o,n;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(n in e)this.on(n,t,r,e[n],a);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=u;else if(!i)return this;return 1===a&&(o=i,i=function(e){return Z().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,r,t)})},one:function(e,t,r,i){return this.on(e,t,r,i,1)},off:function(e,t,r){var i,a;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=u),this.each(function(){Z.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?Z.event.trigger(e,t,r,!0):void 0}});var Ne=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,De=/<([\w:]+)/,Le=/<|&#?\w+;/,we=/<(?:script|style|link)/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^$|\/(?:java|ecma)script/i,Ue=/^true\/(.*)/,xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,Z.extend({clone:function(e,t,r){var i,a,o,n,s=e.cloneNode(!0),c=Z.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(n=v(s),o=v(e),i=0,a=o.length;a>i;i++)E(o[i],n[i]);if(t)if(r)for(o=o||v(e),n=n||v(s),i=0,a=o.length;a>i;i++)g(o[i],n[i]);else g(e,s);return n=v(s,"script"),n.length>0&&m(n,!c&&v(e,"script")),s},buildFragment:function(e,t,r,i){for(var a,o,n,s,c,l,u=t.createDocumentFragment(),d=[],p=0,h=e.length;h>p;p++)if(a=e[p],a||0===a)if("object"===Z.type(a))Z.merge(d,a.nodeType?[a]:a);else if(Le.test(a)){for(o=o||u.appendChild(t.createElement("div")),n=(De.exec(a)||["",""])[1].toLowerCase(),s=Fe[n]||Fe._default,o.innerHTML=s[1]+a.replace(Ne,"<$1></$2>")+s[2],l=s[0];l--;)o=o.lastChild;Z.merge(d,o.childNodes),o=u.firstChild,o.textContent=""}else d.push(t.createTextNode(a));for(u.textContent="",p=0;a=d[p++];)if((!i||-1===Z.inArray(a,i))&&(c=Z.contains(a.ownerDocument,a),o=v(u.appendChild(a),"script"),c&&m(o),r))for(l=0;a=o[l++];)ke.test(a.type||"")&&r.push(a);return u},cleanData:function(e){for(var t,r,i,a,o=Z.event.special,n=0;void 0!==(r=e[n]);n++){if(Z.acceptData(r)&&(a=r[ve.expando],a&&(t=ve.cache[a]))){if(t.events)for(i in t.events)o[i]?Z.event.remove(r,i):Z.removeEvent(r,i,t.handle);ve.cache[a]&&delete ve.cache[a]}delete Ee.cache[r[Ee.expando]]}}}),Z.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?Z.filter(e,this):this,a=0;null!=(r=i[a]);a++)t||1!==r.nodeType||Z.cleanData(v(r)),r.parentNode&&(t&&Z.contains(r.ownerDocument,r)&&m(v(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!we.test(e)&&!Fe[(De.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ne,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=q.apply([],e);var r,i,a,o,n,s,c=0,l=this.length,u=this,d=l-1,p=e[0],m=Z.isFunction(p);if(m||l>1&&"string"==typeof p&&!X.checkClone&&Me.test(p))return this.each(function(r){var i=u.eq(r);m&&(e[0]=p.call(this,r,i.html())),i.domManip(e,t)});if(l&&(r=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(a=Z.map(v(r,"script"),h),o=a.length;l>c;c++)n=r,c!==d&&(n=Z.clone(n,!0,!0),o&&Z.merge(a,v(n,"script"))),t.call(this[c],n,c);if(o)for(s=a[a.length-1].ownerDocument,Z.map(a,f),c=0;o>c;c++)n=a[c],ke.test(n.type||"")&&!ve.access(n,"globalEval")&&Z.contains(s,n)&&(n.src?Z._evalUrl&&Z._evalUrl(n.src):Z.globalEval(n.textContent.replace(xe,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var r,i=[],a=Z(e),o=a.length-1,n=0;o>=n;n++)r=n===o?this:this.clone(!0),Z(a[n])[t](r),$.apply(i,r.get());return this.pushStack(i)}});var Ge,He={},Ve=/^margin/,je=new RegExp("^("+Ie+")(?!px)[a-z%]+$","i"),Ye=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",n.innerHTML="",a.appendChild(o);var t=e.getComputedStyle(n,null);r="1%"!==t.top,i="4px"===t.width,a.removeChild(o)}var r,i,a=J.documentElement,o=J.createElement("div"),n=J.createElement("div");n.style&&(n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===n.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(n),e.getComputedStyle&&Z.extend(X,{pixelPosition:function(){return t(),r},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,r=n.appendChild(J.createElement("div"));return r.style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",n.style.width="1px",a.appendChild(o),t=!parseFloat(e.getComputedStyle(r,null).marginRight),a.removeChild(o),n.removeChild(r),t}}))}(),Z.swap=function(e,t,r,i){var a,o,n={};for(o in t)n[o]=e.style[o],e.style[o]=t[o];a=r.apply(e,i||[]);for(o in t)e.style[o]=n[o];return a};var qe=/^(none|table(?!-c[ea]).+)/,$e=new RegExp("^("+Ie+")(.*)$","i"),We=new RegExp("^([+-])=("+Ie+")","i"),Be={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"},ze=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=I(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,n,s=Z.camelCase(t),c=e.style;return t=Z.cssProps[s]||(Z.cssProps[s]=S(c,s)),n=Z.cssHooks[t]||Z.cssHooks[s],void 0===r?n&&"get"in n&&void 0!==(a=n.get(e,!1,i))?a:c[t]:(o=typeof r,"string"===o&&(a=We.exec(r))&&(r=(a[1]+1)*a[2]+parseFloat(Z.css(e,t)),o="number"),void(null!=r&&r===r&&("number"!==o||Z.cssNumber[s]||(r+="px"),X.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),n&&"set"in n&&void 0===(r=n.set(e,r,i))||(c[t]=r))))}},css:function(e,t,r,i){var a,o,n,s=Z.camelCase(t);return t=Z.cssProps[s]||(Z.cssProps[s]=S(e.style,s)),n=Z.cssHooks[t]||Z.cssHooks[s],n&&"get"in n&&(a=n.get(e,!0,r)),void 0===a&&(a=I(e,t,i)),"normal"===a&&t in Ke&&(a=Ke[t]),""===r||r?(o=parseFloat(a),r===!0||Z.isNumeric(o)?o||0:a):a}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,r,i){return r?qe.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Be,function(){return A(e,t,i)}):A(e,t,i):void 0},set:function(e,r,i){var a=i&&Ye(e);return _(e,r,i?P(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,a),a):0)}}}),Z.cssHooks.marginRight=T(X.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},I,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(r){for(var i=0,a={},o="string"==typeof r?r.split(" "):[r];4>i;i++)a[e+Te[i]+t]=o[i]||o[i-2]||o[0];return a}},Ve.test(e)||(Z.cssHooks[e+t].set=_)}),Z.fn.extend({css:function(e,t){return ge(this,function(e,t,r){var i,a,o={},n=0;if(Z.isArray(t)){for(i=Ye(e),a=t.length;a>n;n++)o[t[n]]=Z.css(e,t[n],!1,i);return o}return void 0!==r?Z.style(e,t,r):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Se(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=R,R.prototype={constructor:R,init:function(e,t,r,i,a,o){this.elem=e,this.prop=r,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Z.cssNumber[r]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,r=R.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=R.prototype.init,Z.fx.step={};var Xe,Je,Qe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+Ie+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[L],rt={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),a=Ze.exec(t),o=a&&a[3]||(Z.cssNumber[e]?"":"px"),n=(Z.cssNumber[e]||"px"!==o&&+i)&&Ze.exec(Z.css(r.elem,e)),s=1,c=20;if(n&&n[3]!==o){o=o||n[3],a=a||[],n=+i||1;do s=s||".5",n/=s,Z.style(r.elem,e,n+o);while(s!==(s=r.cur()/i)&&1!==s&&--c)}return a&&(n=r.start=+n||+i||0,r.unit=o,r.end=a[1]?n+(a[1]+1)*a[2]:+a[2]),r}]};Z.Animation=Z.extend(M,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,a=e.length;a>i;i++)r=e[i],rt[r]=rt[r]||[],rt[r].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,r){var i=e&&"object"==typeof e?Z.extend({},e):{complete:r||!r&&t||Z.isFunction(e)&&e,duration:e,easing:r&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,r,i){return this.filter(Se).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var a=Z.isEmptyObject(e),o=Z.speed(t,r,i),n=function(){var t=M(this,Z.extend({},e),o);(a||ve.get(this,"finish"))&&t.stop(!0)};return n.finish=n,a||o.queue===!1?this.each(n):this.queue(o.queue,n)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",o=Z.timers,n=ve.get(this);if(a)n[a]&&n[a].stop&&i(n[a]);else for(a in n)n[a]&&n[a].stop&&et.test(a)&&i(n[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(r),t=!1,o.splice(a,1));(t||!r)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=ve.get(this),i=r[e+"queue"],a=r[e+"queueHooks"],o=Z.timers,n=i?i.length:0;
for(r.finish=!0,Z.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;n>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var r=Z.fn[t];Z.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(N(t,!0),e,i,a)}}),Z.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,r=Z.timers;for(Xe=Z.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||Z.fx.stop(),Xe=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var i=setTimeout(t,e);r.stop=function(){clearTimeout(i)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),r=t.appendChild(J.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=r.selected,t.disabled=!0,X.optDisabled=!r.disabled,e=J.createElement("input"),e.value="t",e.type="radio",X.radioValue="t"===e.value}();var it,at,ot=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return ge(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,r){var i,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Pe?Z.prop(e,t,r):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?at:it)),void 0===r?i&&"get"in i&&null!==(a=i.get(e,t))?a:(a=Z.find.attr(e,t),null==a?void 0:a):null!==r?i&&"set"in i&&void 0!==(a=i.set(e,r,t))?a:(e.setAttribute(t,r+""),r):void Z.removeAttr(e,t))},removeAttr:function(e,t){var r,i,a=0,o=t&&t.match(he);if(o&&1===e.nodeType)for(;r=o[a++];)i=Z.propFix[r]||r,Z.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),at={set:function(e,t,r){return t===!1?Z.removeAttr(e,r):e.setAttribute(r,r),r}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var r=ot[t]||Z.find.attr;ot[t]=function(e,t,i){var a,o;return i||(o=ot[t],ot[t]=a,a=null!=r(e,t,i)?t.toLowerCase():null,ot[t]=o),a}});var nt=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return ge(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var i,a,o,n=e.nodeType;if(e&&3!==n&&8!==n&&2!==n)return o=1!==n||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,a=Z.propHooks[t]),void 0!==r?a&&"set"in a&&void 0!==(i=a.set(e,r,t))?i:e[t]=r:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||nt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,r,i,a,o,n,s="string"==typeof e&&e,c=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];l>c;c++)if(r=this[c],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(st," "):" ")){for(o=0;a=t[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");n=Z.trim(i),r.className!==n&&(r.className=n)}return this},removeClass:function(e){var t,r,i,a,o,n,s=0===arguments.length||"string"==typeof e&&e,c=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];l>c;c++)if(r=this[c],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(st," "):"")){for(o=0;a=t[o++];)for(;i.indexOf(" "+a+" ")>=0;)i=i.replace(" "+a+" "," ");n=e?Z.trim(i):"",r.className!==n&&(r.className=n)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(r){Z(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r)for(var t,i=0,a=Z(this),o=e.match(he)||[];t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(r===Pe||"boolean"===r)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",r=0,i=this.length;i>r;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var ct=/\r/g;Z.fn.extend({val:function(e){var t,r,i,a=this[0];return arguments.length?(i=Z.isFunction(e),this.each(function(r){var a;1===this.nodeType&&(a=i?e.call(this,r,Z(this).val()):e,null==a?a="":"number"==typeof a?a+="":Z.isArray(a)&&(a=Z.map(a,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=Z.valHooks[a.type]||Z.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(a,"value"))?r:(r=a.value,"string"==typeof r?r.replace(ct,""):null==r?"":r)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type||0>a,n=o?null:[],s=o?a+1:i.length,c=0>a?s:o?a:0;s>c;c++)if(r=i[c],!(!r.selected&&c!==a||(X.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&Z.nodeName(r.parentNode,"optgroup"))){if(t=Z(r).val(),o)return t;n.push(t)}return n},set:function(e,t){for(var r,i,a=e.options,o=Z.makeArray(t),n=a.length;n--;)i=a[n],(i.selected=Z.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},X.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var lt=Z.now(),ut=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var dt=/#.*$/,pt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Et={},yt={},bt="*/".concat("*"),It=e.location.href,Tt=vt.exec(It.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It,type:"GET",isLocal:ft.test(Tt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?x(x(e,Z.ajaxSettings),t):x(Z.ajaxSettings,e)},ajaxPrefilter:k(Et),ajaxTransport:k(yt),ajax:function(e,t){function r(e,t,r,n){var c,u,v,E,b,T=t;2!==y&&(y=2,s&&clearTimeout(s),i=void 0,o=n||"",I.readyState=e>0?4:0,c=e>=200&&300>e||304===e,r&&(E=F(d,I,r)),E=G(d,E,I,c),c?(d.ifModified&&(b=I.getResponseHeader("Last-Modified"),b&&(Z.lastModified[a]=b),b=I.getResponseHeader("etag"),b&&(Z.etag[a]=b)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=E.state,u=E.data,v=E.error,c=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),I.status=e,I.statusText=(t||T)+"",c?f.resolveWith(p,[u,T,I]):f.rejectWith(p,[I,T,v]),I.statusCode(g),g=void 0,l&&h.trigger(c?"ajaxSuccess":"ajaxError",[I,d,c?u:v]),m.fireWith(p,[I,T]),l&&(h.trigger("ajaxComplete",[I,d]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,a,o,n,s,c,l,u,d=Z.ajaxSetup({},t),p=d.context||d,h=d.context&&(p.nodeType||p.jquery)?Z(p):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),g=d.statusCode||{},v={},E={},y=0,b="canceled",I={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!n)for(n={};t=ht.exec(o);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return y||(e=E[r]=E[r]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else I.always(e[I.status]);return this},abort:function(e){var t=e||b;return i&&i.abort(t),r(0,t),this}};if(f.promise(I).complete=m.add,I.success=I.done,I.error=I.fail,d.url=((e||d.url||It)+"").replace(dt,"").replace(gt,Tt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=Z.trim(d.dataType||"*").toLowerCase().match(he)||[""],null==d.crossDomain&&(c=vt.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===Tt[1]&&c[2]===Tt[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(Tt[3]||("http:"===Tt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Z.param(d.data,d.traditional)),U(Et,d,t,I),2===y)return I;l=Z.event&&d.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!mt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(ut.test(a)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=pt.test(a)?a.replace(pt,"$1_="+lt++):a+(ut.test(a)?"&":"?")+"_="+lt++)),d.ifModified&&(Z.lastModified[a]&&I.setRequestHeader("If-Modified-Since",Z.lastModified[a]),Z.etag[a]&&I.setRequestHeader("If-None-Match",Z.etag[a])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&I.setRequestHeader("Content-Type",d.contentType),I.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+bt+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)I.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(p,I,d)===!1||2===y))return I.abort();b="abort";for(u in{success:1,error:1,complete:1})I[u](d[u]);if(i=U(yt,d,t,I)){I.readyState=1,l&&h.trigger("ajaxSend",[I,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){I.abort("timeout")},d.timeout));try{y=1,i.send(v,r)}catch(e){if(!(2>y))throw e;r(-1,e)}}else r(-1,"No Transport");return I},getJSON:function(e,t,r){return Z.get(e,t,r,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,r,i,a){return Z.isFunction(r)&&(a=a||i,i=r,r=void 0),Z.ajax({url:e,type:t,dataType:a,data:r,success:i})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(r){Z(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var St=/%20/g,_t=/\[\]$/,Pt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var r,i=[],a=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){a(this.name,this.value)});else for(r in e)H(r,e[r],t,a);return i.join("&").replace(St,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Ct.test(this.nodeName)&&!At.test(e)&&(this.checked||!_e.test(e))}).map(function(e,t){var r=Z(this).val();return null==r?null:Z.isArray(r)?Z.map(r,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:r.replace(Pt,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Rt=0,Ot={},Nt={0:200,1223:204},Dt=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Ot)Ot[e]()}),X.cors=!!Dt&&"withCredentials"in Dt,X.ajax=Dt=!!Dt,Z.ajaxTransport(function(e){var t;return X.cors||Dt&&!e.crossDomain?{send:function(r,i){var a,o=e.xhr(),n=++Rt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)o.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(delete Ot[n],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Nt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Ot[n]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,a){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&a("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Lt=[],wt=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||Z.expando+"_"+lt++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,r,i){var a,o,n,s=t.jsonp!==!1&&(wt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&wt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(wt,"$1"+a):t.jsonp!==!1&&(t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return n||Z.error(a+" was not called"),n[0]},t.dataTypes[0]="json",o=e[a],e[a]=function(){n=arguments},i.always(function(){e[a]=o,t[a]&&(t.jsonpCallback=r.jsonpCallback,Lt.push(a)),n&&Z.isFunction(o)&&o(n[0]),n=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||J;var i=ne.exec(e),a=!r&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,a),a&&a.length&&Z(a).remove(),Z.merge([],i.childNodes))};var Mt=Z.fn.load;Z.fn.load=function(e,t,r){if("string"!=typeof e&&Mt)return Mt.apply(this,arguments);var i,a,o,n=this,s=e.indexOf(" ");return s>=0&&(i=Z.trim(e.slice(s)),e=e.slice(0,s)),Z.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(a="POST"),n.length>0&&Z.ajax({url:e,type:a,dataType:"html",data:t}).done(function(e){o=arguments,n.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){n.each(r,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var kt=e.document.documentElement;Z.offset={setOffset:function(e,t,r){var i,a,o,n,s,c,l,u=Z.css(e,"position"),d=Z(e),p={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=Z.css(e,"top"),c=Z.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(i=d.position(),n=i.top,a=i.left):(n=parseFloat(o)||0,a=parseFloat(c)||0),Z.isFunction(t)&&(t=t.call(e,r,s)),null!=t.top&&(p.top=t.top-s.top+n),null!=t.left&&(p.left=t.left-s.left+a),"using"in t?t.using.call(e,p):d.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,r,i=this[0],a={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==Pe&&(a=i.getBoundingClientRect()),r=V(o),{top:a.top+r.pageYOffset-t.clientTop,left:a.left+r.pageXOffset-t.clientLeft}):a):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===Z.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(r,"marginTop",!0),left:t.left-i.left-Z.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||kt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||kt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var i="pageYOffset"===r;Z.fn[t]=function(a){return ge(this,function(t,a,o){var n=V(t);return void 0===o?n?n[r]:t[a]:void(n?n.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[a]=o)},t,a,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(X.pixelPosition,function(e,r){return r?(r=I(e,t),je.test(r)?Z(e).position()[t]+"px":r):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){Z.fn[i]=function(i,a){var o=arguments.length&&(r||"boolean"!=typeof i),n=r||(i===!0||a===!0?"margin":"border");return ge(this,function(t,r,i){var a;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?Z.css(t,r,n):Z.style(t,r,i,n)},t,o?i:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Ut=e.jQuery,xt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=xt),t&&e.jQuery===Z&&(e.jQuery=Ut),Z},typeof t===Pe&&(e.jQuery=e.$=Z),Z}),define("spinner",["knockout","imagesloaded"],function(e,t){"use strict";function r(){var e=this;e.spinnerId="cc-spinner",e.spinnerContainer="cc-spinner",e.spinnerCSS="cc-spinner-css",e.spinnerTimeOutId=null,e.create=function(t){return e.time=(new Date).getTime(),e.parent=t.parent,e.selector=t.selector?t.selector:t.parent,e.centerOn=t.centerOn,e.posTop=t.posTop?t.posTop:"50%",e.posLeft=t.posLeft?t.posLeft:"44%",e.loadingText=t.loadingText?t.loadingText:"Loading...",e.processingText=t.processingText,e.processingPosTop=t.processingPosTop?t.processingPosTop:"5%",e.textWidth=t.textWidth?t.textWidth:"100%",!!e.parent&&("body"===e.parent&&(e.centerOn&&0!==$(e.centerOn).length?(e.posTop=$(e.centerOn).height()/2-27+$(e.centerOn).position().top+"px",e.processingPosTop=$(e.centerOn).height()/2-54+$(e.centerOn).position().top+"px",e.posLeft=$(e.centerOn).width()/2-27+$(e.centerOn).position().left+"px"):(e.posTop=$(window).height()/2-27+"px",e.processingPosTop=$(window).height()/2-54+"px",e.posLeft=$(window).width()/2-27+"px")),void(0===$(e.selector).find("."+e.spinnerContainer).not(".cc-spinner-exclude").length&&(e.buildCSS(e.selector,e.posTop,e.posLeft),t.createWithTimeout&&e.setDestroyTimeout(t.waitTime,t.callBackFn,t.context))))},e.buildCSS=function(t,r,i){var a,o;a=$("<div />").attr({id:e.spinnerId,class:e.spinnerContainer}),o=$("<div />").attr({class:e.spinnerCSS,style:"top:"+r+";left:"+i});for(var n=1;n<13;n++)$(o).append($("<div />").attr({class:e.spinnerCSS+"-"+n}));e.processingText?$(a).prepend($("<div/>").css("padding-top",e.processingPosTop).append($('<span class="center-block"/>').css("width",e.textWidth).text(e.processingText))):$(o).prepend($('<span class="ie-show">').text(e.loadingText)),$(a).append(o),"body"===t?$(t).prepend(a):$(t).append(a)},e.loadCheck=function(t,r){(t||0==t)&&(0===$(e.selector).find("."+e.spinnerContainer).length&&e.buildCSS(e.selector,e.posTop,e.posLeft),$(e.parent+" img")?$(e.parent+" img").imagesLoaded(function(){e.destroy(t,e.parent,e.selector)}):e.destroy(t,e.parent,e.selector))},e.destroy=function(t){var r,i,a=e.selector;e.spinnerContainer;r=e.time+250-(new Date).getTime(),$(e.parent).children().length===t?r>0?i=setTimeout(e.destroyWithoutDelay,r):e.destroyWithoutDelay():t&&null!==t?setTimeout(e.destroy,1):r>0?i=setTimeout(e.destroyWithoutDelay(a),r):e.destroyWithoutDelay()},e.destroyWithoutDelay=function(t){var r=t?t:e.selector,i=e.spinnerContainer;$(r).find("."+i).remove()},e.createWithTimeout=function(t,r,i,a){t.waitTime=r,t.callBackFn=i,t.context=a,t.createWithTimeout=!0,e.create(t)},e.destroyAndClearTimeout=function(t,r){e.destroyWithoutDelay(),null!=e.spinnerTimeOutId&&clearTimeout(e.spinnerTimeOutId),null!=t&&t.call(r)},e.setDestroyTimeout=function(t,r,i){e.spinnerTimeOutId=setTimeout(function(){e.destroyWithoutDelay(),null!=r&&r.call(i)},t)},e.createAndReturnWithTimeout=function(t,r,i,a){return e.create(t),e.setDestroyTimeout(r,i,a),e.spinnerTimeOutId},e.destroyAndClearTimeoutWithId=function(t,r,i,a){e.destroyWithoutDelay(t),null!=r&&clearTimeout(r),null!=i&&i.call(a)}}return new r}),define("pubsubImpl",["jquery"],function(){"use strict";function e(){this.topics={}}return e.prototype.topic=function(e){var t,r=e&&this.topics[e],i="unique";return r||(/\.memory/.test(e)&&(i+=" memory"),t=$.Callbacks(i),window.pubsubevents=t,r={publish:t.fire,publishWith:t.fireWith,subscribe:t.add,unsubscribe:t.remove},e&&(this.topics[e]=r)),r},e}),define("pubsub",["pubsubImpl","jquery"],function(e){"use strict";var t={REGISTER_SUBMIT:"register.submit",REGISTER_SUCCESS:"register.success",REGISTER_FAILURE:"register.failure",CART_ADD:"cart.add",CART_REMOVE:"cart.remove",CART_UPDATE_QUANTITY:"cart.updatequantity",CART_READY:"cart.ready",CART_UPDATED:"cart.updated",CART_UPDATED_PENDING_PAYMENT:"cart.updated.pendingpayment",CART_ADD_SUCCESS:"cart.add.success",CART_UPDATE_SUCCESS:"cart.update.success",CART_PRICE_COMPLETE:"cart.price.complete",REFRESH_USER_CART:"cart.refresh",REMOVE_INVALID_ITEMS:"cart.remove.invalid.items",CART_REMOVE_SUCCESS:"cart.remove.success",CART_UPDATE_QUANTITY_SUCCESS:"cart.updatequantity.success",MINI_CART_SHOW:"mini.cart.show",MINI_CART_HIDE:"mini.cart.hide",USER_LOAD_CART:"user.cart.load",CART_ADD_SUCCESS_CPQ:"cart.add.success.cpq",PAGE_VIEW_CHANGED:"page.view.changed",PAGE_CONTEXT_CHANGED:"page.context.changed",PAGE_CHANGED:"page.changed.memory",PAGE_READY:"page.ready.memory",PAGE_METADATA_CHANGED:"page.metadata.changed",PAGE_LAYOUT_LOADED:"page.layout.loaded.memory",PAGE_LAYOUT_SERVER_ERROR:"page.layout.server.error",PAGE_LAYOUT_UPDATED:"page.layout.updated.memory",PAGE_PARAMETERS_CHANGED:"page.parameters.changed",PAGE_PARAMETERS:"page.parameters.memory",PAGE_PAGINATION_CHANGE:"page.pagination.change.memory",PAGE_PAGINATION_CALCULATED:"page.pagination.calculated.memory",RECORD_PAGINATION_PAGE_CHANGE:"record.pagination.page.changed",UPDATE_HASH_CHANGES:"update.hash.changes.memory",HISTORY_PUSH_STATE:"history.push.state.memory",REGION_METADATA_CHANGED:"region.metadata.changed.memory",AUTH_LOGIN_SUBMIT:"auth.login.submit",AUTH_LOGIN_SUCCCESS:"auth.login.success",AUTH_LOGIN_FAILURE:"auth.login.failure",AUTH_LOGOUT_SUBMIT:"auth.logout.submit",AUTH_LOGOUT_SUCCESS:"auth.logout.success",AUTH_LOGOUT_FAILURE:"auth.logout.failure",AUTH_REQUEST_FAILURE:"auth.request.failure",USER_CREATION_FAILURE:"user.creation.failure.memory",USER_LOGIN_SUCCESSFUL:"user.login.successful",USER_LOGIN_FAILURE:"user.login.failure",USER_LOGOUT_SUCCESSFUL:"user.logout.successful",USER_LOGOUT_FAILURE:"user.logout.failure",USER_REGISTRATION_SUBMIT:"user.registration.submit",USER_LOGOUT_SUBMIT:"user.logout.submit",USER_LOGIN_SUBMIT:"user.login.submit",USER_LOGIN_CANCEL:"user.login.cancel",USER_LOAD_SHIPPING:"user.load.shipping",USER_PROFILE_LOADED:"user.profile.loaded",USER_PROFILE_UPDATE_SUCCESSFUL:"user.profile.update.successful.memory",USER_PROFILE_PASSWORD_UPDATE_SUCCESSFUL:"user.profile.pwd.update.successful",USER_PROFILE_PASSWORD_UPDATE_FAILURE:"user.profile.pwd.update.failure",USER_PROFILE_UPDATE_FAILURE:"user.profile.update.failure.memory",USER_PROFILE_UPDATE_SUBMIT:"user.profile.update.submit",USER_PROFILE_UPDATE_CANCEL:"user.profile.update.cancel",USER_PROFILE_UPDATE_INVALID:"user.profile.update.invalid",USER_PROFILE_UPDATE_NOCHANGE:"user.profile.update.nochange",USER_PROFILE_ADDRESSES_REMOVED:"user.profile.addresses.removed",USER_AUTO_LOGIN_SUCCESSFUL:"user.auto.login.successful",AUTO_LOGIN_AND_GET_USER_DATA_SUCCESSFUL:"auto.login.and.get.user.data.successful",USER_AUTO_LOGIN_FAILURE:"user.auto.login.failure.memory",USER_PROFILE_PASSWORD_UPDATE:"user.profile.password.update",USER_UNAUTHORIZED:"user.unauthorized.memory",USER_SESSION_EXPIRED:"user.session.expired.memory",USER_SESSION_VALID:"user.session.validated.memory",USER_SESSION_RESET:"user.session.reset",USER_PROFILE_SESSION_RESET:"user.profile.session.reset",USER_CLEAR_CART:"user.clear.cart",USER_RESET_PASSWORD_FAILURE:"user.reset.password.failure",USER_RESET_PASSWORD_SUCCESS:"user.reset.password.success",USER_PASSWORD_EXPIRED:"user.password.expired",USER_PASSWORD_GENERATED:"user.password.generated",USER_NETWORK_ERROR:"user.network.error",USER_LOCALE_NOT_SUPPORTED:"user.locale.not.supported",UPDATE_USER_LOCALE_NOT_SUPPORTED_ERROR:"update.user.locale.not.supported.error.memory",PRODUCT_VIEWED:"product.viewed.memory",SKU_SELECTED:"sku.selected",UPDATE_FOCUS:"update.focus.memory",UPDATE_LISTING_FOCUS:"update.listing.focus.memory",ITEM_TRIGGER_RECONFIGURE:"item.trigger.reconfigure",CHECKOUT_BILLING_ADDRESS:"checkout.billing.address",CHECKOUT_SHIPPING_ADDRESS:"checkout.shipping.address",CHECKOUT_SHIPPING_ADDRESS_UPDATED:"checkout.shipping.address.updated",PAYPAL_SHIPPING_ADDRESS_ALTERED:"paypal.shipping.address.altered",ADD_NEW_CHECKOUT_SHIPPING_ADDRESS:"add.new.checkout.shipping.address",CART_SHIPPING_ADDRESS_UPDATED:"cart.shipping.address.updated",BILLING_ADDRESS_POPULATED:"billing.address.populated.memory",SHIPPING_ADDRESS_POPULATED:"shipping.address.populated.memory",PAYPAL_CHECKOUT_SHIPPING_ADDRESS:"paypal.checkout_shipping_address",EXTERNAL_CHECKOUT_BILLING_ADDRESS:"external.checkout_billing_address",LOADED_ORDER_SHIPPING_ADDRESS:"loaded.order.shipping.address.memory",GET_INITIAL_ORDER_FAIL:"order.retrieval.fail",WEB_CHECKOUT_SHIPPING_ADDRESS:"web.checkout.shipping.address",CHECKOUT_SAVE_SHIPPING_ADDRESS:"checkout.save.shipping.address",LOAD_ORDER_RESET_ADDRESS:"load.order.reset.address",CONTINUE_TO_PAYPAL:"continue.to.paypal",PAYPAL_EMAIL_VALIDATION:"paypal.email.validation",CHECKOUT_SHIPPING_ADDRESS_INVALID:"checkout.shipping.address.invalid",CHECKOUT_SHIPPING_METHOD:"checkout.shipping.method",PAYPAL_CHECKOUT_SHIPPING_METHOD_VALUE:"paypal.checkout.shipping.method.value",PAYPAL_CHECKOUT_NO_SHIPPING_METHOD:"paypal.checkout.no.shipping.method",CHECKOUT_RESET_SHIPPING_METHOD:"checkout.reset.shipping.method",CHECKOUT_EMAIL_ADDRESS:"checkout.email.address.memory",CHECKOUT_VALIDATE_NOW:"checkout.validate.now",CHECKOUT_NOT_VALID:"checkout.not.valid",CHECKOUT_PAYMENT_DETAILS:"checkout.payment.details",CHECKOUT_REGISTER_USER:"checkout.register.user",CHECKOUT_USER_LOCALE:"checkout.user.locale",ORDER_CREATE:"order.create",ORDER_CREATED:"order.created",ORDER_CREATED_INITIAL:"order.created.initial",ORDER_RETRIEVED_INITIAL:"order.retrieved.initial",ORDER_COMPLETED:"order.completed",ORDER_SUBMISSION_FAIL:"order.submission.fail",ORDER_SUBMISSION_SUCCESS:"order.submission.success",ORDER_AUTHORIZE_PAYMENT:"order.payment.auth.memory",ORDER_PRICING_FAILED:"order.pricing.failed",ORDER_PRICING_SUCCESS:"order.pricing.success",DESTROY_SHIPPING_METHODS_SPINNER:"destroy_shipping_methods_spinner",ORDERS_GET_HISTORY_FAILED:"orders.getOrderHistory.failed",ORDERS_GET_PENDING_APPROVAL_LIST_FAILED:"orders.getPendingApprovalList.failed",POPULATE_SHIPPING_METHODS:"populate.shipping.methods",PAYMENT_AUTH_SUCCESS:"payment.auth.success",PAYMENT_AUTH_DECLINED:"payment.auth.declined",PAYMENT_AUTH_TIMED_OUT:"payment.auth.timedout",PAYMENT_GET_AUTH_RESPONSE:"payment.auth.getresponse",PAYULATAM_WEB_CHECKOUT:"payulatam.web.checkout",SCHEDULE_ORDERS_LIST_FAILED:"scheduleorders.scheduleOrderList.failed",SCHEDULED_ORDER_SUBMISSION_SUCCESS:"scheduledorder.submission.success",SCHEDULED_ORDER_LOAD_SCUCCESS:"scheduledorder.load.success",SCHEDULED_ORDER_LOAD_ERROR:"scheduledorder.load.error",SEARCH_CREATE:"search.create",SEARCH_CREATE_CATEGORY_LISTING:"search.create.listing",SEARCH_RESULTS_UPDATED:"search.results.updated.memory",SEARCH_RESULTS_FOR_CATEGORY_UPDATED:"search.results.category.updated.memory",SEARCH_TYPEAHEAD:"search.typeahead",SEARCH_TYPEAHEAD_UPDATED:"search.typeahead.updated",SEARCH_TYPEAHEAD_CANCEL:"search.typeahead.cancel",SEARCH_TERM:"search.terms.memory",SEARCH_FAILED_TO_PERFORM:"search.failed.memory",OVERLAYED_GUIDEDNAVIGATION_HIDE:"overlayed.guidednavigation.hide",OVERLAYED_GUIDEDNAVIGATION_SHOW:"overlayed.guidednavigation.show",OVERLAYED_GUIDEDNAVIGATION_CLEAR:"guidednavigation.clear.memory",COUPON_ADD_CLEAR_INPUT:"add.coupon.clearInput",COUPON_APPLY_SUCCESSFUL:"add.coupon.successful",COUPON_DELETE_SUCCESSFUL:"delete.coupon.successful",GIFTCARD_UPDATE_FROM_CART:"giftcard.updateGiftCards",UPDATE_AMOUNT_REMAINING:"giftcard.update.amountRemaining",GIFTCARD_PRICING_FAILED:"giftcard.pricing.failed",GIFTCARD_REAPPLY_PINS:"giftcard.reapply.pins",SHOW_GIFT_CARD_ERROR_PANEL:"giftcard.error.panel",UPDATE_AMOUNT_REMAINING_PENDING_PAYMENT:"giftcard.update.amountRemainingPendingPayment",ADMIN_CONTENT_LANGUAGE_CHANGED:"admin.content.language.changed",ADMIN_USER_UPDATE:"admin.user.update",ADMIN_TOUR_REQUESTED:"admin.tour.requested",ADMIN_TOUR_STARTED:"admin.tour.started",ADMIN_TOUR_ENDED:"admin.tour.ended",ADMIN_TOUR_CANCELED:"admin.tour.canceled",ADMIN_AUTH_API_UNAUTHORIZED:"admin.auth.api-unauthorized",ADMIN_AUTH_SSO_REFRESH:"admin.auth.sso-refresh",
ADMIN_AUTH_SSO_SUCCESS:"admin.auth.sso-refresh-success",ADMIN_AUTH_SSO_FAILURE:"admin.auth.sso-refresh-failure",PRODUCT_EDIT:"catalog.product.edit",PRODUCT_EDIT_CREATE_PERSIST:"catalog.product.persist",PRODUCT_EDIT_CREATE_SUCCESS:"catalog.product.success",PRODUCT_EDIT_CREATE_ERROR:"catalog.product.error",PRODUCT_FILTER_MODE:"catalog.product.filter.mode",PRODUCT_VIEW_UPDATE_REQUESTED:"catalog.view.updateRequested",PRODUCT_VIEW_UPDATED:"catalog.view.updated",PRODUCT_VIEW_CLEAR_DATA:"catalog.view.clearData",PRODUCT_VIEW_SET_DATA:"catalog.view.setData",PRODUCT_PRICE_CHANGED:"product.price.changed",PRODUCT_SKUS_UPDATED:"product.skus.updated",PRODUCT_LISTING_CONFIGS_UPDATED:"product.listingConfigs.updated",CATALOG_VIEW_MODE_CHANGED:"catalog.view.mode.changed",COLLECTION_EDIT:"catalog.collection.edit",COLLECTION_CREATE:"catalog.collection.create",COLLECTION_REFRESH_GRID:"catalog.collection.refresh.grid",COLLECTION_EDIT_CREATE_PERSIST:"catalog.collection.persist",COLLECTION_EDIT_CREATE_SUCCESS:"catalog.collection.editcreate.success",COLLECTION_DELETE_SUCCESS:"catalog.collection.delete.success",COLLECTION_EDIT_CREATE_ERROR:"catalog.collection.error",COLLECTION_REMOVE_PRODUCT:"catalog.collection.remove.product",COLLECTION_REORDER_PRODUCTS:"catalog.collection.reorder.products",COLLECTION_REORDER_PRODUCTS_SUCCESS:"catalog.collection.reorder.products.success",COLLECTION_REORDER_PRODUCTS_ERROR:"catalog.collection.reorder.products.error",COLLECTION_RELOAD_PRODUCTLIST:"catalog.collection.reload.productlist",COLLECTION_APPLY_DROPPABLE:"catalog.collection.apply.droppable",PRODUCT_DEFINITION_UPDATE:"catalog.product.definition.update",LOCALE_AWARE_PRODUCT_DEFINITION_UPDATE:"catalog.product.localeAwareDefinition.update",LOCALE_AWARE_SKU_UPDATE:"catalog.product.localeAwareSku.update",PRODUCT_DEFINITION_UPDATE_PROPERTIES:"catalog.product.definition.update.properties",COLLECTION_DEFINITION_UPDATE:"catalog.collection.definition.update",PRODUCT_TYPE_EDIT_CREATE_PERSIST:"product.type.persist",PRODUCT_TYPE_EDIT_CREATE_SUCCESS:"product.type.success",PRODUCT_TYPE_EDIT_CREATE_ERROR:"product.type.error",PRODUCT_TYPE_UPDATE:"product.type.update",PRODUCT_TYPE_MANAGE_UPDATE:"product.type.manage.update",PRICE_LIST_GROUP_UPDATE:"price.list.group.update",ACCOUNTS_LIST_REFRESH:"accounts.list.refresh",CONTACTS_LIST_REFRESH:"contacts.list.refresh",CONTACT_ROLE_CHANGED:"contact.role.changed",ACCOUNT_CONTACTS_LIST_REFRESH:"accounts.contacts.list.refresh",REFRESH_OVERLAY_FOR_CREATE:"refresh.overlay.for.create",REFRESH_OVERLAY_FOR_EDIT:"refresh.overlay.for.edit",INVENTORY_REFRESH:"inventory.update",PROMOTION_EDIT:"marketing.promotion.edit",PROMOTION_CLONE:"marketing.promotion.clone",PROMOTION_SELECTION:"marketing.promotion.selection",PROMOTION_LIST_REFRESH:"marketing.promotion.listRefresh",PROMOTION_TEMPLATE_EDITOR_HIDE:"marketing.promotion.templateEditorHide",PROMOTION_TEMPLATE_EDITOR_SHOW:"marketing.promotion.templateEditorShow",PROMOTION_TEMPLATE_EDITOR_CHANGE_VALUE:"marketing.promotion.templateEditorChangeValue",STACKING_RULE_LOAD_CREATE:"marketing.stackingRule.loadCreate",STACKING_RULE_LIST_REFRESH:"marketing.stackingRule.listRefresh",AUDIENCE_LOAD_CREATE:"marketing.audience.loadCreate",AUDIENCE_LIST_REFRESH:"marketing.audience.listRefresh",LAYOUT_EDIT:"sitestudio.layout.edit",LAYOUT_CLONE:"sitestudio.layout.clone",LAYOUT_EDIT_CREATE_PERSIST:"sitestudio.layout.persist",LAYOUT_EDIT_CREATE_SUCCESS:"sitestudio.layout.success",LAYOUT_EDIT_CREATE_ERROR:"sitestudio.layout.error",LAYOUT_DELETE_SUCCESS:"sitestudio.layout.delete.success",LAYOUT_DEFINITION_UPDATE:"sitestudio.layout.definition.update",LAYOUT_LIST_UPDATE:"sitestudio.layout.list.update",LAYOUT_LIST_HIDE:"sitestudio.layout.list.hide",LAYOUT_REFRESH_DISPLAY:"sitestudio.layout.refresh.display",LAYOUT_REFRESH_COMPLETE:"sitestudio.layout.refresh.complete",LAYOUT_WIDGET_LOADED:"sitestudio.layout.widget.loaded",LAYOUT_STACK_LOADED:"sitestudio.layout.stack.loaded",LAYOUT_SELECTED:"sitestudio.layout.selected",WIDGET_LAYOUT_EDIT:"sitestudio.widget.layout.edit.memory",WIDGET_LIBRARY_HIDE:"sitestudio.widget.library.hide",THEME_UPDATE:"sitestudio.theme.update",CODE_VIEW_MAXIMIZE:"sitestudio.codeview.maximize",CODE_VIEW_MINIMIZE:"sitestudio.codeview.minimize",ORGANIZE_MODE_STATE:"organize.state",STOP_ORGANIZE_MODE:"organize.stop",NOTIFICATION_ADD:"notification.message.add",NOTIFICATION_DELETE:"notification.message.delete",NOTIFICATION_TEMPLATE_ADD:"notification.template.add",ALL_COLLECTIONS_UPDATED:"catalog.allcollections.updated",EXCEPTION_HANDLER:"exception.handler",ONERROR_EXCEPTION_HANDLER:"onerror.exception.handler",LOADING_INDICATOR_ADD:"loading.indicator.add",SHIPPING_METHODS_LOADED:"shipping.method.loaded",LOAD_SHIPPING_METHODS_FAILED:"load.shipping.methods.failed",SHIPPING_METHOD_SUCCESS:"shipping.method.success",SHIPPING_METHOD_EDIT:"shipping.method.edit",SHIPPING_METHOD_DEFINITION_UPDATE:"shipping.method.definition.update",RELOAD_SHIPPING_METHODS:"shipping.method.reload",NO_SHIPPING_METHODS:"no.shipping.methods.available",VERIFY_SHIPPING_METHODS:"verify.shipping.methods",INVALID_SHIPPING_METHOD:"invalid.shipping.method",SHIPPING_REGION_LOADED:"shipping.region.loaded",SHIPPING_REGION_SUCCESS:"shipping.region.success",SHIPPING_REGION_EDIT:"shipping.region.edit",SHIPPING_REGION_DEFINITION_UPDATE:"shipping.region.definition.update",RELOAD_SHIPPING_REGIONS:"shipping.region.reload",CATEGORY_GROUP_CHANGED:"category.group.changed",CATEGORY_UPDATED:"category.updated",CATEGORY_CRUMB_UPDATED:"send.category.memory",SHOPPINGCART_VALIDATE_NOW:"shoppingcart.validate.now",LOAD_CHECKOUT:"redirect.checkout.cart",SOCIAL_SPACE_ADD:"social.space.add",SOCIAL_SPACE_ADD_TO_SELECTED_SPACE:"social.space.add.selected",SOCIAL_SPACE_ADD_SUCCESS:"social.space.add.success",SOCIAL_SPACE_SELECTOR_ADD:"social.space.selector.add",SOCIAL_SPACE_PRODUCT_REMOVED:"social.space.product.removed",SOCIAL_SPACE_PRODUCT_MOVED:"social.space.product.moved",SOCIAL_SPACE_SELECT:"social.space.select",SOCIAL_SPACE_UNAVAILABLE:"social.space.unavailable",SOCIAL_SPACE_DELETED:"social.space.deleted",SOCIAL_SPACE_MEMBER_JOIN:"social.space.member.join",SOCIAL_SPACE_MEMBER_LEFT:"social.space.member.left",SOCIAL_SPACE_MODEL_MEMBERS_CHANGED:"social.space.model.members.changed",SOCIAL_SPACE_MEMBERS_INFO_CHANGED:"social.space.member.info.changed",SOCIAL_REFRESH_SPACES:"social.refresh.spaces",SOCIAL_CURRENT_USER:"social.current.user",SOCIAL_POST_MESSAGE:"social.space.post.message",SOCIAL_FACEBOOK_JS_READY:"social.facebook.js.ready",RECS_WANT_RECS:"recs.display.want.recs.memory",RECS_WHO_WANT_RECS:"recs.display.who.want.recs.memory",RECS_HAVE_RECS:"recs.display.have.recs.memory",RECS_RECOMMENDATIONS_CHANGED:"recs.display.recommendations.changed",ORDER_EDIT_POST_ACTION:"edit.order.post.action",ORDER_EDIT_INIT_ACTION:"edit.order.init.action",RETURN_CCI18N_RESOURCE_LOADED:"return.cci18n.resource.loaded",AGENT_UNSELECT_SHIPPING_METHOD:"shipping.unselect.price.order",SEARCH_SELECTED:"search.selected",LOAD_DEFAULT_CATEGORY:"load.default.category",LOCALE_SET:"cc.locale.set",LOCALE_READY:"cc.locale.ready.memory",SUPPORTED_LOCALES_UPDATE:"supported.locales.update",PAGINATION_PAGE_CHANGE:"pagination.page.change",REPORTING_TIMEFRAME_UPDATED:"reporting.timeframe.updated",REPORTING_SELECTED_SUMMARY_METRIC:"reporting.selected.summaryMetric",REPORTING_FILTER_CHANGES:"reporting.filter.changes.memory",REPORTING_DATA_LOADED:"reporting.data.loaded.memory",REPORTING_MULTIPLE_DAYS_RANGE_SELECTED:"reporting.validdate.selected",REPORTING_SINGLE_DAY_RANGE_SELECTED:"reporting.invaliddate.selected",REPORTING_APPLIED_USER_SELECTIONS_UPDATED:"reporting.applied.user.selections.updated",REPORTING_CURRENCY_LOADED:"reporting.currency.loaded",REPORTING_RESET_FILTERS:"reporting.reset.filters",COLLECTION_SELECTION_CHANGED:"collection.selection.changed",GWP_QUALIFIED_MESSAGE:"gwp.qualified.message",GWP_INVALIDATED_MESSAGE:"gwp.invalidated.message",GWP_CLEAR_QUALIFIED_MESSAGE:"gwp.clear.qualified.message",PLACE_HOLDER_REMOVE:"place.holder.remove",GET_GIFT_CHOICES_SUCCESSFUL:"get.gift.choices.successful",GET_GIFT_CHOICES_FAILURE:"get.gift.choices.failure",GIFT_CHOICES_NOT_AVAILABLE:"gift.choices.not.available",GWP_FAILURE_MESSAGE:"gwp.failure.message",GUIDED_SEARCH_INDEX_FIELDS_REFRESH:"guided.search.index.fields.refresh",ADD_PRODUCTS_TAB_TO_PRICE_GROUP:"add.products.tab.to.price.group",ADD_NEW_NAVIGATION:"add.new.navigation",UPDATE_NAVIGATION:"update.navigation",REMOVE_NAVIGATION:"remove.navigation",NAVIGATE_TO_INTERCEPTED_LINK:"go.to.intercepted.link",SET_IS_NEW_FLAG:"set.is.new.flag",DELEGATED_CONTACTS_LIST_FAILED:"delegated.contacts.list.failed",ACCOUNT_LOGO_ITEM_IMAGE_DELETED:"account.logo.item.image.deleted",DEFAULT_ACCOUNT_MODIFIED:"default.account.modified"},r=new e;return r.topicNames=t,$.Topic=r.topic.bind(r),r}),define("xDomainProxy",["jquery"],function(e){"use strict";function t(e,r,i){var a=this;a.profileType=e,a.httpPort=r||"8080",a.httpsPort=i||"8443",a.parentURL=t.getCrossDomainURL(e,t.HTTP_PROTOCOL,a.httpPort,!1),document.referrer&&t.urlProtocolOnly(document.referrer)!=t.HTTPS_PROTOCOL&&null!=window&&null!=window.parent&&window.parent.postMessage(JSON.stringify({id:t.IFRAME_INIT_COMPLETE_EVENT,success:!0,payload:null}),a.parentURL)}return t.POST="POST",t.GET="GET",t.DELETE="DELETE",t.METHOD="method",t.URL="url",t.DATA="data",t.SUCCESS="success",t.FAILURE="failure",t.HEADERS="headers",t.CONTENT_TYPE="Content-Type",t.ACCEPT="Accept",t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json",t.JSON="json",t.ETAG="ETag",t.ETAG_PROPERTY="___etag___",t.LAST_PUBLISHED_TIME="LastPublishedTime",t.LAST_PUBLISHED_TIME_PROPERTY="lastPublishedTime",t.AMPERSAND="&",t.EQUALS="=",t.DOUBLE_SLASH="//",t.SLASH="/",t.EMPTY_STRING="",t.PROTOCOL_SEP="://",t.COLON=":",t.QUESTION_MARK="?",t.SPACE=" ",t.SEMICOLON=";",t.DASH="-",t.CURLY_BRACES="{}",t.PERIOD=".",t.OAUTH_ACCESS_TOKEN_PARAM="access_token",t.LOGIN_SERVICE_PATH="/ccstoreui/v1/login/",t.ADMIN_LOGIN_SERVICE_PATH="/ccadminui/v1/login/",t.AGENT_LOGIN_SERVICE_PATH="/ccagentui/v1/login/",t.HTTP_PROTOCOL="http",t.HTTPS_PROTOCOL="https",t.HTTPS_FRAME_PATH="/https/https.html",t.HTTPS_ADMIN_FRAME_PATH="/https/httpsAdmin.html",t.GRANT_TYPE_PARAM="grant_type",t.PASSWORD_GRANT_TYPE_VALUE="password",t.USERNAME_PARAM="username",t.PASSWORD_PARAM="password",t.SAML_GRANT_TYPE_VALUE="saml_credentials",t.SAML_RESPONSE_PARAM="saml_response",t.AUTH_HEADER_NAME="Authorization",t.AUTH_HEADER_PREFIX="Bearer ",t.PROFILE_TYPE_HEADER_NAME="X-CCProfileType",t.IFRAME_INIT_COMPLETE_EVENT="iframeInitComplete",t.ASSET_LANGUAGE_HEADER_NAME="X-CCAsset-Language",t.PRICE_LIST_GROUP_ID="X-CCPriceListGroup",t.ORGANIZATION_ID="X-CCOrganization",t.AGENT_CONTEXT="X-CCAgentContext",t.VIEWPORT_HEADER_NAME="X-CCViewport",t.SITE_ID="x-ccsite",t.prototype.init=function(){var e=this;e.targetMap={login:function(t,r,i){e.loginRequest(t.user,t.password,r,i)},auth:function(t,r,i){e.request(t.url,t.data,r,i,t.method,t.clientProps)},noauth:function(t,r,i){e.request(t.url,t.data,r,i,t.method)}};var t=function(t){var r=t.origin;if(r==e.parentURL){var i;i="string"==typeof t.data?JSON.parse(t.data):t.data;var a=i.id,o=i.target,n=i.payload,s=function(e,i){var o={};o.id=a,o.success=e,o.payload=i,t.source.postMessage(JSON.stringify(o),r)},c=function(e){s(!0,e)},l=function(e){s(!1,e)},u=e.targetMap[o];u&&u(n,c,l)}};window.addEventListener("message",t,!1)},t.prototype.loginRequest=function(e,r,i,a,o){var n=this,s={};s[t.USERNAME_PARAM]=e,s[t.PASSWORD_PARAM]=r,s[t.GRANT_TYPE_PARAM]=t.PASSWORD_GRANT_TYPE_VALUE,n.loginRequestInternal(s,i,a,o)},t.prototype.samlLoginRequest=function(e,r,i,a){var o=this,n={};n[t.SAML_RESPONSE_PARAM]=e,n[t.GRANT_TYPE_PARAM]=t.SAML_GRANT_TYPE_VALUE,o.loginRequestInternal(n,r,i,a)},t.prototype.loginRequestInternal=function(r,i,a,o){var n=this,s=t.LOGIN_SERVICE_PATH;"admin"==n.profileType||"adminUI"==n.profileType?s=t.ADMIN_LOGIN_SERVICE_PATH:"agent"!=n.profileType&&"agentUI"!=n.profileType||(s=t.AGENT_LOGIN_SERVICE_PATH);var c={};c[t.GRANT_TYPE_PARAM]=r[t.GRANT_TYPE_PARAM],r[t.GRANT_TYPE_PARAM]==t.PASSWORD_GRANT_TYPE_VALUE?(c[t.USERNAME_PARAM]=r[t.USERNAME_PARAM],c[t.PASSWORD_PARAM]=r[t.PASSWORD_PARAM]):r[t.GRANT_TYPE_PARAM]==t.SAML_GRANT_TYPE_VALUE&&(c[t.SAML_RESPONSE_PARAM]=r[t.SAML_RESPONSE_PARAM]);var l=function(e){var t=e.data;i(t)},u=function(e){var t=e.jqXHR.responseText;t&&(t=JSON.parse(t)),a(t)},d=null,p=!1;if(o&&(p=o.suppressProfileType),n.profileType&&!p&&(d={},d[t.PROFILE_TYPE_HEADER_NAME]=n.profileType),o&&o.tokenSecret){d||(d={});var h=t.AUTH_HEADER_PREFIX+o.tokenSecret;d[t.AUTH_HEADER_NAME]=h}var f={type:t.POST,dataType:t.JSON,url:s,data:c,processData:!0,success:function(e,t,r){l({data:e,textStatus:t,jqXHR:r})},error:function(e,t,r){u({jqXHR:e,textStatus:t,errorThrown:r})}};d&&(f.headers=d),e.ajax(f)},t.prototype.request=function(r,i,a,o,n,s,c,l){var u=this,d=r;d=encodeURI(d);var p=n;p||(p=t.GET);var h=null;i&&(p===t.GET||p===t.DELETE?d=t.addQueryParams(d,i,!0):h=JSON.stringify(i)),p===t.GET&&(d=t.fixIECaching(d));var f=function(e){var r=e.data,i=e.jqXHR.getResponseHeader(t.ETAG);i&&r&&(i=i.replace(/["]+/g,""),r[t.ETAG_PROPERTY]=i);var o=e.jqXHR.getResponseHeader(t.LAST_PUBLISHED_TIME);r&&o&&(r[t.LAST_PUBLISHED_TIME_PROPERTY]=Number(o)),a(r)},m=function(e){var t=e.jqXHR.status,r=e.jqXHR.responseText;if(r)try{r=JSON.parse(r)}catch(e){r={}}o(r,t)},g={dataType:t.JSON,contentType:t.APPLICATION_JSON,type:p,url:d,processData:!1,success:function(e,t,r){f({data:e,textStatus:t,jqXHR:r})},error:function(e,t,r){m({jqXHR:e,textStatus:t,errorThrown:r})},beforeSend:l},v=null,E=!1;if(s&&(E=s.suppressProfileType),u.profileType&&!E&&(v={},v[t.PROFILE_TYPE_HEADER_NAME]=u.profileType),c){v||(v={});for(var y in c)c.hasOwnProperty(y)&&(c[y]instanceof Object?v[y]=JSON.stringify(c[y]):v[y]=c[y])}if(s&&s.tokenSecret){v||(v={});var b=t.AUTH_HEADER_PREFIX+s.tokenSecret;v[t.AUTH_HEADER_NAME]=b}h&&(g.data=h),v&&(g.headers=v),e.ajax(g)},t.parseQueryParams=function(e){if(null===e)return null;for(var r=e.split(t.AMPERSAND),i={},a=0;a<r.length;a++){var o=r[a].split(t.EQUALS);i[o[0]]=o[1]}return i},t.addQueryParams=function(e,t,r){if(!e)return null;if(!t)return e;var i=Object.keys(t);if(i&&0===i.length)return e;var a=e,o=!0;a.indexOf("?")!==-1&&(o=!1);for(var n=0;n<i.length;n++){var s=i[n],c=t[i[n]];r&&(s=encodeURIComponent(s),c=encodeURIComponent(c));var l=s+"="+c,u="&";o&&(u="?",o=!1),a+=u+l}return a},t.getTimestamp=function(e){var t=new Date/1e3,r=parseInt(e,10),i=t+r;return parseInt(+i,10)},t.getCrossDomainURL=function(e,r,i,a){var o=r+t.PROTOCOL_SEP+t.urlHostnameOnly(window.location.href)+t.COLON+i;return a===!0&&("storefront"===e||"storefrontUI"==e?o+=t.HTTPS_FRAME_PATH:"admin"!==e&&"adminUI"!=e||(o+=t.HTTPS_ADMIN_FRAME_PATH)),o},t.convertUrl=function(e){if(null!=e&&e.charAt(0)!=t.SLASH)return[e];var r=t.urlPathPortionOnly(e),i=r.split(t.SLASH);if(1==i.length)return[t.SLASH];i[0]||(i=i.slice(1));var a=new Array(i.length+1);a[0]=t.SLASH,a[1]=i[0];for(var o=1;o<i.length;o++)a[o+1]=t.SLASH+i[o];return a},t.urlNoProtocolOrQueryParams=function(e){if(null==e)return null;var r=e.split(t.QUESTION_MARK),i=null;return i=r.length>1?r[0]:e,r=i.split(t.PROTOCOL_SEP),r.length>1&&(i=r[1]),i},t.urlPathPortionOnly=function(e){var r=t.urlNoProtocolOrQueryParams(e);return r.substring(0,1)!==t.SLASH&&(r=t.removeBeforeFirstSlash(r)),r},t.urlHostnamePortPortionOnly=function(e){var r=t.urlNoProtocolOrQueryParams(e);if(r.substring(0,1)==t.SLASH)return null;var i=r.split(t.SLASH);return i[0]},t.urlHostnameOnly=function(e){var r=t.urlHostnamePortPortionOnly(e),i=r.split(t.COLON);return i[0]},t.urlProtocolOnly=function(e){var r=e.split(t.PROTOCOL_SEP);return r[0]},t.removeBeforeFirstSlash=function(e){var r=e.split(t.SLASH),i=e.substring(r[0].length);return i},t.fixIECaching=function(e){return e},t.insertAuthHeadersAsQueryParams=function(e,t,r){return uri},t.parseClaimsFromAccessToken=function(e){if(!e)return null;var r=e.split(t.PERIOD),i=r[1],a=t.decodeBase64(i),o=JSON.parse(a);return o},t.decodeBase64=function(e){var t,r,i,a,o={},n=0,s=0,c="",l=String.fromCharCode,u=e.length,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0;t<64;t++)o[d.charAt(t)]=t;for(i=0;i<u;i++)for(r=o[e.charAt(i)],n=(n<<6)+r,s+=6;s>=8;)((a=n>>>(s-=8)&255)||i<u-2)&&(c+=l(a));return c},t}),define("storageApi",["knockout","xDomainProxy"],function(e,t){"use strict";function r(){if(r.singleInstance)throw new Error("Cannot instantiate more than one StorageApi, use getInstance()");var e=this;e.data={},e.validSyncSessionKeyPrefixes=["oauth_token_secret"];try{e.storage=window.localStorage,e.sessionStorage=window.sessionStorage}catch(e){}if(e.sessionStorageSupported=!1,e.localStorageSupported=!1,e.isIE=function(){return!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/Edge/))},e.isIE())try{e.sessionStorage=window.localStorage}catch(e){}e.url=t.urlHostnamePortPortionOnly(document.URL),e.isSessionStorageSynced=!1,e.hasLocalStorageSupport=function(){try{var t=new Date,r="test-"+t.toUTCString();e.storage.setItem(r,r);var i=e.storage.getItem(r);if(r===i)return e.storage.removeItem(r),!0}catch(e){}return!1},e.hasSessionStorageSupport=function(){if(e.isIE())return!1;try{var t=new Date,r="test-"+t.toUTCString();e.sessionStorage.setItem(r,r);var i=e.sessionStorage.getItem(r);if(r===i)return e.sessionStorage.removeItem(r),!0}catch(e){}return!1},e.localStorageSupported=e.hasLocalStorageSupport(),e.saveToLocalStorage=function(t,r){try{e.storage.setItem(t,r);var i={};return i[t]=r,!0}catch(e){}return!1},e.readFromLocalStrorage=function(t){try{return e.storage.getItem(t)}catch(e){}return null},e.saveToSessionStorage=function(t,r){try{e.sessionStorage.setItem(t,r);var i={};return i[t]=r,window.localStorage.setItem("sendSessionStorage",JSON.stringify(i)),!0}catch(e){}return!1},e.readFromSessionStorage=function(t){try{var r=e.sessionStorage.getItem(t);return r}catch(e){}return null},e.hasCookiesSupport=function(){try{return window.navigator&&window.navigator.cookieEnabled}catch(e){return!1}},e.saveToCookies=function(e,t,r){try{var i=new Date;i.setTime(i.getTime()+24*r*60*60*1e3);var a="; expires="+i.toUTCString(),o="; path=/";return document.cookie=e+"="+t+a+o,!0}catch(e){}return!1},e.saveToSessionCookies=function(e,t){try{var r="; path=/";return document.cookie=e+"="+t+r,!0}catch(e){}return!1},e.readFromCookies=function(e){try{var t=null;if(""!==document.cookie){var r=document.cookie.split("; ");if(void 0!==r)for(var i=0;i<r.length;i++){var a=r[i].split("="),o=a[0],n=a[1];if(o==e){t=n;break}}}return t}catch(e){}return null},e.saveToMemory=function(t,r){r=e.encodeData(r),e.data[t]=r},e.readFromMemory=function(t){return e.data.hasOwnProperty(t)?e.decodeData(e.data[t]):null},e.removeFromMemory=function(t){e.data[t]="",delete e.data[t]},e.removeItem=function(t){try{var r=null;return e.localStorageSupported&&(r=e.readFromLocalStrorage(t)),r?(e.saveToLocalStorage(t,""),e.storage.removeItem(t)):e.hasCookiesSupport()&&e.readFromCookies(t)?e.saveToCookies(t,"",-1):e.removeFromMemory(t),!0}catch(e){}return!1},e.setItem=function(t,r){try{var i=!1;return e.localStorageSupported&&(i=e.saveToLocalStorage(t,r)),!i&&e.hasCookiesSupport()&&(r=e.encodeData(r),i=e.saveToCookies(t,r,365)),i||saveToMemory(t,r),!0}catch(e){}return!1},e.getItem=function(t){var r=null;return e.localStorageSupported&&(r=e.readFromLocalStrorage(t)),!r&&e.hasCookiesSupport()&&(r=e.decodeData(e.readFromCookies(t))),null===r&&(r=e.readFromMemory(t)),r},e.removeSessionItem=function(t){try{var r=null;return e.sessionStorageSupported&&(r=e.readFromSessionStrorage(t)),r?(e.saveToSessionStorage(t,""),e.sessionStorage.removeItem(t)):e.removeSessionCookieItem(t),!0}catch(e){}return!1},e.setSessionItem=function(t,r){try{var i=!1;return e.sessionStorageSupported&&(i=e.saveToSessionStorage(t,r)),i||e.setSessionCookieItem(t,r),!0}catch(e){}return!1},e.getSessionItem=function(t){var r=null;return e.sessionStorageSupported&&(r=e.readFromSessionStrorage(t)),null===r&&(r=e.getSessionCookieItem(t)),r},e.removeSessionCookieItem=function(t){e.hasCookiesSupport()&&e.readFromCookies(t)?e.saveToSessionCookies(t,""):(e.data[t]="",delete e.data[t])},e.setSessionCookieItem=function(t,r){var i=!1;r=e.encodeData(r),e.hasCookiesSupport()&&(i=e.saveToSessionCookies(t,r)),i||(e.data[t]=r)},e.getSessionCookieItem=function(t){var r=null;return e.hasCookiesSupport()&&(r=e.decodeData(e.readFromCookies(t))),null===r&&(r=e.decodeData(e.data[t])),r},e.encodeData=function(e){try{e&&(e=encodeURIComponent(JSON.stringify(e)))}catch(e){}return e},e.decodeData=function(e){try{if(e)return e=JSON.parse(decodeURIComponent(e))}catch(e){}return null},e.initSyncing=function(r){if(!e.localStorageSupported||!e.sessionStorageSupported)return void(r&&r());var i=function(i){i||(i=window.event);var a=t.urlHostnamePortPortionOnly(i.url);if(a==e.url&&i.newValue)if("getSessionStorage"==i.key){var o=JSON.stringify(e.sessionStorage);window.localStorage.setItem("sendSessionStorage",o)}else if("sendSessionStorage"==i.key){var o=JSON.parse(i.newValue);for(var n in o){for(var s=!1,c=0;c<e.validSyncSessionKeyPrefixes.length&&0==s;c++){var l=e.validSyncSessionKeyPrefixes[c];0===n.lastIndexOf(l,0)&&(s=!0)}s&&e.sessionStorage.setItem(n,o[n])}r&&!e.isSessionStorageSynced&&r(),e.isSessionStorageSynced=!0}};window.addEventListener?window.addEventListener("storage",i,!1):window.attachEvent("onstorage",i);var a=new Date,o="test-"+a.toUTCString();try{window.localStorage.setItem("getSessionStorage",o)}catch(e){}}}return r.getInstance=function(){return r.singleInstance||(r.singleInstance=new r),r.singleInstance},r}),define("viewportHelper",["jquery","knockout","ccConstants"],function(e,t,r){"use strict";function i(){if(i.singleInstance)throw new Error("Cannot instantiate more than one ViewportHelper, use getInstance()");var r=this;return this.viewportMode=t.observable(null),this.viewportDesignation=t.observable(null),this.layoutViewports=t.observable(null),this.setViewport(e(window)[0].innerWidth||e(window).width()),e(window).resize(function(){r.setViewport(e(window)[0].innerWidth||e(window).width())}),this}return i.XS_CLASS="col-xs-",i.SM_CLASS="col-sm-",i.MD_CLASS="col-md-",i.LG_CLASS="col-lg-",i.XS_OFFSET="col-xs-offset-",i.SM_OFFSET="col-sm-offset-",i.MD_OFFSET="col-md-offset-",i.LG_OFFSET="col-lg-offset-",i.prototype.setViewport=function(e){e>=r.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?this.viewportMode()!==r.LARGE_DESKTOP_VIEW&&(this.viewportMode(r.LARGE_DESKTOP_VIEW),this.viewportDesignation(r.VIEWPORT_LARGE)):e>r.VIEWPORT_TABLET_UPPER_WIDTH&&e<r.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?this.viewportMode()!==r.DESKTOP_VIEW&&(this.viewportMode(r.DESKTOP_VIEW),this.viewportDesignation(r.VIEWPORT_MEDIUM)):e>=r.VIEWPORT_TABLET_LOWER_WIDTH&&e<=r.VIEWPORT_TABLET_UPPER_WIDTH?this.viewportMode()!==r.TABLET_VIEW&&(this.viewportMode(r.TABLET_VIEW),this.viewportDesignation(r.VIEWPORT_SMALL)):this.viewportMode()!==r.PHONE_VIEW&&(this.viewportMode(r.PHONE_VIEW),this.viewportDesignation(r.VIEWPORT_XS))},i.prototype.getWidthClass=function(e,t){var a=i.SM_CLASS,o=i.SM_OFFSET;return!e||""===e||isNaN(e)?"":(this.layoutViewports&&null!=this.layoutViewports()&&""!==this.layoutViewports()&&(this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_XS.toLowerCase())!==-1?(a=i.XS_CLASS,o=i.XS_OFFSET):this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_SMALL.toLowerCase())!==-1?(a=i.SM_CLASS,o=i.SM_OFFSET):this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_MEDIUM.toLowerCase())!==-1?(a=i.MD_CLASS,o=i.MD_OFFSET):this.layoutViewports().toLowerCase().indexOf(r.VIEWPORT_LARGE.toLowerCase())!==-1&&(a=i.LG_CLASS,o=i.LG_OFFSET)),a+=e,t&&""!==t&&!isNaN(t)&&(a+=" "+o+t),a)},i.getInstance=function(){return i.singleInstance||(i.singleInstance=new i),i.singleInstance},i.getInstance()}),define("ccRestClientConstructor",["xDomainProxy","ccConstants","jquery","pubsub","storageApi","viewportHelper"],function(e,t,r,i,a,o){"use strict";function n(a,o){var s=this;s.profileId=null,s.profileRoles=null,s.tokenSecret=null,s.endpointRegistry=null,s.loggedIn=!1,s.initComplete=!1,s.initCompleteCallbacks=[],s.initCompleteCallbacksDone=!1,s.storageSyncCallbacks=[],s.storageSyncDone=!1,s.loginUpdateCallbacks=[],s.logoutUpdateCallbacks=[],s.loginAdminUpdateCallbacks=[],s.logoutAdminUpdateCallbacks=[],s.iframeLoadCompleteCallbacks=[],s.initIframeLoadComplete=!1,s.initIframeLoadCompleteDone=!1,s.profileType=a,s.previewMode=!1,s.allowSiteSwitchingOnProduction=!1,s.initFailed=!1,s.disableLoginErrorRedirect=!1,s.commonErrorCallback=o,s.url=e.urlHostnamePortPortionOnly(document.URL),s.urlProtocol=e.urlProtocolOnly(document.URL),s.NULL=n.NULL,s.currentRequestId=0,s.storeRequestWasMade=!1,s.storeRefreshIntervalId=null,s.etagCache=[],s.doRefreshToken=function(){if(s.loggedIn&&s.storeRequestWasMade){var e=function(){r.Topic(i.topicNames.USER_SESSION_VALID).publish()},t=function(e){};s.refresh(e,t),s.storeRequestWasMade=!1}},s.handleSessionExpiry=function(){r.Topic(i.topicNames.USER_SESSION_EXPIRED).publish(),s.clearRefreshInterval()},s.setRefreshInterval=function(){s.loggedIn&&null==s.storeRefreshIntervalId&&(s.storeRefreshIntervalId=setInterval(s.doRefreshToken,t.TOKEN_REFRESH_INTERVAL))},s.clearRefreshInterval=function(){null!=s.storeRefreshIntervalId&&(clearInterval(s.storeRefreshIntervalId),s.storeRefreshIntervalId=null)},s.registerInitCallback(s.setRefreshInterval),s.isRefreshRequired=!1,s.lastPublishedTimeStamp=null,s.isNotStore=!(!window.isPreviewMode&&s.profileType==t.PROFILE_TYPE_STOREFRONT)}return n.NULL="cc-rest-null",n.LOCAL_STORAGE_TOKEN="oauth_token_secret",n.LOCAL_STORAGE_LAST_UPDATE="oauth_last_update",n.LOCAL_STORAGE_EXPIRES=";expires=",n.LOCAL_STORAGE_LIFE_DAYS=1,n.TOKEN_FRESH_TIME=36e5,n.HTTP_UNAUTHORIZED_ERROR="401",n.DELETE="delete",n.ADMIN_LOGOUT_SERVICE_PATH="/ccadminui/v1/logout",n.ADMIN_REFRESH_SERVICE_PATH="/ccadminui/v1/refresh",n.ADMIN_ENDPOINT_REGISTRY_SERVICE_PATH="/ccadminui/v1/registry",n.ADMIN_VERIFY_SERVICE_PATH="/ccadminui/v1/verify",n.ADMIN_LOGIN_SCREEN_URL="/occs-admin",n.LOGOUT_SERVICE_PATH="/ccstoreui/v1/logout",n.REFRESH_SERVICE_PATH="/ccstoreui/v1/refresh",n.ENDPOINT_REGISTRY_SERVICE_PATH="/ccstoreui/v1/registry",n.VERIFY_SERVICE_PATH="/ccstoreui/v1/verify",n.SAML_AUTHN_REQUEST_SERVICE_URL="/ccstoreui/v1/samlAuthnRequest?encode=true",n.AGENT_LOGOUT_SERVICE_PATH="/ccagentui/v1/logout",n.AGENT_REFRESH_SERVICE_PATH="/ccagentui/v1/refresh",n.AGENT_ENDPOINT_REGISTRY_SERVICE_PATH="/ccagentui/v1/registry",n.AGENT_VERIFY_SERVICE_PATH="/ccagentui/v1/verify",n.AGENT_LOGIN_SCREEN_URL="/occs-agent",n.LOCAL_STORAGE_LOGIN_KEY="cc.login.update.",n.LOCAL_STORAGE_LOGOUT_KEY="cc.logout.update.",n.INPUT_ELEMENT="input",n.IFRAME_ELEMENT="iframe",n.ZERO="0",n.IFRAME_STYLE="width: 0; height: 0; border: none;",n.IFRAME_NAME="https_iframe",n.ID_ATTRIBUTE="id",n.NAME_ATTRIBUTE="name",n.WIDTH_ATTRIBUTE="width",n.HEIGHT_ATTRIBUTE="height",n.BORDER_ATTRIBUTE="border",n.STYLE_ATTRIBUTE="style",n.SRC_ATTRIBUTE="src",n.MAX_INT=4294967295,n.LOCALE_HINT="localeHint",n.HINT_BROWSER="browser",n.HINT_ASSET_LANGUAGE_OPTIONAL="assetLanguageOptional",n.HINT_ASSET_LANGUAGE_REQUIRED="assetLanguageRequired",n.BEFORE_SEND_NOT_SUPPORTED="Before-send callback not supported for proxy requests.",n.LAST_PUBLISHED_TIME_STAMP="lastPublishedTimeStamp",n.prototype.initProxy=function(t,r){var i=this,a=t,o=r;a||(a=location.port),o||(o=location.port),i.crossDomainURL=e.getCrossDomainURL(i.profileType,e.HTTPS_PROTOCOL,o,!0),i.crossDomainURLNoPath=e.getCrossDomainURL(i.profileType,e.HTTPS_PROTOCOL,o,!1),i.proxy=new e(i.profileType,a,o)},n.prototype.registerInitFailCallback=function(e){var t=this;t.initFailCallback=e,t.initFailed&&t.initFailCallback()},n.prototype.registerStorageSyncCallback=function(e){var t=this;t.storageSyncDone?e():t.storageSyncCallbacks.push(e)},n.prototype.registerInitCallback=function(e){var t=this;t.initComplete?e():t.initCompleteCallbacks.push(e)},n.prototype.registerLoginUpdateCallback=function(e){var t=this;t.loginUpdateCallbacks.push(e)},n.prototype.registerLogoutUpdateCallback=function(e){var t=this;t.logoutUpdateCallbacks.push(e)},n.prototype.registerLoginAdminUpdateCallback=function(e){var t=this;t.loginAdminUpdateCallbacks.push(e)},n.prototype.registerLogoutAdminUpdateCallback=function(e){var t=this;t.logoutAdminUpdateCallbacks.push(e)},n.prototype.init=function(r,i,o){var n=this,s=function(){if(!n.initCompleteCallbacksDone){n.initComplete=!0;for(var e=0;e<n.initCompleteCallbacks.length;e++)n.initCompleteCallbacks[e]();n.initCompleteCallbacks.length=0,n.initCompleteCallbacksDone=!0}},c=function(){n.refresh(s,s)},l=function(){for(var e=0;e<n.storageSyncCallbacks.length;e++)n.storageSyncCallbacks[e]();n.storageSyncDone=!0};a.getInstance().initSyncing(function(){n.reloadStoredValueAuth(),n.proxy&&n.refresh(l,l)}),n.reloadStoredValueAuth(),n.registerAsLoginLogoutEventListener();var u=function(){if(n.urlProtocol!=e.HTTPS_PROTOCOL&&n.crossDomainRequestsEnabled===!0){n.useIframe=!0,n.eventHandlerMap={},n.eventHandlerMap[e.IFRAME_INIT_COMPLETE_EVENT]={success:c,error:c},n.initXDomainMessageListener();var t=n.createCrossDomainIFrame();null!=t&&(n.proxyFrame=t.contentWindow)}else n.useIframe=!1,c()};window.urlLocale?n.setStoredValue(t.LOCAL_STORAGE_USER_CONTENT_LOCALE,window.urlLocale):n.clearStoredValue(t.LOCAL_STORAGE_USER_CONTENT_LOCALE);var d=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))};if(n.previewMode){var p=d(t.URL_SITE_PARAM);p&&n.setStoredValue(t.LOCAL_STORAGE_SITE_ID,p)}var h=function(){if(null==n.endpointRegistry){var e=function(e){n.initProxy(e.httpPort,e.httpsPort),u()},t=function(e){var t=JSON.parse(e);"401"==t.status&&n.redirectToAdminLoginScreen(),null!=n.initFailCallback&&n.initFailCallback(),n.initFailed=!0};n.requestEndpointRegistry(e,t)}else u()},f=function(){if(n.profileType==t.PROFILE_TYPE_STOREFRONT&&!n.previewMode){var e=function(e){"401"==e.status&&n.redirectToAdminLoginScreen()};n.request(t.ENDPOINT_GET_MERCHANT_TIMEZONE,{},function(e){},e)}};if(r){if(o){var m=o;"string"==typeof o&&(m=JSON.parse(o)),n.endpointRegistry=m.endpointMap,n.crossDomainRequestsEnabled=m.crossDomainRequestsEnabled,n.profileType==t.PROFILE_TYPE_STOREFRONT&&n.initializeLastPublishedTimeStamp()}window.isPreviewMode&&(n.previewMode=window.isPreviewMode),n.initProxy(location.port,location.port),c()}else h(),i||f()},n.prototype.initXDomainMessageListener=function(){var e=this;window.addEventListener("message",function(t){var r=t.origin;if(r==e.crossDomainURLNoPath){var i;i="string"==typeof t.data?JSON.parse(t.data):t.data;var a=i.id,o=i.success,n=i.payload,s=e.eventHandlerMap[a];s&&(o?s.success(n):s.error(n))}},!1)},n.prototype.proxyRequest=function(e,t,r,i,a){var o=this;o.currentRequestId>=n.MAX_INT?o.currentRequestId=0:o.currentRequestId++;var s=o.currentRequestId;o.eventHandlerMap[s]={success:r,error:i};var c={};c.id=s,c.target=e,c.payload=t,o.proxyFrame.postMessage(JSON.stringify(c),o.crossDomainURL,a)},n.prototype.proxyRequestRequired=function(e){var t=this;return!(!e||e.httpsRequired!==!0||"https"==t.urlProtocol)},n.prototype.login=function(e,t,r,i){var a=this,o={user:e,password:t};a.loginInternal(o,r,i)},n.prototype.samlLogin=function(e,t,r){var i=this,a={samlResponse:e};i.loginInternal(a,t,r)},n.prototype.loginInternal=function(a,o,s){var c=this,l=function(t){c.tokenSecret=t[e.OAUTH_ACCESS_TOKEN_PARAM],c.parseAndStoreClaims(),c.storeToken(c.tokenSecret),c.loggedIn=!0,c.setRefreshInterval(),o()},u=function(e){c.loggedIn=!1,e?s(e):r.Topic(i.topicNames.USER_NETWORK_ERROR).publish([{message:"failure"}])},d={};c.previewMode?(c.resetAdminPreviewToken(),d.tokenSecret=c.tokenSecret):c.clearSessionStoredValue(n.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_LAYOUT_PREVIEW),null!=a.samlResponse?c.doSamlLogin(a.samlResponse,l,u,d):c.doLogin(a.user,a.password,l,u,d)},n.prototype.doLogin=function(e,t,r,i,a){var o=this;o.useIframe&&o.proxyRequestRequired({
httpsRequired:!0})?o.proxyRequest("login",{user:e,password:t},r,i):o.proxy.loginRequest(e,t,r,i,a)},n.prototype.doSamlLogin=function(e,t,r,i){var a=this;a.useIframe&&a.proxyRequestRequired({httpsRequired:!0})?a.proxyRequest("login",{samlResponse:e},t,r):a.proxy.samlLoginRequest(e,t,r,i)},n.prototype.generateSamlAuthnRequest=function(t,r){var i=this;i.authenticatedRequest(n.SAML_AUTHN_REQUEST_SERVICE_URL,{},t,r,e.POST)},n.prototype.logout=function(r,i){var a=this,o=n.LOGOUT_SERVICE_PATH;a.profileType==t.PROFILE_TYPE_ADMIN?o=n.ADMIN_LOGOUT_SERVICE_PATH:a.profileType==t.PROFILE_TYPE_AGENT&&(o=n.AGENT_LOGOUT_SERVICE_PATH);var s=function(){a.clearStoredValues(),a.clearValues(),a.loggedIn=!1,a.resetAdminPreviewToken()},c=function(e){s(),r()},l=function(e){s(),i(e)};a.authenticatedRequest(o,{},c,l,e.POST),a.clearRefreshInterval()},n.prototype.verify=function(r,i){var a=this,o=function(){a.loggedIn=!0,r()},s=function(e){a.clearStoredValues(),a.clearValues(),a.resetAdminPreviewToken(),i(e)},c=n.VERIFY_SERVICE_PATH;a.profileType==t.PROFILE_TYPE_ADMIN?c=n.ADMIN_VERIFY_SERVICE_PATH:a.profileType==t.PROFILE_TYPE_AGENT&&(c=n.AGENT_VERIFY_SERVICE_PATH),a.tokenSecret?a.authenticatedRequest(c,{},o,s,e.POST):s()},n.prototype.refresh=function(r,i){var a=this,o=n.REFRESH_SERVICE_PATH;a.profileType==t.PROFILE_TYPE_ADMIN||a.profileType==t.PROFILE_TYPE_LAYOUT_PREVIEW?o=n.ADMIN_REFRESH_SERVICE_PATH:a.profileType==t.PROFILE_TYPE_AGENT&&(o=n.AGENT_REFRESH_SERVICE_PATH);var s=function(t){a.tokenSecret=t[e.OAUTH_ACCESS_TOKEN_PARAM],a.parseAndStoreClaims(),a.storeToken(a.tokenSecret),a.loggedIn=!0,r(t)},c=function(e){e&&(a.handleSessionExpiry(),a.clearStoredValues(),a.clearValues(),a.resetAdminPreviewToken()),i(e)};a.tokenSecret?a.authenticatedRequest(o,{},s,c,e.POST,!1,!0):c()},n.prototype.registerAsLoginLogoutEventListener=function(){var r=this,i=function(i){i||(i=window.event);var a=e.urlHostnamePortPortionOnly(i.url);if(a==r.url)if(i.key==r.getStoredValueName(n.LOCAL_STORAGE_TOKEN)){var o=!1;if(i.newValue&&(o=!0,r.tokenSecret=i.newValue,r.parseAndStoreClaims()),o){r.loggedIn=!0;for(var s=0;s<r.loginUpdateCallbacks.length;s++)r.loginUpdateCallbacks[s]()}else{r.clearValues();for(var c=0;c<r.logoutUpdateCallbacks.length;c++)r.logoutUpdateCallbacks[c]()}}else if(r.previewMode&&i.key==r.getStoredValueName(n.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_ADMIN))if(!i.newValue&&i.oldValue)for(var c=0;c<r.logoutAdminUpdateCallbacks.length;c++)r.logoutAdminUpdateCallbacks[c]();else for(var s=0;s<r.loginAdminUpdateCallbacks.length;s++)r.loginAdminUpdateCallbacks[s]()};window.addEventListener?window.addEventListener("storage",i,!1):window.attachEvent("onstorage",i)},n.prototype.reloadStoredValueAuth=function(){var e=this.readToken();return e?(this.tokenSecret=e,this.parseAndStoreClaims(),this.checkPreviewWhenLoggedIn(),!0):this.resetAdminPreviewToken()},n.prototype.checkPreviewWhenLoggedIn=function(){return this.resetAdminPreviewToken(!0)},n.prototype.resetAdminPreviewToken=function(e){var r=this;e=e&&"boolean"==typeof e;var i=r.getStoredValueName(n.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_ADMIN),o=r.getSessionStoredValue(i);return!(!o||r.profileType!=t.PROFILE_TYPE_STOREFRONT&&r.profileType!=t.PROFILE_TYPE_LAYOUT_PREVIEW||!r.isNotStore)&&(e||(r.tokenSecret=o),r.previewMode||(r.registerLoginAdminUpdateCallback(function(){r.resetAdminPreviewToken()}),r.registerLogoutAdminUpdateCallback(function(){r.clearStoredValues(),r.clearValues(),r.loggedIn=!1,a.getInstance().removeItem("user"),r.redirectToAdminLoginScreen()})),r.previewMode=!0,!0)},n.prototype.getAjaxConfig=function(e,t,r,i,a,o,n,s,c){var l=null,u=function(e,t){return t.beforeSend=c,l=t,!1};return this.request(e,t,r,i,a,o,n,s,u),l},n.prototype.request=function(e,t,r,i,a,o,n,s,c){this.requestWithSite(e,!1,t,r,i,a,o,n,s,c)},n.prototype.requestWithSite=function(t,r,i,a,o,s,c,l,u,d){var p=this,h=function(){var h=p.registryLookup(t),f="GET",m=!1,g=t,v={};null!=h&&(m=h.authRequired,f=h.method,null!=g&&g.charAt(0)!=e.SLASH&&(g=h.url)),g=p.insertParamsIntoUri(g,[s,c,l,u]);var E=!1;p.useIframe&&p.proxyRequestRequired(h)&&(E=!0);var y=function(t){if(t&&t[e.ETAG_PROPERTY])try{var r=JSON.parse(e.decodeBase64(t[e.ETAG_PROPERTY]));r&&r.user&&(t.etag_lastModifiedBy=r.user),p.etagCache[g]=t[e.ETAG_PROPERTY]}catch(e){console.log("ETAG parse error: ",e)}if(t&&t[e.LAST_PUBLISHED_TIME_PROPERTY]){var i=t[e.LAST_PUBLISHED_TIME_PROPERTY];null!=p.lastPublishedTimeStamp&&p.lastPublishedTimeStamp<i&&(p.lastPublishedTimeStamp=i,p.isRefreshRequired=!0)}a(t)};if(!m&&p.loggedIn&&(m=!0),v=p.updateHeaderWithLocaleHint(h),v=p.updateHeaderWithPriceListGroupId(v),v=p.updateHeaderWithSelectedOrganization(v),v=p.updateHeaderWithAgentContext(v),v=p.updateHeaderWithViewport(v),v=p.updateHeaderWithSiteId(v,!1,r),null!=h&&"PUT"===h.method&&p.etagCache[g]&&(v[e.ETAG]=p.etagCache[g],delete p.etagCache[g],h.useOptimisticLock&&(v["If-Match"]=v[e.ETAG])),1==m){var b=function(e){e&&e.status==n.HTTP_UNAUTHORIZED_ERROR&&(p.clearStoredValues(),p.clearValues(),p.handleSessionExpiry()),o(e)};p.authenticatedRequest(g,i,y,b,f,E,null,v,d)}else p.unauthenticatedRequest(g,i,y,o,f,null,v,d)};p.registerInitCallback(h)},n.prototype.updateHeaderWithLocaleHint=function(i,a,o){var s=r.extend({},a),c=o||!1;if(!i)return s;if(!c&&s[e.ASSET_LANGUAGE_HEADER_NAME])return s;var l=i[n.LOCALE_HINT];if(!l)return s;var u;if(l===n.HINT_ASSET_LANGUAGE_OPTIONAL||l===n.HINT_ASSET_LANGUAGE_REQUIRED){var d=JSON.parse(this.getStoredValue(t.LOCAL_STORAGE_USER_CONTENT_LOCALE));d&&d[0]?u=d[0].name:l===n.HINT_ASSET_LANGUAGE_REQUIRED&&(u="en")}return u&&u.length>0&&(s[e.ASSET_LANGUAGE_HEADER_NAME]=u),s},n.prototype.updateHeaderWithPriceListGroupId=function(i,a){var o=r.extend({},i),n=a||!1;if(!n&&o[e.PRICE_LIST_GROUP_ID])return o;var s;return s="string"==typeof this.getStoredValue(t.LOCAL_STORAGE_PRICELISTGROUP_ID)?JSON.parse(this.getStoredValue(t.LOCAL_STORAGE_PRICELISTGROUP_ID)):this.getStoredValue(t.LOCAL_STORAGE_PRICELISTGROUP_ID),s&&(o[e.PRICE_LIST_GROUP_ID]=s),o},n.prototype.updateHeaderWithSelectedOrganization=function(i,o){var n=this,s=r.extend({},i),c=o||!1;if(!c&&s[e.ORGANIZATION_ID])return s;var l;return l="string"==typeof n.getStoredValue(t.LOCAL_STORAGE_ORGANIZATION_ID)?JSON.parse(n.getStoredValue(t.LOCAL_STORAGE_ORGANIZATION_ID)):n.getStoredValue(t.LOCAL_STORAGE_ORGANIZATION_ID),n.profileType===t.PROFILE_TYPE_AGENT&&(l=a.getInstance().readFromMemory(t.LOCAL_STORAGE_ORGANIZATION_ID)),l&&(s[e.ORGANIZATION_ID]=l),s},n.prototype.updateHeaderWithAgentContext=function(i,o){var n=r.extend({},i),s=o||!1;if(!s&&n[e.AGENT_CONTEXT])return n;var c=a.getInstance().readFromMemory(t.LOCAL_STORAGE_AGENT_CONTEXT);return"string"==typeof c&&(c=JSON.parse(c)),c&&(n[e.AGENT_CONTEXT]=c),n},n.prototype.updateHeaderWithViewport=function(t,i){var a=r.extend({},t),n=i||!1;if(!n&&a[e.VIEWPORT_HEADER_NAME])return a;var s=o.viewportDesignation();return s&&(a[e.VIEWPORT_HEADER_NAME]=s),a},n.prototype.updateHeaderWithSiteId=function(i,o,n){var s=this,c=r.extend({},i),l=o||!1,u=n||!1;if(!l&&c[e.SITE_ID])return c;var d;return(s.allowSiteSwitchingOnProduction||s.previewMode||u)&&(d=s.getStoredValue(t.LOCAL_STORAGE_SITE_ID),d&&(c[e.SITE_ID]=d)),s.profileType===t.PROFILE_TYPE_AGENT&&(d=a.getInstance().readFromMemory(t.LOCAL_STORAGE_SITE_ID),d&&(c[e.SITE_ID]=d)),c},n.prototype.requestWithoutAssetLocale=function(t,r,i,a,o,s,c,l){var u=this,d=function(){var d,p,h=u.registryLookup(t),f="GET",m=!1,g=t;null!=h&&(m=h.authRequired,f=h.method,null!=g&&g.charAt(0)!=e.SLASH&&(g=h.url)),g=u.insertParamsIntoUri(g,[o,s,c,l]);var v=!1;u.useIframe&&u.proxyRequestRequired(h)&&(v=!0);var E=function(e){i(e)};if(!m&&u.loggedIn&&(m=!0),d=u.updateHeaderWithLocaleHint(h),d=u.updateHeaderWithViewport(d),p=h[n.LOCALE_HINT],p&&p!==n.HINT_ASSET_LANGUAGE_OPTIONAL||delete d[e.ASSET_LANGUAGE_HEADER_NAME],1==m){var y=function(e){e&&e.status==n.HTTP_UNAUTHORIZED_ERROR&&(u.clearStoredValues(),u.clearValues(),u.handleSessionExpiry()),a(e)};u.authenticatedRequest(g,r,E,y,f,v,null,d)}else u.unauthenticatedRequest(g,r,E,a,f,null,d)};u.registerInitCallback(d)},n.prototype.authenticatedRequest=function(e,t,r,i,a,o,n,s,c){var l=this;l.storeRequestWasMade=!0;var u={tokenSecret:l.tokenSecret},d=function(e){var t=e;null!=t&&t.items&&t.autoWrap&&(t=t.items),r(t)},p=function(e,t){l.previewMode&&401==t&&!n&&l.redirectToAdminLoginScreen(),null!=l.commonErrorCallback&&u.tokenSecret===l.tokenSecret&&l.commonErrorCallback(e,t),i(e,t)};l.doAuthRequest(e,t,d,p,u,a,o,s,c)},n.prototype.doAuthRequest=function(e,t,r,i,a,o,s,c,l){var u=this;if(s){if(l)throw n.BEFORE_SEND_NOT_SUPPORTED;u.proxyRequest("auth",{url:e,data:t,clientProps:a,method:o},r,i,c)}else u.proxy.request(e,t,r,i,o,a,c,l)},n.prototype.unauthenticatedRequest=function(e,t,r,i,a,o,s,c){var l=this;l.storeRequestWasMade=!0;var u=function(e){var t=e;null!=t&&t.items&&t.autoWrap&&(t=t.items),r(t)},d=function(e,t){null!=l.commonErrorCallback&&l.commonErrorCallback(e,t),i(e,t)};if(o){if(c)throw n.BEFORE_SEND_NOT_SUPPORTED;l.proxyRequest("noauth",{url:e,data:t,method:a},r,d,s)}else l.proxy.request(e,t,u,d,a,null,s,c)},n.prototype.requestEndpointRegistry=function(i,a){var o=this,s=function(e){o.endpointRegistry=e.endpointMap,o.crossDomainRequestsEnabled=e.crossDomainRequestsEnabled,o.profileType==t.PROFILE_TYPE_STOREFRONT&&o.initializeLastPublishedTimeStamp(),i(e)},c=function(e){a(e)},l=n.ENDPOINT_REGISTRY_SERVICE_PATH;o.profileType==t.PROFILE_TYPE_ADMIN?l=n.ADMIN_ENDPOINT_REGISTRY_SERVICE_PATH:o.profileType==t.PROFILE_TYPE_AGENT&&(l=n.AGENT_ENDPOINT_REGISTRY_SERVICE_PATH);var u=null,d={dataType:e.JSON,type:e.GET,url:l,processData:!1,success:function(e,t,r){s(e)},error:function(e,t,r){var i=e.responseText;if(""!==i)try{i=JSON.parse(i)}catch(e){}c(e.responseText)}};o.profileType&&!o.previewMode&&(u={},u[e.PROFILE_TYPE_HEADER_NAME]=o.profileType),o.tokenSecret&&(null==u&&(u={}),u[e.AUTH_HEADER_NAME]=e.AUTH_HEADER_PREFIX+o.tokenSecret),u&&(d.headers=u),r.ajax(d)},n.prototype.initializeLastPublishedTimeStamp=function(){var e=this,t=function(t){t&&t.hasOwnProperty(n.LAST_PUBLISHED_TIME_STAMP)&&(e.lastPublishedTimeStamp=t[n.LAST_PUBLISHED_TIME_STAMP])},r=function(e){};e.request("getLastPublishedTime",null,t,r)},n.prototype.registryLookup=function(t){var r=this;if(null==this.endpointRegistry)return null;var i=e.convertUrl(t);if(null==i)return null;for(var a=null,o=i.length;o>0&&null==a;o--){var n=null,s=i.slice(0,o);if(n=s.join(e.EMPTY_STRING),a=r.endpointRegistry[n],null==a)for(var c=0;c<s.length&&null==a;c++){for(var l=0;l<c;l++){var u=s.length-1-l;1==u?s[u]=e.CURLY_BRACES:s[u]=e.SLASH+e.CURLY_BRACES}n=s.join(e.EMPTY_STRING),a=r.endpointRegistry[n]}}return a},n.prototype.insertParamsIntoUri=function(t,r){for(var i=t,a=0;a<r.length;a++)r[a]&&(i=i.replace(e.CURLY_BRACES,r[a]));return i},n.prototype.getStoredValueName=function(t,r){var i=this,a=r;return a||(a=i.profileType),a?t+e.DASH+a:t},n.prototype.storeToken=function(e){var t=this,r=t.getStoredValueName(n.LOCAL_STORAGE_TOKEN);t.setSessionStoredValue(r,e)},n.prototype.readToken=function(){var e=this,t=e.getStoredValueName(n.LOCAL_STORAGE_TOKEN),r=null;return r=e.getSessionStoredValue(t)},n.prototype.clearStoredValues=function(){var e=this;e.clearSessionStoredValue(n.LOCAL_STORAGE_TOKEN),e.profileType!==t.PROFILE_TYPE_LAYOUT_PREVIEW&&e.clearSessionStoredValue(n.LOCAL_STORAGE_TOKEN,t.PROFILE_TYPE_LAYOUT_PREVIEW)},n.prototype.clearValues=function(){var e=this;e.tokenSecret=null,e.profileId=null,e.loggedIn=!1},n.prototype.setStoredValue=function(e,t){var r=this,i=r.getStoredValueName(e);try{a.getInstance().setItem(i,t)}catch(e){}},n.prototype.getStoredValue=function(e){var t=this,r=t.getStoredValueName(e),i=null;try{i=a.getInstance().getItem(r)}catch(e){}return i},n.prototype.clearStoredValue=function(e){var t=this.getStoredValueName(e);void 0!==t&&null!==t&&a.getInstance().removeItem(t)},n.prototype.setSessionStoredValue=function(e,t){try{a.getInstance().setSessionItem(e,t)}catch(e){}},n.prototype.getSessionStoredValue=function(e){var t=null;try{t=a.getInstance().getSessionItem(e)}catch(e){}return t},n.prototype.clearSessionStoredValue=function(e,t){var r=this.getStoredValueName(e,t);void 0!==r&&null!==r&&a.getInstance().removeSessionItem(r)},n.prototype.parseAndStoreClaims=function(){var r=this,i=e.parseClaimsFromAccessToken(r.tokenSecret);null!=i&&(r.profileId=i[t.TOKEN_PROFILEID_PROPERTY],r.profileLogin=i[t.TOKEN_SUBJECT_PROPERTY],r.profileRoles=i[t.TOKEN_ROLES_PROPERTY])},n.prototype.insertAuthHeadersAsQueryParams=function(e,t){return e},n.prototype.createCrossDomainIFrame=function(){var e=this,t=n.IFRAME_NAME+"_"+e.profileType,r=e.crossDomainURL,i=document.createElement(n.IFRAME_ELEMENT);i.setAttribute(n.ID_ATTRIBUTE,t),i.setAttribute(n.NAME_ATTRIBUTE,t),i.setAttribute(n.WIDTH_ATTRIBUTE,n.ZERO),i.setAttribute(n.HEIGHT_ATTRIBUTE,n.ZERO),i.setAttribute(n.BORDER_ATTRIBUTE,n.ZERO),i.setAttribute(n.STYLE_ATTRIBUTE,n.IFRAME_STYLE),i.setAttribute(n.SRC_ATTRIBUTE,r);var a=null;try{document.body.appendChild(i),window.frames[t].name=t,a=document.getElementById(t)}catch(e){}return a},n.prototype.redirectToAdminLoginScreen=function(){var e=this;e.disableLoginErrorRedirect||(window.top!==window.self&&e.profileType==t.PROFILE_TYPE_LAYOUT_PREVIEW?window.top.location.href=n.ADMIN_LOGIN_SCREEN_URL:document.location.href=n.ADMIN_LOGIN_SCREEN_URL)},n.prototype.generateAuthUrl=function(t,r,i){var a,o=this,n=o.registryLookup(t),s=t;return null!=n&&(a=n.authRequired,s=n.url),s=o.insertParamsIntoUri(s,r),s=e.addQueryParams(s,i),a&&(s=o.insertAuthHeadersAsQueryParams(s,!0)),s},n}),define("ccRestClient",["ccRestClientConstructor","ccConstants","pubsub"],function(e,t,r){"use strict";var i=function(e,i){(0==i||i<100||i>600)&&!e&&$.Topic(r.topicNames.USER_NETWORK_ERROR).publish([{message:"failure"}]),i==t.HTTP_UNAUTHORIZED_ERROR&&$.Topic(r.topicNames.USER_SESSION_EXPIRED).publish()},a=window.CCStorefrontPreviewMode===!0?t.PROFILE_TYPE_LAYOUT_PREVIEW:t.PROFILE_TYPE_STOREFRONT,o=new e(a,i);window.endpointRegistry?o.init(!0,!window.isPreviewMode,window.endpointRegistry):o.init(!1,!window.isPreviewMode);try{delete window.isPreviewMode,delete window.endpointRegistry}catch(e){window.isPreviewMode=void 0,window.endpointRegistry=void 0}return o}),define("profiletools",["ccRestClient","knockout","pubsub"],function(e,t,r){"use strict";function i(){var t=this;return t.restApi=e,$.Topic(r.topicNames.REGISTER_SUBMIT).subscribe(this.register),this}return i.prototype.login=function(e,t,r,i){var a=this;a.restApi.login(e,t,function(){r()},function(e){i(e)})},i.prototype.logout=function(){},i.prototype.register=function(e){var i,a,o;i=t.utils.unwrapObservable(e.email),a=t.utils.unwrapObservable(e.password),o=t.utils.unwrapObservable(e.confirmPassword),i&&a?a!==o?$.Topic(r.topicNames.REGISTER_FAILURE).publishWith(this,[{message:"Passwords do not match."}]):$.Topic(r.topicNames.REGISTER_SUCCESS).publishWith(this,[{message:"success"}]):$.Topic(r.topicNames.REGISTER_FAILURE).publishWith(this,[{message:"You must include at least a username and password."}])},i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("i18nextBackend",t):e.i18nextXHRBackend=t()}(this,function(){"use strict";function e(e){return a.call(o.call(arguments,1),function(t){if(t)for(var r in t)void 0===e[r]&&(e[r]=t[r])}),e}function t(e,t,r,i,a){if(i&&"object"===("undefined"==typeof i?"undefined":n(i))){var o="",s=encodeURIComponent;for(var c in i)o+="&"+s(c)+"="+s(i[c]);i=o.slice(1)+(a?"":"&_t="+new Date)}try{var l=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");l.open(i?"POST":"GET",e,1),t.crossDomain||l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.withCredentials=!!t.withCredentials,i&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){l.readyState>3&&r&&r(l.responseText,l)},l.send(i)}catch(e){window.console&&console.log(e)}}function r(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:t}}var i=[],a=i.forEach,o=i.slice,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=(function(){function e(e){this.value=e}function t(t){function r(e,t){return new Promise(function(r,a){var s={key:e,arg:t,resolve:r,reject:a,next:null};n?n=n.next=s:(o=n=s,i(e,t))})}function i(r,o){try{var n=t[r](o),s=n.value;s instanceof e?Promise.resolve(s.value).then(function(e){i("next",e)},function(e){i("throw",e)}):a(n.done?"return":"normal",n.value)}catch(e){a("throw",e)}}function a(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?i(o.key,o.arg):n=null}var o,n;this._invoke=r,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),c=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.init(e,r),this.type="backend"}return c(t,[{key:"init",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=e(i,this.options||{},r())}},{key:"readMulti",value:function(e,t,r){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath(e,t));var a=this.services.interpolator.interpolate(i,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(a,r)}},{key:"read",value:function(e,t,r){var i=this.options.loadPath;"function"==typeof this.options.loadPath&&(i=this.options.loadPath([e],[t]));var a=this.services.interpolator.interpolate(i,{lng:e,ns:t});this.loadUrl(a,r)}},{key:"loadUrl",value:function(e,t){var r=this;this.options.ajax(e,this.options,function(i,a){if(a.status>=500&&a.status<600)return t("failed loading "+e,!0);if(a.status>=400&&a.status<500)return t("failed loading "+e,!1);var o=void 0,n=void 0;try{o=r.options.parse(i,e)}catch(t){n="failed parsing "+e+" to json"}return n?t(n,!1):void t(null,o)})}},{key:"create",value:function(e,t,r,i){var a=this;"string"==typeof e&&(e=[e]);var o={};o[r]=i||"",e.forEach(function(e){var r=a.services.interpolator.interpolate(a.options.addPath,{lng:e,ns:t});a.options.ajax(r,a.options,function(e,t){},o)})}}]),t}();return l.type="backend",l}),define("ccLogger",[],function(){"use strict";function e(){}return e.prototype.info=function(e,t){"undefined"!=typeof console&&(void 0!==t&&null!==t?console.info("(INFO) "+e,t):console.info("(INFO) "+e))},e.prototype.debug=function(e,t){"undefined"!=typeof console&&(console.debug||"undefined"==typeof console.log||(console.debug=console.log),"undefined"!==t&&null!==t?console.debug("(DEBUG) "+e,t):console.debug("(DEBUG) "+e))},e.prototype.warn=function(e,t){"undefined"!=typeof console&&(void 0!==t&&null!==t?console.warn("(WARN) "+e,t):console.warn("(WARN) "+e))},e.prototype.error=function(e,t){"undefined"!=typeof console&&(void 0!==t&&null!==t?console.error("(ERROR) "+e,t):console.error("(ERROR) "+e))},new e}),define("ccDate",["moment","ccConstants","ccLogger"],function(e,t,r){"use strict";function i(){}return i.prototype.DEFAULT_DATE_FORMAT="MM-DD-YYYY HH:mm:ss.SSS",i.prototype.init=function(e){e!=t.DEFAULT_LANG&&(requirejs.s.contexts._.nextTick=function(e){e()},require(["momentLangs/"+e.toLowerCase()],function(){},function(t){r.warn("No language file found for locale "+e)}),requirejs.s.contexts._.nextTick=requirejs.nextTick)},i.prototype.formats={time:"LT",short:"L",medium:"LL",long:"LLL",full:"LLLL",default:"LL"},i.prototype.getDateFormat=function(t){return t?e.localeData()._longDateFormat[this.formats[t]]:e.localeData()._longDateFormat[this.formats.default]},i.prototype.setDateToTimeZone=function(t,r){var i,a,o="";return!!t&&(a=new Date,i=a.toString().split(" ")[5].split("T")[1],r&&(t=t.slice(0,19)+i),o=e(t).format())},i.prototype.formatDateForEndpoint=function(t,r){var i;return!!t&&(i=r?e(t).format():e(t))},i.prototype.dateTimeFormatter=function(t,r,i){var a,o="";return!!t&&(r?o+=r:o=i&&this.formats[i]?this.formats[i]:this.formats.default,a=e(t).format(o))},i.prototype.formatDateAndTime=function(t,r,i,a){var o=this,n="";if(!t)return"";i?n+=i:n=a&&this.formats[a]?this.formats[a]:this.formats.default;var s=null;return r?(e(t,r).isValid()||(t=e(t).format(r)),t=e(t,r).format(o.DEFAULT_DATE_FORMAT),s=e(t,o.DEFAULT_DATE_FORMAT)):s=e(t),s.format(n)},i.prototype.parseDateAndTime=function(t,r){var i=null;return t&&r?i=e(t,r):""},new i}),define("CCi18n",["i18next","i18nextBackend","pubsub","ccDate","ccRestClient","ccConstants"],function(e,t,r,i,a,o){"use strict";function n(){var e,t,r,i=[];if(this.languageSet=!1,this.languageSetComplete=!1,this.initialized=!1,this.initComplete=!1,this.localeDeferred=$.Deferred(),this.initDeferred=$.Deferred(),t=$(":root").attr("lang")){var a=t.replace("-","_").split("_");a=this.normalizeLocale(a),e=a.join("-")}if(r=$(":root").data("accepted-langs")){for(var o=r.split(","),n=!1,s=0;s<o.length;s++){var c=o[s].replace("_","-");c=c.replace("_#",""),c!==t&&("zh-CN"===c&&(c="zh-Hans"),"zh-TW"===c&&(c="zh-Hant"),i.push(c),"en"===c&&(n=!0))}n||i.push("en")}this.i18nOptions={lng:e,compatibilityJSON:"v1",compatibilityAPI:"v1",preload:["en"],fallbackLng:i.length>1?i:"en",ns:["ns.common","ns.ccformats"],defaultNs:["ns.common"],contextSeparator:":",debug:!1,useLocalStorage:!1,useCookie:!1}}return n.prototype.normalizeLocale=function(e){return 3==e.length&&""===e[1]&&(e.splice(1,1),e[1]=e[1].replace("#","")),"zh"===e[0]&&"CN"===e[1]&&(e[1]="Hans"),"zh"===e[0]&&"TW"===e[1]&&(e[1]="Hant"),e},n.prototype.init=function(i,a){this.initialized=!0;var o=this;e.use(t).init(i,function(e){o.initComplete=!0,a&&a.apply(e),$.Topic(r.topicNames.LOCALE_READY).publish(e)})},n.prototype.deferInit=function(i,a){return this.initDeferred.done(function(o,n){$.extend(i,o),e.use(t).init(i,function(e){a&&a.apply(e),n&&n.apply(e),$.Topic(r.topicNames.LOCALE_READY).publish(e)})}),this.initDeferred.promise()},n.prototype.loadNamespace=function(t,r,i){e.loadNamespaces("ns."+t,function(){var a=r;r?a.returnObjectTrees=!0:a={returnObjectTrees:!0};var o=e.t("ns."+t+":resources",a);i(o)})},n.prototype.t=e.t.bind(e),n.prototype.addResourceBundle=function(t,r,i,a,o){e.addResourceBundle(t,r,i,a,o)},n.prototype.setLocale=function(t,a){var o=function(o){i.init(t),t!==e.lng()&&e.setLng(t,function(e){$.Topic(r.topicNames.LOCALE_SET).publish(t),a&&a.apply(e)})};this.initialized||this.initDeferred.isResolved?o():(this.initDeferred.resolve({fallbackLng:t,lng:t},a),this.localeDeferred.done(o))},n.prototype.setLocaleOnce=function(e,t){var r=e.replace("-","_").split("_");if("zh"===r[0]&&(r=this.normalizeLocale(r),e=r.join("-")),this.languageSet)this.languageSetComplete?t&&t.call(this):this.localeDeferred.done(t);else{var i=this;this.setLocale(e,function(e){t&&t.apply(this,e),i.languageSetComplete=!0,i.localeDeferred.resolve()}),this.languageSet=!0}},n.prototype.loadResources=function(e,t,r,i){var n={};n.locale=e;var s=function(e){if(e.hasOwnProperty(o.RESOURCES_KEY)){var t={};t.resources=e[o.RESOURCES_KEY],i(null,t)}else c(e)},c=function(e){a.commonErrorCallback(e,e.status),e.hasOwnProperty(o.ERRORS_KEY)&&i(e[o.ERRORS_KEY],null)};a.request(o.ENDPOINT_RESOURCES_GET_BUNDLE,n,s,c,t)},n.prototype.getLanguagesToResolveHierarchy=function(t){var r=e.services.languageUtils.toResolveHierarchy(t);return r},n.prototype.ajax=function(e,t,r){var i=e.match(/\/(ns\..*)\?locale=(.*)/),n=i[1],s=i[2],c={};c.locale=s;var l=function(e){if(e.hasOwnProperty(o.RESOURCES_KEY)){var t={};t.resources=e[o.RESOURCES_KEY],r(JSON.stringify(t),{status:200})}else u(e)},u=function(e){a.commonErrorCallback(e,e.status),e.hasOwnProperty(o.ERRORS_KEY)&&r(e[o.ERRORS_KEY],{status:e.status})};a.request(o.ENDPOINT_RESOURCES_GET_BUNDLE,c,l,u,n)},n.prototype.disableNestedLookups=function(){this.reusePrefix=e.options.reusePrefix,e.options.reusePrefix="DISABLE_NESTED_LOOKUPS"},n.prototype.enableNestedLookups=function(){e.options.reusePrefix=this.reusePrefix},new n}),define("ccPasswordValidator",["knockout","CCi18n"],function(e,t){"use strict";function r(){}return r.prototype.LOWER_CASE_LETTERS="abcdefghijklmnopqrstuvwxyz",r.prototype.UPPER_CASE_LETTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r.prototype.NUMBER_LIST="0123456789",r.prototype.SYMBOLS_LIST="~!@#$%^&*()_-+={}[]|:;<>,./?",r.prototype.embeddedAssistance="",r.prototype.validate=function(e,t,r,i){var a=this;if(!r)return!0;var o=r.useMinPasswordLength,n=r.minPasswordLength,s=r.cannotUseUsername,c=r.useMixedCase,l=r.useNumber,u=r.useSymbol,d=(r.cannotUsePreviousPasswords,r.numberOfPreviousPasswords,!1);null!=e&&void 0!=e&&""!=e||(d=!0);var p,h=!1;"true"==o&&e.length<n&&(h=!0),"true"==s&&""!=t&&e.toLowerCase()===t.toLowerCase()&&(h=!0),"true"==l&&(p=a.checkAgainst(e,a.NUMBER_LIST),p||(h=!0)),"true"==u&&(p=a.checkAgainst(e,a.SYMBOLS_LIST),p||(h=!0)),"true"==c&&(p=a.hasMixedCase(e),p||(h=!0));var f=!1;return h?(f=!1,a.embeddedAssistance=a.getAllEmbeddedAssistance(r,i)):(a.embeddedAssistance="",f=!0),!!d||f},r.prototype.getAllEmbeddedAssistance=function(e,r){var i=e.useMinPasswordLength,a=e.minPasswordLength,o=e.cannotUseUsername,n=e.useMixedCase,s=e.useNumber,c=e.useSymbol,l=e.cannotUsePreviousPasswords,u=(e.numberOfPreviousPasswords,t.t("ns.common:resources.embeddedAssistancePreText")),d=!1;return"true"==i&&(u+=" "+t.t("ns.common:resources.embeddedAssistanceMinPasswordLengthText",{min:a}),d=!0),"true"==o&&(u+=1==d?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceCannotUseUsernameText"),d=!0),"true"==s&&(u+=1==d?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceUseNumber"),d=!0),"true"==c&&(u+=1==d?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceUseSymbol"),d=!0),"true"==n&&(u+=1==d?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceUseMixedCase"),d=!0),1==r&&"true"==l&&(u+=1==d?", ":" ",u+=t.t("ns.common:resources.embeddedAssistanceNotInPreviousNPasswords"),d=!0),u+="."},r.prototype.hasMixedCase=function(e){var t=this,r=!1;if(null==e)return!1;for(var i=!1,a=!1,o=0;o<e.length;o++){var n=e.charAt(o);t.LOWER_CASE_LETTERS.lastIndexOf(n)!=-1&&(i=!0),t.UPPER_CASE_LETTERS.lastIndexOf(n)!=-1&&(a=!0)}return i&&a&&(r=!0),r},r.prototype.checkAgainst=function(e,t){var r=!1;if(null==e)return!1;if(0==t.length)return!0;for(var i=0;i<e.length;i++){var a=e.charAt(i);t.lastIndexOf(a)!=-1&&(r=!0)}return r},new r}),define("ccKoValidateRules",["knockout","jqueryui","koValidate","ccPasswordValidator"],function(e,t,r,i){"use strict";e.validation.rules.creditcard={validator:function(t,r){if(!r)return!1;if(!(r.iin&&r.length&&e.isObservable(r.iin)&&e.isObservable(r.length)))return!1;var i=r.iin(),a=r.length();if(!i||!a||""===i||""===a)return!1;if(!t||""===t)return"0"===a;var o=t,n=new RegExp("^("+i+")");if(!o.match(n))return!1;for(var s=a.split("|"),c="",l=0;l<s.length;l++)0!==l&&(c+="|"),c+="^[0-9]{"+s[l]+"}$";var u=new RegExp(c);if(!o.match(u))return!1;var d=function(e){for(var t=0,r=e.length,i=1;i<=r;i++){var a=parseInt(e[r-i],10);i%2==0&&(a*=2,a>9&&(a-=9)),t+=a}return t%10==0};return!!d(o)},message:"Card Number is invalid."},e.validation.rules.cvv={validator:function(t,r){if(!r)return!1;var i=0;if(i=e.isObservable(r)?r():r,i=parseInt(i,10),!t||""===t)return 0===i;var a=new RegExp("^[0-9]{"+i+"}$");return!!t.match(a)},message:"Card CVV is invalid."};var a=e.observable(!0),o=e.observable(!0);e.validation.rules.startmonth={validator:function(t,r){if(!r||!e.isObservable(r))return!1;if(!t||""===t)return!0;var i=t,o=new RegExp("^((0[1-9])|(1[0-2]))$");if(!i.match(o))return!1;if(!r())return!0;var n=new Date,s=n.getUTCFullYear(),c=n.getUTCMonth();return parseInt(r(),10)===s&&parseInt(i,10)>++c?(a(!1),!1):(a(!0),!0)},message:"Start Month is invalid."},e.validation.rules.startyear={validator:function(e){return!e||""===e||a()},message:"Start Year is invalid."},e.validation.rules.importFileName={validator:function(e){var t=[".csv"];return new RegExp("("+t.join("|").replace(/\./g,"\\.")+")$").test(e)},message:"invalid file extension."},e.validation.rules.mediaZipFileName={validator:function(e){var t=[".zip"];return new RegExp("("+t.join("|").replace(/\./g,"\\.")+")$").test(e)}},e.validation.rules.endmonth={validator:function(e,t){if(!e||""===e)return!0;var r=e,i=new RegExp("^((0[1-9])|(1[0-2]))$");if(!r.match(i))return!1;if(!t)return!0;var a=new Date,n=a.getUTCFullYear(),s=a.getUTCMonth();return parseInt(t,10)===n&&parseInt(r,10)<++s?(o(!1),!1):(o(!0),!0)},message:"End Month is invalid."},e.validation.rules.endyear={validator:function(e){return!e||""===e||o()},message:"End Year is invalid."},e.validation.rules.observablePattern={validator:function(t,r){if(!r)return!1;var i="";if(i=e.isObservable(r)?r():r,!i||""===i)return!1;if(!t||""===t)return!0;var a=new RegExp(i);return!!t.match(a)},message:"Observable Pattern Match Failed."},e.validation.rules.alphaNumeric={validator:function(e){return!e||e.match(/^[A-Za-z0-9(\s)]+$/)},message:"Field may only contain alphanumeric characters"},e.validation.rules.bool={validator:function(e){return e===!0||!e},message:"Value must be true or false"},e.validation.rules.alphaNumericWithSeperators={validator:function(e){return!e||e.match(/^[A-Za-z0-9_\-\s]+$/)},message:"Field may only contain alphanumeric characters and -, spaces, or _"},e.validation.rules.alphaNumericNoSpacesWithSeperators={validator:function(e){return!e||e.match(/^[A-Za-z0-9_\-]+$/)},message:"Field may only contain alphanumeric characters and - or _"},e.validation.rules.restrictSlashCharacters={validator:function(e){return!e||!e.match(/[\/\\]+/)},message:"Field may not contain forwardslash or backslash."},e.validation.rules.alphaNumericNoSpaces={validator:function(e){return!e||e.match(/^[A-Za-z0-9]+$/)},message:"Field may only contain alphanumeric characters and no spaces"},e.validation.rules.cartPicker={validator:function(e){if(!e)return!0;var t,r=e.length;for(t=0;t<r;t++){var i=parseInt(e[t].quantity,10);if(""!=e[t].productId){if(isNaN(i)||i<=0||i>=100)return!1}else if(""!=e[t].quantity)return!1}var a=0,o=[],n={};for(t=0;t<r;t++)""!=e[t].productId&&(n[e[t].productId]=0,a+=1);for(t in n)o.push(t);return!(a>o.length)},message:"Please ensure each item has a quantity specified"},e.validation.rules.cartPickerUniqueProducts={validator:function(e){if(!e)return!0;var t,r=e.length,i=0,a=[],o={};for(t=0;t<r;t++)""!=e[t].productId&&(o[e[t].productId]=0,i+=1);for(t in o)a.push(t);return!(i>a.length)},message:"Please ensure there are no Duplicate product IDs"},e.validation.rules.price={validator:function(e,t){return!t||(null===e||"undefined"==typeof e||""===e||/^\d*\.?\d+$/.test(e))},message:"Please enter a valid price"},e.validation.rules.laterDate={validator:function(e,t){var r,i,a;return!!e&&(r=new Date(e),i=new Date,a=i-r,a<0)},message:"Please enter a proper date"},e.validation.rules.url={validator:function(e,t){if("boolean"==typeof t&&!t)return!0;if(t instanceof Object&&t.validate&&t.validate===!1)return!0;var r=!1;t instanceof Object&&t.protocolOptional&&(r=t.protocolOptional);var i=/^(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!-\/]))?$/,a=/^(ftp|http|https)?:\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!-\/]))?$/;if(e){for(var o=e.split("\n"),n=[],s=0;s<o.length;s++)for(var c=o[s].split(","),l=0;l<c.length;l++)n.push(c[l]);
for(var u=/^(ftp|http|https):\/\//,d=/:\/\//,p=0;p<n.length;p++)if(!r||d.test(n[p].trim())||u.test(n[p].trim())){if(!a.test(n[p].trim()))return!1}else if(!i.test(n[p].trim()))return!1;return!0}return!0},message:"Please enter a valid URL"},e.validation.rules.absoluteOrRelativeURL={validator:function(e,t){if(!t)return!0;var r=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))?\.?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i,i=/^\/\S*$/i;return!e||!(!r.test(e)&&!i.test(e))},message:"Please enter a valid URL"},e.validation.rules.number={validator:function(e,t){return!t||(null===e||"undefined"==typeof e||""===e||t&&/^-?\d*\.?\d+$/.test(e))},message:"Please enter a number"},e.validation.rules.match={getValue:function(e){return"function"==typeof e?e():e},validator:function(e,t){return e===this.getValue(t)},message:"Values must match"},e.validation.rules.propertyIdAlreadyInUse={validator:function(e,t){var r;if(t&&e&&t.createProperty()&&t.existingPropertyids())for(var i=(t.existingPropertyids,0),a=t.existingPropertyids().length;i<a;++i)if(t.existingPropertyids()[i]&&(r=t.existingPropertyids()[i].id,r&&e.toLowerCase()===r.toLowerCase()))return!1;return!0},message:"Property Id is already in use"},e.validation.rules.propertyNameAlreadyInUse={validator:function(e,t){var r;if(t&&e&&t.existingPropertyName())for(var i=(t.existingPropertyName,0),a=t.existingPropertyName().length;i<a;++i)if(t.existingPropertyName()[i]&&(r=t.existingPropertyName()[i].displayName))if(t.createProperty()){if(e.toLowerCase()===r.toLowerCase())return!1}else if(""!=t.prevPropertyName()&&null!=t.prevPropertyName()&&e.toLowerCase()!==t.prevPropertyName().toLowerCase()&&e.toLowerCase()===r.toLowerCase())return!1;return!0},message:"Property Name is already in use"},e.validation.rules.password={validator:function(t,r){var a=r.login(),o=r.policies(),n=r.observable,s=r.includePreviousNPasswordRule(),c=i.validate(t,a,o,s);return n.embeddedAssistance=e.observable(i.embeddedAssistance),c},message:"The password entered does not comply with the password policy"},e.validation.rules.uniqueTrimmed={validator:function(t,r){return e.validation.rules.unique.validator(t.trim(),r)}},e.validation.rules.uniqueTrimmedCaseInsensitive={validator:function(t,r){return!t||e.validation.rules.uniqueTrimmed.validator(t.toLowerCase(),r)}},e.validation.registerExtenders()}),define("pageLayout/simple-cache",["knockout"],function(e){"use strict";function t(){return this.cache={},this}return t.prototype.set=function(e,t,r){var i;this.cache[e]?i=this.cache[e]:(i={},this.cache[e]=i),i[t]=r},t.prototype.get=function(e,t){var r;return this.cache[e]&&(r=this.cache[e][t],r||null===r||r===!1)?{result:r,hit:!0}:{result:null,hit:!1}},t.prototype.flush=function(){this.cache={}},t}),define("navigation",["jquery","crossroads","hasher","pubsub"],function(e,t,r,i){"use strict";function a(){var t,a=this,o=e.Deferred();e.Topic(i.topicNames.USER_UNAUTHORIZED).subscribe(function(e){a.loginHandlerPage=a.getPath(),o.done(function(){t(e)})}),a.setHash=function(e){r.setHash(e)},a.getHash=function(){return r.getHash()},a.setLoginHandler=function(e){t=e,o.resolve()},a.checkLogin=function(e){if(e.indexOf("?loggedIn=false")>-1){var r=e.indexOf("page=")+5,i=decodeURIComponent(e.substr(r));i="/"===i.charAt(0)?i:"/"+i;var n=[{message:"success",linkToRedirect:i}];"/"==e.charAt(0)?a.loginHandlerPage=e.substr(1,e.indexOf("?")-1):a.loginHandlerPage=e.substr(0,e.indexOf("?")-1),o.done(function(){t(n)})}},a.goTo=function(t,r,o){var n=a.getPathWithLocale(t);if(r)e.Topic(i.topicNames.HISTORY_PUSH_STATE).publish(n);else if(window.history&&window.history.pushState)o?window.history.replaceState(null,"",n):window.history.pushState(null,"",n),e.Topic(i.topicNames.HISTORY_PUSH_STATE).publish(n),a.checkLogin&&a.checkLogin(t);else{var s=a.getBaseURL()+("/"===n.charAt(0)?n:"/"+n);window.location.assign(s)}},a.getPath=function(){var e=window.location.pathname;return"/"===e.charAt(0)&&(e=e.substr(1)),e},a.getRelativePath=function(){var e=window.location.pathname;return"/"!==e.charAt(0)&&(e="/"+e),e},a.isPathEqualTo=function(e){if(e){var t=a.getPathWithoutLocale(),r=a.getPathWithoutLocale(e);return t="/"===t.charAt(0)?t.substr(1):t,r="/"===r.charAt(0)?r.substr(1):r,0===t.indexOf(r)}return!1},a.getQueryString=function(){return window.location.search},a.getBaseURL=function(){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.location.origin},a.getPathWithoutLocale=function(e){var t=e?e:window.location.pathname+window.location.search;if(window.urlLocale){var r=JSON.parse(window.urlLocale)[0].name,i=t.split("/");i.length>=2&&i[1]==r&&(t=t.replace("/"+i[1],""))}return t},a.getPathWithoutFacebookContext=function(e){var t=e?e:window.location.pathname+window.location.search;if(window.FacebookCanvas){var r=t.split("/");r.length>=2&&"facebook"==r[1]&&(t=t.replace("/"+r[1],"/wishlist"))}return t},a.getPathWithoutContext=function(e){return e=a.getPathWithoutLocale(e),e=a.getPathWithoutFacebookContext(e)},a.getPathWithLocale=function(e){var t=e?e:window.location.pathname+window.location.search;if(window.urlLocale){var r=JSON.parse(window.urlLocale)[0].name;t="/"===t.charAt(0)?t:"/"+t,t.indexOf("/"+r)===-1&&(t.indexOf("/")===-1&&(t="/"+t),t="/"+r+t)}return t},a.getLocaleBasedUrl=function(e){var t=a.getBaseURL()+"/"+e+a.getPathWithoutLocale();return t},a.doLogin=function(e,t){if(a.getPathWithoutLocale().indexOf("?loggedIn=false")<0){var r=t?t:window.location.pathname;r=r+"?loggedIn=false&page="+encodeURIComponent(e),a.goTo(r)}},a.cancelLogin=function(){a.goTo(window.location.pathname)}}return new a}),define("pageLayout/rest-adapter",["jquery","knockout","ccRestClient","ccConstants","pageLayout/simple-cache","navigation"],function(e,t,r,i,a,o){"use strict";function n(e){return this.basePath=e,this.cache=new a,this.cacheLoaders={},this.registerCacheLoader(c,this.defaultCacheLoader),this}var s=r,c="__default__";return n.prototype.restToDataTypes={widget:"widget",widgetDefinition:"widgetDefinition",layout:"layout",cart:"product",productList:"product",categoryList:"category"},n.prototype.defaultCacheLoader=function(e,t,r,i){for(var a=0;a<i.length;a++)r[a]&&r[a].id&&i[a]===r[a].id&&e.set(t,i[a],r[a])},n.prototype.registerCacheLoader=function(e,t){this.cacheLoaders[e]=t},n.prototype.getCacheLoader=function(e){return this.cacheLoaders[e]},n.prototype.reassembleDataFromCache=function(e,t){for(var r=this,i=[],a=0;a<t.length;a++)i.push(r.cache.get(e,t[a]).result);return i},n.prototype.cachedRootCategories=function(e,t){},n.prototype.cachedLoadJSON=function(e,t,r,i,a){var o,n,s=this,l=this.restToDataTypes[e],u=function(r){var a,o;o=s.getCacheLoader(e),o||(o=s.getCacheLoader(c)),l&&(n instanceof Array?n instanceof Array&&(o(s.cache,l,r,n),a=s.reassembleDataFromCache(l,t)):(o(s.cache,l,r,[n]),a=r)),i(a)};if(t instanceof Array){n=[];for(var d=0;d<t.length;d++)o=s.cache.get(l,t[d]),o.hit||n.push(t[d]);if(!(n.length>0))return s.reassembleDataFromCache(l,t);this.loadJSON(e,n,r,u,a)}else n=t,o=s.cache.get(l,t),o.hit?i(o.result):this.loadJSON(e,n,r,u,a)},n.prototype.loadJSON=function(t,r,a,n,c){var l,u,d;switch(e.isFunction(a)&&(c=n,n=a,a=null),t){case"widget":l="../shared/widget/"+r+"/non-dist/data/widget.json";break;case"widgetDefinition":l="../shared/widget/"+r+"/non-dist/data/widget.json"}if(l)return void e.ajax({url:l,dataType:"json",type:"GET",success:n,error:c});u={};var p=null,h=!1;switch(t){case"layout":l=i.ENDPOINT_PAGES_GET_PAGE,p=r,u=a;break;case"cart":if(!r||"object"!=typeof r||r.length<1)throw"Error with getting cart";a&&(u=a),u[i.CATALOG]=r[0],u[i.PRODUCT_IDS]=r[1],r[2]&&(u[i.INCLUDE_HISTORICAL]=r[2]),r[3]&&(u[i.STORE_PRICELISTGROUP_ID]=r[3]),r[4]&&(u[i.FIELDS_QUERY_PARAM]=r[4]),r[5]&&(u[i.INCLUDE_CKILD_SKUS_LISTING_IDS]=r[5]),l=i.ENDPOINT_PRODUCTS_LIST_PRODUCTS;break;case"getCurrentProfileOrder":a&&(u=a),l=i.ENDPOINT_GET_PROFILE_ORDER,d="price";break;case"getStockStatus":a&&(u=a),p=r[1],u[i.SKU_ID]=r[0],u[i.CATALOG]=r[2],l=i.ENDPOINT_GET_PRODUCT_AVAILABILITY;break;case i.ENDPOINT_GET_INITIAL_ORDER:p=r,u=a,l=i.ENDPOINT_GET_INITIAL_ORDER;break;case"getStockStatuses":u[i.PRODUCTS_PARAM]=a.products,u[i.CATALOG]=a.catalogId,a.filterKey&&a.filterKey.length>0&&(u[i.FILTER_KEY]=a.filterKey),l=i.ENDPOINT_PRODUCTS_AVAILABILITY;break;case i.ENDPOINT_GET_PRODUCT_PRICES:p=r,a&&(u[i.SKU_ID]=a),null!=a&&a.constructor===Object&&a.filterKey&&a.filterKey.length>0&&(u[i.FILTER_KEY]=a.filterKey),l=i.ENDPOINT_GET_PRODUCT_PRICES;break;case"orderPricing":u=a,l=i.ENDPOINT_ORDERS_PRICE_ORDER,u[i.CHECKOUT]=!0,d="price";break;case"product":if(!r||"object"!=typeof r||r.length<=1)throw"Error with getting product";a&&(u=a),u[i.CATALOG]=r[1],l=i.ENDPOINT_PRODUCTS_GET_PRODUCT,p=r[0],d="product";break;case"productList":l=i.ENDPOINT_PRODUCTS_LIST_PRODUCTS,a&&(u=a),u[i.CATEGORY]=r,u[i.INCL_CHILDREN]=!0;break;case"categoryList":if(!r||"object"!=typeof r||r.length<=1)throw"Error with getting category list";a&&(u=a),u[i.CATALOG]=r[1],u[i.CATALOG_MAXLEVEL_PARAM]=r[2],u[i.EXPAND_QUERY_PARAM]="childCategories",r[3]?u[i.FIELDS_QUERY_PARAM]=r[3]:u.filterKey||(u[i.FIELDS_QUERY_PARAM]="childCategories(items)"),h=!0,l=i.ENDPOINT_COLLECTIONS_GET_COLLECTION,p=r[0];break;case"search":u=a,l=i.ENDPOINT_SEARCH_SEARCH;break;case"assembler":u=a,l=i.ENDPOINT_ASSEMBLE,p="assemble";break;case"paymentauthresponse":p=r,u=a,l=i.ENDPOINT_PAYMENT_GET_PAYMENT_AUTH_RESPONSE;break;case"paymentGroup":a&&(u=a),p=r,l=i.ENDPOINT_GET_PAYMENT_GROUP;break;case"getUser":a&&(u=a),l=i.ENDPOINT_GET_CURRENT_USER;break;case"updateProfile":p=null,u=a,l=i.ENDPOINT_UPDATE_PROFILE;break;case"changePassword":p=null,u=a,l=i.ENDPOINT_UPDATE_PROFILE;break;case"getAllOrdersForProfile":u=a,l=i.ENDPOINT_GET_ALL_ORDERS_FOR_PROFILE;break;case"getAllOrdersCountForProfile":u=a,null===u&&(u={}),u[i.COUNT_ONLY]=!0,l=i.ENDPOINT_GET_ALL_ORDERS_FOR_PROFILE;break;case"dynamicProperties":p=r,l=i.ENDPOINT_METADATA_GET_METADATA,u=a,null===u&&(u={}),u[i.DYNAMIC_ONLY]=!0;break;case"getItemType":p=r,l=i.ENDPOINT_GET_ITEM_TYPE,u=a,null===u&&(u={}),u[i.INCLUDE_BASE]=!1,u[i.PARENT]=r;break;case"sku":if(!r||"object"!=typeof r||r.length<1)throw"Error with getting sku";a&&(u=a),u[i.CATALOG]=r[0],u[i.SKU_IDS]=r[1],r[2]&&(u[i.STORE_PRICELISTGROUP_ID]=r[2]),l=i.ENDPOINT_PRODUCTS_LIST_SKUS;break;case"getGiftWithPurchaseChoices":l=i.ENDPOINT_GET_GIFT_CHOICES,a&&(u=a),u[i.GIFT_WITH_PURCHASE_DETAIL]=r[0],u[i.GIFT_WITH_PURCHASE_TYPE]=r[1];break;case"scheduledOrder":u=a,p=r,l=i.ENDPOINT_GET_SCHEDULED_ORDER;break;case"scheduledOrders":u=a,l=i.ENDPOINT_LIST_SCHEDULED_ORDERS_BY_PROFILE;break;case"listMembers":u=a,l=i.ENDPOINT_LIST_CONTACTS_BY_ORGANIZATION}if(!l)throw"No REST target found for item type: "+t;s.request(l,u,function(e){if(n){var t=e;h&&(t=t.items),n(t,d)}},function(e){e.status==i.HTTP_NOT_FOUND?o.goTo("/404",!0,!0):c&&e&&c(e)},p)},n.prototype.persistCreate=function(t,r,a,o,n,c){var l,u={};switch(e.isFunction(o)&&(c=n,n=o,o=null),t){case i.ENDPOINT_ORDERS_PRICE_ORDER:u=a,l=i.ENDPOINT_ORDERS_PRICE_ORDER;break;case i.ENDPOINT_CREATE_PROFILE:u=a,l=i.ENDPOINT_CREATE_PROFILE;break;case i.ENDPOINT_FORGOT_PASSWORD:u=a,l=i.ENDPOINT_FORGOT_PASSWORD;break;case i.ENDPOINT_UPDATE_EXPIRED_PASSWORD:u=a,l=i.ENDPOINT_UPDATE_EXPIRED_PASSWORD;break;case i.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS:u=a,l=i.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS;break;case"product":break;case"order":u=a,null!=o&&o.incomplete?(l=i.ENDPOINT_UPDATE_PROFILE_ORDER,u[i.OP]=i.CREATE_OP):l=i.ENDPOINT_ORDERS_CREATE_ORDER;break;case"requestQuote":u=a,l=i.ENDPOINT_QUOTE_REQUEST;break;case"rejectQuote":u=a,l=i.ENDPOINT_QUOTE_REJECT;break;case"payment":u=a,l=i.ENDPOINT_PAYMENT_AUTH_PAYMENT,u[i.SITE_ID]=o;break;case"scheduledOrder":u=a,l=i.ENDPOINT_CREATE_SCHEDULED_ORDER}if(!l)throw"No REST target found for item type: "+t;s.request(l,u,n,c)},n.prototype.persistUpdate=function(t,r,a,o,n,c){var l,u={},d=null;switch(e.isFunction(o)&&(c=n,n=o,o=null),t){case"product":break;case"order":u=a,l=i.ENDPOINT_UPDATE_PROFILE_ORDER,u[i.OP]=i.UPDATE_OP;break;case"updateOrder":u=a,d=r,l=i.ENDPOINT_UPDATE_ORDER;break;case"scheduledOrder":u=a,d=r,l=i.ENDPOINT_UPDATE_SCHEDULED_ORDER;break;case"updateOrganization":u=a,d=r,l=i.ENDPOINT_UPDATE_ORGANIZATION}if(!l)throw"No REST target found for item type: "+t;s.request(l,u,n,c,d)},n.prototype.persistRemove=function(t,r,a,o,n){var c,l={},u=null;switch(e.isFunction(a)&&(n=o,o=a,a=null),t){case"product":break;case"order":c=i.ENDPOINT_REMOVE_PROFILE_INCOMPLETE_ORDER;break;case"scheduledOrder":c=i.ENDPOINT_DELETE_SCHEDULED_ORDER,u=r}if(!c)throw"No REST target found for item type: "+t;s.request(c,l,o,n,u)},n}),define("pageLayout/api-builder",["knockout"],function(e){"use strict";return{regionBuilder:function(e,t){},widgetBuilder:function(e,t){e.prototype.getCurrent=function(e){var r=t.viewModelBuilder[e];return r?r.scope?t.contextHandler.get(e,r.scope):t.contextHandler.get(e,"page"):t.contextHandler.get(e)},e.prototype.setCurrent=function(e,r){var i=t.viewModelBuilder[e];i?i.scope?t.contextHandler.set(e,r,i.scope):t.contextHandler.set(e,r,"page"):t.contextHandler.set(e,r)},e.prototype.listen=function(e,r){t.contextHandler.listen(e,r)},e.prototype.load=function(e,r,i,a,o,n){t.load(e,r,i,a,o,n)},e.prototype.update=function(e,r,i,a,o,n,s){t.update(e,r,i,a,o,n,s)},e.prototype.create=function(e,r,i,a,o,n,s){t.create(e,r,i,a,o,n,s)},e.prototype.remove=function(e,r,i,a,o,n){t.remove(e,r,i,a,o,n)}}}}),define("ccNavState",["module","knockout","pubsub","ccConstants","navigation"],function(e,t,r,i,a){"use strict";function o(){var e=this;e.statusCode=t.observable(),e.referrer=t.observable(),e.slug=t.observable(),e.pageId=t.observable(),e.pageNumber=t.observable(),e.pageContext=t.observable(),e.route=t.observable(),$.Topic(r.topicNames.PAGE_VIEW_CHANGED).subscribe(function(t){t.pageId!=i.HTTP_NOT_FOUND?(e.statusCode(i.HTTP_OK),e.referrer(a.getPathWithLocale()),e.pageId(t.pageId),e.slug(t.seoslug),e.pageContext(t.contextId),e.pageNumber(t.pageNumber)):e.statusCode(i.HTTP_NOT_FOUND)})}return function(){var t;return null!=o.prototype._singleInstance?t=o.prototype._singleInstance:(t=new o,t.statusCode(e.config().statusCode),t.referrer(e.config().referrer),t.slug(e.config().slug),t.pageId(e.config().pageid),t.pageNumber(e.config().pageNumber),t.pageContext(e.config().pageContext),o.prototype._singleInstance=t),t}()}),define("routing",["jquery","crossroads","pubsub","ccConstants","navigation","ccNavState"],function(e,t,r,i,a,o){"use strict";function n(){function n(e,t){return e&&(e="/"===e.charAt(0)?e.substr(1):e),t&&(t="/"===t.charAt(0)?t.substr(1):t),e===t}function f(t,i,o){"/"==t&&(t="home");var l=!1;t=a.getPathWithoutLocale(t),n(s,t)&&o&&(l=!0),e.Topic(r.topicNames.PAGE_PAGINATION_CHANGE).publish({page:o,paginationOnly:l},[{message:"success"}]),i&&y.shouldDecode(t)&&(i=decodeURIComponent(i));var u={path:t,parameters:i,page:o,paginationOnly:l};l?c!==i&&e.Topic(r.topicNames.PAGE_PARAMETERS_CHANGED).publish(u):y.handleViewChanged(u),s=t,c=i,p=!0}function m(e,t,r){f(e,r,t)}function g(e){o.route(e),h[e]||(h[e]={pageNumber:t.addRoute(e+"/{pageNumber}",null,800),pageNumberParameters:t.addRoute(e+"/{pageNumber}?{parameters}",null,850)},h[e].pageNumber.matched.add(function(t){m(e,t)}),h[e].pageNumberParameters.matched.add(function(t,r){m(e,t,r)}))}function v(e,t){if("category"===e.data.page.pageId){var r=e.data.page.category.route;g(r)}}function E(){var t=window.location.pathname;if("200"===o.statusCode()&&o.pageNumber()&&o.pageNumber()>1){var n="",s=t.split("/"),c=s[s.length-1];if(c===o.pageNumber()){for(var l=0;l<s.length-1;l++)""!==s[l]&&(n=n+"/"+s[l]);g(n)}}window.location.search!=i.URL_SERVERSIDE&&(t+=window.location.search),"404"===o.statusCode()&&(t="/404"),e.Topic(r.topicNames.HISTORY_PUSH_STATE).publish(t),a.checkLogin&&a.checkLogin(t)}var y=this,b=t.parse;return t.parse=function(t,i){for(var o=t,n=!0,s=0;s<d.length;s++)if(t&&t.indexOf(d[s])!==-1){n=!1;break}n&&(o=y.uriEncodeQueryString(t));var c=a.getPath(),l={oldHash:c,newHash:o};e.Topic(r.topicNames.UPDATE_HASH_CHANGES).publish(l),o=a.getPathWithoutContext(o),b.call(this,o,i)},e.Topic(r.topicNames.HISTORY_PUSH_STATE).subscribe(y.historyPushed.bind(y)),l=t.addRoute("{path*}",null,500),l.matched.add(f),u=t.addRoute("{path*}?{parameters}",null,600),u.matched.add(f),e.Topic(r.topicNames.PAGE_LAYOUT_LOADED).subscribe(v),window.history&&window.history.pushState&&window.addEventListener("popstate",function(e){t.parse(location.pathname+location.search)}),E(),y}var s=null,c=null,l=null,u=null,d=["searchresults"],p=!1,h={};return n.prototype.uriEncodeQueryString=function(e){if(!e)return null;var t=e,r={};if(e.indexOf("?")!=-1){for(var i=e.split("?"),a=i[1].split("&"),o="",n=0;n<a.length;n++){var s=a[n].split("=");r[s[0]]=encodeURIComponent(s[1])}var c=!1;for(var l in r){var u=r[l];c&&(o+="&"),o+=l+"="+u,c=!0}t=i[0]+"?"+o}return t},n.prototype.historyPushed=function(e){t.parse(e)},n.prototype.handleViewChanged=function(t){e.Topic(r.topicNames.PAGE_VIEW_CHANGED).publish(t)},n.prototype.handleParametersChanged=function(t){e.Topic(r.topicNames.PAGE_PARAMETERS_CHANGED).publish(t)},n.prototype.shouldDecode=function(e){for(var t=!0,r=0;r<d.length;r++)if(d[r].indexOf(e)!==-1){t=!1;break}return t},n}),define("ccEETagProcessor",["pubsub","ccConstants","ccRestClient","jquery"],function(e,t,r,i){"use strict";function a(){}return a.prototype.excludedPages=[],a.prototype.location="",a.prototype.ccMetricsLocation="",a.prototype.configurations={},a.prototype.eeid=0,a.prototype.enabled=!0,a.prototype.tagLoaded=!1,a.prototype.metricsLoaded=!1,a.prototype.layoutId="",a.prototype.ccMetricsTracker={},a.prototype.init=function(){var a=this;a.enabled&&(a.deferred=i.Deferred(),r.request(t.ENDPOINT_GET_EE_PAGE_TAG_DATA,null,a.updateEETagDataSuccess.bind(a),a.updateEETagDataFail.bind(a)),i.Topic(e.topicNames.PAGE_READY).subscribe(function(e){""==a.location?a.deferred.done(function(){a.pageReady(e)}):a.pageReady(e)}),i.Topic(e.topicNames.PAGE_LAYOUT_LOADED).subscribe(a.setLayout.bind(a)),i.Topic(e.topicNames.PAGE_METADATA_CHANGED).subscribe(a.setLayout.bind(a)),i.Topic(e.topicNames.PAGE_VIEW_CHANGED).subscribe(a.pageChanged.bind(a)),i.Topic(e.topicNames.PAGE_CONTEXT_CHANGED).subscribe(a.pageChanged.bind(a)),i.Topic(e.topicNames.PAGE_PARAMETERS_CHANGED).subscribe(a.pageChanged.bind(a)))},a.prototype.updateEETagDataSuccess=function(e){var t=this;t.location=e.location,t.excludedPages=e.excludedPages,t.eeid=e.eeid,t.configurations=e.configurations,t.ccMetricsLocation=e.ccMetricsUrl,t.deferred.resolve()},a.prototype.updateEETagDataFail=function(t){i.Topic(e.topicNames.PAGE_READY).unsubscribe(self.pageReady.bind(self)),i.Topic(e.topicNames.PAGE_VIEW_CHANGED).unsubscribe(self.pageChanged.bind(self)),i.Topic(e.topicNames.PAGE_CONTEXT_CHANGED).unsubscribe(self.pageChanged.bind(self)),i.Topic(e.topicNames.PAGE_PARAMETERS_CHANGED).unsubscribe(self.pageChanged.bind(self)),i.Topic(e.topicNames.PAGE_LAYOUT_LOADED).unsubscribe(self.setLayout.bind(self)),i.Topic(e.topicNames.PAGE_METADATA_CHANGED).unsubscribe(self.setLayout.bind(self))},a.prototype.pageReady=function(e){var t=this;t.excludedPages.indexOf(e.pageId)==-1&&t.location&&(t.tagLoaded?window.ATGSvcs&&(ATGSvcs.setCfg&&ATGSvcs.setCfg("layoutId",t.layoutId),ATGSvcs.ee&&ATGSvcs.ee.reset()):(require([t.location],function(){if(window.ATGSvcs){window.OracleUnifiedVisit&&OracleUnifiedVisit.eeid&&ATGSvcs.setEXPID?(ATGSvcs.setEEID&&ATGSvcs.setEEID(OracleUnifiedVisit.eeid),ATGSvcs.setEXPID(t.eeid)):ATGSvcs.setEEID&&ATGSvcs.setEEID(t.eeid);for(var e in t.configurations)ATGSvcs.setCfg&&ATGSvcs.setCfg(e,t.configurations[e]);ATGSvcs.setCfg&&ATGSvcs.setCfg("layoutId",t.layoutId),ATGSvcs.ee&&ATGSvcs.ee.reset()}}),t.tagLoaded=!0)),t.excludedPages.indexOf(e.pageId)==-1&&t.ccMetricsLocation&&!t.metricsLoaded&&(require([t.ccMetricsLocation],function(e){t.ccMetricsTracker=e}),t.metricsLoaded=!0)},a.prototype.pageChanged=function(e){var t=this;"undefined"!=typeof window.ATGSvcs&&window.ATGSvcs&&t.excludedPages.indexOf(e.pageId)>-1&&(ATGSvcs.stopRules&&ATGSvcs.stopRules(),delete window.ATGSvcs,require.undef(t.location),t.tagLoaded=!1),t.ccMetricsLocation&&t.excludedPages.indexOf(e.pageId)>-1&&(t.ccMetricsTracker.ccMetricUnhook&&t.ccMetricsTracker.ccMetricUnhook(),require.undef(t.ccMetricsLocation),t.metricsLoaded=!1)},a.prototype.setLayout=function(e,t){var r=this;r.layoutId=e.layout()},new a}),define("notifications",["jquery","knockout","ccConstants","CCi18n"],function(e,t,r,i){"use strict";function a(){var a,o,n=this,s=0,c=65;n.enabled=!0,n.CLOSE_BUTTON_HTML='<a href="#" class="close cc-notification-close pull-right" data-dismiss="alert"><i class="fa fa-times-circle"></i><span class="cc-reader-text">Close notification</span></a>',n.notify=function(t,r){if(n.enabled||r)if(Array.isArray(t))e.each(t,function(e,t){if(null===t.style)throw"Notification type unknown";n.notifyBuild(t)});else{if(null===t.style)throw"Notification type unknown";n.notifyBuild(t)}},n.growlSuccess=function(t,r){Array.isArray(t)?e.each(t,function(e,r){r.style="growl",r.status="success",r.close=!0,r.fade=!0,r.header=t.header||i.t("ns.common:resources.successText")}):(t.style="growl",t.status="success",t.close=!0,t.fade=!0,t.header=t.header||i.t("ns.common:resources.successText")),n.notify(t,r)},n.growlError=function(t,r){Array.isArray(t)?e.each(t,function(e,r){r.style="growl",r.status="error",r.close=!0,r.fade=!0,r.header=t.header||i.t("ns.common:resources.errorText")}):(t.style="growl",t.status="error",t.close=!0,t.fade=!0,t.header=t.header||i.t("ns.common:resources.errorText")),n.notify(t,r)},n.growlRestError=function(e,t,r){var i;e.errors&&e.errors.length>0&&(e.errors[0].message&&(t.message=e.errors[0].message),e.errors[0].errorCode&&(i=e.errors[0].errorCode)),t.code=e.errorCode||i||" ",n.growlError(t,r)},n.inlineError=function(t,r){Array.isArray(t)?e.each(t,function(e,t){t.style="inline",t.status="error",t.close=!1,t.fade=!1}):(t.style="inline",t.status="error",t.close=!1,t.fade=!1),n.notify(t,r)},n.inlineConfirm=function(t,r){Array.isArray(t)?e.each(t,function(e,t){t.style="inline",t.status="confirm",t.curtain=!0,t.close=!1,t.fade=!1}):(t.style="inline",t.status="confirm",t.curtain=!0,t.close=!1,t.fade=!1),n.notify(t,r)},n.growlInfo=function(t,r){Array.isArray(t)?e.each(t,function(e,t){t.style="growl",t.status="info",t.close=!0,t.fade=!0,t.header=this.header||i.t("ns.common:resources.warningText")}):(t.style="growl",t.status="info",t.close=!0,t.fade=!0,t.header=this.header||i.t("ns.common:resources.warningText")),n.notify(t,r)},n.okCancel=function(e,t){e.style="inline",e.status="confirm",e.curtain=!0,e.close?e.actionOptionsFocus=1:e.close=!1,e.fade=!1,e.actionOptions=[{actionOption1:[{text:e.okButtonText||i.t("ns.common:resources.okText"),classes:this.PRIMARY_BUTTON_CLASS,callback:e.okCallback}],actionOption2:[{text:e.cancelButtonText||i.t("ns.common:resources.cancelText"),classes:this.BUTTON_CLASS,callback:e.cancelCallback}]}],n.notify(e,t)},n.continueConfirm=function(e,t){e.style="inline",e.status="confirm",e.curtain=!0,e.close=!1,e.fade=!1,e.actionOptions=[{actionOption1:[{text:i.t("ns.common:resources.continueText"),action:"",classes:"btn cc-btn-primary"}]}],n.notify(e,t)},n.unsavedChangesConfirm=function(e,t){e.header=i.t("ns.common:resources.unsavedChangesHeaderText"),e.message=i.t("ns.common:resources.unsavedChangesMsgText"),e.okButtonText=e.okButtonText||i.t("ns.common:resources.saveChangesText"),e.cancelButtonText=i.t("ns.common:resources.discardChangesText"),e.okCallback=e.okCallback||e.saveCallback,e.cancelCallback=e.cancelCallback||e.discardCallback,n.okCancel(e,t)},n.clearNotifications=function(t){0!==e(t).find(".cc-notification").length&&e(t).find(".cc-notification").remove()},n.emptyNotifications=function(t){e(t).empty()},n.emptyGrowlMessages=function(){e(".cc-notification-growl").remove()},n.notifyID=function(e){var t="cc-notification-"+e+"-";return t+s},n.notifyBuild=function(a){var s,c,l,u="alert cc-notification ",d="",p="",h="",f="",m=0,g="",v=0,E="",y=!1;if(e("#cc-notification-aria-message").remove(),u+="cc-notification-"+a.style+" ",a.status&&""!==a.status&&(u+="alert-"+a.status),l=a.customNotificationID&&""!==a.customNotificationID?a.customNotificationID:n.notifyID(a.style),s=e("<div />").attr({id:l,class:u}),a.close&&e(s).append(n.CLOSE_BUTTON_HTML),a.header&&(e(s).append(e("<div />").attr({class:"cc-notification-header"}).html(e("<div />").text(a.header).html())),g+=a.header+" "),a.message&&(E="cc-notification-message"+(a.header?"":" cc-notification-message-only"),"string"!=typeof a.message?e.each(a.message,function(t,r){e(s).append(e("<div />").attr("class",E).html(e("<div />").text(r).html())),g+=r}):(e(s).append(e("<div />").attr("class",E).html(e("<div />").text(a.message).html())),g+=a.message),"error"===a.status?e("#cc-aria-announce").attr("role","alert"):e("#cc-aria-announce").attr("role","region")),a.template){var b=n.parseTemplateUrl(a.template),I=e("<div/>").attr("data-bind",'template: {name: "'+b.name+'", templateUrl: "'+b.url+'"}');e(s).append(I),t.applyBindings(a.templateData,I.get(0))}if(a.actionOptions&&(y=n.hasCallbacks(a.actionOptions[0]),c=e("<div />").attr("class","cc-notification-actions"),"inline"===a.style&&a.curtain===!0&&(e(s).addClass("cc-notification-with-curtain"),p="$('.cc-curtain').remove();",h="$(this).closest('.cc-notification-inline').remove();$('body').removeClass('no-scroll');",h+="if($('.cc-notification-outer').length > 0) {$('.cc-notification-outer').remove();}",a.modal===!0&&e(a.id).parent(".modal").on("hidden",function(){e(".cc-curtain").remove()})),e.each(a.actionOptions[0],function(t,r){f="",r[0].onCloseFocus&&(f="$('"+r[0].onCloseFocus+"').notificationsSetFocus();");var i="";r[0].readerText&&(i=r[0].readerText),y?e(c).append(e("<button />").attr({id:"cc-notification-actionbutton-"+t,class:"cc-notification-actionbutton-class "+r[0].classes}).attr("data-bind","makeAccess: {readerText: "+i+"}").text(r[0].text)):e(c).append(e("<button />").attr({class:r[0].classes,onClick:h+p+f+r[0].action}).attr("data-bind","makeAccess: {readerText: "+i+"}").text(r[0].text))}),e(s).append(c)),a.formErrors){var T,S,_=e("<div />").attr("class","cc-notification-errorFields").append(e("<ul />"));e.each(a.formErrors,function(t,r){d="$('#"+r.formId+"').notificationsSetFocus()",a.focusFunction?_.append(e("<li />").append(e("<a />").attr({href:"javascript:void(0);"}).text(r.label).on("click",function(){a.focusFunction(r.formId)}))):1===e("#"+r.formId).parents(".tab-pane").length?(S=e("#"+r.formId).parents(".tab-pane"),1===e("#"+S[0].id).closest(".modal").length?T=e("#"+S[0].id).closest(".modal").find(".cc-nav-tabs a[href='#"+S[0].id+"']").parent():(T=e("#tab-"+S[0].id),0===T.length&&(T=e("#"+S[0].id).closest(".panel").find(".cc-nav-tabs a[href='#"+S[0].id+"']").parent())),_.append(e("<li />").append(e("<a />").attr({href:"javascript:void(0);",onClick:"$('#"+T[0].id+" a').tab('show');$('#"+r.formId+"').notificationsSetFocus()"}).text(r.label)))):_.append(e("<li />").append(e("<a />").attr({href:"javascript:void(0);",onClick:"$('#"+r.formId+"').notificationsSetFocus()"}).text(r.label))),g+=" "+r.label}),e(s).append(_)}if(e("body").prepend(e("<div />").attr({id:"cc-notification-aria-message",class:"cc-reader-text",role:"alert","aria-relevant":"additions removals","aria-live":"assertive"}).text(g)),a.code){var P=i.t("ns.common:resources.returnCodeLabel");e(s).append(e("<div />").attr({class:"cc-notification-errorCode"}).text(P+": "+a.code))}if("inline"==a.style?a.curtain===!0?(e(s).addClass("cc-inline-curtain"),o=e("<div />").attr({class:"cc-notification-outer"}),e(a.id).prepend(e(o).append(e(s)))):e(a.id).hasClass("oj-tabs")?e(a.id).children("div").each(function(){e(this).prepend(e(s).clone(!0))}):e(a.id).prepend(e(s)):"growl"==a.style&&(e("body").append(e(s)),n.notifyTop(),e(s).bind("closed",function(){setTimeout(function(){n.notifyTop()},100);n.notifyFocus()})),e(".cc-notification-close").on("click",function(){var t=e(".cc-notification-outer");if(e("body").hasClass("no-scroll")&&e("body").removeClass("no-scroll"),e(".cc-curtain")&&e(".cc-curtain").remove(),t){var r=t.parent();e(".cc-notification-outer").remove(),e(r).find(":tabbable").first().focus()}a.closeHandler&&a.closeHandler()}),y&&e.each(a.actionOptions[0],function(t,r){var i=e("#cc-notification-actionbutton-"+t);i&&i.on("click",function(){"inline"===a.style&&a.curtain===!0&&(e(this).closest(".cc-notification-inline").remove(),e(this).closest(".cc-notification-growl").remove(),e("body").removeClass("no-scroll"),e(".cc-notification-outer").length>0&&e(".cc-notification-outer").remove(),e(".cc-curtain").remove()),r[0].onCloseFocus&&e(r[0].onCloseFocus).notificationsSetFocus(),r[0].callback&&r[0].callback(),n.cleanUp()})}),a.fade!==!1){var A=r.NOTIFICATION_FADE_DEFAULT;a.fade!==!0&&(A=a.fade);var C=r.NOTIFICATION_DELAY_DEFAULT;a.delay&&(C=a.delay),e(s).delay(C).fadeOut(A,n.doFade),e(s).mouseenter(function(){e(this).stop(!0,!0)}),e(s).mouseleave(function(){e(this).fadeOut(A,n.doFade)})}a.curtain===!0&&("inline"===a.style?0!==e(a.id).parents(".modal-content").length?e(a.id).parents(".modal-content").append(e("<div />").attr("class","cc-curtain fade in")):(e(a.id).append(e("<div />").attr("class","cc-curtain fade in").attr("style","z-index:1042")),window.scrollTo(0,e(a.id).offset().top),window.setTimeout(function(){e("body").addClass("no-scroll")},0)):e("body").append(e("<div />").attr("class","modal-backdrop fade in")),v=e(".cc-notification-with-curtain :tabbable"),m=v.size(),v.each(function(t){e(this).on("keydown",function(t){if(9===t.keyCode){var r;t.shiftKey?(r=parseInt(v.index(e(this)),10)-1,r<0&&(t.preventDefault(),v[m-1].focus())):(r=parseInt(v.index(e(this)),10)+1,r===m&&(t.preventDefault(),v[0].focus()))}})}),a.actionOptionsFocus?e(v[a.actionOptionsFocus]).focus():e(v[0]).focus())},n.doFade=function(){e(this).remove(),e("#notification-info").text("");setTimeout(function(){n.notifyTop()},100);n.notifyFocus()},n.notifyTop=function(){a=e("body").children(".cc-notification-growl"),a.length>=0&&e.each(a,function(t,r){t>0&&(c+=30),e(r).css("top",c),c+=e(r).height()}),c=65},n.notifyFocus=function(){e("#CC-Oracle-Nav UL.nav.nav-pills LI A:first").focus()},n.parseTemplateUrl=function(e){for(""!==infuser.defaults.templateSuffix&&e.indexOf(".")>=0&&(e=e.substring(0,e.lastIndexOf(".")));0===e.indexOf("/");)e=e.substring(1);return{url:e.substring(0,e.lastIndexOf("/")),name:e.substring(e.lastIndexOf("/")+1)}},n.cleanUp=function(){var t=e(".cc-notification-actionbutton-class");t&&t.off("click");var r=e(".cc-notification-close");r&&r.off("click")},n.hasCallbacks=function(t){var r=!1;return e.each(t,function(e,t){t[0].callback&&(r=!0)}),r},n.overlayId="#cc-overlay-clone",n.createNotificationOverlay=function(){var t=e('div[id$="_layer_overlay"]');if(t){var r=t.clone();r.attr("id","cc-overlay-clone"),r.css("opacity","1"),r.css("background","none"),e("#__oj_zorder_container").append(r),r.zIndex(r.zIndex()+1)}},n.destroyNotificationOverlay=function(){var t=e("#cc-overlay-clone");t&&t.length>0&&t.remove()}}return e.fn.notificationsSetFocus=function(){this.is(":visible")?this.focus():this.triggerHandler("focus"),this.data&&this.data().select2&&this.select2("open")},a.prototype.PRIMARY_BUTTON_CLASS="btn cc-btn-primary pull-right",a.prototype.DEFAULT_BUTTON_CLASS="btn btn-default",a.prototype.BUTTON_CLASS="btn",new a}),define("ccOAuthTimeout",["ccConstants","jquery","pubsub","notifications","CCi18n"],function(e,t,r,i,a){"use strict";function o(o){var n=!1,s=null,c=null,l=null,u=null,d="cc-warn-session-timeout-alert",p="cc-expire-session-alert",h=function(){
t.Topic(r.topicNames.USER_SESSION_VALID).publish(),o.storeRequestWasMade=!1,n=!1,I()},f=function(){var e=function(e){};o.loggedIn&&(n||o.storeRequestWasMade)&&o.refresh(h,e)},m=function(){o.loggedIn&&null==s&&(s=setInterval(f,e.TOKEN_REFRESH_INTERVAL))},g=function(){s&&(clearInterval(s),s=null)},v=function(){if(u=t(document.activeElement),u.is("iframe"))try{u=t(document.activeElement.contentWindow.document.activeElement)}catch(e){}},E=function(){o.profileType==e.PROFILE_TYPE_ADMIN&&0==t(".cc-notification").length&&(v(),i.notify([{style:"inline",id:"#cc-message-center",customNotificationID:d,status:"confirm",curtain:!0,close:!1,fade:!1,header:a.t("ns.common:resources.sessionTimeoutHeader"),message:a.t("ns.common:resources.sessionTimeoutMessage"),actionOptions:[{actionOption1:[{text:a.t("ns.common:resources.okText"),action:"",classes:"btn cc-submit-changes-btn cc-btn-primary"}]}]}]),t("button","#"+d).each(function(){var e=this.onclick.bind(this);t(this).prop("onclick",null).on("click",function(){_(),f(),u&&u.focus(),e instanceof Function&&e()})}),t("#"+d).closest("div.cc-notification-outer").next("div.cc-curtain").on("click",function(){t("button","#"+d).focus()}),S())},y=function(){t("#"+d).closest("div.cc-notification-outer").next("div.cc-curtain").andSelf().remove()},b=function(){o.profileType==e.PROFILE_TYPE_ADMIN&&t("#"+d).length&&(y(),i.notify([{style:"inline",id:"#cc-message-center",customNotificationID:p,status:"confirm",curtain:!0,close:!1,fade:!1,header:a.t("ns.common:resources.sessionExpiryHeader"),message:a.t("ns.common:resources.sessionExpiryMessage"),actionOptions:[{actionOption1:[{text:a.t("ns.common:resources.okText"),action:"",classes:"btn cc-submit-changes-btn cc-btn-primary"}]}]}]),t("button","#"+p).each(function(){t(this).prop("onclick",null).on("click",function(){var e=o.redirectToAdminLoginScreen.bind(o);o.logout(e,e)})}),t("#"+p).closest("div.cc-notification-outer").next("div.cc-curtain").on("click",function(){t("button","#"+p).focus()}))},I=function(){o.profileType==e.PROFILE_TYPE_ADMIN&&(T(),c=setTimeout(E,e.TOKEN_WARNING_TIMEOUT))},T=function(){c&&(clearTimeout(c),c=null)},S=function(){o.profileType==e.PROFILE_TYPE_ADMIN&&(_(),l=setTimeout(b,e.TOKEN_EXPIRED_MESSAGE_TIMEOUT))},_=function(){l&&(clearTimeout(l),l=null)},P=function(){t("html").off(".cctimer"),o.loggedIn&&(m(),o.profileType==e.PROFILE_TYPE_ADMIN?(I(),t("html").on("keyup.cctimer mouseup.cctimer",function(){n=!0}),o.registerLoginUpdateCallback(function(){_(),y(),h()}),o.registerLogoutUpdateCallback(function(){t("button","#"+p).trigger("click")})):o.profileType==e.PROFILE_TYPE_LAYOUT_PREVIEW&&parent.$&&t("html").on("keyup.cctimer mouseup.cctimer",function(e){parent.$("html",parent.document).trigger(e)}))},A=function(){g(),T(),_(),t("html").off(".cctimer")};o.registerInitCallback(P),t.Topic(r.topicNames.AUTH_LOGIN_SUCCCESS).subscribe(P),t.Topic(r.topicNames.AUTH_LOGOUT_SUCCESS).subscribe(A),t.Topic(r.topicNames.USER_LOGIN_SUCCESSFUL).subscribe(P),t.Topic(r.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).subscribe(P),t.Topic(r.topicNames.USER_LOGOUT_SUCCESSFUL).subscribe(A),t.Topic(r.topicNames.USER_SESSION_EXPIRED).subscribe(A),o.profileType==e.PROFILE_TYPE_LAYOUT_PREVIEW&&t.Topic(r.topicNames.PAGE_READY).subscribe(P)}return o}),define("ccPreviewBar",["storageApi","ccConstants","ccRestClient","pubsub","CCi18n","knockout","jquery"],function(e,t,r,i,a,o,n){"use strict";function s(){if(s.singleInstance)throw new Error("Cannot instantiate more than one CCPreviewBar, use getInstance()");var d=this;this.isMinifyJs=o.observable(),this.cssPath="/shared/css/oj-preview-bar.css",this.templateUrl="/shared/templates",this.templateName="preview-bar.template",this.selectedSite=o.observable(),this.debugMenuButtonText=o.observable("Debug Tools"),this.minifyJsText=o.observable("Minify JavaScript"),this.siteSelectionLabel=o.observable("Site Selection"),this.ojLoaded=n.Deferred();var p,h=!1;if(this.isDisableMinifyJs=o.computed(function(){return r.previewMode&&!d.isMinifyJs()}),this.storeMinifyJs=function(t,r){"rawValue"!==r.option&&"value"!==r.option||void 0===r.previousValue||e.getInstance().setSessionItem(l,d.isMinifyJs())},this.initDebugMenu=function(){if(r.previewMode){var t=e.getInstance().getSessionItem(l);"true"===t||t===!0||null===t?this.isMinifyJs(!0):this.isMinifyJs(!1),p=this.isMinifyJs()}},this.initSiteSelection=function(e){if(r.previewMode){var i=e.data.global.multisite;d.validateSiteSelection={Init:function(){},getHint:function(){},validate:function(e){var t=i.filter(function(t){return e[0]===t.id});if(t.length>0)return!0;throw new Error(a.t("ns.common:resources.siteSelectionNoMatchesError"))}};var o=r.getStoredValue(t.LOCAL_STORAGE_SITE_ID);if(o){var n=d.getURLParameter(window.location.search,t.URL_SITE_PARAM),s=i.filter(function(e){return n===e.id});n&&""!=n?o!==n&&s.length>0?(r.setStoredValue(t.LOCAL_STORAGE_SITE_ID,n),d.selectedSite(n)):d.selectedSite(o):d.refreshPageWithNewSite(o)}else{var c=i.filter(function(e){return e.defaultSite});c.length>0&&d.selectedSite(c[0].id)}}},this.clearMinJsFlag=function(){e.getInstance().removeSessionItem(l)},this.maybeRefreshPage=function(e){"/payment"!=e&&"/confirmation/"!=e.substring(0,14)&&null!==p&&p!=d.isMinifyJs()&&this.refreshPage(e)},this.refreshPage=function(e){if(r.previewMode){var t=window.location.origin+("/"===e.charAt(0)?e:"/"+e);window.location.assign(t)}},this.focusSwitch=function(e){e.originalEvent&&("click"===e.originalEvent.type&&e.originalEvent.pageX<=0&&e.originalEvent.pageY<=0||"keydown"===e.originalEvent.type)&&(n(u+" + div.oj-switch-container").find("div.oj-switch-thumb").focus(),h=!0)},this.attachEventHandlers=function(){n(u+" + div.oj-switch-container").find("div.oj-switch-thumb").on("keyup"+c,function(e){return e.keyCode===t.KEY_CODE_ENTER&&h?(h=!1,!1):(h=!1,!0)}).on("keydown"+c,function(e){return h=!1,e.keyCode!==t.KEY_CODE_ENTER&&e.keyCode!==t.KEY_CODE_SPACE||(e.stopPropagation(),e.preventDefault()),!0});var e;n("#oj-combobox-input-previewBarSiteSelection").on("focus",function(t){e!==this&&(e=this,setTimeout(function(){e.select()},50))})},this.getURLParameter=function(e,t){if(e&&""!==e){var r,i=(e.split("?")[0],[]),a=e.split("?")[1];if(""!==a){i=a.split("&");for(var o=i.length-1;o>=0;o-=1)if(r=i[o].split("=")[0],r===t)return i[o].split("=")[1]}}return null},this.removeParamFromURL=function(e,t){if(t.indexOf("?")===-1)return t;var r,i=t.split("?")[0],a=[],o=t.split("?")[1];if(""!==o){a=o.split("&");for(var n=a.length-1;n>=0;n-=1)r=a[n].split("=")[0],r===e&&a.splice(n,1);a.length>0&&(i=i+"?"+a.join("&"))}return i},this.changeSiteCallBack=function(e,i){if("value"===i.option){var a=r.getStoredValue(t.LOCAL_STORAGE_SITE_ID),o=i.value[0];o!==a&&(r.setStoredValue(t.LOCAL_STORAGE_SITE_ID,o),d.refreshPageWithNewSite(o))}},this.refreshPageWithNewSite=function(e){var r=d.removeParamFromURL(t.URL_SITE_PARAM,window.location.search);r+=r.indexOf("?")===-1?"?":"&",r+=t.URL_SITE_PARAM+"="+encodeURIComponent(e),d.refreshPage.call(d,window.location.pathname+r)},r.previewMode){n.Topic(i.topicNames.HISTORY_PUSH_STATE).subscribe(this.maybeRefreshPage.bind(this)),window.history&&window.history.pushState&&window.addEventListener("popstate",function(e){d.maybeRefreshPage.call(d,window.location.pathname+window.location.search)}),n.Topic(i.topicNames.LOCALE_READY).subscribe(function(e){d.debugMenuButtonText(a.t("ns.common:resources.debugMenuButtonText")),d.minifyJsText(a.t("ns.common:resources.minifyJsText")),d.siteSelectionLabel(a.t("ns.common:resources.siteSelectionLabel"))}),r.registerLogoutAdminUpdateCallback(this.clearMinJsFlag),this.initDebugMenu(),n.Topic(i.topicNames.PAGE_LAYOUT_LOADED).subscribe(this.initSiteSelection);var f=["ojs/ojcore","ojs/ojknockout","ojs/ojswitch","ojs/ojbutton","ojs/ojmenu","ojs/ojselectcombobox"];require(f,function(){d.ojLoaded.resolve()})}}var c=".previewBar",l="min_js_preview",u="#previewMinifySwitch";return s.getInstance=function(){return s.singleInstance||(s.singleInstance=new s),s.singleInstance},s}),function(){function e(e,t,r,i,a,o){return t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),!!t[e]&&(r.push(e),!0!==t[e]&&1!==t[e]||i.push(a+e+"/"+o),!0)}function t(e){var t=e.toLowerCase().split(/-|_/);e=[t[0]];var r,i=1;for(r=1;r<t.length;r++){var a=t[r],o=a.length;if(1==o)break;switch(i){case 1:if(i=2,4==o){e.push(a.charAt(0).toUpperCase()+a.slice(1));break}case 2:i=3,e.push(a.toUpperCase());break;default:e.push(a)}}return"zh"!=e[0]||1<e.length&&4==e[1].length||(t="Hans",i=1<e.length?e[1]:null,"TW"!==i&&"MO"!==i&&"HK"!==i||(t="Hant"),e.splice(1,0,t)),e}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&(null==e[i]?e[i]=t[i]:"object"==typeof t[i]&&"object"==typeof e[i]&&r(e[i],t[i]))}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(a){var o=a.config?a.config():{};return{version:"2.0.1+",load:function(a,n,s,c){c=c||{},c.locale&&(o.locale=c.locale);var l,u,d,p,h,f,m,g,v,E=i.exec(a),y=E[1],b=E[5],I=[],T={},S="";for(E[5]?(y=E[1],a=y+b,l=E[4]):(b=E[4],l=o.locale,"undefined"!=typeof document?(l||(l=c.isBuild?"root":document.documentElement.lang)||(l=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),o.locale=l):l="root"),u=t(l),p=o.noOverlay,h=o.defaultNoOverlayLocale,(E=o.merge)&&(f=E[y+b])&&(E=i.exec(f),m=E[1],g=E[4]),v=[],d=0;d<u.length;d++)E=u[d],S+=(S?"-":"")+E,v.push(S);c.isBuild?(I.push(a),f&&I.push(f),n(I,function(){s()})):("query"==o.includeLocale&&(a=n.toUrl(a+".js"),a+=(-1===a.indexOf("?")?"?":"&")+"loc="+l),c=[a],f&&c.push(f),n(c,function(t,i){var a,o=[],c=!1,l=p||!0===t.__noOverlay,f=h||t.__defaultNoOverlayLocale;for(d=v.length-1;0<=d&&(!c||!l);d--)c=e(v[d],t,o,I,y,b);if(l&&!c&&f&&e(f,t,o,I,y,b),e("root",t,o,I,y,b),a=o.length,i){for(c=!1,l=!0===i.__noOverlay,f=i.__defaultNoOverlayLocale,d=v.length-1;0<=d&&(!c||!l);d--)c=e(v[d],i,o,I,m,g);l&&!c&&f&&e(f,i,o,I,m,g),e("root",i,o,I,m,g)}n(I,function(){var e,c,l;for(e=a;e<o.length&&o[e];e++)l=o[e],c=i[l],!0!==c&&1!==c||(c=n(m+l+"/"+g)),r(T,c);for(e=0;e<a&&o[e];e++)l=o[e],c=t[l],!0!==c&&1!==c||(c=n(y+l+"/"+b)),r(T,c);T._ojLocale_=u.join("-"),s(T)})}))}}})}(),define("ojtranslations/nls/ojtranslations",{root:{"oj-message":{fatal:"Fatal",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation","compact-type-summary":"{0}: {1}"},"oj-converter":{summary:"Value is not in the expected format.",detail:"Enter a value in the expected format.","plural-separator":", ",hint:{summary:"Example: {exampleValue}",detail:"Enter a value in the same format as this example: '{exampleValue}'","detail-plural":"Enter a value in the same format as these examples: '{exampleValue}'"},optionHint:{detail:"An accepted value for option '{propertyName}' is '{propertyValueValid}'.","detail-plural":"Accepted values for option '{propertyName}' are '{propertyValueValid}'."},optionTypesMismatch:{summary:"A value for the option '{requiredPropertyName}' is required when the option '{propertyName}' is set to '{propertyValue}'."},optionTypeInvalid:{summary:"A value of the expected type was not provided for option '{propertyName}'."},optionOutOfRange:{summary:"Value {propertyValue} is out of range for the option '{propertyName}'."},optionValueInvalid:{summary:"An invalid value '{propertyValue}' was specified for the option '{propertyName}'."},number:{decimalFormatMismatch:{summary:"'{value}' is not in the expected number format."},decimalFormatUnsupportedParse:{summary:"decimalFormat: 'short' and 'long' are not supported for converter parsing.",detail:"Change component to readOnly. readOnly fields do not call the converter's parse function."},currencyFormatMismatch:{summary:"'{value}' is not in the expected currency format."},percentFormatMismatch:{summary:"'{value}' is not in the expected percent format."}},datetime:{datetimeOutOfRange:{summary:"Value '{value}' is out of range for the '{propertyName}'.",detail:"Enter a value between '{minValue}' and '{maxValue}'."},dateFormatMismatch:{summary:"'{value}' is not in the expected date format."},timeFormatMismatch:{summary:"'{value}' is not in the expected time format."},datetimeFormatMismatch:{summary:"'{value}' is not in the expected date and time format."},dateToWeekdayMismatch:{summary:"Day '{date}' does not fall on a '{weekday}'.",detail:"Enter a weekday that corresponds with the date."}}},"oj-validator":{length:{hint:{min:"Enter {min} or more characters.",max:"Enter {max} or fewer characters",inRange:"Enter {min} or more characters, up to a maximum of {max}.",exact:"Enter {length} characters."},messageDetail:{tooShort:"Enter {min} or more characters, not fewer.",tooLong:"Enter {max} or fewer characters, not more."},messageSummary:{tooShort:"There are too few characters.",tooLong:"There are too many characters."}},range:{number:{hint:{min:"Enter a number greater than or equal to {min}.",max:"Enter a number less than or equal to {max}.",inRange:"Enter a number between {min} and {max}."},messageDetail:{rangeUnderflow:"Number {value} must be greater than or equal to {min}.",rangeOverflow:"Number {value} must be less than or equal to {max}."},messageSummary:{rangeUnderflow:"Number is too low.",rangeOverflow:"Number is too high."}},datetime:{hint:{min:"Enter a date and time on or after {min}.",max:"Enter a date and time on or before {max}.",inRange:"Enter a date and time between {min} and {max}."},messageDetail:{rangeUnderflow:"Date and time must be on or later than {min}.",rangeOverflow:"Date and time must be on or sooner than {max}."},messageSummary:{rangeUnderflow:"Date and time is earlier than the minimum date.",rangeOverflow:"Date and time is later than the maximum date."}}},restriction:{date:{messageSummary:"Date {value} is of a disabled entry.",messageDetail:"Date {value} should not be of a disabled entry."}},regExp:{summary:"Format is incorrect.",detail:"Value '{value}' must match this pattern: '{pattern}'"},required:{summary:"Value is required.",detail:"You must enter a value."}},"oj-editableValue":{required:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputDate":{prevText:"Prev",nextText:"Next",currentText:"Today",weekHeader:"Wk",tooltipCalendar:"Select Date",tooltipCalendarDisabled:"Select Date Disabled",weekText:"Week",datePicker:"Date Picker",inputHelp:"Press Key down or Key up for access to Calendar",inputHelpBoth:"Press Key down or Key up for access to Calendar and Shift + Key down or Shift Key up for access to time drop down",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},dateRestriction:{hint:"",messageSummary:"",messageDetail:""}},"oj-ojInputTime":{tooltipTime:"Select Time",tooltipTimeDisabled:"Select Time Disabled",inputHelp:"Press Key down or Key up for access to time drop down",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}}},"oj-inputBase":{regexp:{messageSummary:"",messageDetail:""}},"oj-ojInputPassword":{regexp:{messageDetail:"Value must match this pattern: '{pattern}'"}},"oj-ojFilmStrip":{labelAccArrowNextPage:"Next Page",labelAccArrowPreviousPage:"Previous Page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous"},"oj-ojDataGrid":{accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleActionableMode:"Enter actionable mode",accessibleNavigationMode:"Enter navigation mode",accessibleSummaryExact:"This is a data grid with {rownum} rows and {colnum} columns",accessibleSummaryEstimate:"This is a data grid with unknown number of rows and columns",accessibleSummaryExpanded:"There are currently {num} rows expanded",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleRowSelected:"Row {row} selected",accessibleColumnSelected:"Column {column} selected",accessibleStateSelected:"selected",accessibleMultiCellSelected:"{num} cells selected",accessibleRowContext:"Row {index}",accessibleColumnContext:"Column {index}",accessibleRowHeaderContext:"Row Header {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleLevelContext:"Level {level}",accessibleRangeSelectModeOn:"Add selected range of cells mode on",accessibleRangeSelectModeOff:"Add selected range of cells mode off",accessibleFirstRow:"You have reached the first row",accessibleLastRow:"You have reached the last row",accessibleFirstColumn:"You have reached the first column",accessibleLastColumn:"You have reached the last column",accessibleSelectionAffordanceTop:"Top selection handle",accessibleSelectionAffordanceBottom:"Bottom selection handle",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",labelResize:"Resize",labelResizeWidth:"Resize Width",labelResizeHeight:"Resize Height",labelSortRow:"Sort Row",labelSortRowAsc:"Sort Row Ascending",labelSortRowDsc:"Sort Row Descending",labelSortCol:"Sort Column",labelSortColAsc:"Sort Column Ascending",labelSortColDsc:"Sort Column Descending",labelCut:"Cut",labelPaste:"Paste",labelEnableNonContiguous:"Enable Non-Contiguous Selection",labelDisableNonContiguous:"Disable Non-Contiguous Selection",labelResizeDialogSubmit:"OK"},"oj-ojRowExpander":{accessibleLevelDescription:"Level {level}",accessibleRowDescription:"Level {level}, Row {num} of {total}",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleStateExpanded:"expanded",accessibleStateCollapsed:"collapsed"},"oj-ojListView":{msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z"},"oj-_ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojInputNumber":{numberRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},tooltipDecrement:"Decrement",tooltipIncrement:"Increment"},"oj-ojTable":{labelAccSelectionAffordanceTop:"Top selection handle",labelAccSelectionAffordanceBottom:"Bottom selection handle",labelEnableNonContiguousSelection:"Enable Non-Contiguous Selection",labelDisableNonContiguousSelection:"Disable Non-Contiguous Selection",labelSelectRow:"Select Row",labelSelectColumn:"Select Column",labelSort:"Sort",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",msgFetchingData:"Fetching Data...",msgNoData:"No data to display."},"oj-ojTabs":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",labelReorder:"Reorder",removeCueText:"Removable"},"oj-ojSelect":{seachField:"Search field",noMatchesFound:"No matches found"},"oj-ojSwitch":{SwitchON:"On",SwitchOFF:"Off"},"oj-ojCombobox":{noMatchesFound:"No matches found"},"oj-ojInputSearch":{noMatchesFound:"No matches found"},"oj-ojTree":{stateLoading:"Loading...",labelNewNode:"New Node",labelMultiSelection:"Multiple Selection",labelEdit:"Edit",labelCreate:"Create",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelRemove:"Remove",labelRename:"Rename",labelNoData:"No data"},"oj-ojPagingControl":{labelAccPaging:"Pagination",labelAccNavFirstPage:"First Page",labelAccNavLastPage:"Last Page",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",labelAccNavPage:"Page",labelLoadMore:"Show More...",labelLoadMoreMaxRows:"Reached Maximum Limit of {maxRows} rows",labelNavInputPage:"Page",labelNavInputPageMax:"of {pageMax}",msgItemRangeCurrent:"{pageFrom}-{pageTo}",msgItemRangeCurrentSingle:"{pageFrom}",msgItemRangeOf:"of",msgItemRangeOfAtLeast:"of at least",msgItemRangeOfApprox:"of approx.",msgItemRangeItems:"items",tipNavInputPage:"Go To Page",tipNavPageLink:"Go To Page {pageNum}",tipNavNextPage:"Next",tipNavPreviousPage:"Previous",tipNavFirstPage:"First",tipNavLastPage:"Last",pageInvalid:{summary:"The page value entered is invalid.",detail:"Please enter a value greater than 0."},maxPageLinksInvalid:{summary:"Value for maxPageLinks is invalid.",detail:"Please enter a value greater than 4."}},"oj-ojMasonryLayout":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-panel":{labelAccButtonExpand:"Expand",labelAccButtonCollapse:"Collapse",labelAccButtonRemove:"Remove"},"oj-ojChart":{labelDefaultGroupName:"Group {0}",labelSeries:"Series",labelGroup:"Group",labelDate:"Date",labelValue:"Value",labelTargetValue:"Target",labelX:"X",labelY:"Y",labelZ:"Z",labelPercentage:"Percentage",labelLow:"Low",labelHigh:"High",labelOpen:"Open",labelClose:"Close",labelVolume:"Volume",labelMin:"Min",labelMax:"Max",labelOther:"Other",tooltipPan:"Pan",tooltipSelect:"Marquee select",tooltipZoom:"Marquee zoom",componentName:"Chart"},"oj-dvtBaseGauge":{componentName:"Gauge"},"oj-ojDiagram":{componentName:"Diagram"},"oj-ojLegend":{componentName:"Legend"},"oj-ojNBox":{highlightedCount:"{0}/{1}",labelOther:"Other",labelGroup:"Group",labelSize:"Size",labelAdditionalData:"Additional Data",componentName:"NBox"},"oj-ojPictoChart":{componentName:"Picture Chart"},"oj-ojSparkChart":{componentName:"Chart"},"oj-ojSunburst":{labelColor:"Color",labelSize:"Size",componentName:"Sunburst"},"oj-ojTagCloud":{componentName:"Tag Cloud"},"oj-ojThematicMap":{componentName:"Thematic Map"},"oj-ojTimeline":{componentName:"Timeline",labelSeries:"Series",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out"},"oj-ojTreemap":{labelColor:"Color",labelSize:"Size",tooltipIsolate:"Isolate",tooltipRestore:"Restore",componentName:"Treemap"},"oj-dvtBaseComponent":{labelScalingSuffixThousand:"K",labelScalingSuffixMillion:"M",labelScalingSuffixBillion:"B",labelScalingSuffixTrillion:"T",labelScalingSuffixQuadrillion:"Q",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",labelDataVisualization:"Data Visualization",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelAndValue:"{0}: {1}",labelCountWithTotal:"{0} of {1}"},"oj-ojNavigationList":{defaultRootLabel:"Navigation List",hierMenuBtnLabel:"Hierarchical Menu button",selectedLabel:"selected",previousIcon:"Previous",msgFetchingData:"Fetching Data...",msgNoData:"No items to display."},"oj-ojSlider":{noValue:"ojSlider has no value",maxMin:"Max must not be less than min",valueRange:"Value must be within min to max range",optionNum:"{option} option is not a number",invalidStep:"Invalid step; step must be > 0"},"oj-ojPopup":{ariaLiveRegionInitialFocusFirstFocusable:"Entering pop-up. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusNone:"Pop-up opened. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusFirstFocusableTouch:"Entering pop-up. Pop-up can be closed by navigating to the last link within the pop-up.",ariaLiveRegionInitialFocusNoneTouch:"Pop-up opened.  Navigate to the next link to establish focus within the pop-up.",ariaFocusSkipLink:"Double tap to navigate to the open pop-up.",ariaCloseSkipLink:"Double tap to close the open pop-up."},"oj-pullToRefresh":{ariaRefreshLink:"Activate link to refresh content",ariaRefreshingLink:"Refreshing content",ariaRefreshCompleteLink:"Refresh complete"},"oj-ojIndexer":{indexerOthers:"#",ariaDisabledLabel:"No matching group header",ariaOthersLabel:"number",ariaInBetweenText:"Between {first} and {second}",ariaKeyboardInstructionText:"Press enter to select value.",ariaTouchInstructionText:"Double tap and hold to enter gesture mode, then drag up or down to adjust value."}},ro:1,"zh-Hant":1,sv:1,ko:1,th:1,"zh-Hans":1,sk:1,pl:1,nl:1,fi:1,he:1,de:1,es:1,el:1,hu:1,ru:1,it:1,da:1,tr:1,ja:1,"pt-PT":1,cs:1,fr:1,no:1,pt:1,"fr-CA":1,ar:1});var o_a=this;define("ojs/ojcore",["require","ojL10n!ojtranslations/nls/ojtranslations"],function(e,t){var r={};"undefined"!=typeof window?r=window:"undefined"!=typeof self&&(r=self);var i=r.oj,a=r.oj={version:"2.0.2",build:"1",revision:"26417",noConflict:function(){r.oj=i}};a.q={},o_("Logger",a.q,a),a.q.U6=0,o_("Logger.LEVEL_NONE",a.q.U6,a),a.q.AF=1,o_("Logger.LEVEL_ERROR",a.q.AF,a),a.q.hn=2,o_("Logger.LEVEL_WARN",a.q.hn,a),a.q.Zr=3,o_("Logger.LEVEL_INFO",a.q.Zr,a),a.q.gQ=4,o_("Logger.LEVEL_LOG",a.q.gQ,a),a.q.R8="error",a.q.U8="warn",a.q.S8="info",a.q.T8="log",a.q.UU={level:a.q.AF,writer:null},a.q.kb=a.q.UU,a.q.error=function(e){a.q.ty(a.q.AF,a.q.R8,arguments)},o_("Logger.error",a.q.error,a),a.q.info=function(e){a.q.ty(a.q.Zr,a.q.S8,arguments)},o_("Logger.info",a.q.info,a),a.q.warn=function(e){a.q.ty(a.q.hn,a.q.U8,arguments)},o_("Logger.warn",a.q.warn,a),a.q.log=function(e){a.q.ty(a.q.gQ,a.q.T8,arguments)},o_("Logger.log",a.q.log,a),a.q.option=function(e,t){var r,i={};if(0==arguments.length){for(r in a.q.kb)a.q.kb.hasOwnProperty(r)&&(i[r]=a.q.kb[r]);return i}if("string"==typeof e&&void 0===t)return void 0===a.q.kb[e]?null:a.q.kb[e];if("string"==typeof e)a.q.kb[e]=t;else for(r in e)e.hasOwnProperty(r)&&a.q.option(r,e[r])},o_("Logger.option",a.q.option,a),a.q.ty=function(e,t,r){if(!(a.q.option("level")<e)){var i=a.q.ffa();null!=i&&(1==r.length&&r[0]instanceof Function&&(r=[r[0]()]),i[t]&&i[t].apply?i[t].apply(i,r):i[t]&&(i[t]=Function.prototype.bind.call(i[t],i),a.q.ty(e,t,r)))}},a.q.ffa=function(){var e=null;return a.q.option("writer")?e=a.q.option("writer"):"undefined"!=typeof window&&void 0!==window.console&&(e=window.console),e},a.q.vsa=function(e){return void 0!==a.q.UU[e]};var o=r.__ojCheckpointManager;a.Wh={},o_("CHECKPOINT_MANAGER",a.Wh,a),a.Wh.Mqa=function(e,t){o&&o.startCheckpoint(e,t)},o_("CHECKPOINT_MANAGER.startCheckpoint",a.Wh.Mqa,a),a.Wh.toa=function(e){o&&o.endCheckpoint(e)},o_("CHECKPOINT_MANAGER.endCheckpoint",a.Wh.toa,a),a.Wh.TN=function(e){return o?o.getRecord(e):void 0},o_("CHECKPOINT_MANAGER.getRecord",a.Wh.TN,a),a.Wh.H4=function(e){return o?o.matchRecords(e):[]},o_("CHECKPOINT_MANAGER.matchRecords",a.Wh.H4,a),a.Wh.qoa=function(e){a.q.info(function(){for(var t="Checkpoint Records:",r=a.Wh.H4(e),i=0;i<r.length;i++){var o=r[i],t=t+"\n"+o.name,n=o.description;null!=n&&(t=t+" ("+n+")"),t+=":\n",t=t+"start: "+o.start+"\tduration: "+o.duration}return t})},o_("CHECKPOINT_MANAGER.dump",a.Wh.qoa,a),a.b=function(){this.Init()},o_("Object",a.b,a),a.b.r=null,a.b.FM="oj.Object",a.b.p8=/function\s+([\w\$][\w\$\d]*)\s*\(/,a.b.prototype={},a.b.prototype.constructor=a.b,a.b.g=function(e,t){var r,i=null,o=null;for(r in t)if(t.hasOwnProperty(r)){i=r,o=t[r];break}var n=e.split(".");if(r=a[n[0]],n=n[2],i!=n&&null!=i){var s=r.lL;s||(s={},r.lL=s),s[i]=n,r.prototype[n]=o}},a.b.ga=function(e,t,r){a.l.Ho(e),a.l.wu(t),a.l.bN(r),void 0===t&&(t=a.b),a.l.assert(e!==t,"Class can't extend itself");var i=a.b.qma;i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.r=e.superclass=t.prototype,r&&(e.FM=r)},o_("Object.createSubclass",a.b.ga,a),a.b.Mna=function(e,t){var r;a.l.Ho(e),a.l.assert(null!=t,"source object cannot be null");for(r in t)t.hasOwnProperty(r)&&(e.prototype[r]=t[r])},o_("Object.copyPropertiesForClass",a.b.Mna,a),a.b.qma=function(){},a.b.prototype.X2=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},a.b.g("Object.prototype.getClass",{X2:a.b.prototype.X2}),a.b.prototype.clone=function(){var e=new this.constructor;return a.zc.Lf(e,this),e},a.b.g("Object.prototype.clone",{clone:a.b.prototype.clone}),a.b.prototype.toString=function(){return this.qP()},a.b.g("Object.prototype.toString",{toString:a.b.prototype.toString}),a.b.prototype.qP=function(){return this.getTypeName()+" Object"},a.b.g("Object.prototype.toDebugString",{qP:a.b.prototype.qP}),a.b.getTypeName=function(e){a.l.Ho(e);var t=e.FM;return null==t&&(t=e.toString(),t=(t=a.b.p8.exec(t))?t[1]:"anonymous",e.FM=t),t},o_("Object.getTypeName",a.b.getTypeName,a),a.b.prototype.getTypeName=function(){return a.b.getTypeName(this.constructor)},a.b.g("Object.prototype.getTypeName",{getTypeName:a.b.prototype.getTypeName}),a.b.prototype.Init=function(){a.l.iO()&&a.l.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e.Zl||a.b.oK(e)},a.b.g("Object.prototype.Init",{Init:a.b.prototype.Init}),a.b.uoa=function(e){a.l.Ho(e),e.Zl||a.b.oK(e)},o_("Object.ensureClassInitialization",a.b.uoa,a),a.b.prototype.Mo=function(e){return this===e},a.b.g("Object.prototype.equals",{Mo:a.b.prototype.Mo}),a.b.r2=function(e,t){return a.l.Ho(t),t.bind(e)},o_("Object.createCallback",a.b.r2,a),a.b.oK=function(e){a.l.iO()&&(a.l.Ho(e),a.l.assert(!e.Zl)),e.Zl=!0;var t=e.r;t&&((t=t.constructor)&&!t.Zl&&a.b.oK(t),a.b.eaa(e)),(t=e.InitClass||null)||(t=e.InitClass),t&&t.call(e)},a.b.mh=function(e,t){if(e===t)return!0;if(typeof e!=typeof t||null===e||null===t)return!1;if(e.constructor===t.constructor){if(Array.isArray(e))return a.b.mba(e,t);if(e.constructor===Object)return a.b.Vv(e,t);if(e.valueOf&&"function"==typeof e.valueOf)return e.valueOf()===t.valueOf()}return!1},o_("Object.compareValues",a.b.mh,a),a.b.mba=function(e,t){if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(!a.b.mh(e[r],t[r]))return!1;return!0},a.b.oU=function(e,t){if(!e)return!t||0==t.length;if(!t)return!e||0==e.length;if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r]&&(-1==e.indexOf(t[r])||-1==t.indexOf(e[r])))return!1;return!0},a.b.Vv=function(e,t){var r,i=!1;if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object)||e.constructor!==t.constructor)return!1;for(r in e)if(i||(i=!0),e.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||e[r]!==t[r]&&("object"!=typeof e[r]||!a.b.Vv(e[r],t[r]))))return!1;for(r in t)if(i||(i=!0),t.hasOwnProperty(r)&&!e.hasOwnProperty(r))return!1;return!!i||JSON.stringify(e)===JSON.stringify(t)},a.b.ph=function(e){var t;if(void 0===e||null===e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},a.b.eaa=function(e){a.b.lL&&a.b.oT(e,e.r)},a.b.oT=function(e,t){if(t){var r=t.constructor;a.b.oT(e,r.r);var i,r=r.lL;if(r)for(i in r)if(r.hasOwnProperty(i)){var o=r[i];if(i!=o){var n=e.prototype;!n.hasOwnProperty(i)&&n.hasOwnProperty(o)?n[i]=n[o]:!n.hasOwnProperty(o)&&n.hasOwnProperty(i)&&(n[o]=n[i])}}}},a.Ns=function(){return"function"==typeof define&&define.amd},a.l={},o_("Assert",a.l,a),a.l.zoa=function(){a.l.DEBUG=!0},o_("Assert.forceDebug",a.l.zoa,a),a.l.Hna=function(){a.l.DEBUG=!1},o_("Assert.clearDebug",a.l.Hna,a),a.l.iO=function(){return 1==a.l.DEBUG},o_("Assert.isDebug",a.l.iO,a),a.l.assert=function(e,t){if(a.l.DEBUG&&!e){var r,i=t||"";if(2<arguments.length){for(i+="(",r=2;r<arguments.length;r+=1)i+=arguments[r];i+=")"}a.l.Sd(i)}},o_("Assert.assert",a.l.assert,a),a.l.Yb=function(){a.l.DEBUG&&a.l.Sd("Abstract function called")},o_("Assert.failedInAbstractFunction",a.l.Yb,a),a.l.$c=function(e,t,r){var i;a.l.DEBUG&&(null!=e?(a.l.Qh(t,"function",null,0,!1),i=t.prototype,i.isPrototypeOf(e)||a.l.Sd("object '"+e+"' doesn't match prototype "+i,0,r)):a.l.Sd("null object doesn't match prototype "+i,0,r))},o_("Assert.assertPrototype",a.l.$c,a),a.l.xna=function(e,t,r){var i;a.l.DEBUG&&null!=e&&(null!=e?(a.l.Qh(t,"function",null,0,!1),i=t.prototype,i.isPrototypeOf(e)||a.l.Sd("object '"+e+"' doesn't match prototype "+i,0,r)):a.l.Sd("null object doesn't match prototype "+i,0,r))},o_("Assert.assertPrototypeOrNull",a.l.xna,a),a.l.yna=function(e,t,r,i){a.l.DEBUG&&(t=t.prototype,r=r.prototype,t.isPrototypeOf(e)||r.isPrototypeOf(e)||a.l.Sd("object '"+e+"' doesn't match prototype "+t+" or "+r,0,i))},o_("Assert.assertPrototypes",a.l.yna,a),a.l.rna=function(e){a.l.DEBUG&&e&&void 0===e.nodeType&&a.l.Sd(e+" is not a DOM Node")},o_("Assert.assertDomNodeOrNull",a.l.rna,a),a.l.aN=function(e){a.l.DEBUG&&(e&&void 0!==e.nodeType||a.l.Sd(e+" is not a DOM Node"))},o_("Assert.assertDomNode",a.l.aN,a),a.l.$M=function(e,t){a.l.DEBUG&&(a.l.aN(e),1!==e.nodeType?a.l.Sd(e+" is not a DOM Element"):t&&e.nodeName!==t&&a.l.Sd(e+" is not a "+t+" Element"))},o_("Assert.assertDomElement",a.l.$M,a),a.l.qna=function(e,t){a.l.DEBUG&&null!=e&&(a.l.aN(e),1!==e.nodeType?a.l.Sd(e+" is not a DOM Element"):t&&e.nodeName!==t&&a.l.Sd(e+" is not a "+t+" Element"));
},o_("Assert.assertDomElementOrNull",a.l.qna,a),a.l.Qh=function(e,t,r,i,o){!a.l.DEBUG||null==e&&o||typeof e===t||(e=e+" is not of type "+t,r&&(e=r+e),a.l.Sd(e))},o_("Assert.assertType",a.l.Qh,a),a.l.Kf=function(e,t){a.l.DEBUG&&a.l.Qh(e,"object",t,0,!1)},o_("Assert.assertObject",a.l.Kf,a),a.l.W1=function(e,t){a.l.DEBUG&&a.l.Qh(e,"object",t,0,!0)},o_("Assert.assertObjectOrNull",a.l.W1,a),a.l.tna=function(e,t){a.l.DEBUG&&(a.l.Qh(e,"string",t,0,!1),a.l.assert(0<e.length,"empty string"))},o_("Assert.assertNonEmptyString",a.l.tna,a),a.l.om=function(e,t){a.l.DEBUG&&a.l.Qh(e,"string",t,0,!1)},o_("Assert.assertString",a.l.om,a),a.l.bN=function(e,t){a.l.DEBUG&&a.l.Qh(e,"string",t,0,!0)},o_("Assert.assertStringOrNull",a.l.bN,a),a.l.Ho=function(e,t){a.l.DEBUG&&a.l.Qh(e,"function",t,0,!1)},o_("Assert.assertFunction",a.l.Ho,a),a.l.wu=function(e,t){a.l.DEBUG&&a.l.Qh(e,"function",t,0,!0)},o_("Assert.assertFunctionOrNull",a.l.wu,a),a.l.V1=function(e,t){a.l.DEBUG&&a.l.Qh(e,"boolean",t,0,!1)},o_("Assert.assertBoolean",a.l.V1,a),a.l.nm=function(e,t){a.l.DEBUG&&a.l.Qh(e,"number",t,0,!1)},o_("Assert.assertNumber",a.l.nm,a),a.l.vna=function(e,t){a.l.DEBUG&&a.l.Qh(e,"number",t,0,!0)},o_("Assert.assertNumberOrNull",a.l.vna,a),a.l.QD=function(e,t){a.l.DEBUG&&!Array.isArray(e)&&(void 0===t&&(t=e+" is not an array"),a.l.Sd(t))},o_("Assert.assertArray",a.l.QD,a),a.l.vy=function(e,t){a.l.DEBUG&&null!=e&&!Array.isArray(e)&&(void 0===t&&(t=e+" is not an array"),a.l.Sd(t))},o_("Assert.assertArrayOrNull",a.l.vy,a),a.l.una=function(e,t){a.l.DEBUG&&!isNaN(e)&&(void 0===t&&(t=e+" is convertible to a number"),a.l.Sd(t))},o_("Assert.assertNonNumeric",a.l.una,a),a.l.wna=function(e,t){a.l.DEBUG&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),a.l.Sd(t))},o_("Assert.assertNumeric",a.l.wna,a),a.l.sna=function(e,t,r){var i;if(null==e||void 0===t[e.toString()]){if(void 0===r){r=" is not in set: {";for(i in t)t.hasOwnProperty(i)&&(r+=i,r+=",");r=e+(r+"}")}a.l.Sd(r)}},o_("Assert.assertInSet",a.l.sna,a),a.l.Sd=function(e,t,r){throw t="Assertion",r&&(t+=" ("+r+")"),t+=" failed: ",void 0!==e&&(t+=e),Error(t)},o_("Assert.assertionFailed",a.l.Sd,a);var n=r.__oj_Assert_DEBUG;return void 0!==n&&(a.l.DEBUG=n),a.Pg=function(){this.Init()},o_("EventSource",a.Pg,a),a.b.ga(a.Pg,a.b,"oj.EventSource"),a.Pg.prototype.Init=function(){this.kd=[],a.Pg.r.Init.call(this)},a.b.g("EventSource.prototype.Init",{Init:a.Pg.prototype.Init}),a.Pg.prototype.on=function(e,t){var r,i=!1;for(r=0;r<this.kd.length;r++)if(this.kd[r].eventType==e&&this.kd[r].eventHandlerFunc==t){i=!0;break}i||this.kd.push({eventType:e,eventHandlerFunc:t})},a.b.g("EventSource.prototype.on",{on:a.Pg.prototype.on}),a.Pg.prototype.off=function(e,t){var r;for(r=this.kd.length-1;0<=r;r--)if(this.kd[r].eventType==e&&this.kd[r].eventHandlerFunc==t){this.kd.splice(r,1);break}},a.b.g("EventSource.prototype.off",{off:a.Pg.prototype.off}),a.Pg.prototype.handleEvent=function(e,t){var r,i;for(r=0;r<this.kd.length;r++)if(i=this.kd[r],i.eventType==e&&(i=i.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)),!1===i))return!1;return!0},a.b.g("EventSource.prototype.handleEvent",{handleEvent:a.Pg.prototype.handleEvent}),a.ba={},o_("Config",a.ba,a),a.ba.Bg=function(){var e;return a.Ns()?(a.l.assert(void 0!==t,"ojtranslations module must be defined"),e=t._ojLocale_,"root"==e?"en":e):(e=a.ba.Qt,null==e&&((e=document.documentElement.lang)||(e=void 0===navigator?"en":(navigator.language||navigator.userLanguage||"en").toLowerCase()),a.ba.Qt=e=e.toLowerCase()),e)},o_("Config.getLocale",a.ba.Bg,a),a.ba.Eqa=function(r,i){if(a.Ns()){var o=["ojL10n!ojtranslations/nls/"+r+"/ojtranslations"];a.La&&o.push("ojL10n!ojtranslations/nls/"+r+"/localeElements"),e(o,function(e,r){t=e,r&&a.La.t$(r),i&&i()})}else a.ba.Qt=r,i&&i()},o_("Config.setLocale",a.ba.Eqa,a),a.ba.lb=function(t){var r=/^\/|:/;return null==t||r.test(t)?t:(r=a.ba.Oka)?r+("/"==r.charAt(r.length-1)?"":"/")+t:a.Ns()?(r=e.toUrl("ojs/_foo_"),r.replace(/[^\/]*$/,"../"+t)):t},o_("Config.getResourceUrl",a.ba.lb,a),a.ba.Fqa=function(e){a.ba.Oka=e},o_("Config.setResourceBaseUrl",a.ba.Fqa,a),a.ba.Dqa=function(e){a.ba.laa=e},o_("Config.setAutomationMode",a.ba.Dqa,a),a.ba.GN=function(){return a.ba.laa},o_("Config.getAutomationMode",a.ba.GN,a),a.ba.O3=function(){var e="Oracle JET Version: "+a.version+"\n",e=e+("Oracle JET Revision: "+a.revision+"\n"),t="undefined"!=typeof window;return t&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),a.ia&&(e+="Knockout Version: "+a.ia.s$()+"\n"),t&&window.uqa&&(e+="Require Version: "+window.uqa.version+"\n"),e},o_("Config.getVersionInfo",a.ba.O3,a),a.ba.Rpa=function(){console.log(a.ba.O3())},o_("Config.logVersionInfo",a.ba.Rpa,a),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}"undefined"!=typeof window&&"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),a.Na=function(){},a.Na.sl={yF:"ie",OP:"firefox",uQ:"safari",v6:"chrome",zv:"unknown"},a.Na.cn={FQ:"trident",PF:"webkit",RP:"gecko",zv:"unknown"},a.Na.aj={y7:"Windows",o7:"Solaris",iQ:"Mac",zv:"Unknown",CP:"Android",zF:"IOS",V6:"Linux"},a.Na.Fy=function(){var e;a.Ea.Ni(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=a.Ea.qr(e),r=a.Na.oca;if(r&&r.hashCode===t)return{os:r.os,browser:r.browser,browserVersion:r.browserVersion,engine:r.engine,engineVersion:r.engineVersion,hashCode:r.hashCode};var r=a.Na.aj.zv,i=a.Na.sl.zv,o=0,n=a.Na.cn.zv,s=0;return-1<e.indexOf("iphone")||-1<e.indexOf("ipad")?r=a.Na.aj.zF:-1<e.indexOf("mac")?r=a.Na.aj.iQ:-1<e.indexOf("sunos")?r=a.Na.aj.o7:-1<e.indexOf("android")?r=a.Na.aj.CP:-1<e.indexOf("linux")?r=a.Na.aj.V6:-1<e.indexOf("win")&&(r=a.Na.aj.y7),-1<e.indexOf("msie")?(i=a.Na.sl.yF,o=a.Na.Ci(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(n=a.Na.cn.FQ,s=a.Na.Ci(e,/trident\/(\d+[.]\d+)/))):-1<e.indexOf("trident")?(i=a.Na.sl.yF,o=a.Na.Ci(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(n=a.Na.cn.FQ,s=a.Na.Ci(e,/trident\/(\d+[.]\d+)/))):-1<e.indexOf("chrome")?(i=a.Na.sl.v6,o=a.Na.Ci(e,/chrome\/(\d+[.]\d+)/),n=a.Na.cn.PF,s=a.Na.Ci(e,/applewebkit\/(\d+[.]\d+)/)):-1<e.indexOf("safari")?(i=a.Na.sl.uQ,o=a.Na.Ci(e,/version\/(\d+[.]\d+)/),n=a.Na.cn.PF,s=a.Na.Ci(e,/applewebkit\/(\d+[.]\d+)/)):-1<e.indexOf("firefox")&&(i=a.Na.sl.OP,o=a.Na.Ci(e,/rv:(\d+[.]\d+)/),n=a.Na.cn.RP,s=a.Na.Ci(e,/gecko\/(\d+)/)),r=a.Na.oca={hashCode:t,os:r,browser:i,browserVersion:o,engine:n,engineVersion:s},{os:r.os,browser:r.browser,browserVersion:r.browserVersion,engine:r.engine,engineVersion:r.engineVersion,hashCode:r.hashCode}},a.Na.Ci=function(e,t){var r=e.match(t);return r&&(r=r[1])?parseFloat(r):0},a.Ee={},a.Ee.Z4=function(e){var t=document.getElementsByClassName(e).item(0);if(null===t&&(t=document.createElement("meta"),t.className=e,document.head.appendChild(t)),(t=window.getComputedStyle(t))&&(t=t.getPropertyValue("font-family"))&&"none"!=t&&(t=t.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,""))){try{t=JSON.parse(t)}catch(r){return a.q.error("Error parsing json for selector "+e+".\nString being parsed is "+t+"\n"+r),null}return t}return a.q.info("No json found for selector "+e),null},a.Ee.Yk=function(e){e=e.toLowerCase(),null==a.Ee.OO&&(a.Ee.OO={});var t=a.Ee.OO[e];return null==t&&(t=a.Ee.Z4("oj-"+e+"-option-defaults"),null==t&&(t={}),a.Ee.OO[e]=t),t},a.ResponsiveUtils={},a.ResponsiveUtils.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},a.ResponsiveUtils.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},a.ResponsiveUtils.Mp={},a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.SM]=0,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.MD]=1,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.LG]=2,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.XL]=3,a.ResponsiveUtils.Mp[a.ResponsiveUtils.SCREEN_RANGE.XXL]=4,a.ResponsiveUtils.xea=function(e){var t=document.getElementsByClassName(e).item(0);return null===t&&(t=document.createElement("meta"),t.className=e,document.head.appendChild(t)),window.getComputedStyle(t).getPropertyValue("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},a.ResponsiveUtils.getFrameworkQuery=function(e){return e=a.ResponsiveUtils.xea("oj-mq-"+e),"null"==e?null:e},a.ResponsiveUtils.compare=function(e,t){var r=a.ResponsiveUtils.Mp[e],i=a.ResponsiveUtils.Mp[t];if(void 0==r)throw"size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";if(void 0==i)throw"size2 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD";return r-i},a.Ea={},o_("StringUtils",a.Ea,a),a.Ea.m$=/^\s*|\s*$/g,a.Ea.ph=function(e){return null===e||0===a.Ea.trim(e).length},o_("StringUtils.isEmpty",a.Ea.ph,a),a.Ea.Ni=function(e){return!(void 0!==e&&!a.Ea.ph(e))},o_("StringUtils.isEmptyOrUndefined",a.Ea.Ni,a),a.Ea.qd=function(e){return null!==e&&("string"==typeof e||e instanceof String)},o_("StringUtils.isString",a.Ea.qd,a),a.Ea.trim=function(e){return a.Ea.qd(e)?e.replace(a.Ea.m$,""):e},o_("StringUtils.trim",a.Ea.trim,a),a.Ea.qr=function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},a.zc={},o_("CollectionUtils",a.zc,a),a.zc.Lf=function(e,t,r,i,o){return a.zc.vU(e,t,r,i,o,0)},o_("CollectionUtils.copyInto",a.zc.Lf,a),a.zc.isPlainObject=function(e){if("object"==typeof e)try{if(e.constructor&&e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!0}catch(e){}return!1},o_("CollectionUtils.isPlainObject",a.zc.isPlainObject,a),a.zc.vU=function(e,t,r,i,o,n){var s,c,l;if(e&&t&&e!==t){l=Object.keys(t);for(var u=0;u<l.length;u++){s=l[u],c=r?r(s):s,s=t[s];var d=!1;if(i&&n<o){var p=e[c];a.zc.isPlainObject(p)&&a.zc.isPlainObject(s)&&(d=!0,a.zc.vU(p,s,r,!0,o,n+1))}d||(e[c]=s)}}return e},a.ha={},o_("Translations",a.ha,a),a.ha.cP=function(e){a.ha.pH=e},o_("Translations.setBundle",a.ha.cP,a),a.ha.v3=function(e){return a.ha.WW(e)},o_("Translations.getResource",a.ha.v3,a),a.ha.Mb=function(e,t){return null==e?null:a.ha.xda(e,t)},o_("Translations.applyParameters",a.ha.Mb,a),a.ha.A=function(e,t){var r=a.ha.WW(e);if(null==r)return e;var i={};return 2<arguments.length?i=Array.prototype.slice.call(arguments,1):2==arguments.length&&(i=arguments[1],"object"==typeof i||i instanceof Array||(i=[i])),a.ha.Mb(r,i)},o_("Translations.getTranslatedString",a.ha.A,a),a.ha.iE=function(e){e=a.ha.XV()[e];var t,r;if(null==e)return{};t={};for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},o_("Translations.getComponentTranslations",a.ha.iE,a),a.ha.WW=function(e){e=e?e.split("."):[];var t=a.ha.XV(),r=e.length,i=0,o=e[i];for(a.l.Kf(t);0<--r&&t;)t=t[o],i++,o=e[i];return t?t[o]||null:null},a.ha.xda=function(e,t){var r,i,a=e.length,o=[],n=null,s=!1,c=!1,l=!1,u=!1;for(i=0;i<a;i++){var d=e.charAt(i),p=!1;if(s)p=!0,s=!1;else switch(d){case"$":s=!0;break;case"{":u||(c||(r=!1,n=[]),c=!0);break;case"}":c&&0<n.length&&(c=t[n.join("")],o.push(void 0===c?"null":c)),c=!1;break;case"[":c||(l?u=!0:l=!0);break;case"]":u?u=!1:l=!1;break;default:p=!0}p&&(c?","==d||" "==d?r=!0:r||n.push(d):u||o.push(d))}return o.join("")},a.ha.XV=function(){var e=a.ha.pH;return e?e:a.Ns()?(a.l.assert(void 0!==t,"ojtranslations module must be defined"),t):{}},a}),define("numberFormatHelper",["ojs/ojcore"],function(){"use strict";function e(){}return e.prototype.formatNumber=function(e,t,r){var t,i,a,o;a=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_NUMBER);var n={style:r,minimumIntegerDigits:1,minimumFractionDigits:t,maximumFractionDigits:t,useGrouping:!0};return o=a.createConverter(n),i=o.format(e)},new e}),define("currencyHelper",["knockout","ccRestClient","ccConstants","numberFormatHelper","pubsub"],function(e,t,r,i,a){"use strict";function o(){return this.currencyObject=e.observable(null),this.currencyMapObject=e.observable(null),this.setFractionalDigits=e.observable(null),this.getCurrencyMapCurrenciesBinding=this.getCurrencyMapCurrencies.bind(this),$.Topic(a.topicNames.PRICE_LIST_GROUP_UPDATE).subscribe(this.getCurrencyMapCurrenciesBinding),$.Topic(a.topicNames.ADMIN_CONTENT_LANGUAGE_CHANGED).subscribe(this.getCurrencyMapCurrenciesBinding),this}return o.prototype.DECIMAL_NUMBER_FORMAT="decimal",o.prototype.getCurrency=function(){var e=r.ENDPOINT_CURRENCIES_LIST_CURRENCIES,i={};t.request(e,i,this.getCurrencySuccess.bind(this),this.getCurrencyError.bind(this))},o.prototype.getCurrencySuccess=function(e){this.currencyObject(e.selectedCurrency),this.checkCurrencySymbol()},o.prototype.getCurrencyError=function(e){throw"Not Implemented"},o.prototype.checkCurrencySymbol=function(){this.currencyObject().symbol.match(/^[0-9a-zA-Z]+$/)&&(this.currencyObject().symbol=this.currencyObject().symbol+" ")},o.prototype.handleFractionalDigits=function(e,t){var r;return r="number"==typeof t?t:this.currencyObject()?this.currencyObject().fractionalDigits:2,null===e||""===e?e:Number(e).toFixed(r)},o.prototype.handleFractionalDigitsAndLocale=function(e){var t;return t=null!==this.setFractionalDigits()?this.setFractionalDigits():this.currencyObject()?this.currencyObject().fractionalDigits:2,null==e||""===e?e:e=i.formatNumber(e,t,this.DECIMAL_NUMBER_FORMAT)},o.prototype.getCurrencyMapCurrencies=function(){var e={};e.defaultFirst=!0,t.request(r.ENDPOINT_LIST_PRICE_LIST_GROUPS,e,this.getCurrencyMapCurrenciesSuccess.bind(this),this.getCurrencyMapCurrenciesError.bind(this))},o.prototype.getCurrencyMapCurrenciesSuccess=function(e){e.defaultPriceListGroupId=e.defaultPriceListGroup.id,$.each(e.items,function(t){e.items[t].isDefaultPriceListGroup=e.items[t].id===e.defaultPriceListGroup.id}),this.currencyMapObject(e)},o.prototype.getCurrencyMapCurrenciesError=function(e){},new o}),function(e){e.fn.visible=function(t,r,i){var a=e(this).eq(0),o=a.get(0),n=e(window),s=n.scrollTop(),c=s+n.height(),l=n.scrollLeft(),u=l+n.width(),d=a.offset().top,p=d+a.height(),h=a.offset().left,f=h+a.width(),m=t===!0?p:d,g=t===!0?d:p,v=t===!0?f:h,E=t===!0?h:f,y=r!==!0||o.offsetWidth*o.offsetHeight,i=i?i:"both";return"both"===i?!!y&&g<=c&&m>=s&&E<=u&&v>=l:"vertical"===i?!!y&&g<=c&&m>=s:"horizontal"===i?!!y&&E<=u&&v>=l:void 0}}(jQuery),define("viewportVisible",["jquery"],function(){}),define("ccImageZoom",["spinner","viewportVisible"],function(e){"use strict";function t(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),window.cancelAnimFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)},this.framesPerSecond=60,this.spinner=e,this.usingSpinner=!0,this.spinnerDelay=200,this.zoomDelay=800,this.smallImageClass="ccz-small",this.magnifierClass="ccz-magnifier",this.fullImageClass="ccz-full",this.flyoutClass="ccz-flyout",this.magnifierPercent=.45,this.flyoutSpacing=0,this.element=null,this.flyout=null,this.flyoutEnabled=!0,this.flyoutScaling=.8,this.magnifierEnabled=!1,this.magnifierPercentEased=.25,this.smallImageUrl=null,this.smallImageUrls=null,this.fullImageUrl=null,this.fullImageUrls=null,this.errorImageUrl=null,this.imageMetadataDefault=null,this.imageMetadatas=[],this.fullImage=null,this.smallIamge=null,this.jqBackgroundImage=null,this.loading=!1,this.magnifierMin=.1,this.magnifierMax=.9,this.magnifierVelocity=.02,this.dampingFactor=12,this.magnifierBorderWidth=2,this.zoomCurtainClassName="ccz-zoom-curtain",this.magnifierBackgroundClassName="ccz-magnifier-background",this.lastTouchDistance=0,this.currentMx=0,this.currentMy=0,this.xp=0,this.yp=0,this.offsetMagnifier=!1,this.replaceImageAtIndex=!0;var t=this;this.handleMouseWheel=function(e){e=window.event||e,e.preventDefault&&e.preventDefault();var r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY)),i=Math.max(t.magnifierMin,Math.min(t.magnifierMax,t.magnifierPercent+t.magnifierVelocity*r));return t.magnifierPercent=i,!1},this.handleMouseMove=function(e){if(!t.loading){if(t.imageLoadFailed||t.fullImageUrl.indexOf(t.errorImageUrl)!=-1)return;if(e.preventDefault(),0===e.type.indexOf("touch")){var a=e.touches||e.originalEvent.touches;if(a.length>1){var o=Math.sqrt((a[0].pageX-a[1].pageX)*(a[0].pageX-a[1].pageX)+(a[0].pageY-a[1].pageY)*(a[0].pageY-a[1].pageY));t.lastTouchDistance=o}r=a[0].pageX,i=a[0].pageY}else r=e.pageX||r,i=e.pageY||i;t.magnify_offset||(t.magnify_offset=$(t.element).offset());var n=r-t.magnify_offset.left,s=i-t.magnify_offset.top;if(t.magnifierEnabled)t.currentMx=n,t.currentMy=s;else{var c=t.jqSmallImage.width(),l=t.jqSmallImage.height(),u=t.getMagnifierWidth(),d=t.getMagnifierHeight(),p=c-u/2,h=u/2,f=l-d/2,m=d/2;t.currentMx=t.constrainValue(h,p,n),t.currentMy=t.constrainValue(m,f,s)}(n>Math.round($(this).width())||s>Math.round($(this).height())||n<0||s<0)&&t.handleMouseLeave()}},this.handleMouseLeave=function(){var e=this;clearTimeout(e.zoomTimeout),e.cancelRedraw(e),$("."+e.zoomCurtainClassName).hide(),$("."+e.magnifierBackgroundClassName).hide(),$(e.element).css({cursor:"auto"}),e.jqMagnifier.fadeOut(100),e.flyoutEnabled&&e.jqFlyout.fadeOut(100)},this.isIE=function(){return!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/Edge/))},this.handleMouseEnter=function(){var e=this;e.loading||(void 0==e.jqFlyout.find("img").attr("src")&&(e.jqFlyout.find("img").attr("src",e.fullImageUrl),$.when(e.loadImage(e.fullImageUrl)).done(function(t){e.jqFullImage.attr("src",t.src)}).fail(function(t){e.imageLoadFailed=!0,e.jqFullImage.attr("src",e.errorImageUrl)})),e.magnify_offset=$(e.element).offset(),e.fullImageUrl.indexOf(e.errorImageUrl)!=-1||e.imageLoadFailed||(e.zoomTimeout=setTimeout(function(){e.magnify_offset=$(e.element).offset(),e.isIE()?$(e.element).css({cursor:"pointer"}):$(e.element).css({cursor:"zoom-in"}),e.magnifierBackgroundImage(),e.jqZoomCurtain?e.jqZoomCurtain.fadeIn(100):e.jqZoomCurtain=e.addCurtain(e.element),e.flyoutEnabled&&e.setFlyoutSizeAndPosition(),e.jqMagnifier.fadeIn(500),e.flyoutEnabled&&e.jqFlyout.fadeIn(500),e.timeoutid=e.scheduleRedraw(e)},e.zoomDelay)))}}var r,i;return t.prototype.registerMouseWheel=function(e){var t=this,r=t.jqMagnifier[0],i="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";r.addEventListener?r.addEventListener(i,t.handleMouseWheel,!1):r.attachEvent("onmousewheel",t.handleMouseWheel)},t.prototype.getMagnifierWidth=function(){var e=this,t=e.getFlyoutDimensions(),r=t.width*e.magnifierPercentEased;return r},t.prototype.getMagnifierHeight=function(){var e=this,t=e.getFlyoutDimensions(),r=t.width*e.magnifierPercentEased,i=e.flyoutEnabled?t.height*e.magnifierPercentEased:r;return i},t.prototype.getPositionMagnifierCss=function(){var e=this,t=e.jqSmallImage.width(),r=e.jqSmallImage.height(),i=e.getMagnifierWidth(),a=e.getMagnifierHeight(),o=e.offsetMagnifier?1:2,n=e.offsetMagnifier?25:0,s=e.currentMx+2*n-i/o,c=e.currentMy-n-a/o,l=e.currentMx/t,u=e.currentMy/r;e.magnifierEnabled||(s=e.constrainValue(e.magnifierBorderWidth,t-i,s),c=e.constrainValue(e.magnifierBorderWidth,r-a,c));var d=s*-1,p=c*-1;e.magnifierEnabled&&(d=(l*e.jqBackgroundImage.width()-i/2)*-1,p=(u*e.jqBackgroundImage.height()-a/2)*-1);return{css:{width:i,height:a,left:s-e.magnifierBorderWidth,top:c-e.magnifierBorderWidth},background:{left:d,top:p}}},t.prototype.getPositionFlyoutCss=function(){var e=this,t=(e.getFlyoutDimensions(),e.jqSmallImage.width()),r=e.jqSmallImage.height(),i=t/e.magnifierPercentEased,a=r/e.magnifierPercentEased,o=e.xp/t,n=e.yp/r,s=o*i-e.jqFlyout.width()/2,c=n*a-e.jqFlyout.height()/2;return e.magnifierEnabled||(s=e.constrainValue(0,i-e.jqFlyout.width(),s),c=e.constrainValue(0,a-e.jqFlyout.height(),c)),{left:-s,top:-c,width:i,height:a}},t.prototype.positionMagnifier=function(){var e=this,t=e.getPositionMagnifierCss();e.jqMagnifier.css(t.css),$("."+e.magnifierBackgroundClassName).css(t.background)},t.prototype.positionFlyout=function(){var e=this,t=e.getPositionFlyoutCss();e.jqFullImage.css(t)},t.prototype.getFlyoutDimensions=function(){var e=this,t=e.jqSmallImage.width()*e.flyoutScaling,r=e.jqSmallImage.height()*e.flyoutScaling;return{width:t,height:r}},t.prototype.setFlyoutSizeAndPosition=function(){var e=this,t=e.getFlyoutDimensions(),r=e.jqSmallImage.width()+e.flyoutSpacing+"px";e.jqFlyout.css({width:t.width,height:t.height,top:"0px",left:r})},t.prototype.magnifierBackgroundImage=function(){var e=this,t=e.magnifierEnabled?e.fullImageUrl:e.smallImageUrl;if(null!==e.jqBackgroundImage)return e.jqBackgroundImage.attr("src")!=t&&$(e.jqBackgroundImage).attr("src",t),e.jqBackgroundImage.css({width:e.jqSmallImage.width(),height:e.jqSmallImage.height()}),void e.jqBackgroundImage.show();var r=$("<img class='"+e.magnifierBackgroundClassName+"'/>");e.magnifierEnabled?r.css({position:"absolute"}):r.css({position:"absolute","max-height":"none","max-width":"none",width:e.jqSmallImage.width(),height:e.jqSmallImage.height()}),$(r).attr("src",t),e.jqBackgroundImage=r,e.jqMagnifier.append(r)},t.prototype.addCurtain=function(e){var t=this,r=$("<div class='"+t.zoomCurtainClassName+"'></div>");return r.css({display:"block",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","background-color":"rgb(255,255,255)",opacity:0}),$(t.element).append(r),r.animate({opacity:.25},100),r},t.prototype.loadImage=function(e){var t=function(t){function r(){o.onload=null,o.onerror=null,o.onabort=null}function i(){r(),t.resolve(o)}function a(){r(),t.reject(o)}var o=new Image;o.src=e,o.onload=i,o.onerror=a,o.onabort=a};return $.Deferred(t).promise()},t.prototype.constrainValue=function(e,t,r){return Math.max(e,Math.min(t,r))},t.prototype.cancelRedraw=function(e){cancelAnimFrame(e.timeoutid)},t.prototype.scheduleRedraw=function(e){e.timeoutid&&e.cancelRedraw(e),function t(){e.timeoutid=requestAnimFrame(t),e.xp+=(e.currentMx-e.xp)/e.dampingFactor,e.yp+=(e.currentMy-e.yp)/e.dampingFactor,e.magnifierPercentEased+=(e.magnifierPercent-e.magnifierPercentEased)/e.dampingFactor,e.flyoutEnabled&&e.positionFlyout(),e.positionMagnifier()}()},t.prototype.presentImageAtIndex=function(e){var t,r=this;r.smallImageUrl=r.smallImageUrls()[e],r.fullImageUrl=r.fullImageUrls()[e];var i={alttext:r.smallImageUrl,title:r.smallImageUrl};i=$.extend(i,r.imageMetadataDefault,r.imageMetadatas[e]),r.imageLoadFailed=!1,r.loading=!0,r.jqSmallImage.fadeTo(200,0,function(){r.jqFlyout.find("img").removeAttr("src"),r.usingSpinner&&(t=setTimeout(function(){r.spinner.create({parent:r.element})},r.spinnerDelay)),r.replaceImageAtIndex&&(r.jqSmallImage.attr("src",r.smallImageUrl),r.jqSmallImage.attr("alt",i.altText),r.jqSmallImage.attr("title",i.titleText)),r.jqFullImage.attr("title",i.titleText),r.jqFullImage.attr("alt",i.altText),$.when(r.loadImage(r.smallImageUrl),r.loadImage(r.fullImageUrl)).done(function(e){r.jqSmallImage.fadeTo(200,1)}).fail(function(e){r.imageLoadFailed=!0,r.jqSmallImage.fadeTo(200,1),r.jqSmallImage.attr("src",r.errorImageUrl)}).always(function(){r.usingSpinner&&(r.loading=!1,clearTimeout(t),r.spinner.destroyAndClearTimeout())})})},t.prototype.start=function(){var e=this,t="10px";if(e.imageLoadFailed=!1,e.jqSmallImage=$(e.element).find("."+e.smallImageClass),e.jqFullImage=$(e.element).find("."+e.fullImageClass),e.jqFlyout=$(e.element).find("."+e.flyoutClass),e.jqMagnifier=$(e.element).find("."+e.magnifierClass),e.jqMagnifier.length||(e.jqMagnifier=$("<div></div>"),e.jqMagnifier.addClass(e.magnifierClass),$(e.element).append(e.jqMagnifier)),!e.jqFlyout.length&&e.flyoutEnabled){e.jqFlyout=$("<div></div>"),e.jqFlyout.css({display:"none"}),e.jqFlyout.addClass(e.flyoutClass);var r=$("<img></img>");r.css({"max-width":"none"}),r.addClass(e.fullImageClass),r.error(function(){e.imageLoadFailed=!0}),e.jqFlyout.append(r),e.jqFullImage=r,$(e.element).append(e.jqFlyout)}if(e.index&&(e.subHandle=e.index.subscribe(function(t){e.presentImageAtIndex(t)}),$(e.element).on("remove",function(){e.subHandle&&e.subHandle.dispose()})),e.flyoutEnabled||(t="100%"),e.element){e.registerMouseWheel(),$(e.element).css({position:"relative",display:"inline-block"}),e.jqFullImage.css({position:"absolute"}),e.jqSmallImage.css({display:"block","-webkit-touch-callout":"none"});var i={background:"#DDD",border:"1px solid #FFF","box-shadow":"0 0 15px rgba(0,0,0,0.5)",display:"none",overflow:"hidden",position:"absolute","z-index":"99"};e.jqFlyout.css(i);var a=e.magnifierBorderWidth+"px solid rgb(125,125,125)",o={position:"absolute","border-radius":t,display:"none","z-index":"98",overflow:"hidden","background-repeat":"no-repeat",border:a};e.jqMagnifier.css(o);var n=e.element;$(n).bind("touchstart",function(t){t.preventDefault(),e.magnifierEnabled&&(e.offsetMagnifier=!0),e.handleMouseEnter(),e.handleMouseMove(t)}),$(n).bind("touchend",function(t){e.handleMouseLeave(),e.offsetMagnifier=!1}),$(n).bind("touchmove",e.handleMouseMove),$(n).mousemove(e.handleMouseMove),$(n).mouseenter(function(){e.handleMouseEnter()}),$(n).mouseleave(function(){e.handleMouseLeave()})}},t}),define("ccNumber",["CCi18n"],function(e){"use strict";function t(){}return t.prototype.formatNumber=function(t,r,i){var a="ns.ccformats:resources.numberformat",o=e.t(a);o&&o!==a||(o="000,000,000.00");for(var n="",s=-1,c="",l=0,u=o.length-1;u>=0;u--)if(isNaN(parseInt(o[u],10))&&s==-1)s=l,n=o[u];else{if(s>-1&&isNaN(parseInt(o[u],10))){c=o[u];break}l++}return isNaN(i)||(s=i),this.formatNumberFromData(t,s,n,c,r)},t.prototype.formatNumberFromData=function(e,t,r,i,a){if(""===e)return"";if(isNaN(e))return"";if(0==jQuery.trim(e).length)return"";var o="";o=parseFloat(e).toFixed(t).toString(),a||(o=parseFloat(o).toString());var n=parseFloat(o)>=0?"":"-",s="",c=parseFloat(o)>=0?Math.floor(parseFloat(o)):Math.ceil(parseFloat(o));c=Math.abs(c);var l=o.indexOf(".")>-1;return l===!0&&(s=o.substring(o.indexOf(".")+1,o.length)),o="",""!==s&&(o=r+s),o=n+c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i)+o},new t}),function(e){var t=new Array,r=new Array;e.fn.doAutosize=function(t){var r=e(this).data("minwidth"),i=e(this).data("maxwidth"),a="",o=e(this),n=e("#"+e(this).data("tester_id"));if(a!==(a=o.val())){var s=a.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");n.html(s);var c=n.width(),l=c+t.comfortZone>=r?c+t.comfortZone:r,u=o.width(),d=l<u&&l>=r||l>r&&l<i;d&&o.width(l)}},e.fn.resetAutosize=function(t){var r=e(this).data("minwidth")||t.minInputWidth||e(this).width(),i=e(this).data("maxwidth")||t.maxInputWidth||e(this).closest(".tagsinput").width()-t.inputPadding,a=e(this),o=e("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:a.css("fontSize"),fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),letterSpacing:a.css("letterSpacing"),whiteSpace:"nowrap"}),n=e(this).attr("id")+"_autosize_tester";!e("#"+n).length>0&&(o.attr("id",n),o.appendTo("body")),a.data("minwidth",r),a.data("maxwidth",i),a.data("tester_id",n),a.css("width",r)},e.fn.addTag=function(i,a){return a=jQuery.extend({focus:!1,callback:!0},a),this.each(function(){var o=e(this).attr("id"),n=e(this).val().split(t[o]);if(""==n[0]&&(n=new Array),i=jQuery.trim(i),a.unique){var s=e(this).tagExist(i);1==s&&e("#"+o+"_tag").addClass("not_valid")}else var s=!1;if(""!=i&&1!=s){if(e("<span>").addClass("tag").append(e("<span>").text(i).append("&nbsp;&nbsp;"),e("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return e("#"+o).removeTag(escape(i))})).insertBefore("#"+o+"_addTag"),n.push(i),e("#"+o+"_tag").val(""),a.focus?e("#"+o+"_tag").focus():e("#"+o+"_tag").blur(),e.fn.tagsInput.updateTagsField(this,n),a.callback&&r[o]&&r[o].onAddTag){var c=r[o].onAddTag;c.call(this,i)}if(r[o]&&r[o].onChange){var l=n.length,c=r[o].onChange;c.call(this,e(this),n[l-1])}}}),!1},e.fn.removeTag=function(a){return a=unescape(a),this.each(function(){var o=e(this).attr("id"),n=e(this).val().split(t[o]);for(e("#"+o+"_tagsinput .tag").remove(),str="",i=0;i<n.length;i++)n[i]!=a&&(str=str+t[o]+n[i]);if(e.fn.tagsInput.importTags(this,str),r[o]&&r[o].onRemoveTag){var s=r[o].onRemoveTag;s.call(this,a)}}),!1},e.fn.tagExist=function(r){var i=e(this).attr("id"),a=e(this).val().split(t[i]);return jQuery.inArray(r,a)>=0},e.fn.importTags=function(t){var r=e(this).attr("id");e("#"+r+"_tagsinput .tag").remove(),e.fn.tagsInput.importTags(this,t)},e.fn.tagsInput=function(i){var o=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},i),n=0;return this.each(function(){if("undefined"==typeof e(this).attr("data-tagsinput-init")){e(this).attr("data-tagsinput-init",!0),o.hide&&e(this).hide();var i=e(this).attr("id");i&&!t[e(this).attr("id")]||(i=e(this).attr("id","tags"+(new Date).getTime()+n++).attr("id"));var s=jQuery.extend({pid:i,real_input:"#"+i,holder:"#"+i+"_tagsinput",input_wrapper:"#"+i+"_addTag",fake_input:"#"+i+"_tag"},o);t[i]=s.delimiter,(o.onAddTag||o.onRemoveTag||o.onChange)&&(r[i]=new Array,r[i].onAddTag=o.onAddTag,r[i].onRemoveTag=o.onRemoveTag,r[i].onChange=o.onChange);var c='<div id="'+i+'_tagsinput" class="tagsinput"><div id="'+i+'_addTag">';if(o.interactive&&(c=c+'<input id="'+i+'_tag" value="" data-default="'+o.defaultText+'" />'),c+='</div><div class="tags_clear"></div></div>',e(c).insertAfter(this),e(s.holder).css("width",o.width),e(s.holder).css("min-height",o.height),e(s.holder).css("height",o.height),""!=e(s.real_input).val()&&e.fn.tagsInput.importTags(e(s.real_input),e(s.real_input).val()),o.interactive){if(e(s.fake_input).val(e(s.fake_input).attr("data-default")),e(s.fake_input).css("color",o.placeholderColor),e(s.fake_input).resetAutosize(o),e(s.holder).bind("click",s,function(t){e(t.data.fake_input).focus()}),e(s.fake_input).bind("focus",s,function(t){e(t.data.fake_input).val()==e(t.data.fake_input).attr("data-default")&&e(t.data.fake_input).val(""),e(t.data.fake_input).css("color","#000000")}),void 0!=o.autocomplete_url){autocomplete_options={source:o.autocomplete_url};for(attrname in o.autocomplete)autocomplete_options[attrname]=o.autocomplete[attrname];void 0!==jQuery.Autocompleter?(e(s.fake_input).autocomplete(o.autocomplete_url,o.autocomplete),e(s.fake_input).bind("result",s,function(t,r,a){r&&e("#"+i).addTag(r[0]+"",{focus:!0,unique:o.unique})})):void 0!==jQuery.ui.autocomplete&&(e(s.fake_input).autocomplete(autocomplete_options),e(s.fake_input).bind("autocompleteselect",s,function(t,r){return e(t.data.real_input).addTag(r.item.value,{focus:!0,unique:o.unique}),!1}))}else e(s.fake_input).bind("blur",s,function(t){var r=e(this).attr("data-default");return""!=e(t.data.fake_input).val()&&e(t.data.fake_input).val()!=r?t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:o.unique}):(e(t.data.fake_input).val(e(t.data.fake_input).attr("data-default")),e(t.data.fake_input).css("color",o.placeholderColor)),!1});e(s.fake_input).bind("keypress",s,function(t){return a(t)?(t.preventDefault(),t.data.minChars<=e(t.data.fake_input).val().length&&(!t.data.maxChars||t.data.maxChars>=e(t.data.fake_input).val().length)&&e(t.data.real_input).addTag(e(t.data.fake_input).val(),{focus:!0,unique:o.unique}),e(t.data.fake_input).resetAutosize(o),!1):void(t.data.autosize&&e(t.data.fake_input).doAutosize(o))}),s.removeWithBackspace&&e(s.fake_input).bind("keydown",function(t){if(8==t.keyCode&&""==e(this).val()){t.preventDefault();var r=e(this).closest(".tagsinput").find(".tag:last").text(),i=e(this).attr("id").replace(/_tag$/,"");
r=r.replace(/[\s]+x$/,""),e("#"+i).removeTag(escape(r)),e(this).trigger("focus")}}),e(s.fake_input).blur(),s.unique&&e(s.fake_input).keydown(function(t){(8==t.keyCode||String.fromCharCode(t.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,\/]+/))&&e(this).removeClass("not_valid")})}}}),this},e.fn.tagsInput.updateTagsField=function(r,i){var a=e(r).attr("id");e(r).val(i.join(t[a]))},e.fn.tagsInput.importTags=function(a,o){e(a).val("");var n=e(a).attr("id"),s=o.split(t[n]);for(i=0;i<s.length;i++)e(a).addTag(s[i],{focus:!1,callback:!1});if(r[n]&&r[n].onChange){var c=r[n].onChange;c.call(a,a,s[i])}};var a=function(t){var r=!1;return 13==t.which||("string"==typeof t.data.delimiter?t.which==t.data.delimiter.charCodeAt(0)&&(r=!0):e.each(t.data.delimiter,function(e,i){t.which==i.charCodeAt(0)&&(r=!0)}),r)}}(jQuery),define("tagsInput",["jquery"],function(){}),function(e,t,r){"function"==typeof define&&define.amd?define("jquerymswipe",["jquery"],function(i){return r(i,e,t),i.mobile}):r(e.jQuery,e,t)}(this,document,function(e,t,r,i){!function(e,t,r,i){function a(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function o(t,r){var o,n,s,c,l,u,d,p,h,f=t.type;if(t=e.Event(t),t.type=r,o=t.originalEvent,n=e.event.props,f.search(/^(mouse|click)/)>-1&&(n=N),o)for(d=n.length,c;d;)c=n[--d],t[c]=o[c];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),f.search(/^touch/)!==-1&&(s=a(o),f=s.touches,l=s.changedTouches,u=f&&f.length?f[0]:l&&l.length?l[0]:i,u))for(p=0,h=R.length;p<h;p++)c=R[p],t[c]=u[c];return t}function n(t){for(var r,i,a={};t;){r=e.data(t,P);for(i in r)r[i]&&(a[i]=a.hasVirtualBinding=!0);t=t.parentNode}return a}function s(t,r){for(var i;t;){if(i=e.data(t,P),i&&(!r||i[r]))return t;t=t.parentNode}return null}function c(){F=!1}function l(){F=!0}function u(){j=0,U.length=0,x=!1,l()}function d(){c()}function p(){h(),L=setTimeout(function(){L=0,u()},e.vmouse.resetTimerDuration)}function h(){L&&(clearTimeout(L),L=0)}function f(t,r,i){var a;return(i&&i[t]||!i&&s(r.target,t))&&(a=o(r,t),e(r.target).trigger(a)),a}function m(t){var r,i=e.data(t.target,A);!x&&(!j||j!==i)&&(r=f("v"+t.type,t),r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function g(t){var r,i,o,s=a(t).touches;s&&1===s.length&&(r=t.target,i=n(r),i.hasVirtualBinding&&(j=V++,e.data(r,A,j),h(),d(),k=!1,o=a(t).touches[0],w=o.pageX,M=o.pageY,f("vmouseover",t,i),f("vmousedown",t,i)))}function v(e){F||(k||f("vmousecancel",e,n(e.target)),k=!0,p())}function E(t){if(!F){var r=a(t).touches[0],i=k,o=e.vmouse.moveDistanceThreshold,s=n(t.target);k=k||Math.abs(r.pageX-w)>o||Math.abs(r.pageY-M)>o,k&&!i&&f("vmousecancel",t,s),f("vmousemove",t,s),p()}}function y(e){if(!F){l();var t,r,i=n(e.target);f("vmouseup",e,i),k||(t=f("vclick",e,i),t&&t.isDefaultPrevented()&&(r=a(e).changedTouches[0],U.push({touchID:j,x:r.clientX,y:r.clientY}),x=!0)),f("vmouseout",e,i),k=!1,p()}}function b(t){var r,i=e.data(t,P);if(i)for(r in i)if(i[r])return!0;return!1}function I(){}function T(t){var r=t.substr(1);return{setup:function(){b(this)||e.data(this,P,{});var i=e.data(this,P);i[t]=!0,D[t]=(D[t]||0)+1,1===D[t]&&H.bind(r,m),e(this).bind(r,I),G&&(D.touchstart=(D.touchstart||0)+1,1===D.touchstart&&H.bind("touchstart",g).bind("touchend",y).bind("touchmove",E).bind("scroll",v))},teardown:function(){--D[t],D[t]||H.unbind(r,m),G&&(--D.touchstart,D.touchstart||H.unbind("touchstart",g).unbind("touchmove",E).unbind("touchend",y).unbind("scroll",v));var i=e(this),a=e.data(this,P);a&&(a[t]=!1),i.unbind(r,I),b(this)||i.removeData(P)}}}var S,_,P="virtualMouseBindings",A="virtualTouchID",C="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),R="clientX clientY pageX pageY screenX screenY".split(" "),O=e.event.mouseHooks?e.event.mouseHooks.props:[],N=e.event.props.concat(O),D={},L=0,w=0,M=0,k=!1,U=[],x=!1,F=!1,G="addEventListener"in r,H=e(r),V=1,j=0;for(e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},_=0;_<C.length;_++)e.event.special[C[_]]=T(C[_]);G&&r.addEventListener("click",function(t){var r,i,a,o,n,s,c=U.length,l=t.target;if(c)for(r=t.clientX,i=t.clientY,S=e.vmouse.clickDistanceThreshold,a=l;a;){for(o=0;o<c;o++)if(n=U[o],s=0,a===l&&Math.abs(n.x-r)<S&&Math.abs(n.y-i)<S||e.data(a,A)===n.touchID)return t.preventDefault(),void t.stopPropagation();a=a.parentNode}},!0)}(e,t,r),function(e){e.mobile={}}(e),function(e,t){var i={touch:"ontouchend"in r};e.mobile.support=e.mobile.support||{},e.extend(e.support,i),e.extend(e.mobile.support,i)}(e),function(e,t,i){function a(t,r,a,o){var n=a.type;a.type=r,o?e.event.trigger(a,i,t):e.event.dispatch.call(t,a),a.type=n}var o=e(r),n=e.mobile.support.touch,s="touchmove scroll",c=n?"touchstart":"mousedown",l=n?"touchend":"mouseup",u=n?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,r){e.fn[r]=function(e){return e?this.bind(r,e):this.trigger(r)},e.attrFn&&(e.attrFn[r]=!0)}),e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){r=t,a(o,r?"scrollstart":"scrollstop",e)}var r,i,o=this,n=e(o);n.bind(s,function(a){e.event.special.scrollstart.enabled&&(r||t(a,!0),clearTimeout(i),i=setTimeout(function(){t(a,!1)},50))})},teardown:function(){e(this).unbind(s)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,r=e(t),i=!1;r.bind("vmousedown",function(n){function s(){clearTimeout(u)}function c(){s(),r.unbind("vclick",l).unbind("vmouseup",s),o.unbind("vmousecancel",c)}function l(e){c(),i||d!==e.target?i&&e.preventDefault():a(t,"tap",e)}if(i=!1,n.which&&1!==n.which)return!1;var u,d=n.target;r.bind("vmouseup",s).bind("vclick",l),o.bind("vmousecancel",c),u=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(i=!0),a(t,"taphold",e.Event("taphold",{target:d}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),o.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var r=t.pageXOffset,i=t.pageYOffset,a=e.clientX,o=e.clientY;return 0===e.pageY&&Math.floor(o)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(a)>Math.floor(e.pageX)?(a-=r,o-=i):(o<e.pageY-i||a<e.pageX-r)&&(a=e.pageX-r,o=e.pageY-i),{x:a,y:o}},start:function(t){var r=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(r);return{time:(new Date).getTime(),coords:[i.x,i.y],origin:e(t.target)}},stop:function(t){var r=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(r);return{time:(new Date).getTime(),coords:[i.x,i.y]}},handleSwipe:function(t,r,i,o){if(r.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-r.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-r.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var n=t.coords[0]>r.coords[0]?"swipeleft":"swiperight";return a(i,"swipe",e.Event("swipe",{target:o,swipestart:t,swipestop:r}),!0),a(i,n,e.Event(n,{target:o,swipestart:t,swipestop:r}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,r=this,i=e(r),a={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=a,a.start=function(t){if(!e.event.special.swipe.eventInProgress){e.event.special.swipe.eventInProgress=!0;var i,n=e.event.special.swipe.start(t),s=t.target,c=!1;a.move=function(t){n&&!t.isDefaultPrevented()&&(i=e.event.special.swipe.stop(t),c||(c=e.event.special.swipe.handleSwipe(n,i,r,s),c&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(n.coords[0]-i.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())},a.stop=function(){c=!0,e.event.special.swipe.eventInProgress=!1,o.off(u,a.move),a.move=null},o.on(u,a.move).one(l,a.stop)}},i.on(c,a.start)},teardown:function(){var t,r;t=e.data(this,"mobile-events"),t&&(r=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),r&&(r.start&&e(this).off(c,r.start),r.move&&o.off(u,r.move),r.stop&&o.off(l,r.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,r){e.event.special[t]={setup:function(){e(this).bind(r,e.noop)},teardown:function(){e(this).unbind(r)}}})}(e,this)}),define("ojtranslations/nls/localeElements",{root:{supplemental:{weekData:{firstDay:{"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:0,AS:0,AT:1,AU:0,AX:1,AZ:1,BA:1,BD:5,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:0,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:0,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:0,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MA:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:0,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:1,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:6,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TN:0,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:6,ZA:0,ZW:0},"firstDay-alt-variant":{GB:0},weekendStart:{"001":6,AE:5,AF:4,BH:5,DZ:4,EG:5,IL:5,IN:0,IQ:5,IR:4,JO:5,KW:5,LY:5,MA:5,OM:4,QA:5,SA:4,SD:5,SY:5,TN:5,YE:4},weekendEnd:{"001":0,AE:6,AF:5,BH:6,DZ:5,EG:6,IL:6,IQ:6,IR:5,JO:6,KW:6,LY:6,MA:6,OM:5,QA:6,SA:5,SD:6,SY:6,TN:6,YE:5}},prefferedHours:{"001":"H",AD:"H",AE:"h",AF:"H",AG:"h",AL:"h",AM:"H",AO:"H",AR:"H",AS:"h",AT:"H",AU:"h",AW:"H",AX:"H",AZ:"H",BA:"H",BB:"h",BD:"h",BE:"H",BF:"H",BG:"H",BH:"h",BI:"H",BJ:"H",BL:"H",BM:"h",BN:"h",BO:"H",BR:"H",BS:"h",BT:"h",BW:"h",BY:"H",BZ:"H",CA:"h",CD:"H",CF:"H",CG:"H",CH:"H",CI:"H",CL:"H",CM:"H",CN:"h",CO:"H",CR:"H",CU:"H",CV:"H",CW:"H",CY:"h",CZ:"H",DE:"H",DJ:"h",DK:"H",DM:"h",DO:"H",DZ:"h",EA:"H",EC:"H",EE:"H",EG:"h",EH:"h",ER:"h",ES:"H",ET:"h",FI:"H",FJ:"h",FM:"h",FO:"H",FR:"H",GA:"H",GB:"H",GD:"h",GE:"H",GF:"H",GG:"H",GH:"h",GI:"H",GL:"h",GM:"h",GN:"H",GP:"H",GQ:"H",GR:"h",GT:"H",GU:"h",GW:"H",GY:"h",HK:"h",HN:"H",HR:"H",HT:"H",HU:"H",IC:"H",ID:"H",IE:"H",IL:"H",IM:"H",IN:"h",IQ:"h",IR:"H",IS:"H",IT:"H",JE:"H",JM:"h",JO:"h",JP:"H",KE:"h",KG:"H",KH:"h",KI:"h",KM:"H",KN:"h",KP:"h",KR:"h",KW:"h",KY:"h",KZ:"H",LA:"H",LB:"h",LC:"h",LI:"H",LK:"H",LR:"h",LS:"h",LT:"H",LU:"H",LV:"H",LY:"h",MA:"h",MC:"H",MD:"H",ME:"H",MF:"H",MG:"H",MH:"h",MK:"H",ML:"H",MM:"H",MN:"H",MO:"h",MP:"h",MQ:"H",MR:"h",MT:"H",MU:"H",MW:"h",MX:"H",MY:"h",MZ:"H",NA:"h",NC:"H",NE:"H",NG:"h",NI:"H",NL:"H",NO:"H",NP:"H",NZ:"h",OM:"h",PA:"H",PE:"H",PF:"H",PG:"h",PH:"H",PK:"h",PL:"H",PR:"h",PS:"h",PT:"H",PW:"h",PY:"H",QA:"h",RE:"H",RO:"H",RS:"H",RU:"H",RW:"H",SA:"h",SB:"h",SC:"H",SD:"h",SE:"H",SG:"h",SI:"H",SK:"H",SL:"h",SM:"H",SN:"H",SO:"h",SR:"H",SS:"h",ST:"H",SV:"H",SX:"H",SY:"h",SZ:"h",TC:"h",TD:"h",TG:"H",TH:"H",TJ:"H",TL:"H",TN:"h",TO:"H",TR:"H",TT:"h",TW:"h",TZ:"h",UA:"H",UG:"h",UM:"h",US:"h",UY:"H",UZ:"H",VC:"h",VE:"H",VG:"h",VI:"h",VN:"H",VU:"h",WS:"h",XK:"H",YE:"h",YT:"H",ZA:"h",ZM:"h",ZW:"h"},plurals:{ar:function(e){return 0===e?"zero":1===e?"one":2===e?"two":e%100===Math.floor(e%100)&&3<=e%100&&10>=e%100?"few":e%100===Math.floor(e%100)&&11<=e%100&&99>=e%100?"many":"other"},be:function(e){return 1===e%10&&11!==e%100?"one":e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100)?"few":0===e%10||e%10===Math.floor(e%10)&&5<=e%10&&9>=e%10||e%100===Math.floor(e%100)&&11<=e%100&&14>=e%100?"many":"other"},bg:function(e){return 1===e?"one":"other"},ca:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},cs:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":t===Math.floor(t)&&2<=t&&4>=t&&0===e?"few":0!==e?"many":"other"},da:function(e){var t=Math.floor(Math.abs(e)),r=parseInt(e.toString().replace(/^[^.]*.?|0+$/g,""),10);return 1===e||0!==r&&(0===t||1===t)?"one":"other"},de:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},el:function(e){return 1===e?"one":"other"},en:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},es:function(e){return 1===e?"one":"other"},et:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},fi:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},fr:function(e){return e=Math.floor(Math.abs(e)),0===e||1===e?"one":"other"},ga:function(e){return 1===e?"one":2===e?"two":e===Math.floor(e)&&3<=e&&6>=e?"few":e===Math.floor(e)&&7<=e&&10>=e?"many":"other"},he:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===r?"one":2===t&&0===r?"two":0!==r||0<=e&&10>=e||0!==e%10?"other":"many"},hi:function(e){return 0===Math.floor(Math.abs(e))||1===e?"one":"other"},hr:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?/,""),10),0===r&&1===t%10&&(11!==t%100||1===e%10&&11!==e%100)?"one":0===r&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&(!(12<=t%100&&14>=t%100)||e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100))?"few":"other"},hu:function(e){return 1===e?"one":"other"},id:function(e){return"other"},is:function(e){var t=Math.floor(Math.abs(e));return e=parseInt(e.toString().replace(/^[^.]*.?|0+$/g,""),10),0!==e||1!==t%10||11===t%100&&0===e?"other":"one"},it:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},ja:function(e){return"other"},ko:function(e){return"other"},lt:function(e){var t=parseInt(e.toString().replace(/^[^.]*.?/,""),10);return 1!==e%10||11<=e%100&&19>=e%100?e%10===Math.floor(e%10)&&2<=e%10&&9>=e%10&&!(11<=e%100&&19>=e%100)?"few":0!==t?"many":"other":"one"},lv:function(e){var t=e.toString().replace(/^[^.]*.?/,"").length,r=parseInt(e.toString().replace(/^[^.]*.?/,""),10);return 0===e%10||e%100===Math.floor(e%100)&&11<=e%100&&19>=e%100||2===t&&r%100===Math.floor(r%100)&&11<=r%100&&19>=r%100?"zero":1===e%10&&(11!==e%100||2===t&&1===r%10&&(11!==r%100||2!==t&&1===r%10))?"one":"other"},mk:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?/,""),10),0!==r||1!==t%10&&1!==e%10?"other":"one"},ms:function(e){return"other"},mt:function(e){return 1===e?"one":0===e||e%100===Math.floor(e%100)&&2<=e%100&&10>=e%100?"few":e%100===Math.floor(e%100)&&11<=e%100&&19>=e%100?"many":"other"},nb:function(e){return 1===e?"one":"other"},nl:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},nn:function(e){return 1===e?"one":"other"},no:function(e){return 1===e?"one":"other"},pl:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":0===e&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===e&&1!==t&&(t%10===Math.floor(t%10)&&0<=t%10&&1>=t%10||0===e&&(t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||0===e&&t%100===Math.floor(t%100)&&12<=t%100&&14>=t%100))?"many":"other"},pt:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?|0+$/g,""),10),1===t&&(0===r||0===t&&1===e)?"one":"other"},"pt-PT":function(e){var t=e.toString().replace(/^[^.]*.?/,"").length;return 1===e&&0===t?"one":"other"},ro:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return 1===t&&0===r?"one":0!==r||0===e||1!==e&&e%100===Math.floor(e%100)&&1<=e%100&&19>=e%100?"few":"other"},ru:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,0===e&&1===t%10&&11!==t%100?"one":0===e&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===e&&(0===t%10||0===e&&(t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||0===e&&t%100===Math.floor(t%100)&&11<=t%100&&14>=t%100))?"many":"other"},sk:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":t===Math.floor(t)&&2<=t&&4>=t&&0===e?"few":0!==e?"many":"other"},sl:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,0===e&&1===t%100?"one":0===e&&2===t%100?"two":0===e&&(t%100===Math.floor(t%100)&&3<=t%100&&4>=t%100||0!==e)?"few":"other"},sq:function(e){return 1===e?"one":"other"},sr:function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*.?/,"").length;return e=parseInt(e.toString().replace(/^[^.]*.?/,""),10),0===r&&1===t%10&&(11!==t%100||1===e%10&&11!==e%100)?"one":0===r&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&(!(12<=t%100&&14>=t%100)||e%10===Math.floor(e%10)&&2<=e%10&&4>=e%10&&!(12<=e%100&&14>=e%100))?"few":"other"},sv:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,1===t&&0===e?"one":"other"},th:function(e){return"other"},tr:function(e){return 1===e?"one":"other"},uk:function(e){var t=Math.floor(Math.abs(e));return e=e.toString().replace(/^[^.]*.?/,"").length,0===e&&1===t%10&&11!==t%100?"one":0===e&&t%10===Math.floor(t%10)&&2<=t%10&&4>=t%10&&!(12<=t%100&&14>=t%100)?"few":0===e&&(0===t%10||0===e&&(t%10===Math.floor(t%10)&&5<=t%10&&9>=t%10||0===e&&t%100===Math.floor(t%100)&&11<=t%100&&14>=t%100))?"many":"other"},vi:function(e){return"other"},zh:function(e){return"other"}}}},ar:1,"ar-AE":1,"ar-BH":1,"ar-DZ":1,"ar-EG":1,"ar-IQ":1,"ar-JO":1,"ar-KW":1,"ar-LB":1,"ar-LY":1,"ar-MA":1,"ar-OM":1,"ar-QA":1,"ar-SA":1,"ar-SD":1,"ar-SY":1,"ar-TN":1,"ar-YE":1,be:1,"be-BY":1,bg:1,"bg-BG":1,ca:1,"ca-ES":1,cs:1,"cs-CZ":1,da:1,"da-DK":1,de:1,"de-AT":1,"de-CH":1,"de-DE":1,"de-LU":1,el:1,"el-CY":1,"el-GR":1,en:1,"en-AU":1,"en-CA":1,"en-GB":1,"en-IE":1,"en-IN":1,"en-MT":1,"en-NZ":1,"en-PH":1,"en-SG":1,"en-US":1,"en-ZA":1,es:1,"es-AR":1,"es-BO":1,"es-CL":1,"es-CO":1,"es-CR":1,"es-CU":1,"es-DO":1,"es-EC":1,"es-ES":1,"es-GT":1,"es-HN":1,"es-MX":1,"es-NI":1,"es-PA":1,"es-PE":1,"es-PR":1,"es-PY":1,"es-SV":1,"es-US":1,"es-UY":1,"es-VE":1,et:1,"et-EE":1,fi:1,"fi-FI":1,fr:1,"fr-BE":1,"fr-CA":1,"fr-CH":1,"fr-FR":1,"fr-LU":1,ga:1,"ga-IE":1,he:1,"he-IL":1,hi:1,"hi-IN":1,hr:1,"hr-HR":1,hu:1,"hu-HU":1,id:1,"id-ID":1,is:1,"is-IS":1,it:1,"it-CH":1,"it-IT":1,ja:1,"ja-JP":1,ko:1,"ko-KR":1,lt:1,"lt-LT":1,lv:1,"lv-LV":1,mk:1,"mk-MK":1,ms:1,"ms-Latn-MY":1,mt:1,"mt-MT":1,nb:1,"nb-NO":1,nl:1,"nl-BE":1,"nl-NL":1,nn:1,"nn-NO":1,no:1,"no-NO":1,pl:1,"pl-PL":1,pt:1,"pt-BR":1,"pt-PT":1,ro:1,"ro-RO":1,ru:1,"ru-RU":1,sk:1,"sk-SK":1,sl:1,"sl-SI":1,sq:1,"sq-AL":1,sr:1,"sr-Cyrl":1,"sr-Cyrl-BA":1,"sr-Cyrl-ME":1,"sr-Cyrl-RS":1,"sr-Latn":1,"sr-Latn-BA":1,"sr-Latn-ME":1,"sr-Latn-RS":1,sv:1,"sv-SE":1,th:1,"th-TH":1,tr:1,"tr-TR":1,uk:1,"uk-UA":1,vi:1,"vi-VN":1,zh:1,"zh-Hans":1,"zh-Hans-CN":1,"zh-Hans-SG":1,"zh-Hant":1,"zh-Hant-HK":1,"zh-Hant-MO":1,"zh-Hant-TW":1,__noOverlay:!0,__defaultNoOverlayLocale:"en-US"}),define("ojs/ojmessaging",["ojs/ojcore","jquery"],function(e,t){e.X=function(e,t,r){this.Init(e,t,r)},o_("Message",e.X,e),e.X.ck={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},o_("Message.SEVERITY_TYPE",e.X.ck,e),e.X.Tb={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},o_("Message.SEVERITY_LEVEL",e.X.Tb,e),e.b.ga(e.X,e.b,"oj.Message"),e.X.prototype.Init=function(t,r,i){e.X.r.Init.call(this),this.summary=t,this.detail=r,this.severity=i||e.X.ck.ERROR},e.b.g("Message.prototype.Init",{Init:e.X.prototype.Init}),e.X.prototype.c2=function(){return!0},e.X.prototype.Mo=function(t){return!(!t||e.X.Ju(this.severity)!==e.X.Ju(t.severity)||this.summary!==t.summary||this.detail!==t.detail)},e.b.g("Message.prototype.equals",{Mo:e.X.prototype.Mo}),e.X.prototype.clone=function(){return new e.X(this.summary,this.detail,this.severity)},e.b.g("Message.prototype.clone",{clone:e.X.prototype.clone}),e.X.Ju=function(t){return t&&("string"==typeof t?(t=e.X.jG.indexOf(t,1),t=-1===t?e.X.Tb.ERROR:t):"number"==typeof t&&t<e.X.Tb.CONFIRMATION&&t>e.X.Tb.FATAL&&(t=e.X.Tb.ERROR)),t?t:e.X.Tb.ERROR},o_("Message.getSeverityLevel",e.X.Ju,e),e.X.Ooa=function(t){var r;return t&&("string"==typeof t?(r=e.X.jG.indexOf(t,1),-1===r&&(t=e.X.ck.ERROR)):"number"==typeof t&&(t=t<e.X.Tb.CONFIRMATION&&t>e.X.Tb.FATAL?e.X.ck.ERROR:e.X.jG[t])),t||e.X.ck.ERROR},o_("Message.getSeverityType",e.X.Ooa,e),e.X.Hu=function(r){var i,a=-1;return r&&0<r.length&&t.each(r,function(t,r){r&&(i=e.X.Ju(r.severity)),a=a<i?i:a}),a},o_("Message.getMaxSeverity",e.X.Hu,e),e.X.isValid=function(t){return!(e.X.Hu(t)>=e.X.Tb.ERROR)},o_("Message.isValid",e.X.isValid,e),e.X.jG=["none",e.X.ck.CONFIRMATION,e.X.ck.INFO,e.X.ck.WARNING,e.X.ck.ERROR,e.X.ck.FATAL],e.Ic=function(e,t,r,i){this.Init(e,t,r,i)},e.b.ga(e.Ic,e.X,"oj.ComponentMessage"),e.Ic.Sr={GF:"shown",sF:"hidden"},e.Ic.N7={display:e.Ic.Sr.GF,context:""},e.Ic.prototype.Init=function(r,i,a,o){e.Ic.r.Init.call(this,r,i,a),this.kb=t.extend({},e.Ic.N7,o)},e.Ic.prototype.Mo=function(t){return e.Ic.r.Mo.call(this,t)&&this.kb.display===t.kb.display},e.Ic.prototype.clone=function(){return new e.Ic(this.summary,this.detail,this.severity,this.kb)},e.Ic.prototype.c2=function(){return!(this.kb&&this.kb.display&&this.kb.display===e.Ic.Sr.sF)},e.Ic.prototype.wda=function(){this.kb&&e.Ic.Sr.sF===this.kb.display&&(this.kb.display=e.Ic.Sr.GF)},e.Ic.prototype.zY=function(){return!(!this.kb||!this.kb.context)}}),define("ojs/ojvalidation",["ojs/ojcore","jquery","ojL10n!ojtranslations/nls/localeElements","ojs/ojmessaging"],function(e,t,r){e.La={},o_("LocaleData",e.La,e),e.La.cP=function(t){e.La.pH=t},o_("LocaleData.setBundle",e.La.cP,e),e.La.i3=function(){return e.La.JJ("firstDay")},o_("LocaleData.getFirstDayOfWeek",e.La.i3,e),e.La.Uoa=function(){return e.La.JJ("weekendStart")},o_("LocaleData.getWeekendStart",e.La.Uoa,e),e.La.Toa=function(){return e.La.JJ("weekendEnd")},o_("LocaleData.getWeekendEnd",e.La.Toa,e),e.La.Gy=function(t){return(null==t||"abbreviated"!==t&&"narrow"!==t)&&(t="wide"),t=e.La.RI().days["stand-alone"][t],[t.sun,t.mon,t.tue,t.wed,t.thu,t.fri,t.sat]},o_("LocaleData.getDayNames",e.La.Gy,e),e.La.Iy=function(t){return(null==t||"abbreviated"!==t&&"narrow"!==t)&&(t="wide"),t=e.La.RI().months["stand-alone"][t],[t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]]},o_("LocaleData.getMonthNames",e.La.Iy,e),e.La.k4=function(){var t=e.La.RI().dateFormats.long.toUpperCase(),r=t.indexOf("M"),t=t.indexOf("Y");return r<t},o_("LocaleData.isMonthPriorToYear",e.La.k4,e),e.La.JJ=function(t){var r=e.La.lk(),i=e.La.Qea()||"001";return t=r.supplemental.weekData[t],i=t[i],void 0===i&&(i=t["001"]),i},e.La.RI=function(){var t,r,i=e.La.lk().main;for(r in i)if(i.hasOwnProperty(r)){t=i[r];break}return t.dates.calendars.gregorian},e.La.Qea=function(){var t=e.ba.Bg();if(t&&(t=t.toUpperCase().split(/-|_/),2<=t.length)){var r=t[1];if(4!=r.length)return r;if(3<=t.length)return t[2]}return null},e.La.lk=function(){var t=e.La.pH;return t?t:e.Ns()?(e.l.assert(void 0!==r,"LocaleElements module must be loaded"),r):{}},e.La.t$=function(e){r=e},e.qa={},o_("Validation",e.qa,e),e.qa.XH={},e.qa.TM={},e.qa.TU={},e.qa.XU={},e.qa.Oz={converter:{name:"oj.ConverterFactory",type:e.Zj},validator:{name:"oj.ValidatorFactory",type:e.fd}},e.qa.rm=function(t,r){var i;return t&&!r?i=e.qa.MB(t,e.qa.XH):t&&r&&(i=e.qa.bu(t,r,e.qa.XH,e.qa.Oz.converter)),i},o_("Validation.converterFactory",e.qa.rm,e),e.qa.Or=function(t,r){var i;return t&&!r?i=e.qa.MB(t,e.qa.TM):t&&r&&(i=e.qa.bu(t,r,e.qa.TM,e.qa.Oz.validator)),i},o_("Validation.validatorFactory",e.qa.Or,e),e.qa.b3=function(t){return e.qa.MB(t,e.qa.TU)},o_("Validation.getDefaultConverterFactory",e.qa.b3,e),e.qa.Goa=function(t){return e.qa.MB(t,e.qa.XU)},o_("Validation.getDefaultValidatorFactory",e.qa.Goa,e),e.qa.YS=function(t,r){var i=e.qa.Oz.converter;e.qa.bu(t,r,e.qa.TU,i),e.qa.bu(t,r,e.qa.XH,i)},e.qa.Os=function(t,r){var i=e.qa.Oz.validator;e.qa.bu(t,r,e.qa.XU,i),e.qa.bu(t,r,e.qa.TM,i)},e.qa.Hca=function(t,r,i){if(r&&!e.qa.Cja(t,r))throw Error("Factory instance does not implement the methods expected by the factory of type "+i)},e.qa.MB=function(t,r){e.l.om(t);var i=null;return t&&(t=t.toLowerCase(),i=(r[t]||{}).instance||null),i},e.qa.Cja=function(t,r){var i,a=!0;e.l.Kf(t),e.l.Kf(r);for(i in r)if(r.hasOwnProperty(i)&&"function"==typeof r[i]&&!t[i]&&"function"!=typeof t[i]){a=!1;break}return a},e.qa.bu=function(t,r,i,a){if(e.l.om(t),e.l.Kf(r),t){var o={};o.instance=r,e.qa.Hca(r,a.type,a.name),i[t.toLowerCase()]=o}},e.Zj={CONVERTER_TYPE_NUMBER:"number",CONVERTER_TYPE_DATETIME:"datetime",createConverter:function(){}},o_("ConverterFactory",e.Zj,e),e.fd={VALIDATOR_TYPE_REQUIRED:"required",VALIDATOR_TYPE_REGEXP:"regexp",VALIDATOR_TYPE_NUMBERRANGE:"numberRange",VALIDATOR_TYPE_LENGTH:"length",VALIDATOR_TYPE_DATETIMERANGE:"dateTimeRange",VALIDATOR_TYPE_DATERESTRICTION:"dateRestriction",createValidator:function(){}},o_("ValidatorFactory",e.fd,e),e.ye=function(e){this.Init(e)},o_("Converter",e.ye,e),e.b.ga(e.ye,e.b,"oj.Converter"),e.ye.prototype.Init=function(t){e.ye.r.Init.call(this),this.kb=t},e.b.g("Converter.prototype.Init",{Init:e.ye.prototype.Init}),e.ye.prototype.wc=function(){return e.l.Yb(),null},e.b.g("Converter.prototype.getHint",{wc:e.ye.prototype.wc}),e.ye.prototype.Rh=function(){return this.kb||{}},e.b.g("Converter.prototype.getOptions",{Rh:e.ye.prototype.Rh}),e.ye.prototype.parse=function(){return e.l.Yb(),null},e.b.g("Converter.prototype.parse",{parse:e.ye.prototype.parse}),e.ye.prototype.format=function(){return e.l.Yb(),null},e.b.g("Converter.prototype.format",{format:e.ye.prototype.format}),e.ye.prototype.resolvedOptions=function(){var e={};return t.extend(e,this.kb),e},e.b.g("Converter.prototype.resolvedOptions",{resolvedOptions:e.ye.prototype.resolvedOptions}),e.Qe=function(t,r){var i=new e.X(t,r,e.X.Tb.ERROR);this.Init(i)},o_("ConverterError",e.Qe,e),e.Qe.prototype=Error(),e.Qe.prototype.Init=function(e){var t=e.detail,r=e.summary;this.Tt=e,this.name="Converter Error",this.message=t||r},e.b.g("ConverterError.prototype.Init",{Init:e.Qe.prototype.Init}),e.Qe.prototype.Iu=function(){return this.Tt},e.b.g("ConverterError.prototype.getMessage",{Iu:e.Qe.prototype.Iu}),e.ci=function(){this.Init()},o_("NumberConverter",e.ci,e),e.b.ga(e.ci,e.ye,"oj.NumberConverter"),e.ci.prototype.Init=function(t){e.ci.r.Init.call(this,t)},e.b.g("NumberConverter.prototype.Init",{Init:e.ci.prototype.Init}),e.ci.prototype.format=function(t){return e.ci.r.format.call(this,t)},e.b.g("NumberConverter.prototype.format",{format:e.ci.prototype.format}),e.ci.prototype.parse=function(t){return e.ci.r.parse.call(this,t)},e.b.g("NumberConverter.prototype.parse",{parse:e.ci.prototype.parse}),e.Sb=function(e){this.Init(e)},o_("DateTimeConverter",e.Sb,e),e.b.ga(e.Sb,e.ye,"oj.DateTimeConverter"),e.Sb.prototype.Init=function(t){e.Sb.r.Init.call(this,t)},e.b.g("DateTimeConverter.prototype.Init",{Init:e.Sb.prototype.Init}),e.Sb.prototype.format=function(t){return e.Sb.r.format.call(this,t)},e.b.g("DateTimeConverter.prototype.format",{format:e.Sb.prototype.format}),e.Sb.prototype.Uy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isHourInDaySet",{Uy:e.Sb.prototype.Uy}),e.Sb.prototype.Ty=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isHourInAMPMSet",{Ty:e.Sb.prototype.Ty}),e.Sb.prototype.Wy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isMinuteSet",{Wy:e.Sb.prototype.Wy}),e.Sb.prototype.Yy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isSecondSet",{Yy:e.Sb.prototype.Yy}),e.Sb.prototype.Vy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isMilliSecondSet",{Vy:e.Sb.prototype.Vy}),e.Sb.prototype.Zy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isYearSet",{Zy:e.Sb.prototype.Zy}),e.Sb.prototype.Xy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isMonthSet",{Xy:e.Sb.prototype.Xy}),e.Sb.prototype.Sy=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isDaySet",{Sy:e.Sb.prototype.Sy}),e.Sb.prototype.Ry=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.isDayNameSet",{Ry:e.Sb.prototype.Ry}),e.Sb.prototype.Io=function(){e.l.Yb()},e.b.g("DateTimeConverter.prototype.calculateWeek",{Io:e.Sb.prototype.Io}),e.Sb.prototype.parse=function(t){return e.Sb.r.parse.call(this,t)},e.b.g("DateTimeConverter.prototype.parse",{parse:e.Sb.prototype.parse}),e.ig=function(){this.Init()},o_("Validator",e.ig,e),e.b.ga(e.ig,e.b,"oj.Validator"),e.ig.prototype.Init=function(){e.ig.r.Init.call(this)},e.b.g("Validator.prototype.Init",{Init:e.ig.prototype.Init}),e.ig.prototype.validate=function(){e.l.Yb()},e.b.g("Validator.prototype.validate",{validate:e.ig.prototype.validate}),e.ig.prototype.wc=function(){e.l.Yb()},e.b.g("Validator.prototype.getHint",{wc:e.ig.prototype.wc}),e.Ah=function(t,r){var i=new e.X(t,r,e.X.Tb.ERROR);this.Init(i)},o_("ValidatorError",e.Ah,e),e.Ah.prototype=Error(),e.Ah.prototype.Init=function(e){var t=e.detail,r=e.summary;this.Tt=e,this.name="Validator Error",this.message=t||r},e.b.g("ValidatorError.prototype.Init",{Init:e.Ah.prototype.Init}),e.Ah.prototype.Iu=function(){return this.Tt},e.b.g("ValidatorError.prototype.getMessage",{Iu:e.Ah.prototype.Iu}),e.nf=function(e){this.Init(e)},o_("RequiredValidator",e.nf,e),e.b.ga(e.nf,e.ig,"oj.RequiredValidator"),e.nf.WF="oj-validator.required.detail",e.nf.XF="oj-validator.required.summary",e.nf.prototype.Init=function(t){e.nf.r.Init.call(this),this.kb=t},e.b.g("RequiredValidator.prototype.Init",{Init:e.nf.prototype.Init}),e.nf.prototype.validate=function(t){var r,i,a={},a="";if("number"==typeof t&&0===t||t&&0!==t.length)return!0;throw this.kb&&(r=this.kb.messageDetail||this.kb.message||null,i=this.kb.messageSummary||null,a=this.kb.label||""),a={label:a},t=i?e.ha.Mb(i,a):e.ha.A(this.BJ(),a),r=r?e.ha.Mb(r,a):e.ha.A(this.XI(),a),new e.Ah(t,r)},e.b.g("RequiredValidator.prototype.validate",{validate:e.nf.prototype.validate}),e.nf.prototype.wc=function(){var t="";return this.kb&&this.kb.hint&&(t=e.ha.A(this.kb.hint)),t},e.b.g("RequiredValidator.prototype.getHint",{wc:e.nf.prototype.wc}),e.nf.prototype.BJ=function(){return e.nf.XF},e.nf.prototype.XI=function(){return e.nf.WF},e.Yi=function(e){this.Init(e)},o_("DateRestrictionValidator",e.Yi,e),e.b.ga(e.Yi,e.ig,"oj.DateRestrictionValidator"),e.Yi.prototype.Init=function(t){e.Yi.r.Init.call(this),this.qca=t.dayFormatter,this.Jc=e.sb.getConverterInstance(t.converter),t&&(this.ria=t.messageSummary||null,this.qia=t.messageDetail||null)},e.b.g("DateRestrictionValidator.prototype.Init",{Init:e.Yi.prototype.Init}),e.Yi.prototype.Lga=function(e){var t=this.qca;if(t){var r=e.getFullYear(),i=e.getMonth()+1;return e=e.getDate(),(t=t({fullYear:r,month:i,date:e}))&&t.disabled}return!1},e.Yi.prototype.validate=function(t){var r="",i="",i=e.ha,r=this.ria,a=this.qia,o=t?this.Jc.format(t):t,n=t?e.sb.isoToLocalDate(t):null;if(null===t)return t;if(this.Lga(n))throw r=r?i.Mb(r,{value:o}):i.A("oj-validator.restriction.date.messageSummary",{value:o}),i=a?i.Mb(a,{value:o}):i.A("oj-validator.restriction.date.messageDetail",{value:o}),new e.Ah(r,i);return t},e.b.g("DateRestrictionValidator.prototype.validate",{validate:e.Yi.prototype.validate}),e.Yi.prototype.wc=function(){return null},e.b.g("DateRestrictionValidator.prototype.getHint",{wc:e.Yi.prototype.wc}),e.$j=function(e){this.Init(e)},o_("DateTimeRangeValidator",e.$j,e),e.b.ga(e.$j,e.ig,"oj.DateTimeRangeValidator"),e.$j.prototype.Init=function(t){e.$j.r.Init.call(this),this.Jc=e.sb.getConverterInstance(t.converter),this.ih=t.min||null,this.Kh=t.max||null,t&&(this.ax=t.hint||{},this.yw=t.messageSummary||{},this.xw=t.messageDetail||{})},e.b.g("DateTimeRangeValidator.prototype.Init",{Init:e.$j.prototype.Init
}),e.$j.prototype.validate=function(t){var r,i,a,o=this.yw,n=this.xw,s=n.rangeOverflow,n=n.rangeUnderflow,c=o.rangeOverflow,o=o.rangeUnderflow,l=e.sb,u=this.ih,d=this.Kh,p="",h="",f=e.ha,m=null;if(null===t)return t;if(m=this.Jc.format(t),r=l.isoToLocalDate(t),u&&(i=this.Jc?this.Jc.format(u):u,u=l.isoToLocalDate(l._minMaxIsoString(u,t))),d&&(a=this.Jc?this.Jc.format(d):d,d=l.isoToLocalDate(l._minMaxIsoString(d,t))),null!==u&&null!==d){if(r>=u&&r<=d||u>d)return t}else if(null!==u){if(r>=u)return t}else if(null===d||r<=d)return t;throw null!==d&&r>d?(m={value:m,max:a},p=c?c:f.A("oj-validator.range.datetime.messageSummary.rangeOverflow"),h=s?f.Mb(s,m):f.A("oj-validator.range.datetime.messageDetail.rangeOverflow",m)):null!==u&&r<u&&(m={value:m,min:i},p=o?o:f.A("oj-validator.range.datetime.messageSummary.rangeUnderflow"),h=n?f.Mb(n,m):f.A("oj-validator.range.datetime.messageDetail.rangeUnderflow",m)),new e.Ah(p,h)},e.b.g("DateTimeRangeValidator.prototype.validate",{validate:e.$j.prototype.validate}),e.$j.prototype.wc=function(){var t=null,r=this.ax,i=r.inRange,a=r.min,r=r.max,o=this.ih,n=this.Kh,s=o&&this.Jc?this.Jc.format(o):o,c=n&&this.Jc?this.Jc.format(n):n,l=null,u=e.ha;return null!==o&&null!==n?(l={min:s,max:c},t=i?u.Mb(i,l):u.A("oj-validator.range.datetime.hint.inRange",l)):null!==o?(l={min:s},t=a?u.Mb(a,l):u.A("oj-validator.range.datetime.hint.min",l)):null!==n&&(l={max:c},t=r?u.Mb(r,l):u.A("oj-validator.range.datetime.hint.max",l)),t},e.b.g("DateTimeRangeValidator.prototype.getHint",{wc:e.$j.prototype.wc}),e.g7=function(){return{createConverter:function(t){return new e.Kd(t)}}}(),e.qa.YS(e.Zj.CONVERTER_TYPE_NUMBER,e.g7),e.C6=function(){return{createConverter:function(t){return new e.cb(t)}}}(),e.qa.YS(e.Zj.CONVERTER_TYPE_DATETIME,e.C6),e.m7=function(){return{createValidator:function(t){return new e.nf(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_REQUIRED,e.m7),e.l7=function(){return{createValidator:function(t){return new e.mf(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_REGEXP,e.l7),e.D6=function(){return{createValidator:function(t){return new e.$j(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_DATETIMERANGE,e.D6),e.B6=function(){return{createValidator:function(t){return new e.Yi(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_DATERESTRICTION,e.B6),e.h7=function(){return{createValidator:function(t){return new e.bk(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_NUMBERRANGE,e.h7),e.W6=function(){return{createValidator:function(t){return new e.ul(t)}}}(),e.qa.Os(e.fd.VALIDATOR_TYPE_LENGTH,e.W6);var i={il:{latn:"0123456789",arab:"٠١٢٣٤٥٦٧٨٩",thai:"๐๑๒๓๔๕๖๗๘๙"},t6:/^(?:(en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))|(art-lojban|cel-gaulish|no-(?:bok|nyn)|zh-(?:guoyu|hakka|min|min-nan|xiang)))$|^(x(?:-[0-9a-z]{1,8})+)$|^(?:((?:[a-z]{2,3}(?:(?:-[a-z]{3}){1,3})?)|[a-z]{4}|[a-z]{5,8})(?:-([a-z]{4}))?(?:-([a-z]{2}|[0-9]{3}))?((?:-(?:[a-z0-9]{5,8}|[0-9][a-z0-9]{3}))*)?((?:-[0-9a-wy-z](?:-[a-z0-9]{2,8}){1,})*)?(-x(?:-[0-9a-z]{1,8})+)?)$/i,mqa:/^\s+|\s+$|\u200f|\u200e/g,nqa:/\s+|\u200f|\u200e/g,nra:["0","00","000"],CR:/^\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?)?$|^T\d{2}:\d{2}(?::\d{2}(?:\.\d{1,3})?)?(Z|[+-]\d{2}:\d{2})?$/,HJ:function(e){if(!e||"string"!=typeof e)return null;var t=i.CR.exec(e);return null===t&&i.sma(e),void 0!==t[1]?t[1]:null},dateToLocalIso:function(e){return i.sd(e.getFullYear(),4)+"-"+i.sd(e.getMonth()+1,2)+"-"+i.sd(e.getDate(),2)+"T"+i.sd(e.getHours(),2)+":"+i.sd(e.getMinutes(),2)+":"+i.sd(e.getSeconds(),2)+"."+i.sd(e.getMilliseconds(),3)},isoToLocalDate:function(e){return e&&"string"==typeof e?(null!==i.HJ(e)&&i.tma(),this._isoToLocalDateIgnoreTimezone(e)):null},_isoToLocalDateIgnoreTimezone:function(e){var t=e.split("T"),r=e.indexOf("T");e=new Date;var i=[e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0];if(""!==t[0]){var a=t[0].split("-");for(e=0;e<a.length;e++)i[e]=parseInt(a[e],10),1===e&&i[e]--}if(-1!==r){for(t=t[1].split("."),r=t[0].split(":"),e=0;e<r.length;e++)i[3+e]=parseInt(r[e],10);2===t.length&&t[1]&&(i[6]=parseInt(t[1],10))}return new Date(i[0],i[1],i[2],i[3],i[4],i[5],i[6])},tma:function(){var e;throw e=Error("time zone is not supported"),e.errorInfo={errorCode:"timeZoneNotSupported"},e},sma:function(e){var t;throw t=Error("The string "+e+" is not a valid ISO 8601 string."),t.errorInfo={errorCode:"invalidISOString",parameterMap:{isoStr:e}},t},trim:function(e){return(e+"").replace(i.mqa,"")},ol:function(e){return(e+"").replace(i.nqa,"")},pz:function(e,t){return 0===e.indexOf(t)},Ng:function(e){return e.split(" ").join(" ").toUpperCase()},sd:function(e,t){var r;return r=e+"",1<t&&r.length<t?(r=i.nra[t-2]+r,r.substr(r.length-t,t)):r},Joa:function(e,t){if(void 0===t)return"latn";var r=i.mr(t,"nu")||"";return void 0===e.numbers["symbols-numberSystem-"+r]&&(r="latn"),r},IE:function(e){if(e=i.t6.exec(e),!e)return null;var t=e[4],t=t?t.split("-"):null,r=null;t&&(r=t.shift());var a=e[7];(a=a?a.split("-"):null)&&a.shift();var o=e[9];(o=o?o.split("-"):null)&&(o.shift(),o.shift());var n=e[3];return(n=n?n.split("-"):null)&&n.shift(),{language:{language:r,Fsa:t||[]},Zsa:e[5]||null,region:e[6]||null,variant:a||null,Esa:i.eqa(e[8]),Wsa:o||n||[],Isa:{Lsa:e[1]||null,Xsa:e[2]||null}}},eqa:function(e){if(!e)return[];for(var t,r,i=[],a=!1,o=!1,n="",s=!1,c=0,l=e.length;c<l;c++)r=e[c],"-"!==r||a?a&&!o?(o=!0,t.singleton=r):"-"===r?s?1===n.length?(o=s=!1,i.push(t),t={singleton:null,extension:[]}):(t.extension.push(n),n=""):(n="",s=!0):n+=r:(a=!0,t={singleton:null,extension:[]});return t.extension.push(n),i.push(t),i},mr:function(e,t){var r=i.IE(e||"en-US");if(null===r||void 0===r)return null;var a,o,r=r.extension;for(o in r)if("u"===r[o].singleton){for(var n in r[o].extension)if(r[o].extension[n]===t){n++,a=r[o].extension[n];break}break}return a},Jsa:function(e){var t,r=0;for(t in e)r++;return r},Cg:function(e){e=e.main;var t,r;for(r in e){t=r;break}return e[t]},Gu:function(e){e=e.main;var t,r;for(r in e){t=r;break}return t},ym:function(e,t){if(void 0===e)throw Error("Internal "+t+" error. Default options missing.");return function(r,i,a,o){if(void 0!==e[r]){switch(o=e[r],i){case"boolean":o=Boolean(o);break;case"string":o=String(o);break;case"number":o=Number(o);break;default:throw Error("Internal error. Wrong value type.")}if(void 0!==a&&-1===a.indexOf(o)){for(i=[],o=0;o<a.length;o++)i.push(a[o]);throw a=new RangeError("The value '"+e[r]+"' is out of range for '"+t+"' options property '"+r+"'. Valid values: "+i),a.errorInfo={errorCode:"optionOutOfRange",parameterMap:{propertyName:r,propertyValue:e[r],propertyValueValid:i,caller:t}},a}}return o}}};e.cb=function(e){this.Init(e)},o_("IntlDateTimeConverter",e.cb,e),e.b.ga(e.cb,e.Sb,"oj.IntlDateTimeConverter"),e.cb.M7=new Date(1998,10,29,15,45,31),e.cb.prototype.Init=function(t){e.cb.r.Init.call(this,t)},e.b.g("IntlDateTimeConverter.prototype.Init",{Init:e.cb.prototype.Init}),e.cb.prototype.Xl=function(){return this.sy||(this.sy=o.re()),this.sy},e.cb.prototype.format=function(t){var r=e.La.lk(),i=e.ba.Bg(),a=this.resolvedOptions();if(null==t||"string"==typeof t&&0===e.Ea.trim(""+t).length)return"";try{return this.Xl().format(t,r,a,i)}catch(e){throw t=this.so(e,t)}},e.b.g("IntlDateTimeConverter.prototype.format",{format:e.cb.prototype.format}),e.cb.prototype.hE=function(t,r){var i=e.La.lk(),a=e.ba.Bg();try{return this.Xl().hE(t,i,r,a)}catch(e){throw i=this.so(e,t)}},e.b.g("IntlDateTimeConverter.prototype.formatRelative",{hE:e.cb.prototype.hE}),e.cb.prototype.wc=function(){var e=this.resolvedOptions().patternFromOptions||this.Rh().pattern;return e?e.toLowerCase():""},e.b.g("IntlDateTimeConverter.prototype.getHint",{wc:e.cb.prototype.wc}),e.cb.prototype.dJ=function(){var t="";try{t=this.format(e.sb.dateToLocalIso(e.cb.M7))}catch(r){r instanceof e.Qe&&(t="")}finally{return t}},e.cb.prototype.Rh=function(){return e.cb.r.Rh.call(this)},e.b.g("IntlDateTimeConverter.prototype.getOptions",{Rh:e.cb.prototype.Rh}),e.cb.prototype.resolvedOptions=function(){var t,r=e.ba.Bg(),i=this.Rh();if(r!==this.Qt||!this.Vx){t=e.La.lk();try{if(!t)return e.q.error("locale bundle for the current locale %s is unavailable",r),{};this.Vx=this.Xl().resolvedOptions(t,i,r),this.Qt=r}catch(e){throw t=this.so(e)}}return this.Vx},e.b.g("IntlDateTimeConverter.prototype.resolvedOptions",{resolvedOptions:e.cb.prototype.resolvedOptions}),e.cb.prototype.Uy=function(){var e=this.resolvedOptions(),t=e.hour12;return!(!e.hour||t)},e.b.g("IntlDateTimeConverter.prototype.isHourInDaySet",{Uy:e.cb.prototype.Uy}),e.cb.prototype.Ty=function(){var e=this.resolvedOptions(),t=e.hour12;return!(!e.hour||!t)},e.b.g("IntlDateTimeConverter.prototype.isHourInAMPMSet",{Ty:e.cb.prototype.Ty}),e.cb.prototype.Wy=function(){return this.Eq("minute")},e.b.g("IntlDateTimeConverter.prototype.isMinuteSet",{Wy:e.cb.prototype.Wy}),e.cb.prototype.Yy=function(){return this.Eq("second")},e.b.g("IntlDateTimeConverter.prototype.isSecondSet",{Yy:e.cb.prototype.Yy}),e.cb.prototype.Vy=function(){return this.Eq("millisecond")},e.b.g("IntlDateTimeConverter.prototype.isMilliSecondSet",{Vy:e.cb.prototype.Vy}),e.cb.prototype.Zy=function(){return this.Eq("year")},e.b.g("IntlDateTimeConverter.prototype.isYearSet",{Zy:e.cb.prototype.Zy}),e.cb.prototype.Xy=function(){return this.Eq("month")},e.b.g("IntlDateTimeConverter.prototype.isMonthSet",{Xy:e.cb.prototype.Xy}),e.cb.prototype.Sy=function(){return this.Eq("day")},e.b.g("IntlDateTimeConverter.prototype.isDaySet",{Sy:e.cb.prototype.Sy}),e.cb.prototype.Ry=function(){return this.Eq("weekday")},e.b.g("IntlDateTimeConverter.prototype.isDayNameSet",{Ry:e.cb.prototype.Ry}),e.cb.prototype.Io=function(t){return this.Xl().Io(t,e.La.lk(),e.ba.Bg())},e.b.g("IntlDateTimeConverter.prototype.calculateWeek",{Io:e.cb.prototype.Io}),e.cb.prototype.parse=function(t){var r,i;if(null==t||""===t)return null;var a=e.La.lk(),o=e.ba.Bg(),n=this.resolvedOptions();try{return r=this.Xl().parse(t,a,n,o),(i=r.value)&&r.warning&&e.q.warn("The value "+t+" was leniently parsed to represent a date "+i.toString?i.toString():i),i}catch(e){throw t=this.so(e,t)}},e.b.g("IntlDateTimeConverter.prototype.parse",{parse:e.cb.prototype.parse}),e.cb.prototype.so=function(t,r){var i,a,o,n,s=t.errorInfo;return s&&(i=s.errorCode,s=s.parameterMap,e.l.Kf(s),o=s.propertyName,t instanceof TypeError?"optionTypesMismatch"!==i&&"optionTypeInvalid"!==i||(a=e.sb.Ms(i,s)):t instanceof RangeError?"optionOutOfRange"===i?a=e.sb.Ms(i,s):"datetimeOutOfRange"===i&&(i=e.ha.A("oj-converter.datetime.datetimeOutOfRange.summary",{propertyName:o,value:s.value}),a=e.ha.A("oj-converter.datetime.datetimeOutOfRange.detail",{minValue:s.minValue,maxValue:s.maxValue}),a=new e.Qe(i,a)):t instanceof SyntaxError?"optionValueInvalid"===i&&(a=e.sb.Ms(i,s)):t instanceof Error&&("dateFormatMismatch"===i?n="oj-converter.datetime.dateFormatMismatch.summary":"timeFormatMismatch"===i?n="oj-converter.datetime.timeFormatMismatch.summary":"datetimeFormatMismatch"===i?n="oj-converter.datetime.datetimeFormatMismatch.summary":"dateToWeekdayMismatch"===i&&(i=e.ha.A("oj-converter.datetime.dateToWeekdayMismatch.summary",{date:s.date,weekday:s.weekday}),a=e.ha.A("oj-converter.datetime.dateToWeekdayMismatch.detail"),a=new e.Qe(i,a)),n&&(i=e.ha.A(n,{value:r||s.value,format:s.format}),a=e.ha.A("oj-converter.hint.detail",{exampleValue:this.dJ()}),a=new e.Qe(i,a)))),a||(a=i=t.message,a=new e.Qe(i,a)),a},e.cb.prototype.Eq=function(e){return!!this.resolvedOptions()[e]},e.bk=function(e){this.Init(e)},o_("NumberRangeValidator",e.bk,e),e.b.ga(e.bk,e.ig,"oj.NumberRangeValidator"),e.bk.prototype.Init=function(t){e.bk.r.Init.call(this),t&&(this.ih=t.min,this.Kh=t.max,this.Jc=e.sb.getConverterInstance(t.converter),this.ax=t.hint||{},this.yw=t.messageSummary||{},this.xw=t.messageDetail||{})},e.b.g("NumberRangeValidator.prototype.Init",{Init:e.bk.prototype.Init}),e.bk.prototype.validate=function(t){var r=t?t.toString():t,i=parseFloat(r),a=this.yw,o=this.xw,n=o.rangeOverflow,o=o.rangeUnderflow,s=a.rangeOverflow,a=a.rangeUnderflow,c=void 0!==this.ih?parseFloat(this.ih):null,l=void 0!==this.Kh?parseFloat(this.Kh):null,u=c&&this.Jc?this.Jc.format(c):c,d=l&&this.Jc?this.Jc.format(l):l,p="",h="",f=null,m=e.ha;if(null===t)return t;if(null!==c&&null!==l){if(i>=c&&i<=l||c>l)return r}else if(null!==c){if(i>=c)return r}else if(null===l||i<=l)return r;throw null!==l&&i>l?(f={value:t,max:d},p=s?s:m.A("oj-validator.range.number.messageSummary.rangeOverflow"),h=n?m.Mb(n,f):m.A("oj-validator.range.number.messageDetail.rangeOverflow",f)):null!==c&&i<c&&(f={value:t,min:u},p=a?a:m.A("oj-validator.range.number.messageSummary.rangeUnderflow"),h=o?m.Mb(o,f):m.A("oj-validator.range.number.messageDetail.rangeUnderflow",f)),new e.Ah(p,h)},e.b.g("NumberRangeValidator.prototype.validate",{validate:e.bk.prototype.validate}),e.bk.prototype.wc=function(){var t=null,r=this.ax,i=r.inRange,a=r.min,r=r.max,o=e.ha,n=void 0!==this.ih?parseFloat(this.ih):null,s=void 0!==this.Kh?parseFloat(this.Kh):null,c=n&&this.Jc?this.Jc.format(n):n,l=s&&this.Jc?this.Jc.format(s):s;return null!==n&&null!==s?t=i?o.Mb(i,{min:c,max:l}):o.A("oj-validator.range.number.hint.inRange",{min:c,max:l}):null!==n?t=a?o.Mb(a,{min:c}):o.A("oj-validator.range.number.hint.min",{min:c}):null!==s&&(t=r?o.Mb(r,{max:l}):o.A("oj-validator.range.number.hint.max",{max:l})),t},e.b.g("NumberRangeValidator.prototype.getHint",{wc:e.bk.prototype.wc}),e.Kd=function(e){this.Init(e)},o_("IntlNumberConverter",e.Kd,e),e.b.ga(e.Kd,e.ci,"oj.IntlNumberConverter"),e.Kd.prototype.Init=function(t){e.Kd.r.Init.call(this,t)},e.b.g("IntlNumberConverter.prototype.Init",{Init:e.Kd.prototype.Init}),e.Kd.prototype.Xl=function(){return this.sy||(this.sy=a.re()),this.sy},e.Kd.prototype.format=function(t){if(null==t||"string"==typeof t&&0===e.Ea.trim(""+t).length||"number"==typeof t&&isNaN(t))return"";var r=e.La.lk(),i=e.ba.Bg(),a=this.resolvedOptions();try{return this.Xl().format(t,r,a,i)}catch(e){throw t=this.so(e,t)}},e.b.g("IntlNumberConverter.prototype.format",{format:e.Kd.prototype.format}),e.Kd.prototype.wc=function(){return null},e.b.g("IntlNumberConverter.prototype.getHint",{wc:e.Kd.prototype.wc}),e.Kd.prototype.Rh=function(){return e.Kd.r.Rh.call(this)},e.b.g("IntlNumberConverter.prototype.getOptions",{Rh:e.Kd.prototype.Rh}),e.Kd.prototype.parse=function(t){var r=e.La.lk(),i=e.ba.Bg(),a=this.resolvedOptions();if(null==t||""===t)return null;try{return this.Xl().parse(e.Ea.trim(t),r,a,i)}catch(e){throw t=this.so(e,t)}},e.b.g("IntlNumberConverter.prototype.parse",{parse:e.Kd.prototype.parse}),e.Kd.prototype.resolvedOptions=function(){var t,r=e.ba.Bg();if(r!==this.Qt||!this.Vx){t=e.La.lk();try{if(!t)return e.q.error("locale bundle for the current locale %s is unavailable",r),{};this.Vx=this.Xl().resolvedOptions(t,this.Rh(),r),this.Qt=r}catch(e){throw t=this.so(e)}}return this.Vx},e.b.g("IntlNumberConverter.prototype.resolvedOptions",{resolvedOptions:e.Kd.prototype.resolvedOptions}),e.Kd.prototype.so=function(t,r){var i,a,o,n=t.errorInfo;return n&&(i=n.errorCode,n=n.parameterMap,e.l.Kf(n),t instanceof TypeError?"optionTypesMismatch"!==i&&"optionTypeInvalid"!==i||(a=e.sb.Ms(i,n)):t instanceof RangeError?"optionOutOfRange"===i&&(a=e.sb.Ms(i,n)):t instanceof SyntaxError?"optionValueInvalid"===i&&(a=e.sb.Ms(i,n)):t instanceof Error&&("decimalFormatMismatch"===i?o="oj-converter.number.decimalFormatMismatch.summary":"currencyFormatMismatch"===i?o="oj-converter.number.currencyFormatMismatch.summary":"percentFormatMismatch"===i?o="oj-converter.number.percentFormatMismatch.summary":"unsupportedParseFormat"===i&&(i=e.ha.A("oj-converter.number.decimalFormatUnsupportedParse.summary"),a=e.ha.A("oj-converter.number.decimalFormatUnsupportedParse.detail"),a=new e.Qe(i,a)),o&&(i=e.ha.A(o,{value:r||n.value,format:n.format}),a=e.ha.A("oj-converter.hint.detail",{exampleValue:this.dJ()}),a=new e.Qe(i,a)))),a||(a=i=t.message,a=new e.Qe(i,a)),a},e.Kd.prototype.dJ=function(){var t="";try{t=this.format(12345.98765)}catch(r){r instanceof e.Qe&&(t="")}finally{return t}};var a;a=function(){function e(){return{format:function(e,t,i,a){(2>=arguments.length||void 0===i)&&(i={useGrouping:!0,style:"decimal"}),l(i,"OraNumberConverter.format");var o={};return c(t,o,i,a),r(e,i,t,o,a)},parse:function(e,t,r,a){if("number"==typeof e)return e;if("[object Number]"===Object.prototype.toString.call(e))return Number(e);(2>=arguments.length||void 0===r)&&(r={useGrouping:!0,style:"decimal"});var u=e;l(r,"OraNumberConverter.parse");var d=i.Cg(t),p={},f=i.mr(a,"nu");if(void 0===i.il[f]&&(f="latn"),"latn"!==f){var m,g=[];for(m=0;m<e.length;m++){var v=i.il[f].indexOf(e[m]);-1!==v?g.push(v):g.push(e[m])}e=g.join("")}if(c(t,p,r,a),m=d.numbers[p.numberingSystem].decimal,f=d.numbers[p.numberingSystem].group,g=NaN,g=e.replace(/ /g,""),S.test(g))return g=parseFloat(e);var E=o(e,r,p,d),g=E[0],v=E[1],g=g||"+";if(E[2])return g=parseFloat(g+v),h(g,r,p,u);var v=v.replace(/ /g,""),y=p.exponential,b=v.indexOf(y.toLowerCase());return 0>b&&(b=v.indexOf(i.Ng(y))),0>b?(E=v,v=null):(E=v.substr(0,b),v=v.substr(b+y.length)),b=E.indexOf(m),0>b?(y=E,m=null):(y=E.substr(0,b),m=E.substr(b+m.length)),y=y.split(f).join(""),E=f.replace(/\u00A0/g," "),f!==E&&(y=y.split(E).join("")),f=g+y,null!==m&&(f+="."+m),null!==v&&(m=s(v,d,p),f+="e"+(m[0]||"+")+m[1]),_.test(f)?g=parseFloat(f):(f=n(e,p,d),g=parseFloat(f[0]+f[1])),h(g,r,p,u)},resolvedOptions:function(e,t,r){(3>arguments.length||void 0===r)&&(r=i.Gu(e)),(2>arguments.length||void 0===t)&&(t={useGrouping:!0,style:"decimal"});var a={};return l(t,"OraNumberConverter.resolvedOptions"),c(e,a,t,r),a.numberingSystemKey=i.mr(r,"nu"),void 0===i.il[a.numberingSystemKey]&&(a.numberingSystemKey="latn"),a={locale:r,style:void 0===t.style?"decimal":t.style,useGrouping:void 0===t.useGrouping||t.useGrouping,minimumIntegerDigits:a.minimumIntegerDigits,minimumFractionDigits:a.minimumFractionDigits,maximumFractionDigits:a.maximumFractionDigits,numberingSystem:a.numberingSystemKey},"decimal"===t.style&&void 0!==t.decimalFormat&&(a.decimalFormat=t.decimalFormat),"currency"===t.style&&(a.currency=t.currency,a.currencyDisplay=void 0===t.currencyDisplay?"symbol":t.currencyDisplay),void 0!==t.pattern&&(a.pattern=t.pattern),a}}}var t,r,a,o,n,s,c,l,u,d,p,h,f,m,g,v,E,y,b,I,T,S=/^[+\-]?infinity$/i,_=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,P=/([^+-.0-9]*)([+\-]?\d*\.?\d*(E[+\-]?\d+)?).*$/,A=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,C=/(^0\.0*)([^0].*$)/,R={trillion:[1e14,1e13,1e12],billion:[1e11,1e10,1e9],million:[1e8,1e7,1e6],thousand:[1e5,1e4,1e3]},O={trillion:1e12,billion:1e9,million:1e6,thousand:1e3};t=function(e,t,r){var i;for(i=e.length;i<t;i+=1)e=r?"0"+e:e+"0";return e},d=function(e,t,r,i){var a=new RangeError(e+" is out of range.  Enter a value between "+t+" and "+r+" for "+i);throw a.errorInfo={errorCode:"numberOptionOutOfRange",parameterMap:{value:e,minValue:t,maxValue:r,propertyName:i}},a},p=function(e,t,r,i,a){return e=e[t],void 0!==e?(e=Number(e),(isNaN(e)||e<r||e>i)&&d(e,r,i,t),Math.floor(e)):a},c=function(e,t,r,o){var n=i.Cg(e);if(o=i.Joa(n,o),t.numberingSystemKey=o,t.numberingSystem="symbols-numberSystem-"+o,void 0!==r.pattern&&0<r.pattern.length)o=r.pattern;else{var s;switch(r.style){case"decimal":s="decimalFormats-numberSystem-";break;case"currency":s="currencyFormats-numberSystem-";break;case"percent":s="percentFormats-numberSystem-";break;default:s="decimalFormats-numberSystem-"}s+=t.numberingSystemKey,o=n.numbers[s].standard;var c=r.decimalFormat;void 0!==c&&(t.shortDecimalFormat=n.numbers[s][c].decimalFormat)}s=i.IE(i.Gu(e)).language.language,t.plurals=e.supplemental.plurals,t.lang=s,t.pat=o,t.minusSign=n.numbers[t.numberingSystem].minusSign,t.decimalSeparator=n.numbers[t.numberingSystem].decimal,t.exponential=n.numbers[t.numberingSystem].exponential,t.groupingSeparator=n.numbers[t.numberingSystem].group,t.currencyDisplay=r.currencyDisplay,void 0!==r.currency&&(t.currencyCode=r.currency.toUpperCase()),t.style=r.style,a(r,o,n,t),void 0===r.pattern&&(t.minimumIntegerDigits=p(r,"minimumIntegerDigits",1,21,t.minimumIntegerDigits),void 0!==r.maximumFractionDigits&&(t.maximumFractionDigits=p(r,"maximumFractionDigits",0,20,t.maximumFractionDigits),t.maximumFractionDigits<t.minimumFractionDigits&&(t.minimumFractionDigits=t.maximumFractionDigits)),void 0!==r.minimumFractionDigits&&(t.minimumFractionDigits=p(r,"minimumFractionDigits",0,20,t.minimumFractionDigits)),t.maximumFractionDigits<t.minimumFractionDigits&&(t.maximumFractionDigits=t.minimumFractionDigits))},u=function(e){var t=new TypeError('The property "currency" is required whenthe property "'+e+'" is "currency". An accepted value is a three-letter ISO 4217 currency code.');throw t.errorInfo={errorCode:"optionTypesMismatch",parameterMap:{propertyName:e,propertyValue:"currency",requiredPropertyName:"currency",requiredPropertyValueValid:"a three-letter ISO 4217 currency code"}},t},f=function(){var e;throw e=Error("long and short decimalFormats are not supported for parsing"),e.errorInfo={errorCode:"unsupportedParseFormat",parameterMap:{value:"decimal"}},e},l=function(e,t){var r=i.ym(e,t),a=r("style","string",["currency","decimal","percent","perMill"],"decimal");"decimal"===a&&(a=r("decimalFormat","string",["standard","short","long"]),"OraNumberConverter.parse"===t&&void 0!==a&&"standard"!==a&&f()),r=r("currency","string"),"currency"===a&&void 0===r&&u("style")},v=function(e,t,r){function i(e){var t=0,r=0,i=0,a="";if("0"!==e[0]){for(;"0"!==e[t]&&t<e.length;)t++;a=e.substr(0,t),i=t}for(t=i;t<e.length&&"0"===e[t];t++)r++;return[a,r]}var a=function(e){var t,r,i;for(t in R)for(i=R[t].length,r=0;r<i;r++)if(R[t][r]<=e)return[t,R[t][r]];return[e,null]}(e),o="";if(null!==a[1]){var o=r.plurals[r.lang](Math.floor(e/O[a[0]])),n=""+a[1]+"-count-"+o,n=r.shortDecimalFormat[n];void 0===n&&(n=""+a[1]+"-count-other",n=r.shortDecimalFormat[n]);var s=i(n),c=s[1],o=s[0];if(c<n.length){var l=1*Math.pow(10,c),l=a[1]/l*10;e/=l}}return a="",void 0!==n&&(a=n.substr(c+s[0].length)),a=o+m(e,t,r)+a},g=function(e,r){var i=e+"",a=0,o=i.split(/e/i),n=o[0];C.lastIndex=0;var s=C.exec(n);null!==s?(a=s[1].length-1,n=s[2]):n=n.replace(".","");var s=1<o.length?parseInt(o[1],10):0,o=parseInt(n,10),c=r.minimumIntegerDigits+r.maximumFractionDigits;return n.length>c&&(c-=n.length,o=Math.round(o*Math.pow(10,c))),c=r.minimumIntegerDigits+r.minimumFractionDigits,o=t(o+"",c,!1),s=-1!==i.indexOf(".")?s-(r.minimumIntegerDigits-i.indexOf(".")+a):s-(c-n.length-r.minimumFractionDigits),i=Math.abs(s),i=t(i+"",r.minExponentDigits,!0),0>s&&(i=r.minusSign+i),a=o.slice(0,r.minimumIntegerDigits),a=0<o.slice(r.minimumIntegerDigits).length?a+(r.decimalSeparator+o.slice(r.minimumIntegerDigits)+r.exponential+i):a+(r.exponential+i)},m=function(e,r,i){var a,o=i.groupingSize,n=i.groupingSize0,s=(e+"").split(/e/i),c=1<s.length?parseInt(s[1],10):0;a=s[0];var s=a.split("."),l=1<s.length?s[1]:"";if(1<s.length&&l.length>c){var u=Math.min(i.maximumFractionDigits,l.length-c);a=Math.pow(10,u),a=Math.round(e*a)/a,isFinite(a)||(a=e),e=a}for(s=(e+"").split(/e/i),c=1<s.length?parseInt(s[1],10):0,a=s[0],s=a.split("."),a=s[0],l=1<s.length?s[1]:"",0<c?(l=t(l,c,!1),a+=l.slice(0,c),l=l.substr(c)):0>c&&(c=-c,a=t(a,c+1,!0),l=a.slice(-c,a.length)+l,a=a.slice(0,-c)),l=0<u?i.decimalSeparator+(l.length>u?l.slice(0,u):t(l,u,!1)):0<i.minimumFractionDigits?i.decimalSeparator:"",l=t(l,i.decimalSeparator.length+i.minimumFractionDigits,!1),e=i.groupingSeparator,u="",!1===r.useGrouping&&void 0===r.pattern&&(e=""),a=t(a,i.minimumIntegerDigits,!0),r=a.length-1,l=1<l.length?l:"";0<=r;){if(0===o||o>r)return i=a.slice(0,r+1)+(u.length?e+u+l:l);u=a.slice(r-o+1,r+1)+(u.length?e+u:""),r-=o,0<n&&(o=i.groupingSize0)}return i=a.slice(0,r+1)+e+u+l},r=function(e,t,r,a,o){if(r=i.Cg(r),!isFinite(e))return 1/0===e||-(1/0)===e?r.numbers[a.numberingSystem].infinity:r.numbers[a.numberingSystem].nan;if(r=Math.abs(e),!0===a.isPercent||"percent"===t.style?r*=100:!0===a.isPerMill&&(r*=1e3),r="decimal"===t.style&&void 0!==t.decimalFormat&&"standard"!==t.decimalFormat?v(r,t,a):!0===a.useExponentialNotation?g(r,a):m(r,t,a),t="",t=0>e?t+(a.negativePrefix+r+a.negativeSuffix):t+(a.positivePrefix+r+a.positiveSuffix),e=i.mr(o,"nu"),void 0===i.il[e]&&(e="latn"),"latn"!==e){for(o=[],a=0;a<t.length;a++)"0"<=t[a]&&"9">=t[a]?o.push(i.il[e][t[a]]):o.push(t[a]);return o.join("")}return t},o=function(e,t,r,a){e=i.ol(e);var o="",s=!1,c=new RegExp("^"+a.numbers[r.numberingSystem].plusSign.replace(A,"\\$1"));e=e.replace(c,"");var l=i.ol(r.positivePrefix),u=i.ol(r.positiveSuffix),d=i.ol(r.negativePrefix),c=i.ol(r.negativeSuffix),p=new RegExp("^"+(l||"").replace(A,"\\$1")),h=new RegExp((u||"").replace(A,"\\$1")+"$"),f=new RegExp("^"+(d||"").replace(A,"\\$1")),m=new RegExp((c||"").replace(A,"\\$1")+"$");if(!0===f.test(e)&&!0===m.test(e))e=e.replace(f,""),e=e.replace(m,""),o="-",s=!0;else if(!0===p.test(e)&&!0===h.test(e))e=e.replace(p,""),e=e.replace(h,""),o="+",s=!0;else if("currency"===t.style){t=p=r.currencyCode;var g;void 0!==a.numbers.currencies[p]&&(t=a.numbers.currencies[p].symbol),void 0===r.currencyDisplay||"symbol"===r.currencyDisplay?g=t:"code"===r.currencyDisplay&&(g=p),void 0!==g&&(p=(l||"").replace(g,""),u=(u||"").replace(g,""),d=(d||"").replace(g,""),g=(c||"").replace(g,""),p=new RegExp(("^"+p).replace(A,"\\$1")),h=new RegExp(u.replace(A,"\\$1")+"$"),f=new RegExp(("^"+d).replace(A,"\\$1")),m=new RegExp(g.replace(A,"\\$1")+"$"),!0===f.test(e)&&!0===m.test(e)?(e=e.replace(f,""),e=e.replace(m,""),o="-",s=!0):!0===p.test(e)&&!0===h.test(e)&&(e=e.replace(p,""),e=e.replace(h,""),o="+",s=!0))}return s?r=[o,e]:(r=n(e,r,a),r[2]=!0),r},n=function(e,t,r){var a=r.numbers[t.numberingSystem].group,o=r.numbers[t.numberingSystem].decimal,n=r.numbers[t.numberingSystem].minusSign,s="",c="";return t=i.Ng(r.numbers[t.numberingSystem].exponential),e=i.Ng(e),e=e.split(t).join("E"),e=e.split(a).join(""),t=a.replace(/\u00A0/g," "),a!==t&&(e=e.split(t).join("")),e=e.split(o).join("."),"."===e.charAt(0)&&(e=e.substr(1),c="."),e=e.replace(n,"-"),a=P.exec(e),c+=a[2],i.pz(c,"-")?(c=c.substr(1),s="-"):i.pz(e,"+")&&(c=c.substr(1),s="+"),[s,c]},s=function(e,t,r){var a=t.numbers[r.numberingSystem].minusSign;t=t.numbers[r.numberingSystem].plusSign;var o;return e=i.ol(e),a=i.ol(a),t=i.ol(t),i.pz(e,a)?o=["-",e.substr(a.length)]:i.pz(e,i.ol(t))&&(o=["+",e.substr(t.length)]),o||["",e]};var N,D,L,w;return T=function(e){var t;throw t=new SyntaxError('Unexpected character(s) encountered in the pattern "'+e+' An example of a valid pattern is "#,##0.###".'),t.errorInfo={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,propertyValueHint:"#,##0.###"}},t},y=function(e,t,r){return null!==new RegExp(r,"i").exec(e.substr(t,r.length))},I=function(e,t){var r={};null!==N&&(t.positivePrefix=b(N,e,t,r)),null!==D&&(t.positiveSuffix=b(D,e,t,r)),null!==L&&(t.negativePrefix=b(L,e,t,r)),null!==w&&(t.negativeSuffix=b(w,e,t,r)),void 0!==r.name&&(t.positiveSuffix=" "+r.name,t.positivePrefix="","ar"===t.lang?(t.negativeSuffix=e.numbers[t.numberingSystem].minusSign+" "+r.name,t.negativePrefix=""):(t.negativeSuffix=" "+r.name,t.negativePrefix=e.numbers[t.numberingSystem].minusSign))},b=function(e,t,r,i){for(var a="",o=0;o<e.length;){var n=e.charAt(o++);if("'"!==n){switch(n){case"¤":var s=n=r.currencyCode,c=n;void 0!==t.numbers.currencies[n]&&(s=t.numbers.currencies[n].displayName,c=t.numbers.currencies[n].symbol),void 0===r.currencyDisplay||"symbol"===r.currencyDisplay?n=c:"code"!==r.currencyDisplay&&(n=s,i.name=n);break;case"%":n=t.numbers[r.numberingSystem].percentSign;break;case"‰":n=t.numbers[r.numberingSystem].perMille;break;case"-":n=t.numbers[r.numberingSystem].minusSign}a=a.concat(n)}}return a},a=function(e,t,r,i){for(var a=!1,o=!1,n=0,s=0,c=!0,l=1;0<=l&&s<t.length;--l){for(var d,p=!1,h="",f="",m=-1,g=1,v=0,E=0,b=0,S=-1,_=-1,P=0,c=!0,A=s;A<t.length;++A){var C=t.charAt(A);switch(P){case 0:case 2:if(p){if("'"===C){A+1<t.length&&"'"===t.charAt(A+1)?(++A,c?h=h.concat("''"):f=f.concat("''")):p=!1;continue}}else{if("#"===C||"0"===C||","===C||"."===C){P=1,--A;continue}if("¤"===C){void 0===e.currency&&u("pattern"),e.style="currency",(C=A+1<t.length&&"¤"===t.charAt(A+1))&&++A,c?h=h.concat(C?"'¤¤":"'¤"):f=f.concat(C?"'¤¤":"'¤");continue}if("'"===C){if("'"===C){A+1<t.length&&"'"===t.charAt(A+1)?(++A,c?h=h.concat("''"):f=f.concat("''")):p=!0;continue}}else{if(";"===C){0!==P&&0!==l||T(t),s=A+1,A=t.length;continue}if("%"===C){e.style="percent",1!==g&&T(t),i.isPercent=!0,g=100,c?h=h.concat("'%"):f=f.concat("'%");continue}if("‰"===C){1!==g&&T(t),e.style="perMill",i.isPerMill=!0,g=1e3,c?h=h.concat("'‰"):f=f.concat("'‰");continue}if("-"===C){c?h=h.concat("'-"):f=f.concat("'-");continue}}}c?h=h.concat(C):f=f.concat(C);break;case 1:if(1!==l){0===--n&&(P=2,c=!1);continue}if(++n,"#"===C)0<E?++b:++v,0<=S&&0>m&&++S;else if("0"===C)0<b&&T(t),++E,0<=S&&0>m&&++S;else if(","===C)_=S,S=0;else if("."===C)0<=m&&T(t),m=v+E+b;else if(y(t,A,"E")){for(o&&T(t),o=!0,d=0,A+=1;A<t.length&&"0"===t.charAt(A);)++d,++n,++A;(1>v+E||1>d)&&T(t),P=2,c=!1,--A}else P=2,c=!1,--A,--n}}0===E&&0<v&&0<=m&&(E=m,0===E&&++E,b=v-E,v=E-1,E=1),(0>m&&0<b||0<=m&&(m<v||m>v+E)||0===S||p)&&T(t),1===l?(N=h,D=f,L=N,w=D,p=v+E+b,i.minimumIntegerDigits=(0<=m?m:p)-v,i.maximumIntegerDigits=o?v+i.minimumIntegerDigits:2147483647,i.maximumFractionDigits=0<=m?p-m:0,i.minimumFractionDigits=0<=m?v+E-m:0,i.groupingSize=0<S?S:0,i.groupingSize0=_):(L=h,w=f,a=!0)}0===t.length&&(N=D="",i.minimumIntegerDigits=0,i.maximumIntegerDigits=2147483647,i.minimumFractionDigits=0,i.maximumFractionDigits=2147483647),i.useExponentialNotation=o,i.minExponentDigits=d,(!a||0===L.localeCompare(N)&&0===w.localeCompare(D))&&("currency"===e.style&&"ar"===i.lang?(w=D+"'‏-",L=N):(w=D,L="'-"+N)),I(r,i)},h=function(e,t,r,i){if(isNaN(e)){var a;switch(e="Unparsable number "+i+" The expected number pattern is "+r.pat,t.style){case"decimal":a="decimalFormatMismatch";break;case"currency":a="currencyFormatMismatch";break;case"percent":a="percentFormatMismatch"}throw t=Error(e),t.errorInfo={errorCode:a,parameterMap:{value:i,format:r.pat}},t}return!0===r.isPercent||"percent"===t.style?e/=100:!0===r.isPerMill&&(e/=1e3),e},{re:function(){return E||(E=e()),E}}}(),e.mf=function(e){this.Init(e)},o_("RegExpValidator",e.mf,e),e.b.ga(e.mf,e.ig,"oj.RegExpValidator"),e.mf.WF="oj-validator.regExp.detail",e.mf.XF="oj-validator.regExp.summary",e.mf.prototype.Init=function(t){e.mf.r.Init.call(this),this.kb=t},e.b.g("RegExpValidator.prototype.Init",{Init:e.mf.prototype.Init}),e.mf.prototype.validate=function(t){var r,i,a,o=this.kb&&this.kb.pattern||"";if(null===t||void 0===t||""===t)return!0;t=t?t.toString():t;var n;if(n=t.match("^("+o+")$"),null===n||n[0]!==t)throw this.kb&&(i=this.kb.messageSummary||null,a=this.kb.messageDetail||null,r=this.kb&&this.kb.label||""),t={label:r,pattern:o,value:t},i=i?e.ha.Mb(i,t):e.ha.A(this.BJ(),t),a=a?e.ha.Mb(a,t):e.ha.A(this.XI(),t),new e.Ah(i,a);return!0},e.b.g("RegExpValidator.prototype.validate",{validate:e.mf.prototype.validate}),e.mf.prototype.wc=function(){var t=null,r={};return this.kb&&this.kb.hint&&(r={pattern:this.kb.pattern},t=e.ha.Mb(this.kb.hint,r)),t},e.b.g("RegExpValidator.prototype.getHint",{wc:e.mf.prototype.wc}),e.mf.prototype.BJ=function(){return e.mf.XF},e.mf.prototype.XI=function(){return e.mf.WF},e.sb={},o_("IntlConverterUtils",e.sb,e),e.sb.isoToLocalDate=function(e){return i.isoToLocalDate(e)},e.sb.dateToLocalIso=function(e){return i.dateToLocalIso(e)},e.sb._isoToLocalDateIgnoreTimezone=function(e){return i._isoToLocalDateIgnoreTimezone(e)},e.sb.HJ=function(e){return i.HJ(e)},e.sb.getConverterInstance=function(t){var r="",i={},a=null;return t&&("object"==typeof t&&(t instanceof e.ye||t.parse&&"function"==typeof t.parse||t.format&&"function"==typeof t.format?a=t:(r=t.type,i=t.options||{})),a||(r=r||t)&&"string"==typeof r&&(t=e.qa.rm(r),a=t.createConverter(i))),a},e.sb._minMaxIsoString=function(e,t){if(e){t=t||this.dateToLocalIso(new Date);var r=t.indexOf("T");0===e.indexOf("T")&&0<r&&(e=t.substring(0,r)+e)}return e},e.sb.Ms=function(t,r){
e.l.Kf(r);var i,a="",o="",n=r.propertyName;return"optionTypesMismatch"===t?(o=r.requiredPropertyName,i=r.requiredPropertyValueValid,a=e.ha.A("oj-converter.optionTypesMismatch.summary",{propertyName:n,propertyValue:r.propertyValue,requiredPropertyName:o}),o=e.sb.TB(o,i)):"optionTypeInvalid"===t?(n=r.propertyName,i=r.propertyValueValid,a=e.ha.A("oj-converter.optionTypeInvalid.summary",{propertyName:n}),o=e.sb.TB(n,i)):"optionOutOfRange"===t?(a=e.ha.A("oj-converter.optionOutOfRange.summary",{propertyName:n,propertyValue:r.propertyValue}),i=r.propertyValueValid,o=e.sb.TB(n,i)):"optionValueInvalid"===t&&(a=e.ha.A("oj-converter.optionValueInvalid.summary",{propertyName:n,propertyValue:r.propertyValue}),i=r.propertyValueHint,o=e.sb.TB(n,i)),new e.Qe(a,o)},e.sb.TB=function(t,r){var i;return r?("string"==typeof r?i="oj-converter.optionHint.detail":(i="oj-converter.optionHint.detail-plural",r=r.join(e.ha.A("oj-converter.plural-separator"))),e.ha.A(i,{propertyName:t,propertyValueValid:r})):""},e.sb.Ora=function(){return""};var o;o=function(){function e(){return{format:function(e,t,r,a){var o;if("number"==typeof e)o=new Date(e);else{if("string"!=typeof e)return null;if(""===i.trim(e))return null;o=i.isoToLocalDate(e)}(2>=arguments.length||void 0===r)&&(r={year:"numeric",month:"numeric",day:"numeric"}),o=n(o,t,r);var s=i.mr(a,"nu");if(void 0===i.il[s]&&(s="latn"),"latn"!==s){var c,l=[];for(c=0;c<o.length;c++)"0"<=o[c]&&"9">=o[c]?l.push(i.il[s][o[c]]):l.push(o[c]);return l.join("")}return o},hE:function(e,t,r){return c(e,t,r)},parse:function(e,t,r,i){return s(e,t,r,i)},resolvedOptions:function(e,t,a){(3>arguments.length||void 0===a)&&(a=i.Gu(e)),(2>arguments.length||void 0===t)&&(t={year:"numeric",month:"numeric",day:"numeric"});var n,s=!1;if(n=i.mr(a,"nu"),void 0===i.il[n]&&(n="latn"),void 0!==t&&void 0!==t.pattern)return n=u(a,n,t.pattern),n.pattern=t.pattern,n;if(void 0!==t){n={locale:a,numberingSystem:n,calendar:"gregorian"};var c=0;for(c in t)c++;if(0==c)return n.year="numeric",n.month="numeric",n.day="numeric",n;var c=i.ym(t,"OraDateTimeConverter.resolvedOptions"),l=c("year","string",["2-digit","numeric"]);if(void 0!==l&&(n.year=l,s=!0),l=c("era","string",["narrow","short","long"]),void 0!==l&&(n.era=l,s=!0),l=c("month","string",["2-digit","numeric","narrow","short","long"]),void 0!==l&&(n.month=l,s=!0),l=c("day","string",["2-digit","numeric"]),void 0!==l&&(n.day=l,s=!0),l=c("weekday","string",["narrow","short","long"]),void 0!==l&&(n.weekday=l,s=!0),l=c("hour","string",["2-digit","numeric"]),void 0!==l&&(n.hour=l,s=!0,l=c("hour12","boolean",[!0,!1]),void 0===l&&(l=h(e)),n.hour12=l),l=c("minute","string",["2-digit","numeric"]),void 0!==l&&(n.minute=l,s=!0),l=c("second","string",["2-digit","numeric"]),void 0!==l&&(n.second=l,s=!0),n["two-digit-year-start"]=p(t),!s){var s=m(t,e,o.resolvedOptions),l=c("formatType","string",["date","time","datetime"],"date"),d=c("dateFormat","string",["short","medium","long","full"],"short"),c=c("timeFormat","string",["short","medium","long","full"],"short");return n.formatType=l,"datetime"!==l&&"date"!==l||(n.dateFormat=d),"datetime"!==l&&"time"!==l||(n.timeFormat=c),n.patternFromOptions=s,n}return n.patternFromOptions=r(t,e,"OraDateTimeConverter.resolvedOptions"),n}return c=r({year:"numeric",month:"numeric",day:"numeric"},e,"OraDateTimeConverter.resolvedOptions"),{calendar:"gregorian",locale:a,numberingSystem:n,year:"numeric",month:"numeric",day:"numeric",patternFromOptions:c}},Io:function(e){e=i.isoToLocalDate(e);var t=new Date(e.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1}}}var t,r,a,n,s,c,l,u,d,p,h,f,m,g,v,E,y,b,I,T,S,_,P,A,C,R,O,N,D,L,w,M,k,U,x,F,G,H,V,j,Y,q,$,W,B,K,z,X,J,Q,Z,ee,te,re,ie={},ae=/(\d{1,4})\D+?(\d{1,4})/g,oe=/(\d{1,4})\D+?(\d{1,4})\D+?(\d{1,4})/g,ne=/^[M][^M]|[^M]M[^M]/g,se=/^[L][^L]|[^L]L[^L]/g,ce=/^[d][^d]|[^d]d[^d]/g,le=/(?:^|[^h])h[^h]|[^H]H[^H]|[^k]k[^k]|[^K]K[^K]/,ue=/(\d{1,2})(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,2}))?(?:\D+?(\d{1,3}))?/g,de=/h|H|K|k/g,pe=/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,he=/ccccc|cccc|ccc|cc|c|EEEEE|EEEE|EEE|EE|E|dd|d|MMMMM|MMMM|MMM|MM|M|LLLLL|LLLL|LLL|LL|L|yyyy|yy|y|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|aa|a|SSS|SS|S|zzzz|zzz|zz|z|GGGGG|GGGG|GGG|GG|G/g,fe=/\s?(?:\(|\[)??z{1,4}(?:\)|\])?/g,me={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},ge={MMM:{token:"months",style:"format",mLen:"abbreviated",matchIndex:0,key:"month",value:"short",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},MMMM:{token:"months",style:"format",mLen:"wide",matchIndex:0,key:"month",value:"long",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},MMMMM:{token:"months",style:"format",mLen:"narrow",matchIndex:0,key:"month",value:"narrow",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},LLL:{token:"months",style:"stand-alone",mLen:"abbreviated",matchIndex:1,key:"month",value:"short",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},LLLL:{token:"months",style:"stand-alone",mLen:"wide",matchIndex:1,key:"month",value:"long",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},LLLLL:{token:"months",style:"stand-alone",mLen:"narrow",matchIndex:1,key:"month",value:"narrow",regExp:"(\\D+|\\d\\d?\\D|\\d\\d?|\\D+\\d\\d?)"},E:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},EE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},EEE:{token:"days",style:"format",dLen:"abbreviated",matchIndex:0,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},EEEE:{token:"days",style:"format",dLen:"wide",matchIndex:0,key:"weekday",value:"long",regExp:"(\\D+|\\D+\\d\\d?)"},EEEEE:{token:"days",style:"format",dLen:"narrow",matchIndex:0,key:"weekday",value:"narrow",regExp:"(\\D+|\\D+\\d\\d?)"},c:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},cc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},ccc:{token:"days",style:"stand-alone",dLen:"abbreviated",matchIndex:1,key:"weekday",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},cccc:{token:"days",style:"stand-alone",dLen:"wide",matchIndex:1,key:"weekday",value:"long",regExp:"(\\D+|\\D+\\d\\d?)"},ccccc:{token:"days",style:"stand-alone",dLen:"narrow",matchIndex:1,key:"weekday",value:"narrow",regExp:"(\\D+|\\D+\\d\\d?)"},h:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},hh:{token:"time",timePart:"hour",start1:0,end1:11,start2:1,end2:12,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},K:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},KK:{token:"time",timePart:"hour",start1:0,end1:11,start2:0,end2:11,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},H:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},HH:{token:"time",timePart:"hour",start1:0,end1:23,start2:0,end2:23,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},k:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"numeric",regExp:"(\\d\\d?)"},kk:{token:"time",timePart:"hour",start1:0,end1:23,start2:1,end2:24,key:"hour",value:"2-digit",regExp:"(\\d\\d?)"},m:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"numeric",regExp:"(\\d\\d?)"},mm:{token:"time",timePart:"minute",start1:0,end1:59,start2:0,end2:59,key:"minute",value:"2-digit",regExp:"(\\d\\d?)"},s:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"numeric",regExp:"(\\d\\d?)"},ss:{token:"time",timePart:"second",start1:0,end1:59,start2:0,end2:59,key:"second",value:"2-digit",regExp:"(\\d\\d?)"},S:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},SSS:{token:"time",timePart:"millisec",start1:0,end1:999,start2:0,end2:999,key:"millisecond",value:"numeric",regExp:"(\\d{1,3})"},d:{token:"dayOfMonth",key:"day",value:"numeric",getPartIdx:2,regExp:"(\\d\\d?)"},dd:{token:"dayOfMonth",key:"day",value:"2-digit",getPartIdx:2,regExp:"(\\d\\d?)"},M:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},MM:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},L:{token:"monthIndex",key:"month",value:"numeric",getPartIdx:1,regExp:"(\\d\\d?)"},LL:{token:"monthIndex",key:"month",value:"2-digit",getPartIdx:1,regExp:"(\\d\\d?)"},y:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},yy:{token:"year",key:"year",value:"2-digit",regExp:"(\\d\\d?)"},yyyy:{token:"year",key:"year",value:"numeric",regExp:"(\\d{1,4})"},a:{token:"ampm",key:"hour12",value:!0,regExp:"(\\D*)"},z:{token:"tz",key:"timeZoneName",value:"short",regExp:"([+-]?\\d{1,4})"},zz:{token:"tz",key:"timeZoneName",value:"short",regExp:"([+-]?\\d{1,4})"},zzz:{token:"tz",key:"timeZoneName",value:"short",regExp:"([+-]?\\d{1,4})"},zzzz:{token:"tz",key:"timeZoneName",value:"long",regExp:"([+-]?\\d{1,4})"},G:{token:"era",key:"era",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},GG:{token:"era",key:"era",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},GGG:{token:"era",key:"era",value:"short",regExp:"(\\D+|\\D+\\d\\d?)"},GGGG:{token:"era",key:"era",value:"long",regExp:"(\\D+|\\D+\\d\\d?)"},GGGGG:{token:"era",key:"era",value:"narrow",regExp:"(\\D+|\\D+\\d\\d?)"},"/":{token:"slash",regExp:"(\\/)"}};return p=function(e){return e=e["two-digit-year-start"],(void 0===e||isNaN(e))&&(e=1950),e=parseInt(e,10)},h=function(e){var t=i.IE(i.Gu(e)).region||"001";return"h"===e.supplemental.prefferedHours[t]},g=function(e){return 0==e%400||0!=e%100&&0==e%4},v=function(e,t){switch(t){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return 31;case 1:return g(e)?29:28;default:return 30}},m=function(e,t,r){t=i.Cg(t);var a=i.ym(e,r);e=a("formatType","string",["date","time","datetime"],"date"),r=a("dateFormat","string",["short","medium","long","full"],"short");var a=a("timeFormat","string",["short","medium","long","full"],"short"),o=t.dates.calendars.gregorian;t=o.dateFormats;var n,s,c,o=o.timeFormats;switch(r){case"full":n=t.full;break;case"long":n=t.long;break;case"medium":n=t.medium;break;case"short":n=t.short}switch(a){case"full":s=o.full;break;case"long":s=o.long;break;case"medium":s=o.medium;break;case"short":s=o.short}return void 0===n||"datetime"!==e&&"date"!==e||(c=n),void 0===s||"datetime"!==e&&"time"!==e||(s=s.replace(fe,""),c=c?c+" "+s:s),c},t=function(e,t){for(var r=0,i=!1,a=0,o=e.length;a<o;a++){var n=e.charAt(a);switch(n){case"'":i?t.push("'"):r++,i=!1;break;case"\\":i&&t.push("\\"),i=!i;break;default:t.push(n),i=!1}}return r},l=function(e,t,r){var i;throw i=void 0!==t.year||void 0!==t.month||void 0!==t.weekday||void 0!==t.day,t=void 0!==t.hour||void 0!==t.minute||void 0!==t.second,i=i&&t?"MM/dd/yy hh:mm:ss a":i?"MM/dd/yy":"hh:mm:ss a",r=new SyntaxError("Unexpected character(s) "+r+' encountered in the pattern "'+e+' An example of a valid pattern is "'+i+'".'),r.errorInfo={errorCode:"optionValueInvalid",parameterMap:{propertyName:"pattern",propertyValue:e,"propertyValueHint ":i}},r},T=function(e,t,r,a){t=i.Cg(t).dates.calendars.gregorian.dateTimeFormats.availableFormats,r="weekday era year month day hour minute second timeZoneName".split(" ");var o,n,s,c={"2-digit":0,numeric:1,narrow:2,short:3,long:4},l=-(1/0),u=void 0;for(s in t){n=!1;var d={};d.pattern=t[s];for(var p=0;null!==(o=he.exec(s));)o=o[0],("h"!==o&&"hh"!==o||a)&&("H"!==o&&"HH"!==o||!a)?void 0!==ge[o]&&(d[ge[o].key]=ge[o].value):n=!0;if(!n){for(var h in r)n=e[r[h]],o=d[r[h]],void 0===n&&void 0!==o?p-=20:void 0!==n&&void 0===o?p-=120:void 0!==n&&void 0!==o&&(n=Math.max(Math.min(c[o]-c[n],2),-2),2===n?p-=6:1===n?p-=3:-1===n?p-=6:-2===n&&(p-=8));p>l&&(l=p,u=d)}}return void 0!==u?u.pattern:null},y=function(e,t,r){var a="",o="",n={},s={};e=i.ym(e,r),r=e("era","string",["narrow","short","long"]),a+=S(n,"era",r,{narrow:"GGGGG",short:"GGG",long:"GGGG"}),r=e("year","string",["2-digit","numeric"]),a+=S(n,"year",r,{"2-digit":"yy",numeric:"y"}),r=e("month","string",["2-digit","numeric","narrow","short","long"]),a+=S(n,"month",r,{"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"}),r=e("weekday","string",["narrow","short","long"]),a+=S(n,"weekday",r,{narrow:"EEEEE",short:"E",long:"EEEE"}),r=e("day","string",["2-digit","numeric"]);var a=a+S(n,"day",r,{"2-digit":"dd",numeric:"d"}),c=e("hour12","boolean",[!0,!1]);return void 0===c&&(c=h(t)),r=e("hour","string",["2-digit","numeric"]),o=!0===c?o+S(s,"hour",r,{"2-digit":"hh",numeric:"h"}):o+S(s,"hour",r,{"2-digit":"HH",numeric:"H"}),r=e("minute","string",["2-digit","numeric"]),o+=S(s,"minute",r,{"2-digit":"mm",numeric:"m"}),r=e("second","string",["2-digit","numeric"]),o+=S(s,"second",r,{"2-digit":"ss",numeric:"s"}),[a,o,n,s]},S=function(e,t,r,i){return void 0!==r?(e[t]=r,i[r]):""},b=function(e,t,r){var a=e;t=i.ym(t,r),r=t("year","string",["2-digit","numeric"]);var o={"2-digit":"yy",numeric:"yyyy"};if(void 0!==r&&(a=a.replace(/y{1,4}/,o[r])),r=t("month","string",["2-digit","numeric","narrow","short","long"]),void 0!==r){var o={"2-digit":"MM",numeric:"M",narrow:"MMMMM",short:"MMM",long:"MMMM"},n={"2-digit":"LL",numeric:"L",narrow:"LLLLL",short:"LLL",long:"LLLL"};void 0!==o[r]&&2<o[r].length?(a=a.replace(/M{3,5}/,o[r]),a=a.replace(/L{3,5}/,n[r])):"2-digit"===r&&(ne.lastIndex=0,(r=ne.test(e))&&(a=a.replace("M","MM")),(r=se.test(e))&&(a=a.replace("L","LL")))}return r=t("weekday","string",["narrow","short","long"]),void 0!==r&&(a=a.replace(/E{1,5}/,{narrow:"EEEEE",short:"EEE",long:"EEEE"}[r]),a=a.replace(/c{1,5}/,{narrow:"ccccc",short:"ccc",long:"cccc"}[r])),r=t("day","string",["2-digit","numeric"]),void 0!==r&&"2-digit"===r&&(ce.lastIndex=0,(r=ce.test(e))&&(a=a.replace("d","dd"))),a},I=function(e,t,r){var a=e;return"2-digit"===i.ym(t,r)("hour","string",["2-digit","numeric"])&&(le.lastIndex=0,t=le.exec(e),null!==t&&(a=t[0].length-2,a=e.replace(t[0][a],t[0][a]+t[0][a]))),a},J=function(e,t,r){var i,a=0;for(i in t)a++;if(1<a)return null;for(i=e.length;0<i;i--)if(t=r[e.substr(0,i)],void 0!==t)return t;return e},r=function(e,t,r){var a=i.Cg(t),o=i.Gu(t),n=i.ym(e,r),s=n("formatMatcher","string",["basic","munger"],"munger"),c=0;for(c in e)c++;if(0==c&&(e={year:"numeric",month:"numeric",day:"numeric"}),c=y(e,t,r),void 0!==ie[o]){var l=ie[o].dates.calendars.gregorian.dateTimeFormats[c[0]+c[1]];if(void 0!==l)return l}if(""===c[0]&&""===c[1])return m(e,t,r);var a=a.dates.calendars.gregorian.dateTimeFormats.availableFormats,l=a[c[0]],u=n("hour12","boolean",[!0,!1]);return void 0===u&&(u=h(t)),void 0===l&&""!==c[0]&&(l=J(c[0],c[2],a),null===l&&(l=T(c[2],t,0,u)),null!==l?"basic"!==s&&(l=b(l,e,r)):l=c[0]),n=a[c[1]],void 0===n&&""!==c[1]&&(n=J(c[1],c[3],a),null===n&&(n=T(c[3],t,0,u)),null!==n?"basic"!==s&&(n=I(n,e,r)):n=c[1]),e=l||"",void 0!==n&&(e=""!==e?e+(" "+n):n),void 0===ie[o]&&(ie[o]={},ie[o].dates={},ie[o].dates.calendars={},ie[o].dates.calendars.gregorian={},ie[o].dates.calendars.gregorian.dateTimeFormats={}),ie[o].dates.calendars.gregorian.dateTimeFormats[c[0]+c[1]]=e},n=function(e,a,o){function n(e,t){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth()+1;case 2:return e.getDate();case 3:return me[e.getDay()]}}function s(e,t,r,a){t=n(t,r),e.push(1<a?i.sd(t,a):t)}function c(e,t,r,a,o){var n;switch(a.timePart){case"hour":n=11===a.end1?t.getHours()%12:t.getHours(),"h"===o||"hh"===o?0===n&&(n=12):"k"!==o&&"kk"!==o||0!==n||(n=24);break;case"minute":n=t.getMinutes();break;case"second":n=t.getSeconds();break;case"millisec":n=t.getMilliseconds()}e.push(1<r?i.sd(n,r):n)}var u=i.Cg(a),d=o.pattern||r(o,a,"OraDateTimeConverter.format");a=[];for(var p,h=0,u=u.dates.calendars.gregorian;;){p=he.lastIndex;var f=he.exec(d);if(p=d.slice(p,f?f.index:d.length),h+=t(p,a),!f)break;if(h%2)a.push(f[0]);else{p=f[0];var f=p.length,m=ge[p];switch(m.token){case"days":p=u[m.token][m.style][m.dLen],a.push(p[n(e,3)]);break;case"months":p=u[m.token][m.style][m.mLen],a.push(p[n(e,1)]);break;case"dayOfMonth":case"monthIndex":a.push(s(a,e,m.getPartIdx,f));break;case"year":p=e.getFullYear(),2==f&&(p%=100),a.push(i.sd(p,f));break;case"time":c(a,e,f,m,p);break;case"ampm":p=12>e.getHours()?u.dayPeriods.format.wide.am:u.dayPeriods.format.wide.pm,a.push(p);break;case"tz":break;case"era":p=u.eras.eraAbbr,a.push(p[1]);break;case"slash":a.push("/");break;default:l(d,o,p)}}}return a.join("")},A=function(e,t){return e.getFullYear()==t.getFullYear()},C=function(e,t){return 1==t.getFullYear()-e.getFullYear()},R=function(e,t){return C(t,e)},O=function(e,t){return A(e,t)&&e.getMonth()===t.getMonth()},N=function(e,t){return A(e,t)?1==t.getMonth()-e.getMonth():!!C(e,t)&&(11==e.getMonth()&&0==t.getMonth())},D=function(e,t){return N(t,e)},_=function(e,t){var r=e.getDate(),i=t.getDate();return N(e,t)&&(i+=v(e.getFullYear,e.getMonth())),i-r},P=function(e,t){var r=i.IE(i.Gu(e)).region||"001",r=t-e.supplemental.weekData.firstDay[r];return 0>r&&(r+=7),r},L=function(e,t,r){if(t>r){var i=t;t=r,r=i}return!(!O(t,r)&&!N(t,r))&&(e=_(t,r)+P(e,t.getDay()),0<=e&&6>=e)},w=function(e,t,r){return!(!O(t,r)&&!N(t,r))&&(e=_(t,r)+P(e,t.getDay()),7<=e&&13>=e)},M=function(e,t,r){return w(e,r,t)},k=function(e,t){return A(e,t)&&O(e,t)&&e.getDate()===t.getDate()},U=function(e,t){return!(!O(e,t)&&!N(e,t))&&1===_(e,t)},x=function(e,t){return U(t,e)},c=function(e,t,r){if("number"==typeof e)e=new Date(e);else{if("string"!=typeof e)return null;if(""===i.trim(e))return null;e=i.isoToLocalDate(e)}var a=i.Cg(t).dates.fields;r=i.ym(r,"OraDateTimeConverter.formatRelative"),r("formatUsing","string",["displayName"]),r=r("dateField","string",["day","week","month","year"]);var o=new Date;switch(r){case"day":if(k(o,e))return a.day["relative-type-0"];if(U(o,e))return a.day["relative-type-1"];if(x(o,e))return a.day["relative-type--1"];break;case"week":if(L(t,o,e))return a.week["relative-type-0"];if(w(t,o,e))return a.week["relative-type-1"];if(M(t,o,e))return a.week["relative-type--1"];break;case"month":if(O(o,e))return a.month["relative-type-0"];if(N(o,e))return a.month["relative-type-1"];if(D(o,e))return a.month["relative-type--1"];break;case"year":if(A(o,e))return a.year["relative-type-0"];if(C(o,e))return a.year["relative-type-1"];if(R(o,e))return a.year["relative-type--1"]}return null},Q=function(e,t){var r;throw r=Error("The weekday "+e+" does not match the date "+t),r.errorInfo={errorCode:"dateToWeekdayMismatch",parameterMap:{weekday:e,date:t}},r},X=function(e,t,r){var i;throw 2===r?(i='The value "'+e+'" does not match the expected date-time format "'+t+'"',r="datetimeFormatMismatch"):0===r?(i='The value "'+e+'" does not match the expected date format "'+t+'"',r="dateFormatMismatch"):(i='The value "'+e+'" does not match the expected time format "'+t+'"',r="timeFormatMismatch"),i=Error(i),i.errorInfo={errorCode:r,parameterMap:{value:e,format:t}},i},F=function(e,t){return 100>t&&(t+=100*Math.floor(e/100)+(t<e%100?100:0)),t},K=function(e,t){var r,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};for(r in e)if(i.trim(i.Ng(e[r]))==i.trim(t))return a[r];return-1},z=function(e,t){for(var r in e)if(i.trim(i.Ng(e[r]))===i.trim(t))return r-1;return-1},q=function(e,t,r){var a,o=i.Cg(e);switch(e=o.dates.calendars.gregorian.days.format,o=o.dates.calendars.gregorian.days["stand-alone"],r){case 0:a=[e.abbreviated,e.wide];break;case 1:a=[o.abbreviated,o.wide]}return t=i.Ng(t),r=K(a[0],t),-1===r&&(r=K(a[1],t)),r},$=function(e,t,r){var a=-1,o=i.Cg(e);switch(e=o.dates.calendars.gregorian.months.format,o=o.dates.calendars.gregorian.months["stand-alone"],r){case 0:r=[e.wide,e.abbreviated];break;case 1:r=[o.wide,o.abbreviated];break;case 2:r=[e.wide,e.abbreviated,o.wide,o.abbreviated];break;default:return-1}t=i.Ng(t);for(var n in r)if(a=z(r[n],t),-1!==a)break;return a},W=function(e,r){for(var i,a=e.replace(pe,"\\\\$1"),o=["^"],n=[],s=0,c=0;null!==(i=he.exec(a));){var u=a.slice(s,i.index),s=he.lastIndex,c=c+t(u,o);if(c%2)o.push(i[0]);else{var d,u=i[0];void 0!==ge[u]?d=ge[u].regExp:l(e,r,u),d&&o.push(d),n.push(i[0])}}return t(a.slice(s),o),o.push("$"),a={regExp:o.join("").replace(/\s+/g,"\\s+"),groups:n},{}[e]=a},B=function(e,t,r,i,a,o,n){if(t<r||t>i)throw t=new RangeError(a+" is out of range.  Enter a value between "+o+" and "+n+" for "+e),t.errorInfo={errorCode:"datetimeOutOfRange",parameterMap:{value:a,minValue:o,maxValue:n,propertyName:e}},t},G=function(e,t){for(var r in e)for(var i in e[r])if(i===t)return parseInt(r,10);return 0},Y=function(e,t,r,a,o){var n=i.Cg(a).dates.calendars.gregorian.dayPeriods.format.wide.pm,s=a=ue.lastIndex=0,c=0,l=0,u=ue.exec(t);switch(null===u&&X(t,r,o),void 0!==u[1]&&(a=parseInt(u[1],10)),void 0!==u[2]&&(s=parseInt(u[2],10)),void 0!==u[3]&&(c=parseInt(u[3],10)),void 0!==u[4]&&(l=parseInt(u[4],10)),de.lastIndex=0,u=de.exec(r),u[0]){case"h":12===a&&(a=0),B("hour",a,0,11,a,1,12),t=i.Ng(t).indexOf(i.Ng(n)),-1!==t&&12>a&&(a+=12);break;case"K":B("hour",a,0,11,a,0,11),t=i.Ng(t).indexOf(i.Ng(n)),-1!==t&&12>a&&(a+=12);break;case"H":B("hour",a,0,23,a,0,23);break;case"k":24===a&&(a=0),B("hour",a,0,23,a,1,24)}B("minute",s,0,59,s,0,59),B("second",c,0,59,c,0,59),B("millisec",l,0,999,l,0,999),e.setHours(a,s,c,l)},re=function(e,t){var r,a,o,n=i.Cg(t),s=n.dates.calendars.gregorian.days.format,n=n.dates.calendars.gregorian.days["stand-alone"],s=[s.wide,s.abbreviated,n.wide,n.abbreviated],n=!1;for(a in s){for(o in s[a])if(r=s[a][o],new RegExp(r+"\\b","i").test(e)){n=!0;break}if(n)break;r=null}return r},V=function(e,t,r,i,a){oe.lastIndex=0;var o=oe.exec(e);null===o&&X(e,t,a?2:0);var n=[{y:t.indexOf("y")},{M:t.indexOf("M")},{d:t.indexOf("d")}];n.sort(function(e,t){for(var r in e)break;for(var i in t)break;return e[r]-t[i]});var s,c,l,u,d,h,f=G(n,"d"),m=!1,g=!1;for(h=1;3>=h;h++){var E=o[h];2<E.length&&(s=E,m=!0,u=h-1)}for(m||(u=G(n,"y"),s=o[G(n,"y")+1]),h=0;3>h;h++)if(h!==u&&12<o[h+1]){l=o[h+1],g=!0,d=h;break}if(g){for(h=0;3>h;h++)if(h!==d&&h!==u){c=o[h+1];break}void 0===c&&(c=o[G(n,"M")+1])}else u===G(n,"d")?(l=o[G(n,"y")+1],c=o[G(n,"M")+1]):u===G(n,"M")?(l=o[G(n,"d")+1],c=o[G(n,"y")+1]):(l=o[G(n,"d")+1],c=o[G(n,"M")+1]);return c-=1,o=v(s,c),g&&f!==d&&12<c&&B("month",l,0,11,l,1,12),B("month",c,0,11,c+1,1,12),B("day",l,1,o,l,1,o),s=F(p(r),parseInt(s,10)),B("year",s,0,9999,s,0,9999),r=new Date(s,c,l),s=re(e,i),null!==s&&(c=q(i,s,0),r.getDay()!==c&&Q(s,r.getDate())),r={value:r,warning:"lenient parsing was used"},a&&(e=e.substr(oe.lastIndex),0===e.length?r.value.setHours(0,0,0,0):Y(r.value,e,t,i,2)),r},j=function(e,t,r,a,o){var n=e;e=i.Ng(e);var s,c,l,u,d=i.Cg(a),h=d.dates.calendars.gregorian.months.format,d=d.dates.calendars.gregorian.months["stand-alone"],h=[h.wide,h.abbreviated,d.wide,d.abbreviated],d=!1;for(c in h){s=[];for(l in h[c])u=i.Ng(h[c][l]),s.push({idx:l,name:u});s.sort(function(e,t){return t.idx-e.idx});for(l in s)if(u=s[l].name,-1!=e.indexOf(u)){d=!0,e=e.replace(u,"");break}if(d)break}if(!d)return V(n,t,r,a,o);l=$(a,u,2),B("month",l,0,11,l,1,12),u=re(n,a),c=new RegExp(u+"\\W","i"),null!==u&&(e=e.replace(c,"")),ae.lastIndex=0,h=ae.exec(e),null===h&&X(n,t,o?2:0),n=[{y:t.indexOf("y")},{d:t.indexOf("d")}],n.sort(function(e,t){for(var r in e)break;for(var i in t)break;return e[r]-t[i]});var f,m,d=!1;for(c=1;2>=c;c++)s=h[c],2<s.length&&(f=s,d=!0,m=c-1);return d||(m=G(n,"y"),f=h[G(n,"y")+1]),m=m===G(n,"d")?h[G(n,"y")+1]:h[G(n,"d")+1],f=F(p(r),parseInt(f,10)),B("year",f,0,9999,f,0,9999),r=new Date(f,l,m),null!==u&&(c=q(a,u,0),r.getDay()!==c&&Q(u,r.getDate())),f=v(f,l),B("day",m,1,f,m,1,f),f={value:r,warning:"lenient parsing was used"},o&&(e=e.substr(ae.lastIndex),0===e.length?f.value.setHours(0,0,0,0):Y(f.value,e,t,a,2)),f},H=function(e,t,r,i){switch(d(r,"OraDateTimeConverter.parse")){case 0:return j(e,t,r,i,!1);case 1:return r=new Date,Y(r,e,t,i,1),{value:r,warning:"lenient parsing was used"};case 2:return j(e,t,r,i,!0)}return null},te=function(e,t,r,a,o,n,s,c,l,u,d){return o=i.Cg(e).dates.calendars.gregorian[t][o],e="months"===t?$(e,r,n):q(e,r,n),B(d,e,s,c,r,o[a][l],o[a][u]),e},ee=function(e,t,r,i,a){t[r.timePart]=e,"h"===a||"hh"===a?12===e&&(t[r.timePart]=0):"k"===a||"kk"===a?24===e&&(t[r.timePart]=0):"S"===a&&(t[r.timePart]=e*Math.pow(10,3-i)),B(r.timePart,t[r.timePart],r.start1,r.end1,e,r.start2,r.end2)},a=function(e,t,r,a){var o=i.Cg(a);e=i.trim(e);var n=o.dates.calendars.gregorian.eras.eraAbbr[1],s=i.ol(n);e=e.replace(n,s);var n=W(t,r),c=new RegExp(n.regExp).exec(e);if(null===c)return H(e,t,r,a);var l,u=n.groups,d=s=n=null,h=null;l=null;for(var f,m,g=!1,E={hour:0,minute:0,second:0,millisec:0},o=o.dates.calendars.gregorian.dayPeriods.format.wide.pm,y=p(r),b=0,I=u.length;b<I;b++){var T=c[b+1];if(T){var S=u[b],_=S.length;f=parseInt(T,10);var P=ge[S];switch(P.token){case"months":s=te(a,P.token,T,P.mLen,P.style,P.matchIndex,0,11,"1","12","month name");break;case"days":m=T,h=te(a,P.token,T,P.dLen,P.style,P.matchIndex,0,6,"sun","sat","weekday");break;case"time":ee(f,E,P,_,S);break;case"dayOfMonth":if(d=f,31<d)return H(e,t,r,a);break;case"monthIndex":if(s=f-1,11<s)return H(e,t,r,a);break;case"year":n=F(y,f),B("year",n,0,9999,n,0,9999);break;case"ampm":g=i.Ng(T)===i.Ng(o);break;case"tz":l=f/100<<0,B("TZ Offset",l,-12,13,f,-12,13),f=Math.abs(f%100),B("TZ Offset",f,0,59,f,0,59),l=60*l+(i.pz(T,"-")?-f:f)}}}return e=new Date,t=e.getFullYear(),null===n&&(n=t),null===s&&null===d?(s=e.getMonth(),d=e.getDate()):null===d&&(d=1),t=v(n,s),B("day",d,1,t,d,1,t),e.setFullYear(n,s,d),null!==h&&e.getDay()!==h&&Q(m,e.getDate()),g&&12>E.hour&&(E.hour+=12),e.setHours(E.hour,E.minute,E.second,E.millisec),null!==l&&(m=e.getMinutes()-(l+e.getTimezoneOffset()),e.setHours(e.getHours()+(m/60<<0),m%60)),{value:e}},u=function(e,r,i){var a=i.replace(pe,"\\\\$1"),o=["^"],n=0,s=0;for(e={locale:e,numberingSystem:r,calendar:"gregorian"};null!==(r=he.exec(a));){var c=a.slice(s,r.index),s=he.lastIndex,n=n+t(c,o);n%2||(r=r[0],"/"===r||"zzzz"===r||"zzz"===r||"zz"===r||"z"===r)||(void 0!==ge[r]?(e[ge[r].key]=ge[r].value,"kk"===r||"HH"===r||"H"===r||"k"===r?e.hour12=!1:"KK"!==r&&"hh"!==r&&"h"!==r&&"K"!==r||(e.hour12=!0)):l(i,e,r))}return e},f=function(e){e=u("","",e);var t=void 0!==e.hour||void 0!==e.minute||void 0!==e.second;return void 0===e.year&&void 0===e.month&&void 0===e.weekday&&void 0===e.day||!t?t?1:0:2},d=function(e,t){if(void 0!==e.pattern)return f(e.pattern);var r=i.ym(e,t),a=void 0!==r("hour","string",["2-digit","numeric"])||void 0!==r("minute","string",["2-digit","numeric"])||void 0!==r("second","string",["2-digit","numeric"]),o=void 0!==r("year","string",["2-digit","numeric"])||void 0!==r("month","string",["2-digit","numeric","narrow","short","long"])||void 0!==r("day","string",["2-digit","numeric"])||void 0!==r("weekday","string",["narrow","short","long"]);return o&&a?2:a?1:o?0:(r=r("formatType","string",["date","time","datetime"],"date"),"datetime"===r?2:"time"===r?1:0)},Z=function(e,t){var r,a;switch(e){case 0:a=i.sd(t.getFullYear(),4)+"-"+i.sd(t.getMonth()+1,2)+"-"+i.sd(t.getDate(),2);break;case 1:a="T"+i.sd(t.getHours(),2)+":"+i.sd(t.getMinutes(),2)+":"+i.sd(t.getSeconds(),2),r=t.getMilliseconds(),0<r&&(a+="."+r);break;default:a=i.sd(t.getFullYear(),4)+"-"+i.sd(t.getMonth()+1,2)+"-"+i.sd(t.getDate(),2)+"T"+i.sd(t.getHours(),2)+":"+i.sd(t.getMinutes(),2)+":"+i.sd(t.getSeconds(),2),r=t.getMilliseconds(),0<r&&(a+="."+r)}return a},s=function(e,t,o,n){var s=i.mr(n,"nu");if(void 0===i.il[s]&&(s="latn"),"latn"!==s){var c,l=[];for(c=0;c<e.length;c++){var u=i.il[s].indexOf(e[c]);-1!=u?l.push(u):l.push(e[c])}e=l.join("")}return(2>=arguments.length||void 0===o)&&(o={year:"numeric",month:"numeric",day:"numeric"}),s=d(o,"OraDateTimeConverter.parse"),l=o.pattern||r(o,t,"OraDateTimeConverter.parse"),c={},!0===i.CR.test(e)?(l=i.isoToLocalDate(e),c.value=Z(s,l),c):(l=a(e,l,o,t),u=l.value,c.warning=l.warning,c.value=Z(s,u),c)},{re:function(){return E||(E=e()),E}}}(),e.ul=function(e){this.Init(e)},o_("LengthValidator",e.ul,e),e.b.ga(e.ul,e.ig,"oj.LengthValidator"),e.ul.prototype.Init=function(t){e.ul.r.Init.call(this),this.ih=t.min,this.Kh=t.max,t&&(this.ax=t.hint||{},this.yw=t.messageSummary||{},this.xw=t.messageDetail||{})},e.b.g("LengthValidator.prototype.Init",{Init:e.ul.prototype.Init}),e.ul.prototype.wc=function(){var t=null,r=this.ax,i=r.inRange,a=r.min,o=r.max,r=r.exact,n=e.ha,s=void 0!==this.ih?parseInt(this.ih,10):null,c=void 0!==this.Kh?parseInt(this.Kh,10):null;return null!==s&&null!==c?s!==c?(t={min:s,max:c},t=i?n.Mb(i,t):n.A("oj-validator.length.hint.inRange",t)):(t={length:s},t=r?n.Mb(r,t):n.A("oj-validator.length.hint.exact",t)):null!==s?(t={min:s},t=a?n.Mb(a,t):n.A("oj-validator.length.hint.min",t)):null!==c&&(t={max:c},t=o?n.Mb(o,t):n.A("oj-validator.length.hint.max",t)),t},e.ul.prototype.validate=function(t){var r="",i="",r=""+t,a=r.length,o=this.xw,n=this.yw,i=o.tooShort,o=o.tooLong,s=n.tooShort,c=n.tooLong,n=e.ha,l=void 0!==this.ih?parseInt(this.ih,10):null,u=void 0!==this.Kh?parseInt(this.Kh,10):null;if((null===l||a>=this.ih)&&(null===u||a<=this.Kh))return r;throw a<this.ih?(t={value:t,min:l},r=s?n.Mb(s,t):n.A("oj-validator.length.messageSummary.tooShort"),i=i?n.Mb(i,t):n.A("oj-validator.length.messageDetail.tooShort",t)):(t={value:t,max:u},r=c?n.Mb(c,t):n.A("oj-validator.length.messageSummary.tooLong"),i=o?n.Mb(o,t):n.A("oj-validator.length.messageDetail.tooLong",t)),new e.Ah(r,i)},e.b.g("LengthValidator.prototype.validate",{validate:e.ul.prototype.validate})}),define("koExtensions",["knockout","CCi18n","currencyHelper","ccDate","ccImageZoom","ccNumber","numberFormatHelper","ccConstants","moment","jqueryui","bootstrapDatePicker","bootstrapTimePicker","tagsInput","spectrumColorPicker","bootstrap","chosen","jquerymswipe","ojs/ojcore","ojs/ojvalidation"],function(e,t,r,i,a,o,n,s,c){"use strict";function l(){function e(e,r){for(var i=0,a=r.length;i<a;i+=1)if(t(e,r[i]))return i;return-1}function t(e,t){return e===t||void 0!==e&&void 0!==t&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}window.Select2.class.multi.prototype.skipDuplicateCheck=!0,window.Select2.class.multi.prototype.updateSelection=function(t){var r=[],i=[],a=this;window.Select2.class.multi.prototype.skipDuplicateCheck||($(t).each(function(){e(a.id(this),r)<0&&(r.push(a.id(this)),i.push(this))}),t=i),this.selection.find(".select2-search-choice").remove(),$(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},window.Select2.class.multi.prototype.setVal=function(t){var r;this.select?this.select.val(t):(r=[],window.Select2.class.multi.prototype.skipDuplicateCheck||($(t).each(function(){e(this,r)<0&&r.push(this)}),this.opts.element.val(0===r.length?"":r.join(this.opts.separator))))}}e.bindingHandlers.select2={prependLabel:function(e){if($(e)[0].labels&&$(e)[0].labels.length>0){var t=$(" <span />").attr("class","cc-reader-text").html($(e)[0].labels[0].innerHTML);$(e).select2("container").find(".select2-chosen:first-child").prepend(t)}},init:function(r,i,a){var o,n,s,c,l=i(),u=a(),d=u.lookupKey;c=e.bindingHandlers.select2,void 0!==l.ccFormatInputTooShortKey&&null!==l.ccFormatInputTooShortKey||(l.ccFormatInputTooShortKey="ns.common:resources.select2FormatInputTooShort"),void 0!==l.ccFormatInputTooLongKey&&null!==l.ccFormatInputTooLongKey||(l.ccFormatInputTooLongKey="ns.common:resources.select2FormatInputTooLong"),void 0!==l.ccFormatSelectionTooBigKey&&null!==l.ccFormatSelectionTooBigKey||(l.ccFormatSelectionTooBigKey="ns.common:resources.select2SelectionTooBig"),void 0!==l.ccFormatNoMatches&&null!==l.ccFormatNoMatches||(l.ccFormatNoMatches=t.t("ns.common:resources.select2FormatNoMatches")),void 0!==l.ccFormatLoadMore&&null!==l.ccFormatLoadMore||(l.ccFormatLoadMore=t.t("ns.common:resources.select2LoadMore")),void 0!==l.ccFormatSearching&&null!==l.ccFormatSearching||(l.ccFormatSearching=t.t("ns.common:resources.select2Searching")),
void 0!==l.ccPlaceholderAdjustWidth&&null!==l.ccPlaceholderAdjustWidth||(l.ccPlaceholderAdjustWidth=!0),l.formatInputTooShort=function(e,r){var i=r-e.length,a=t.t(l.ccFormatInputTooShortKey,{numberUnder:i});return a},l.formatInputTooLong=function(e,r){var i=e.length-r,a=t.t(l.ccFormatInputTooLongKey,{numberOver:i});return a},l.formatSelectionTooBig=function(e){var r=t.t(l.ccFormatSelectionTooBigKey,{limit:e});return r},l.formatNoMatches=function(){return l.ccFormatNoMatches},l.formatLoadMore=function(e){return l.ccFormatLoadMore},l.formatSearching=function(){return l.ccFormatSearching},$(r).select2(l),$(r).select2("container").find(".select2-search-choice-close").each(function(e,r){$(r).html('<span class="cc-reader-text">'+t.t("ns.common:resources.removeText")+"</span>").attr("tabindex",0)}),$(r).select2("container").find(".select2-choices").attr("aria-label",t.t("ns.common:resources.ariaSelectedOptionsText")),$(".select2-results").attr("aria-label",t.t("ns.common:resources.ariaAvailableOptionsText")),"undefined"!=typeof u.select2.placeholder&&$(r).attr("placeholder",u.select2.placeholder),"undefined"!=typeof u.select2.ccEnabled&&$(r).select2("enable",u.select2.ccEnabled);var p,h,f,m=!1;d&&(p=e.utils.unwrapObservable(u.value),$(r).select2("data",e.utils.arrayFirst(l.data.results,function(e){return e[d]===p}))),e.utils.domNodeDisposal.addDisposeCallback(r,function(){$(r).select2("destroy")}),p=a().value,h=a().valueUpdated,m=a().isPreselect,f=a().selectedOptions,p&&p.isModified&&p.isModified.subscribe(function(e){e&&$(r).prop("required")&&!p.isValid()?$($(r).select2("container")).addClass("invalid"):$($(r).select2("container")).removeClass("invalid")}),p&&p.subscribe(function(e){$(r).prop("required")&&!p.isValid()?$($(r).select2("container")).addClass("invalid"):$($(r).select2("container")).removeClass("invalid")}),o=!1,h?(m&&f&&h(f),$(r).on("change",function(){o||(o=!0,h($(r).val()),o=!1)})):p&&e.isObservable(p)&&$(r).on("change",function(){o||(o=!0,p($(r).val()),o=!1)}),p&&e.isObservable(p)&&$(r).on("select2-blur",function(e){$(r).val(p()).trigger("change")}),$(r).on("select2-open select2-close",function(e){u.select2.ccHideDrop&&$(".select2-drop").toggleClass("cc-select2-hideResults")}),$(r).on("change",function(e){$(r).select2("container").find(".select2-search-choice-close").each(function(e,r){$(r).html('<span class="cc-reader-text">'+t.t("ns.common:resources.removeText")+"</span>").attr("tabindex",0)}),r.selectedOptions&&r.selectedOptions[0]&&r.selectedOptions[0].label&&$(r).select2("container").find(".select2-chosen").attr("title",r.selectedOptions[0].label),c.prependLabel(r)}),"undefined"!=typeof u.select2.placeholder&&u.select2.ccPlaceholderAdjustWidth&&(n=$("<div />").attr({id:"cc-select2-placeholder-tester"}).text(u.select2.placeholder),$("body").append(n),s=$("#cc-select2-placeholder-tester").width()+30,$("body").remove("#cc-select2-placeholder-tester"),$(r).prev(".select2-container").find(".select2-input").attr("placeholder",u.select2.placeholder).css({"min-width":s+"px","max-width":s+"px"}))},update:function(t,r,i,a){var o,n=i(),s=r(),c=n.select2.initializeDataQuery,l=s.valueUpdated;if(o=e.bindingHandlers.select2,o.prependLabel(t),c){var u=i().value,d=$(t).select2("data");u&&e.isObservable(u)&&(u()&&d&&0===d.length?c(u(),function(e){$(t).select2("data",e),u.valueHasMutated(),u.isModified(!1)},s.includeInvalidItems,d):u()?u()&&d&&d.length>0&&l&&l(d):d&&d.length>0?($(t).select2("data",[]),u.valueHasMutated(),u.isModified(!1)):l&&l([]))}t.selectedOptions&&t.selectedOptions[0]&&t.selectedOptions[0].label&&$(t).select2("container").find(".select2-chosen").attr("title",t.selectedOptions[0].label)}},e.bindingHandlers.select2Tags={init:function(e,r,i){var a,o,n=r();void 0!==n.ccFormatNoMatches&&null!==n.ccFormatNoMatches||(n.ccFormatNoMatches=t.t("ns.common:resources.select2FormatNoMatches")),a=n.ccTagOptions?n.ccTagOptions:null,n.formatNoMatches=function(){return n.ccFormatNoMatches},n.createSearchChoice=function(r){return o=!0,$.each($(e).select2("container").find(".select2-search-choice"),function(e,t){$.trim($(t).text().toLowerCase())==$.trim(r.toLowerCase())&&(o=!1)}),o?{id:$.trim(r),text:$.trim(r)}:void window.setTimeout(function(e){$(".select2-no-results").text(t.t("ns.common:resources.select2NoDuplicateText"))},0)},l(),$(e).select2(n).on("select2-removing",function(t){$.each($(e).select2("container").find(".cc-select2-locked"),function(e,r){$.trim($(r).text())==t.val&&t.preventDefault()})}),$(e).on("change",function(r){$(e).select2("container").find(".select2-search-choice-close").each(function(e,r){$(r).html('<span class="cc-reader-text">'+t.t("ns.common:resources.removeText")+"</span>").attr("tabindex",0)})}),window.Select2.class.multi.prototype.skipDuplicateCheck=!1,a&&(a.lockExisting&&$.each($(e).select2("container").find("ul.select2-choices li.select2-search-choice"),function(e,t){$(t).addClass("cc-select2-locked")}),a.disabled&&$(e).select2("enable",!1),a.sortable&&$(e).select2("container").find("ul.select2-choices").sortable({containment:"parent",start:function(){$(e).select2("onSortStart")},update:function(){$(e).select2("onSortEnd")}}))},update:function(e,t,r,i,a){}},e.bindingHandlers.onRender={init:function(e,t,r,i,a){var o=t();"function"==typeof o&&o(e,i)}},function(){var t,i,a,o,n=200,s=300,c=100,l=200;o=function(e){0===$(e.target).closest(".popover").length&&i()},i=function(){t&&(t.data("bs.popover").tip().off("keydown"),t.popover("destroy"),t=null,$(document).off("click",o),$(document).off("focusin",o))},a=function(e,t){var r,i,a,o;return o=$(window),r=t.top-o.scrollTop(),i=t.left-o.scrollLeft(),r<c||r<l&&"top"===e?a="bottom":(r>o.height()-c||r>o.height()-l&&"bottom"===e)&&(a="top"),i<n||i<s&&"left"===e?a="right":(i>o.width()-n||i>o.width()-s&&"right"===e)&&(a="left"),a||e},e.bindingHandlers.popeditor={init:function(n,s,c,l,u){var d,p,h,f=s(),m=e.observable(!0),g=f.type,v=e.bindingHandlers.tabTrap;if(p={html:!0,trigger:f.trigger||"manual",content:"<div class='"+f.class+"'></div>",container:f.container||"body",placement:f.placement||"right"},d=$(n),f.plgProperty=e.observable(null),"currencyMap"===g){var E={};$.each(f.property(),function(t){E[t]=e.observable(e.utils.unwrapObservable(this)).extend(f.validate),E[t].jetValidation=e.observable(!0)}),f.plgProperty(E)}"currencyMap"!==g&&(f.validate.validatable=!0),h=u.extend({id:f.id,title:f.title,focusElement:f.focusElement,property:e.observable(e.utils.unwrapObservable(f.property)).extend(f.validate),plgProperty:e.observable(e.utils.unwrapObservable(f.plgProperty)).extend(f.validate),enumeratedValues:e.observable(e.utils.unwrapObservable(f.enumeratedValues)),jetValidation:e.observable(!0),currencyHelper:r,priceListGroups:f.priceListGroups,type:f.type,save:function(){if("currencyMap"!==h.type&&h.property.isValid()&&m())return f.property()!=h.property()&&f.property(h.property()),i(),d.filter(":focusable").length>0?d.focus():d.find(":focusable").focus(),h.property.isModified()&&f.property.notifySubscribers(f.property(),"valueSubmitted"),!1;if("currencyMap"===h.type){var e=!1,t=!1;if($.each(h.plgProperty(),function(r){this.isModified()&&(e=this.isModified(),t=this.isValid())}),e&&t)f.property(h.plgProperty()),f.property.notifySubscribers(h.$parent,"valueSubmitted"),h.close();else if(e&&!t)return!1}},close:function(){return i(),d.filter(":focusable").length>0?d.focus():d.find(":focusable").focus(),!1},focus:function(e){h.focusElement?$(e).find(h.focusElement).focus():$(e).find(":focusable").focus(),v.constrain($(".popover.in"))},customJetOptionChangeListener:function(t,r){var i=null,a=e.contextFor(this),o="currencyMap"===a.type;if(i=o?a.plgProperty()[e.dataFor(this).id]:a,i.jetValidation(!0),"messagesShown"===r.option){var n=$(t.target).ojInputText("isValid");n?i.jetValidation(!0):i.jetValidation(!1)}else i.jetValidation(!0)},computedValueWithFractions:e.pureComputed({read:function(){return h.property()},write:function(e){void 0!=e?"number"===g?h.property(e.toFixed(0)):"price"===g&&h.property(e.toFixed(r.currencyObject().fractionalDigits)):h.property(e)}})}),d.click(function(r){var n;if(r.preventDefault(),p.placement=a(f.placement,d.offset()),d.popover(p),n=d.data("bs.popover").tip(),n.hasClass("in"))i(),d.filter(":focusable").length>0?d.focus():d.find(":focusable").focus();else{if(i(),"currencyMap"===h.type){var s={};$.each(f.property(),function(t){s[t]=e.observable(e.utils.unwrapObservable(this)).extend(f.validate),s[t].jetValidation=e.observable(!0)}),f.plgProperty(s),h.plgProperty(e.utils.unwrapObservable(f.plgProperty)).extend(f.validate),$.each(h.plgProperty(),function(e){h.plgProperty()[e].extend({validatable:!0}),h.plgProperty()[e].errors=null,h.plgProperty()[e].isModified(!1),h.plgProperty()[e].forcedModified=!1})}else h.property(e.utils.unwrapObservable(f.property)),h.property.errors=null,h.property.isModified(!1),h.property.forcedModified=!1;n.addClass(f.class),n.children(".popover-content").attr("data-bind","template: {name: '"+f.type+"', templateUrl: 'templates/popeditors', afterRender: focus}"),f.wideMode?(n.children(".popover-title").attr("data-bind","template: {name: 'wide-header', templateUrl: 'templates/popeditors'}"),n.addClass("cc-pop-wide")):n.children(".popover-title").attr("data-bind","template: {name: 'header', templateUrl: 'templates/popeditors'}"),n.keydown(function(e){27===e.which&&(i(),d.filter(":focusable").length>0?d.focus():d.find(":focusable").focus())}),window.setTimeout(function(){$(document).click(o),$(document).focusin(o)},1),d.popover("show"),t=d,e.applyBindingsToDescendants(h,n[0])}})}},e.bindingHandlers.popover={init:function(t,r,n,s){var c,l,u,d=r();l={html:!0,trigger:d.trigger||"click",content:"<div class='"+d.class+"'></div>",container:d.container||"body",placement:d.placement||"right"},c=$(t),u={model:d.model||s,save:function(){if(u.property.isValid())return d.property()!=u.property()&&d.property(u.property()),i(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),d.property.notifySubscribers(d.property(),"valueSubmitted"),!1},close:function(){return i(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),!1},focus:function(e){$(e).find(":focusable").focus(),tabTrap.constrain($(".popover.in"))}},c.click(function(t){var r;l.placement=a(d.placement,c.offset()),c.popover(l),r=c.data("bs.popover").tip(),i(),r.hasClass("in")||(r.children(".popover-content").attr("data-bind","template: {name: '"+d.name+"', templateUrl: '"+d.templateUrl+"', afterRender: focus}"),r.keydown(function(){27===event.which&&i()}),window.setTimeout(function(){$(document).click(o),$(document).focusin(o)},1),c.popover("show"),e.applyBindingsToDescendants(u,r[0]))})}}}(),function(){var r,a,o,n,l,u=200,d=300,p=100,h=200,f=!0;n=function(e){0!==$(e.target).closest(".popover").length||l(e.target,"datepicker")||l(e.relatedTarget,"oj-datepicker")||a()},l=function(e,t){if(e)do if(1==e.nodeType&&$(e).is("[class*="+t+"]"))return!0;while((e=e.parentElement)&&void 0!==e&&1==e.nodeType);return!1},a=function(){r&&(r.data("bs.popover").tip().off("keydown"),r.popover("destroy"),r=null,$(document).off("click",n),$(document).off("focusin",n))},o=function(e,t){var r,i,a,o;return o=$(window),r=t.top-o.scrollTop(),i=t.left-o.scrollLeft(),r<p||r<h&&"top"===e?a="bottom":(r>o.height()-p||r>o.height()-h&&"bottom"===e)&&(a="top"),i<u||i<d&&"left"===e?a="right":(i>o.width()-u||i>o.width()-d&&"right"===e)&&(a="left"),a||e},e.bindingHandlers.datepopover={init:function(l,u,d,p){var h,m,g,v,E,y=u(),b=e.bindingHandlers.tabTrap,I=!1;m={html:!0,trigger:y.trigger||"click",content:"<div class='"+y.class+"'></div>",container:y.container||"body",placement:y.placement||"right"},h=$(l),g={toDate:e.observable(e.utils.unwrapObservable(y.toDate)),fromDate:e.observable(e.utils.unwrapObservable(y.fromDate)),toDateLabel:t.t("ns.reporting:resources.toText")+" "+t.t("ns.reporting:resources.date")+":"+t.t("ns.reporting:resources.descriptionToAccessCalender"),fromDateLabel:t.t("ns.reporting:resources.fromText")+" "+t.t("ns.reporting:resources.date")+":"+t.t("ns.reporting:resources.descriptionToAccessCalender"),toDateText:t.t("ns.reporting:resources.toText"),fromDateText:t.t("ns.reporting:resources.fromText"),customDateRangeText:t.t("ns.reporting:resources.customDateRangeText"),errorMessage:y.errorMessage,dataCollectionStartDate:y.dataCollectionStartDate,yesterday:y.yesterday,save:function(e,t){var r=$("#cc-fromDate").ojInputDate("option","placeholder");return r&&(r=r.toUpperCase()),"true"===$("#cc-fromDate").attr("aria-invalid")||"true"===$("#cc-toDate").attr("aria-invalid")?(y.toDate(void 0),y.fromDate(void 0)):(null===g.toDate()?y.toDate(null):y.toDate(c(g.toDate()).toDate()),null===g.fromDate()?y.fromDate(null):y.fromDate(c(g.fromDate()).toDate())),!!(f=y.validation())&&(a(),h.filter(":focusable").length>0?h.focus():h.find(":focusable").focus(),y.toDate.notifySubscribers(y.toDate(),"valueSubmitted"),y.fromDate.notifySubscribers(y.fromDate(),"valueSubmitted"),I=!0,!1)},close:function(){return a(),h.filter(":focusable").length>0?h.focus():h.find(":focusable").focus(),!1},focus:function(e){if(y.initFromDate()&&y.initToDate()){var t=$("#cc-fromDate").ojInputDate("option","placeholder");t&&(t=t.toUpperCase()),$("#cc-fromDate").val(i.formatDateAndTime(y.initFromDate(),null,t,null)),$("#cc-toDate").val(i.formatDateAndTime(y.initToDate(),null,t,null)),y.fromDate(y.initFromDate()),y.toDate(y.initToDate())}$(e).find("#cc-toDate").focus(),$(e).find("#cc-fromDate").focus(),b.constrain($(".popover.in"))}};var T=$(y.container);T.on("hidden.bs.popover",function(){I&&(E=null,v=null,y.initFromDate(null),y.initToDate(null))}),h.click(function(t){var c;t.preventDefault(),m.placement=o(y.placement,h.offset()),h.popover(m),c=h.data("bs.popover").tip(),c.hasClass("in")?(a(),h.filter(":focusable").length>0?h.focus():h.find(":focusable").focus()):(a(),""===y.errorMessage()||void 0===y.errorMessage()?(null==y.toDate()||void 0==y.toDate()?g.toDate(null):g.toDate(i.formatDateAndTime(y.toDate(),null,s.OJET_INPUT_SHORT_DATE_FORMAT,null)),void 0==y.fromDate()||null==y.fromDate()?g.fromDate(null):g.fromDate(i.formatDateAndTime(y.fromDate(),null,s.OJET_INPUT_SHORT_DATE_FORMAT,null)),g.errorMessage=y.errorMessage):(g.toDate(null),g.fromDate(null),E=null,v=null,y.initToDate(null),y.initFromDate(null),y.toDate(null),y.errorMessage(""),y.fromDate(null)),c.css("z-index",y.zIndex),c.css("min-height",y.minHeight),c.css("min-width",y.minWidth),c.children(".popover-title").attr("data-bind","template: {name: 'datepickerHeader', templateUrl: 'templates/reporting'}"),c.children(".popover-content").attr("data-bind","template: {name: '"+y.name+"', templateUrl: '"+y.templateUrl+"', afterRender: focus}"),c.keydown(function(e){27===e.which&&a()}),window.setTimeout(function(){$(document).click(n),$(document).focusin(n)},1),h.popover("show"),r=h,e.cleanNode(c[0]),e.applyBindingsToDescendants(g,c[0]))})}},e.bindingHandlers.popover={init:function(t,r,i,s){var c,l,u,d=r();l={html:!0,trigger:d.trigger||"click",content:"<div class='"+d.class+"'></div>",container:d.container||"body",placement:d.placement||"right"},c=$(t),u={model:d.model||s,save:function(){if(u.property.isValid())return d.property()!=u.property()&&d.property(u.property()),a(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),d.property.notifySubscribers(d.property(),"valueSubmitted"),!1},close:function(){return a(),c.filter(":focusable").length>0?c.focus():c.find(":focusable").focus(),!1},focus:function(e){$(e).find(":focusable").focus(),tabTrap.constrain($(".popover.in"))}},c.click(function(t){var r;l.placement=o(d.placement,c.offset()),c.popover(l),r=c.data("bs.popover").tip(),a(),r.hasClass("in")||(r.children(".popover-content").attr("data-bind","template: {name: '"+d.name+"', templateUrl: '"+d.templateUrl+"', afterRender: focus}"),r.children(".popover-title").attr("data-bind","template: {name: 'datepickerHeader', templateUrl: 'templates/reporting'}"),r.keydown(function(){27===event.which&&a()}),window.setTimeout(function(){$(document).click(n),$(document).focusin(n)},1),c.popover("show"),e.applyBindingsToDescendants(u,r[0]))})}}}(),function(){var t,r,i,a=1052,o=null;e.bindingHandlers.modal={init:function(n,c,l){var u,d,p,h,f,m,g,v,E,y,b,I,T,S,_=null,P="cc-modal-focus-out-active",A=c().focusFallback?c().focusFallback.split(","):null;d=$(window),u=$(n),p=u.find(".modal-body");var C=!!d[0].chrome&&!!d[0].chrome.webstore;T=function(){$(n).on("keydown.modal.cc",":text",function(e){var t=e.which||e.charCode||e.keyCode;if(27==t)return!1})},S=function(){$(n).off("keydown.modal.cc",":text")},h=function(){var e,t=0;$("body").prepend($("<div />").attr("id","cc-modalTester")),u.find(".modal-content").children().each(function(){this!==p[0]&&$(this).clone().appendTo("#cc-modalTester")}),t=$("#cc-modalTester").outerHeight(),$("#cc-modalTester").remove(),e=d.width()>767?.11*d.height():11,p.css({"max-height":Math.max(128,d.height()-t-e)})},f=function(e){$(e).find(".cc-focus-target").length>0?$.inArray($(e).find(".cc-focus-target")[0],$(e).find(":tabbable"))===-1?void 0!==$(e).find(".cc-focus-target :tabbable")[0]&&$(e).find(".cc-focus-target :tabbable")[0].focus():$(e).find(".cc-focus-target")[0].focus():$(e).find(":tabbable")[0]&&$(e).find(":tabbable")[0].focus()},E=function(e){1===u.has(document.activeElement).length&&(_=!0,$(document.activeElement).addClass(P))},y=function(e){_=!1,$("."+P).removeClass(P)},b=function(e){_&&e.preventDefault(),$("."+P).focus().removeClass(P)},I=function(e){_=!1},u.on("focusin",function(e){e.stopPropagation()}),u.on("show.bs.modal",function(e){$(e.target).hasClass("modal")&&(u.data("alreadyOpen")!==!0&&(u.data("alreadyOpen",!0),setTimeout(function(){u.data("bs.modal").$backdrop.css({"z-index":a-10}),u.css({"z-index":a}),t=a,a+=20,h()},1)),d.resize(h),$("body").addClass("no-scroll"),m=!0,1===$(e.relatedTarget).length&&(g=$(e.relatedTarget),g.addClass(s.MODAL_CLOSE_FOCUS),g.attr("id")&&(v=g.attr("id"))))}),u.on("shown.bs.modal",function(e){f(u),C&&(u.on("focusout",E),u.on("focus mousedown",I),u.on("keyup.dismiss.bs.modal",y),u.find("button, a").on("click",I),u.on("hide.bs.modal",b)),T()}),u.on("hide.bs.modal",function(){u.find(".modal-body").scrollTop(0)}),u.on("hidden.bs.modal",function(e){if($(e.target).hasClass("modal")){if(a-=20,r=a-20,m=!1,i=0,o=null,u.data("alreadyOpen",!1),S(),d.off("resize",h),C&&(u.off("focusout",E),u.off("focus mousedown",I),u.off("keyup.dismiss.bs.modal",y),u.find("button, a").off("click",I),u.off("hide.bs.modal",b)),_=null,u.find(".cc-curtain")&&u.find(".cc-curtain").remove(),$(n).css("left","0px"),0===$("body .modal.in").length){setTimeout(function(){$("body").removeClass("no-scroll")},0);var t=null;null!==A&&$.each(A,function(e,r){if(0!==$(r).length)return t=r,!1}),0!==$(s.MODAL_CLOSE_FOCUS_CLASS).length?($(s.MODAL_CLOSE_FOCUS_CLASS).focus(),$(s.MODAL_CLOSE_FOCUS_CLASS).removeClass(s.MODAL_CLOSE_FOCUS)):$("#"+v).length>0?$("#"+v).focus():null!==t&&window.setTimeout(function(){$(t).focus()},10)}$.each($(".modal"),function(e,t){"block"===$(t).css("display")&&$(t).css("z-index")>i&&(i=$(t).css("z-index"),o=$(t))}),f(o)}}),e.utils.domNodeDisposal.addDisposeCallback(n,function(){u.modal("hide")})}}}(),e.bindingHandlers.tagsInput={init:function(e,t,r){},update:function(t,r,i,a,o){var n,s,c,l,u=e.utils.unwrapObservable(r()),d=$(t).find("input"),p=",",h=e.utils.unwrapObservable(u.defaultText)?e.utils.unwrapObservable(u.defaultText):"Add item",f=e.utils.unwrapObservable(u.height)?e.utils.unwrapObservable(u.height):"100px",m=e.utils.unwrapObservable(u.width)?e.utils.unwrapObservable(u.width):"300px",g=e.utils.unwrapObservable(u.minChars)?e.utils.unwrapObservable(u.minChars):"0",v=e.utils.unwrapObservable(u.maxChars)?e.utils.unwrapObservable(u.maxChars):"",E=!e.utils.unwrapObservable(u.caseInsensitive)||e.utils.unwrapObservable(u.caseInsensitive),y=e.utils.unwrapObservable(u.isInteractive)!==!1||e.utils.unwrapObservable(u.isInteractive);if(d.val()&&0!==d.val().length){c=$(t).find("input").val();setTimeout(function(){$(".tagsinput .tag").addClass("cc-locked-tag").find("a").remove()},0)}$(d).tagsInput({defaultText:h,hide:!0,height:f,width:m,minInputWidth:e.utils.unwrapObservable(u.minInputWidth)||"149px",minChars:g,maxChars:v,interactive:y,onRemoveTag:function(e){if(l=$(d)[0].id,c&&c.indexOf(e)!==-1&&$("#"+l).importTags(c),c)for(var t=0;t<c.split(",").length;t++){var r=$("#"+l+"_tagsinput .tag")[t];$(r).addClass("cc-locked-tag").find("a").remove()}},onChange:function(e,i){r().list($(t).find("input").val())},onAddTag:function(e){if(E){var t=d.val().split(","),r=$(d)[0].id;if(t.length>1)for(var i=0;i<t.length-1;i+=1)if(e.toLowerCase()===t[i].toLowerCase()){n="",s=$(this).val().split(p),$("#"+r+"_tagsinput .tag").remove();for(var a=0;a<s.length;a+=1)0!==s[a].indexOf(e)&&(n=n+p+s[a]);$("#"+r).importTags(n),$("#"+r+"_tag").focus(),$("#"+r+"_tag").val(e),$("#"+r+"_tag").addClass("not_valid")}}}}),e.utils.unwrapObservable(u.isInteractive)===!1&&($(d).next().addClass("cc-tagsInput-readOnly"),$(d).next().find("div").remove())}},e.bindingHandlers.datepicker={init:function(t,r,a){var o,n,s,c,l,u,d,p=a().dpOptions||{},h=1===$(t).parents(".modal").length;h?(o="",n=$(t).parents(".tab-pane")?$(t).parents(".tab-pane"):$(t).parents(".modal-body")):o=$(t).closest(".row")[0].nextElementSibling;var f=e.utils.unwrapObservable(a().format);!f&&p.format||(p.format=i.getDateFormat(f?f:"short").toLowerCase()),$(t).datepicker(p).on("show",function(e){$.each($("body .datepicker.dropdown-menu"),function(t,r){void 0!==$(r).attr("style")&&"none"!=$(r).css("style")&&null!==o&&$(r).css({position:"absolute",top:"35px",left:"0px"}).appendTo($(e.target).parent())}),c=$(t).parents(".form-group").position().top+$(t).parents(".form-group").outerHeight(!0),l=c+240,h?(s=n.height(),l>s&&(u=l-s,n.css({height:s+u+"px"})),d=$(t).parents(".modal-body").scrollTop()+$(t).closest(".form-group").offsetParent().position().top,$(t).parents(".modal-body").scrollTop($(t).closest(".form-group").position().top+d)):(s=$(t).parents(".form-group").offsetParent().outerHeight(!0),l>s&&(u=l-s,$(t).parents(".form-group").offsetParent().css({})))}).on("changeDate",function(e){var i=r();i(e.date),$(t).datepicker("setValue",e.date)}).on("dphide",function(){h?n.css({height:"auto"}):$(t).parents(".form-group").offsetParent().css({height:"auto"})}),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).datepicker("remove")})},update:function(t,r,i){var a=e.utils.unwrapObservable(i().value);if(a){var o=new Date(a);isNaN(o)||(i().value(o),$(t).datepicker("setDate",new Date(o.getTime()+6e4*o.getTimezoneOffset())))}}},e.bindingHandlers.timepicker={init:function(t,r,i){var a,o=i().Options||{};$(t).timepicker(o).on("show.timepicker",function(e){$(t).timepicker("setDefaultTime","current")}),$(t).timepicker(o).on("focus.timepicker",function(e){$(t).timepicker("showWidget")}),a=e.utils.unwrapObservable(r()),$(t).timepicker(o).on("changeTime.timepicker",function(e){var t=r();t(e.time.value)}),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).timepicker("remove")})}},e.bindingHandlers.spectrum={init:function(r,i,a){var o=a().defaultSettings||{};o.cancelTextKey&&(o.cancelText=t.t("ns.common:resources."+o.cancelTextKey)),o.chooseTextKey&&(o.chooseText=t.t("ns.common:resources."+o.chooseTextKey));var n="#000000",s=function(){var e=$(r).spectrum("get");"function"==typeof e.toHex&&(n="#"+e.toHex());var t=i();n!==t()&&t(n)},c=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};o.hide=s,o.clickoutFiresChange=!0;var l="spectrum-input";if(r.id)l=r.id+"-spectrum-input";else{var u=new Date;l=c(u.getFullYear(),4)+c(u.getMonth()+1,2)+c(u.getDay(),2)+c(u.getHours(),2)+c(u.getMinutes(),2)+c(u.getSeconds(),2)+c(u.getMilliseconds(),3)+"-spectrum-input"}var d="class-"+l;o.className=d,$(r).spectrum(o);var p=$("<label>Color</label>",{htmlFor:l});p.attr("for",l),p.attr("class","cc-reader-text"),p.text(t.t("ns.common:resources.colorPickerInputLabel"));var h=$("."+d),f=h.find(".sp-cancel"),m=h.find(".sp-choose"),g=h.find(".sp-input-container");g.prepend(p);var v=h.find(".sp-input");v.attr("id",l);var E=e.utils.unwrapObservable(i());$(r).spectrum("set",E),e.utils.registerEventHandler(r,"change",s);var y=$(r).next(".sp-replacer");y.removeAttr("tabindex");var b=$("<a></a>",{href:"#"});y.wrap(b),e.utils.domNodeDisposal.addDisposeCallback(r,function(){var e=$(r).spectrum("get");"function"==typeof e.toHex&&(n="#"+e.toHex()),$(r).spectrum("destroy")}),b=$(r).next("a"),f.click(function(){return b.focus(),!0}),m.click(function(){return b.focus(),!0}),b.click(function(){var e=r.disabled;if(!e){var t=$(r).spectrum("container");t.appendTo(b),$(r).spectrum("toggle")}return!1})},update:function(t,r){var i=e.utils.unwrapObservable(r());$(t).spectrum("set",i)}},e.bindingHandlers.slider={init:function(t,r,i){var a=i().sliderOptions||{},o=e.utils.unwrapObservable(r());a.value=o,a.change=function(e,t){var i=r();i(t.value)},a.liveUpdate&&(a.slide=a.change),$(t).slider(a),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(t).slider("destroy")}),e.utils.registerEventHandler(t,"slidestop",function(e,t){var i=r();i(t.value)})},update:function(t,r,i){var a=i().sliderOptions||{},o=e.utils.unwrapObservable(r());isNaN(o)&&(o=a.defaultValue||0),$(t).slider("value",o),$(t).slider("option",i().sliderOptions)}},e.bindingHandlers.chosen={truncate:function(e){var t,r,i;t=$(".chosen-container").find("span").outerWidth(!0)+5,r=$(".chosen-container").width(),t>r&&e&&(i=$(".chosen-container").find("span").html().split(e),i.length>1&&$(".chosen-container").find("span").text("... "+e+" "+i[i.length-1]))},addAccessibility:function(e){var r=e.find("a.search-choice-close");$.each(r,function(){0===$(this).find(".cc-reader-text").length&&($(this).append($("<span />").attr("class","cc-reader-text").text(t.t("ns.common:resources.removeText"))),$(this).attr("tabindex","0"),$(this).on("keyup",function(t){13===t.keyCode&&($(this).trigger("click"),$(e.find(".search-field input")).focus())}))})},init:function(r,i,a,o,n){var s,c,l,u,d,p,h,f,m=e.utils.unwrapObservable(i()),g=!!m.allSelectedMessage&&m.allSelectedMessage;e.bindingHandlers.options.init(r,function(){return m.values},a,o,n),l=e.bindingHandlers.chosen,$(r).addClass("chosen-select"),$(r).chosen(m.options).trigger("chosen:ready"),u=$(r).next(),h=$(r).attr("id")+"-search-field",f=$(r).attr("data-placeholder")?$(r).attr("data-placeholder"):t.t("ns.common:resources.chosenSearchFieldDefaultLabel"),d=u.find(".search-field"),p=$("<label />").attr("class","cc-reader-text").attr("for",h).text(f),d.find("input").attr("id",h),d.prepend(p),$(r).chosen().change(function(){l.addAccessibility(u)}),$(r).on("chosen:showing_dropdown",function(){window.setTimeout(function(){0===u.find("li.active-result").length?g?u.find(".chosen-results").append($("<li />").attr("class","cc-chosen-message").html(g)):u.find(".chosen-drop").addClass("hide"):($(".cc-chosen-message").remove(),u.find(".chosen-drop").removeClass("hide"))},0)});var v=r.id+"-search";$(".chosen-search input").attr("id",v),c=a().value,s=!1,c&&e.isObservable(c)&&$(r).on("change",function(){s||(s=!0,c($(r).val()),s=!1)}),m.truncate&&$(r).on("change",l.truncate.bind(l,m.truncate))},update:function(t,r,i,a,o){var n,s,c,l=e.utils.unwrapObservable(r());$(".chosen-results").attr("tabindex","0"),c=$(t).next(),e.bindingHandlers.options.update(t,function(){return l.values},i,a,o),s=e.bindingHandlers.chosen,i().value?$(t).val(e.utils.unwrapObservable(i().value)):i().selectedOptions&&$(t).val(e.utils.unwrapObservable(i().selectedOptions)),$(t).trigger("chosen:updated"),s.addAccessibility(c),l.truncate&&(n=$(t).parents(".modal").attr("id")?"#"+$(t).parents(".modal").attr("id"):"",n?$(n).on("shown.bs.modal",function(){s.truncate(l.truncate)}):s.truncate(l.truncate))}},e.bindingHandlers.textCheck={update:function(t,i,a,o,s){var c=e.utils.unwrapObservable(i()),l=e.utils.unwrapObservable(c.text),u=e.utils.unwrapObservable(c.type),d=e.utils.unwrapObservable(c.prePend),p=e.utils.unwrapObservable(c.nullReplace),h=e.utils.unwrapObservable(c.prependNull);if(!l&&0!==l||isNaN(parseFloat(l)))l=(d&&h?d:"")+(p?p:"");else if("price"==u||"percent"==u||"number"==u||"digit"==u){var f;f="string"==typeof l?parseFloat(l):l,"number"==typeof l||"string"==typeof l&&l.trim().length>0?"price"==u?l=f<0?"-"+(d||"")+r.handleFractionalDigitsAndLocale(Math.abs(f)):(d||"")+r.handleFractionalDigitsAndLocale(f):"percent"==u?l=(d||"")+n.formatNumber(f,2,"decimal"):"number"==u?l=(d||"")+n.formatNumber(f,2,"decimal"):"digit"==u&&(l=(d||"")+n.formatNumber(f,0,"decimal")):l=(d&&h?d:"")+(p?p:"")}else l=(d||"")+l;e.bindingHandlers.text.update(t,function(){return l})}},e.bindingHandlers.scrollAffix={update:function(t,r){var i,a,o,n,s,c,l,u,d=e.utils.unwrapObservable(r());a=e.utils.unwrapObservable(d.scrollDistance),o=e.utils.unwrapObservable(d.affixPos),n=e.utils.unwrapObservable(d.affixWidth)?e.utils.unwrapObservable(d.affixWidth):null,s=e.utils.unwrapObservable(d.affixMatchElm),c=e.utils.unwrapObservable(d.adjust),l=e.utils.unwrapObservable(d.adjustPos)?e.utils.unwrapObservable(d.adjustPos):null,i=function(){if(u=null,$(window).width()<="992")return $(t).parent().css({"min-height":"auto"}),$(t).css({position:"",top:"",width:""}),void 0!==c&&$(c).css({"margin-top":"auto"}),!1;if(n)u=n;else{if("undefined"===s||"none"===$(s).css("display"))return!1;u=$(s).outerWidth(!0)}$(window).scrollTop()>a&&null!==u?($(t).css({position:"fixed",top:o,width:u}),$(t).addClass("cc-scrollAffix"),void 0!==c&&$(c).css({"margin-top":l})):($(t).parent().css({"min-height":"auto"}),$(t).css({position:"",top:"",width:""}),$(t).removeClass("cc-scrollAffix"),void 0!==c&&$(c).css({"margin-top":"auto"}))},$(window).scroll(i),$(window).resize(i),e.utils.domNodeDisposal.addDisposeCallback(t,function(){$(window).off("scroll",i),$(window).off("resize",i)})}},e.bindingHandlers.currency={update:function(t,r,i,a,n){var s=e.utils.unwrapObservable(r()),c=parseFloat(s.price),l=s.currencyObj.symbol,u=s.nullReplace,d=s.prependNull,p=s.currencyObj.fractionalDigits,h=null;if(!c&&0!==c||isNaN(parseFloat(c)))$(t).text((l&&d?l:"")+(u?u:""));else{l.match(/^[0-9a-zA-Z]+$/)&&(l+=" "),c=c.toFixed(p),h=o.formatNumber(c,!0,p);var f=h.charAt(0);"-"===f||"+"===f?$(t).text(f+l+h.slice(1)):$(t).text(l+h)}}},e.bindingHandlers.imageSource={init:function(t,r){var i,a,o,n=!1,s=e.utils.unwrapObservable(r());"object"==typeof s&&"IMG"===t.nodeName&&(s.cacheBust&&(n=e.utils.unwrapObservable(s.cacheBust)),i=e.utils.unwrapObservable(s.src),n&&(i=d(i)),a=e.utils.unwrapObservable(s.errorSrc),i&&a&&(o=new Image,o.src=a))},update:function(t,r,i,a,o){var n,s,c,l,u,p,h,f,m=!1,g=e.utils.unwrapObservable(r());if("object"==typeof g&&"IMG"===t.nodeName){g.cacheBust&&(m=e.utils.unwrapObservable(g.cacheBust)),l=e.utils.unwrapObservable(g.src),n=e.utils.unwrapObservable(g.imageType),n||(n="small");var v=[function(e,t){var r;return e.productImages&&e.productImages.length>0&&(r=e.productImages[0].url),r},function(e,t){return e.url},function(e,t){var r,i=l[t+"Image"];return i&&(r=i.url),r},function(e,t){var r;return l instanceof Object&&l[t]&&(r=l[t]),r},function(e,t){var r,i,a,o;return i=e.childSKUs,i&&(r=i[0],r&&(a=r[t+"Image"],a&&(o=a.url))),o},function(e,t){if("string"==typeof e)return e}];if(l)for(;!c&&v.length;)c=v.shift().call(this,l,n);else c=g.errorSrc;return m&&(c=d(c)),u=e.utils.unwrapObservable(g.errorSrc),p=e.utils.unwrapObservable(g.alt),h=e.utils.unwrapObservable(g.errorAlt),f=e.utils.unwrapObservable(g.onerror),u?void(c?(s=new Image,s.onload=function(){t.src=c,t.alt=p?p:""},s.onerror=function(){t.src=u,t.alt=h?h:"",f&&f(t)},s.src=c):(t.src=u,h?t.alt=h:p?t.alt=p:t.alt="",f&&f(t))):(t.src=c,void(t.alt=p?p:""))}}};var u=0;e.bindingHandlers.makeAccess={init:function(r,i){var a,o,n,s=e.utils.unwrapObservable(i());a=$('<span class="cc-reader-text"/>'),s.readerText?a.text(e.utils.unwrapObservable(s.readerText)):s.readerResource&&a.text(t.t(e.utils.unwrapObservable(s.readerResource))),s.cssContent&&"on"==s.cssContent&&(o=$(r).text(),
n="cc-make-access-"+u++,$("<style>").text("."+n+':after {content: "'+o+'"}').appendTo("head"),$(r).empty().addClass(n)),$(r).prepend(a)},update:function(r,i){var a=e.utils.unwrapObservable(i());a.readerText?$(r).children(".cc-reader-text").text(e.utils.unwrapObservable(a.readerText)):a.readerResource&&$(r).children(".cc-reader-text").text(t.t(e.utils.unwrapObservable(a.readerResource)))}},e.bindingHandlers.hover={init:function(e,t){},update:function(t,r,i,a,o){var n,s,c,l,u,d=e.utils.unwrapObservable(r());if(n=t.ko_hoverClassValue)if(Array.isArray(n))for(s=0;s<n.length;s+=1)$(t).removeClass(n[s]);else if("object"==typeof n)for(c in n)n.hasOwnProperty(c)&&$(t).removeClass(n[c]);else $(t).removeClass(n);if("object"==typeof d){if("undefined"!=typeof d.if&&!e.utils.unwrapObservable(d.if))return void $(t).hover(function(){},function(){});l=e.utils.unwrapObservable(d.start),u=e.utils.unwrapObservable(d.stop),t.ko__hoverClassValue=e.utils.unwrapObservable(d.class),$(t).hover(function(e){var t,r;if(r=this.ko_hoverClassValue)if(Array.isArray(r))for(s=0;s<r.length;s+=1)$(this).addClass(r[s]);else if("Object"==typeof r)for(t in r)r.hasOwnProperty(t)&&$(this).addClass(r[c]);else $(this).addClass(r);l&&l(a,e)},function(e){var t,r,i;if(r=this.ko_hoverClassValue){if(Array.isArray(r))for(t=0;t<r.length;t+=1)$(this).removeClass(r[t]);else if("Object"==typeof r)for(i in r)r.hasOwnProperty(i)&&$(this).removeClass(r[i]);else $(this).removeClass(r);u&&u(a,e)}})}}},e.bindingHandlers.background={init:function(e,t){},update:function(t,r){var i,a,o,n=e.utils.unwrapObservable(r());if("object"==typeof n){if(i=e.utils.unwrapObservable(n.image),!i)return void $(t).css("background-image","");a="",o=".png",n.extension&&(o=e.utils.unwrapObservable(n.extension),"."!==a.charAt(0)&&(o="."+o)),n.path&&(a=e.utils.unwrapObservable(n.path)||"",a.length>0&&"/"!==a.charAt(a.length-1)&&(a+="/")),$(t).css("background-image","url("+a+i+o+")")}else n?$(t).css("background-image","url("+n+")"):$(t).css("background-image","")}},e.bindingHandlers.draggable={init:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if("object"==typeof n){if("undefined"!=typeof n.destroy&&e.utils.unwrapObservable(n.destroy))return;$(t).draggable(n).data("viewModel",a),"undefined"==typeof n.enabled||e.utils.unwrapObservable(n.enabled)||$(t).draggable("disable"),"undefined"!=typeof n.selectable&&e.utils.unwrapObservable(n.selectable)?$(t).enableSelection():$(t).disableSelection()}else $(t).draggable().data("viewModel",a),n?$(t).draggable("enable"):$(t).draggable("disable")},update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if("object"==typeof n){if("undefined"!=typeof n.destroy&&e.utils.unwrapObservable(n.destroy))return void($(t).draggable&&$(t).draggable("destroy"));"undefined"!=typeof n.enabled&&(e.utils.unwrapObservable(n.enabled)?$(t).draggable("enable"):$(t).draggable("disable")),"undefined"!=typeof n.selectable&&e.utils.unwrapObservable(n.selectable)?$(t).enableSelection():$(t).disableSelection(),$(t).draggable("option",n)}else n?$(t).draggable("enable"):$(t).draggable("disable")}},e.bindingHandlers.droppable={init:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if("object"==typeof n){if("undefined"!=typeof n.destroy&&e.utils.unwrapObservable(n.destroy))return;$(t).droppable(n).data("viewModel",a),"undefined"==typeof n.enabled||e.utils.unwrapObservable(n.enabled)||$(t).droppable("disable")}else"function"==typeof n&&$(t).droppable({drop:n}).data("viewModel",a)},update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if("object"==typeof n){if("undefined"!=typeof n.destroy&&e.utils.unwrapObservable(n.destroy))return void($(t).droppable&&$(t).droppable("destroy"));$(t).droppable?$(t).droppable("option",n):$(t).droppable(n).data("viewModel",a),"undefined"!=typeof n.enabled&&(e.utils.unwrapObservable(n.enabled)?$(t).droppable("enable"):$(t).droppable("disable"))}else"function"==typeof n&&$(t).droppable({drop:n}).data("viewModel",a)}},e.bindingHandlers.selectable={init:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if("object"==typeof n){if("undefined"!=typeof n.destroy&&e.utils.unwrapObservable(n.destroy))return;$(t).selectable(n).data("viewModel",a),"undefined"==typeof n.enabled||e.utils.unwrapObservable(n.enabled)||$(t).selectable("disable"),"undefined"!=typeof n.selectable&&e.utils.unwrapObservable(n.selectable)?$(t).enableSelection():$(t).disableSelection()}else $(t).selectable().data("viewModel",a),n?$(t).selectable("enable"):$(t).selectable("disable")},update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if("object"==typeof n){if("undefined"!=typeof n.destroy&&e.utils.unwrapObservable(n.destroy))return void($(t).selectable&&$(t).selectable("destroy"));"undefined"!=typeof n.enabled&&(e.utils.unwrapObservable(n.enabled)?$(t).selectable("enable"):$(t).selectable("disable")),"undefined"!=typeof n.selectable&&e.utils.unwrapObservable(n.selectable)?$(t).enableSelection():$(t).disableSelection(),$(t).selectable("option",n)}else n?$(t).selectable("enable"):$(t).selectable("disable")}},e.bindingHandlers.slide={init:function(t,r){var i=e.utils.unwrapObservable(r());$(t).toggle(i)},update:function(t,r){var i=e.utils.unwrapObservable(r());i?$(t).slideDown():$(t).slideUp()}},e.bindingHandlers.fade={init:function(t,r){var i=e.utils.unwrapObservable(r());$(t).toggle(i)},update:function(t,r){var i=e.utils.unwrapObservable(r());i?$(t).fadeIn("slow"):$(t).fadeOut("slow")}},e.bindingHandlers.radio={init:function(t,r,i,a,o){var n,s,c,l;if(l=r(),!e.isWriteableObservable(l))throw"You must pass an observable or writeable computed";s=$(t),n=s.hasClass("btn")?s:$(".btn",s),c=i(),n.each(function(){var t,r,i;return r=this,t=$(r),i=c.radioValue||t.attr("data-value")||t.attr("value")||t.text(),t.on("click",function(){l(e.utils.unwrapObservable(i))}),e.computed({disposeWhenNodeIsRemoved:r,read:function(){t.toggleClass("active",l()===e.utils.unwrapObservable(i))}})})}},e.bindingHandlers.checkbox={init:function(t,r,i,a,o){var n,s;if(s=r(),!e.isWriteableObservable(s))throw"You must pass an observable or writeable computed";n=$(t),n.on("click",function(){s(!s())}),e.computed({disposeWhenNodeIsRemoved:t,read:function(){n.toggleClass("active",s())}})}},e.bindingHandlers.modalTabbingContraint={init:function(e,t,r,i,a){var o,n,s,c;o=function(t,r){return n=$(e).find(":tabbable"),r==$(n)[0]&&9===t.keyCode&&t.shiftKey?(t.preventDefault(),$(n[n.length-1]).focus(),!1):r!=$(n)[n.length-1]||9!==t.keyCode||t.shiftKey?void 0:(t.preventDefault(),$(n[0]).focus(),!1)},$(e).on("shown.bs.modal",function(){n=$(e).find(":tabbable"),s=$(e).find(":disabled"),c=$(e).find(":hidden"),$.each(n,function(e,t){$(t).on("keydown",function(e){o(e,t)})}),$.each(s,function(e,t){$(t).on("keydown",function(e){o(e,t)})}),$.each(c,function(e,t){$(t).on("keydown",function(e){o(e,t)})})})}},e.bindingHandlers.imageZoom={init:function(t,r){function i(t,r){if(t)for(var i=t.length-1;i>=0;i-=1){var a=e.utils.unwrapObservable(n[t[i]]);"undefined"!=typeof a&&null!==a&&(r[t[i]]=a)}}var o=new a;o.element=t;var n=e.utils.unwrapObservable(r());i(["smallImageUrl","fullImageUrl","imageMetadataDefault","fullImageClass","smallImageClass","magnifierClass","flyoutClass","magnifierPercent","flyoutEnabled","magnifierEnabled","spinnerDelay","replaceImageAtIndex","errorImageUrl"],o),o.index=n.index,o.smallImageUrls=n.smallImageUrls,o.fullImageUrls=n.fullImageUrls,o.imageMetadatas=n.imageMetadatas,o.start()},update:function(e,t,r,i,a){}};var d=function(e){var t="bust="+(new Date).getTime();return e+=e.indexOf("?")!==-1?e.indexOf("?")!==e.length-1?"&"+t:t:"?"+t};e.bindingHandlers.productImageSource={getNoImageSiteSetting:function(t){for(var r=null,i=0;i<t.$parents.length;i++)if(e.isObservable(t.$parents[i].site)){r=e.unwrap(t.$parents[i].site().noImageSrc);break}return r},init:function(t,r,i,a,o){var n,s,c,l,u,d=e.utils.unwrapObservable(r());"object"==typeof d&&"IMG"===t.nodeName&&(n=e.utils.unwrapObservable(d.src),s=e.utils.unwrapObservable(d.errorSrc),c=e.bindingHandlers.productImageSource.getNoImageSiteSetting(o),l=c&&c.length>0?c:s,n&&l&&(u=new Image,u.src=l))},update:function(t,r,i,a,o){var n,c,l,u,d,p,h,f,m,g,v,E,y,b="",I=e.utils.unwrapObservable(r());if("object"==typeof I&&"IMG"===t.nodeName){if(l=e.utils.unwrapObservable(I.src),n=e.utils.unwrapObservable(I.imageType),n||(n="medium"),l){switch(n){case"full":c=e.utils.unwrapObservable(l.primaryFullImageURL);break;case"large":c=e.utils.unwrapObservable(l.primaryLargeImageURL);break;case"medium":c=e.utils.unwrapObservable(l.primaryMediumImageURL);break;case"small":c=e.utils.unwrapObservable(l.primarySmallImageURL);break;case"thumb":c=e.utils.unwrapObservable(l.primaryThumbImageURL);break;default:c=e.utils.unwrapObservable(l.primaryMediumImageURL)}v=e.utils.unwrapObservable(I.outputFormat),E=e.utils.unwrapObservable(I.quality),y=e.utils.unwrapObservable(I.alphaChannelColor),v&&(b="&"+s.IMAGE_OUTPUT_FORMAT+"="+v),E&&(b=b+"&"+s.IMAGE_QUALITY+"="+E),y&&(b=b+"&"+s.IMAGE_ALPHA_CHANNEL_COLOR+"="+y),c&&b&&(c+=b)}else c=I.errorSrc;return h=e.utils.unwrapObservable(l.primaryImageAltText),f=e.utils.unwrapObservable(l.primaryImageTitle),u=e.utils.unwrapObservable(I.errorSrc),d=e.bindingHandlers.productImageSource.getNoImageSiteSetting(o),p=d&&d.length>0?d:u,c!==u&&"/img/no-image.jpg"!==c||(c=p),h||(h=e.utils.unwrapObservable(I.alt)),f||(f=e.utils.unwrapObservable(I.title)),m=e.utils.unwrapObservable(I.errorAlt),g=e.utils.unwrapObservable(I.onerror),p?void(c?(h&&(t.alt=h),f&&(t.title=f),t.onerror=function(){var e=new Image;e.onload=function(){t.src=p,g&&g(t),t.onerror=""},e.onerror=function(){var e=new Image;e.onload=function(){t.src=e.src,g&&g(t),t.onerror=""},e.onerror=function(){t.src="/img/no-image.jpg",g&&g(t),t.onerror=""},e.src=u},e.src=p,m&&(t.alt=m)},t.src=c):(t.src=p,m?t.alt=m:h&&(t.alt=h),g&&g(t))):(t.src=c,h&&(t.alt=h),void(f&&(t.title=f)))}}},e.bindingHandlers.carouselSwipe={init:function(e,t,r){var i=$(e);r().Options||{};i.unbind("swipeleft"),i.unbind("swiperight"),i.carousel.interval=!1,i.on("swipeleft",function(e){i.carousel("next"),i.carousel({interval:!1})}),i.on("swiperight",function(e){i.carousel("prev"),i.carousel({interval:!1})})}},e.bindingHandlers.tabTrap={constrain:function(e){var t,r=$(e).find(":tabbable");r.size();r.each(function(r){var i;$(this).hasClass("cc-tab-trapped")||($(this).addClass("cc-tab-trapped"),$(this).on("keydown",function(r){t=$(e).find(":tabbable"),9===r.keyCode&&(r.shiftKey?(i=parseInt(t.index($(this)),10)-1,i<0&&(r.preventDefault(),t[t.size()-1].focus())):(i=parseInt(t.index($(this)),10)+1,i===t.size()&&(r.preventDefault(),t[0].focus())))}))})}},e.bindingHandlers.ccForm={init:function(e,t){var r=$(e),i=t().action,a=["INPUT","SELECT"];r.on("keydown",function(e){if("13"==e.which&&a.indexOf(e.target.tagName)!==-1)return"function"==typeof i?i():"string"==typeof i&&$(i).trigger("click"),!1})}},e.bindingHandlers.ccValidation={init:function(e,t,r){},update:function(t,r,i){e.bindingHandlers.validationMessage.update(t,r,i),e.isObservable(r().error)?$("#cc-aria-announce").text(r().error()):$("#cc-aria-announce").text(r().error)}},e.bindingHandlers.handleFocusin={init:function(t,r,i){var a=e.utils.unwrapObservable(r()),o=a.applyClass?a.applyClass:"cc-showhidden",n=a.applyTo;$(t).on("focusin mouseover",function(e){$(t).find(n).addClass(o)}).on("focusout mouseout",function(e){$.contains(t,document.activeElement)||$(t).find(n).removeClass(o)})}}}),define("profileHelper",["knockout","ccConstants"],function(e,t){"use strict";function r(){return this.profileData=e.observable(null),this.allowedActions=e.observableArray(null),this.pageAccesskeys={home:[t.DASHBOARD_TAB,t.DASHBOARD_MINI_TAB],catalog:[t.CATALOG_TAB],"price-groups":[t.CATALOG_TAB],"price-group":[t.CATALOG_TAB],marketing:[t.MARKETING_TAB],reporting:[t.REPORTS_TAB],search:[t.SEARCH_TAB],accounts:[t.ACCOUNTS_TAB],contacts:[t.ACCOUNTS_TAB],design:[t.DESIGN_TAB],code:[t.DESIGN_TAB],publish:[t.PUBLISHING_TAB],settings:[t.SETTINGS_TAB,t.SETTINGS_LIMITED_TAB],inventory:[t.CATALOG_TAB],css:[t.DESIGN_TAB],theme:[t.DESIGN_TAB],layout:[t.DESIGN_TAB],media:[t.MEDIA_TAB]},this.restrictedSubTabAccess={emailSettings:[t.SETTINGS_TAB],webAPI:[t.SETTINGS_TAB],accessControl:[t.SETTINGS_TAB],extensions:[t.SETTINGS_TAB],abandonedCartSettings:[t.SETTINGS_TAB],storeEndpointSettings:[t.SETTINGS_TAB]},this.tourNavigationData={home:{url:t.HOME_PAGE},catalog:{url:t.AGENT_CATALOG_PAGE_CONTEXT},marketing:{url:t.MARKETING_PAGE},reporting:{url:t.REPORTING_PAGE},search:{url:t.SEARCH_PAGE},accounts:{url:t.CREATE_ACCOUNT_URL,lastStop:!1},design:{url:t.DESIGN_PAGE},code:{url:t.CODE_PAGE},publish:{url:t.PUBLISH_PAGE},settings:{url:t.SETTINGS_SHIPPINGMETHODS_PAGE,lastStop:!1}},this}return r.prototype.isAuthorized=function(e){var t=this;if(e){var r=[];if($.isArray(e)?r=e:r.push(e),t.allowedActions&&t.allowedActions().length>0&&$(t.allowedActions()).filter(r).length>0)return!0}return!1},r.prototype.isAuthorizedForPage=function(e){var t=this,r=t.pageAccesskeys[e];if("undefined"!=typeof r&&null!==r)return t.isAuthorized(r)},r.prototype.isAuthorizedForSubTab=function(e){if(!e)return!0;var t=this,r=t.restrictedSubTabAccess[e];return"undefined"==typeof r||null===r||t.isAuthorized(r)},r.prototype.nextAuthorizedPage=function(e){if(e){var t=this,r=e.split("/");if(r&&(e=r[0]&&r[0].length>0?r[0]:r[1]),"undefined"==typeof e||null===e)return;var i=!1;for(var a in t.pageAccesskeys)if(t.pageAccesskeys.hasOwnProperty(a)&&(a===e&&(i=!0),i)){var o=t.pageAccesskeys[a];if(t.isAuthorized(o))return t.tourNavigationData[a]}return null}},new r}),define("dateTimeUtils",["ojs/ojcore","ojs/ojvalidation"],function(){"use strict";function e(){}return e.prototype.DEFAULT_FORMAT_TYPE="datetime",e.prototype.DEFAULT_FORMAT="short",e.prototype.getFormattedDateTime=function(e,t,r,i){var a,o,n,s,n,c,l;return t||(t=this.DEFAULT_FORMAT_TYPE),r||(r=this.DEFAULT_FORMAT),i||(i=this.DEFAULT_FORMAT),o=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME),s={formatType:t,dateFormat:r,timeFormat:i},n=o.createConverter(s),c=new Date(e),l=oj.IntlConverterUtils.dateToLocalIso(c),a=n.format(l)},e.prototype.validateDate=function(e){var t,r,i,r,a,o,n;a="date",o=this.DEFAULT_FORMAT,n=this.DEFAULT_FORMAT,t=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME),i={formatType:a,dateFormat:o,timeFormat:n},r=t.createConverter(i);try{return r.parse(e),!0}catch(e){return!1}},e.prototype.validateTime=function(e){var t,r,i,r,a,o,n;a="time",o=this.DEFAULT_FORMAT,n=this.DEFAULT_FORMAT,t=oj.Validation.converterFactory(oj.ConverterFactory.CONVERTER_TYPE_DATETIME),i={formatType:a,dateFormat:o,timeFormat:n},r=t.createConverter(i);try{return r.parse(e),!0}catch(e){return!1}},new e}),define("ccKoExtensions",["knockout","jqueryui","currencyHelper","CCi18n","ccDate","ccNumber","profileHelper","ccLogger","dateTimeUtils","pubsub","ccConstants","ojs/ojcore","i18next","navigation"],function(e,t,r,i,a,o,n,s,c,l,u,d,p,h){"use strict";var f=u.ALLOW_HASHBANG,m=!1;window.history&&window.history.pushState&&(m=!0),function(){var t,a,o,n,s,l,u,d,p,h,f,m="CC-propertyEditor-";f=function(e,t){"currencyMap"===this.type&&e?(this.property()[e.id](null),$("#"+this.property()[e.id].formId).focus()):(this.property(null),$("#"+this.property.formId).focus())},t=function(e,t){var r;r="currencyMap"===this.type?this.property()[e.id]:this.property,void 0==r||r.isModified()||r.isValid()?r&&r.forcedModified&&r()&&(r.forcedModified=!1):(r.isModified(!0),r.forcedModified=!0)},p=function(){var e=!0,t=$("#"+this.idBase+"field").val();""===t?$("#"+this.idBase+"controlGroup .cc-required-message").css("display","inline-block"):$("#"+this.idBase+"controlGroup .cc-required-message").css("display","none"),e=c.validateDate(t),e===!1?$("#"+this.idBase+"controlGroup .cc-invalid-date").css("display","inline-block"):$("#"+this.idBase+"controlGroup .cc-invalid-date").css("display","none")},h=function(){var e=!0,t=$("#"+this.idBase+"field").val();e=c.validateTime(t),e===!1&&($("#"+this.idBase+"field").val("T00:00:00"),this.property("T00:00:00"))},d=function(e){$("#"+e).focus()},a=function(e,t){var r=$("#"+e).get(0),i=$("#"+t.target.id);"text"==r.type?o(r,i,!1):o(r,i,!0)},o=function(e,t,r){r?(e.type="text",t.text(i.t("ns.common:resources.hideText"))):(e.type="password",t.text(i.t("ns.common:resources.revealText")))},n=function(e,t){var r=$(t.target),i=$(t.target).prev("input"),a=1===t.which||32===t.which||13===t.which;if(a)"block"!=r.css("display")&&"inline-block"!=r.css("display")||(r.toggle(!1),$(t.target).prev("input").attr("disabled",!1),i.select(),i.val(""),i.focus());else if(9===t.which)return!0},s=function(e,t){var r=$(t.target),i=r.next("input");0===r.val().length&&(e&&(r.attr("disabled","true"),i.toggle(!0)),this.validate())},u=function(t,r){var i,a,o,n;if(o=e.utils.unwrapObservable(r.type),r.prefix=r.prefix||t.prefix,r.unit=r.unit||t.unit,!o&&r.values&&(o="radio"),t.rules)for(i=t.rules(),n=0;n<i.length;n+=1)if(a=i[n],"required"!==a.rule||!a.params||a.condition&&!a.condition()||r.required===!1||(r.required=!0),!o)switch(a.rule){case"number":o="number";break;case"date":o="date-ojet";break;case"bool":o="checkbox"}e.utils.unwrapObservable(r.type)||(r.type=o||"shortText"),r.label||(r.label=t.label)},e.bindingHandlers.propertyEditor={init:function(t,r){e.utils.unwrapObservable(r());return{controlsDescendantBindings:!0}},update:function(o,c,g,v,E){var y,b,I,T,S,_,P,A,C,R=e.utils.unwrapObservable(c()),O=e.observable(!0),N=i.t("ns.common:resources.numberValidation");if(R.property&&e.isObservable(R.property)){_=R.property,_.extend({validatable:!0}),A=e.utils.unwrapObservable(R.id),C=e.utils.unwrapObservable(R.type),y=new Date,b=new Date(y.getFullYear(),y.getMonth(),y.getDate()),P=!R.clearValue,_.extend({validatable:!0}),I={writable:e.observable(!0),visible:e.observable(!0),currentDate:y,minDate:b,valueUpdate:"change",numericValidationErrorMessage:N};for(S in R)R.hasOwnProperty(S)&&("writable"!==S||e.isObservable(R[S])?I[S]=R[S]:I.writable(R[S]));var D=function(t,r){var i,a=null,o=e.contextFor(this);if(i=o.$parent?"currencyMap"===o.$parent.type:"currencyMap"===o.$parents[1].type,a=i?o.$parent.property()[e.dataFor(this).id]:e.dataFor(this),a.numericJetValidation(!0),"messagesShown"===r.option){var n=$(t.target).ojInputText("isValid");n?a.numericJetValidation(!0):a.numericJetValidation(!1)}else a.numericJetValidation(!0)},L=e.pureComputed({read:function(){return _()},write:function(t){var r=I.fractionalDigits,i=!1;if("digit"===e.utils.unwrapObservable(I.type)&&(i=!0),void 0!=t)if(r)_(t.toFixed(r));else{var a=t.toString().split(".");if(a&&2==a.length){if(i)return void _(t.toFixed(0));_(a[1].length>3?t.toFixed(3):t)}else _(t)}else _(t)}});u(_,I),R.writable===!1&&I.writable(!1),I.helpText=e.observable(e.utils.unwrapObservable(R.helpText)),I.isRequiredButMissing=e.computed(function(){return I.required&&e.isObservable(I.property.isModified)&&I.property.isModified()&&null==I.property()},I),I.titleText=e.computed(function(){var e="";return e=I.property.hasOwnProperty("isValid")?I.property.isValid()?I.helpText():I.property.error:I.helpText()},I),T={};var w=e.utils.unwrapObservable(I.type);"currency"!==w&&"currencyMap"!==w&&"digit"!==w||("currency"==w||"currency"===w?I.fractionalDigits=r.currencyObject().fractionalDigits:(I.fractionalDigits=0,I.numericValidationErrorMessage=i.t("ns.common:resources.digitValidation")),"currencyMap"!==w&&(w="number")),T.name=m+w;var M=$(o).closest("form").attr("id");if(M||(M=$(o).parent().attr("id")),I.idBase=M+"-"+T.name+"-"+(A?A+"-":""),"currencyMap"===w)for(S in _())_().hasOwnProperty(S)&&(_()[S].formId=I.idBase+S+"-field");else _.formId=I.idBase+"field";T.data=I,T.if=e.utils.unwrapObservable(R.if)||"undefined"==typeof e.utils.unwrapObservable(R.if),I.required=e.utils.unwrapObservable(I.required||_.required),"currencyMap"===I.type?$.each(I.property(),function(r){I.property()[r].validate=t,I.property()[r].numericJetValidation=e.observable(!0),I.property()[r].addonFocusInput=d}):(I.validate=t,I.numericJetValidation=O,I.addonFocusInput=d),I.clearValueFunction=f,"revealablePassword"===I.type?(I.togglePasswordVisibility=a,I.clickOrKeydownToUpdatePassword=n,I.blurPasswordField=s,I.keyUpInPasswordField=l):"number"===I.type||"currency"===I.type||"digit"===I.type||e.isObservable(I.type)&&"number"===I.type()?(I.customJetOptionChangeListener=D,I.computedValueWithFractions=L):"currencyMap"===I.type&&$.each(I.property(),function(e){I.property()[e].customJetOptionChangeListener=D,I.property()[e].computedValueWithFractions=L}),"date-ojet"===I.type||"time-ojet"===I.type||"date-time-ojet"===I.type?(I.validateOjetDate=p,I.validateOjetTime=h,I.dateTitleText=i.t("ns.common:resources.datePicker"),I.timeTitleText=i.t("ns.common:resources.timePicker")):!e.isObservable(I.type)||"date-ojet"!==I.type()&&"time-ojet"!==I.type()&&"date-time-ojet"!==I.type||(I.validateOjetDate=p,I.validateOjetTime=h,I.dateTitleText=i.t("ns.common:resources.datePicker"),I.timeTitleText=i.t("ns.common:resources.timePicker")),e.bindingHandlers.template.update(o,function(){return T},g,I,E)}}}}(),e.bindingHandlers.inTabFlow={update:function(t,r){var i=e.utils.unwrapObservable(r());"A"==$(t).prop("tagName")?$(t).attr("tabindex",i?0:-1):$(t).find(":input").attr("tabindex",i?0:-1)}},e.bindingHandlers.validatableValue={init:function(t,r,i,a,o){var n=r(),s=o.$parent.ignoreBlur;if($(t).blur(function(){return!(!s||!s())||void(n.isModified&&e.isObservable(n.isModified)&&n.isModified(!0))}),n.rules&&e.isObservable(n.rules))for(var c=n.rules().length,l=0;l<c;++l)if("required"===n.rules()[l].rule){n.rules()[l].params===!0&&$(t).attr("required","required");break}e.bindingHandlers.value.init(t,r,i,a,o)},update:function(t,r,i,a,o){e.bindingHandlers.value.update(t,r,i,a,o)}},e.bindingHandlers.validatableTarget={init:function(t,r,i,a,o){var n=r();$(t).blur(function(){n.isModified&&e.isObservable(n.isModified)&&n.isModified(!0)})}},e.bindingHandlers.ccLink={init:function(t,r,i,a,o){t.addEventListener("click",function(e){var r={usingCCLink:!0};if($(t).trigger("click.cc.unsaved",r),r.preventDefault)e.stopImmediatePropagation();else{var i=t.pathname+t.search;window.location.pathname!==i&&h.goTo(i)}return e.preventDefault(),!1},!1);var n,s=e.utils.unwrapObservable(r()),c=s;if(s){if("string"==typeof s){var l=null,u=s;if(a.links)l=a;else{n=o.$parents;for(var d=0;d<n.length;d++)if(n[d].links){l=n[d];break}}l&&(c=l.links()[u])}if(c){var p="";c.url?p=c.url:c.route&&(p=c.route);var m=p;f&&(m="#!"+p);var g="";if(window.urlLocale){var v=JSON.parse(window.urlLocale)[0].name;g="/"+v}$(t).prop("href",g+p),0===$(t).children().size()&&""==$.trim($(t).text())&&(c.displayName?$(t).text(c.displayName):$(t).text(window.location.href+m))}}}},e.bindingHandlers.ccNavigation={update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());$(t).on("click.cc.nav",function(e){var r=t.pathname+t.search,i={usingCCLink:!0};return $(t).trigger("click.cc.unsaved",i),"prevent"==n||i.preventDefault||h.goTo(r),e.preventDefault(),e.stopImmediatePropagation(),!1})}},e.bindingHandlers.triggerMessage={update:function(t,r){var i=r();if(i.triggerFired&&e.isObservable(i.triggerFired)){var a=function(){return i.triggerFired()?i.triggerMessage:null},o=function(){return!!i.triggerFired()};e.bindingHandlers.text.update(t,a),e.bindingHandlers.visible.update(t,o)}}},e.bindingHandlers.widgetLocaleText={update:function(e,t,r,i,a){var o,n,s=t();if(i.translate)n=i;else for(var c=a.$parents,l=0;l<c.length;l++)if(c[l].translate){n=c[l];break}"string"==typeof s?o=n.translate(s,null,!0):"object"==typeof s&&void 0!=s.value&&(o=n.translate(s.value,s.params,!0,s.custom)),o&&("string"==typeof s||"object"==typeof s&&"innerText"==s.attr?$(e).text(o):"object"==typeof s&&void 0!=s.attr&&$(e).attr(s.attr,o))}},e.bindingHandlers.disabled={update:function(t,r,i,a,o){var n,s,c=!1,l=r();if("boolean"==typeof l?c=e.utils.unwrapObservable(l):"object"==typeof l&&void 0!=l.condition&&(c=e.utils.unwrapObservable(l.condition),void 0!=l.click&&(n=e.utils.unwrapObservable(l.click)),void 0!=l.link&&(s=function(){return e.utils.unwrapObservable(l.link)})),c){$(t).off("click.handler");var u=$(t).prop("tagName");"A"==u&&$(t).attr("href","#"),$(t).on("click.handler",function(e){return e.stopImmediatePropagation(),!1}),$(t).addClass("disabled")}else $(t).removeClass("disabled"),$(t).off("click.handler"),n&&$(t).on("click.handler",function(){var e=n.bind(a);return e(),!1}),s&&e.bindingHandlers.ccLink.init(t,s,i,a,o)}},e.bindingHandlers.ccDate={update:function(t,r,i,o,n){var s=r(),c=e.utils.unwrapObservable(s),l=e.utils.unwrapObservable(c.date),u=e.utils.unwrapObservable(c.format),d=e.utils.unwrapObservable(c.returnedType),p=e.utils.unwrapObservable(c.returnedDate);p=a.formatDateAndTime(l,u,d,p),$(t).text(p)}},e.bindingHandlers.ccResizeImage={getNoImageSiteSetting:function(t){for(var r=null,i=0;i<t.$parents.length;i++)if(e.isObservable(t.$parents[i].site)){r=e.unwrap(t.$parents[i].site().noImageSrc);break}return r},init:function(t,r,i,a,o){var n,s,c,l,u,d=e.utils.unwrapObservable(r());"object"==typeof d&&"IMG"===t.nodeName&&(n=e.utils.unwrapObservable(d.src),s=e.utils.unwrapObservable(d.errorSrc),c=e.bindingHandlers.productImageSource.getNoImageSiteSetting(o),l=c&&c.length>0?c:s,n&&l&&(u=new Image,u.src=l))},update:function(t,r,i,a,o){var n,s,c,l,d,p,h,f,m,g,v,E="",y=e.utils.unwrapObservable(r()),b=u.DEFAULT_IMG_SIZE_FOR_VIEWPORT,I=["xsmall","small","medium","large"],T=function(e){if(e){var t=e.split(",");return 2==t.length&&(!isNaN(t[0])&&!isNaN(t[1]))}return!1},S=function(){var t=document.createElement("img"),r="srcset"in t,i="sizes"in t,a=y.isSrcSetEnabled&&e.utils.unwrapObservable(y.isSrcSetEnabled);return r&&i&&a},_=function(){var t="",r=e.utils.unwrapObservable(y.outputFormat),i=e.utils.unwrapObservable(y.quality),a=e.utils.unwrapObservable(y.alphaChannelColor);return r&&(t="&"+u.IMAGE_OUTPUT_FORMAT+"="+r),i&&(t=t+"&"+u.IMAGE_QUALITY+"="+i),a&&(t=t+"&"+u.IMAGE_ALPHA_CHANNEL_COLOR+"="+a),t},P=function(t,r,i){var a="";y[t+"_img"]?a=e.utils.unwrapObservable(y[t+"_img"]):i&&(a=R(i,r.imageHeight,r.imageWidth));var o=_();o&&(a.startsWith(u.ENDPOINT_IMAGES+"?source=")?a+=o:a=u.ENDPOINT_IMAGES+"?source="+a+o);b[t].width;if(a&&r.imageWidth)return a=a+" "+r.imageWidth+"w"},A=function(t){var r,i={},a=t?t:$(window)[0].innerWidth||$(window).width();"large"==a||a>=u.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(i.imageHeight=b.large.height,i.imageWidth=b.large.width,i.minWidth=b.large.minWidth,r="large"):"medium"==a||a>u.VIEWPORT_TABLET_UPPER_WIDTH&&a<u.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(i.imageHeight=b.medium.height,i.imageWidth=b.medium.width,i.minWidth=b.medium.minWidth,i.maxWidth=b.medium.maxWidth,r="medium"):"small"==a||a>=u.VIEWPORT_TABLET_LOWER_WIDTH&&a<=u.VIEWPORT_TABLET_UPPER_WIDTH?(i.imageHeight=b.small.height,i.imageWidth=b.small.width,i.minWidth=b.small.minWidth,i.maxWidth=b.small.maxWidth,r="small"):(i.imageHeight=b.xsmall.height,i.imageWidth=b.xsmall.width,i.maxWidth=b.xsmall.maxWidth,r="xsmall");var o=!1;switch(r){case"large":T(e.utils.unwrapObservable(y.large))&&(i.imageHeight=y.large.split(",")[0],i.imageWidth=y.large.split(",")[1],o=!0);break;case"medium":T(e.utils.unwrapObservable(y.medium))&&(i.imageHeight=y.medium.split(",")[0],i.imageWidth=y.medium.split(",")[1],o=!0);break;case"small":T(e.utils.unwrapObservable(y.small))&&(i.imageHeight=y.small.split(",")[0],i.imageWidth=y.small.split(",")[1],o=!0);break;case"xsmall":T(e.utils.unwrapObservable(y.xsmall))&&(i.imageHeight=y.xsmall.split(",")[0],i.imageWidth=y.xsmall.split(",")[1],o=!0)}if(!o)if(T(e.utils.unwrapObservable(y.size)))i.imageHeight=y.size.split(",")[0],i.imageWidth=y.size.split(",")[1];else if(e.utils.unwrapObservable(y.size))switch(e.utils.unwrapObservable(y.size)){case"large":T(e.utils.unwrapObservable(y.large))?(i.imageHeight=y.large.split(",")[0],i.imageWidth=y.large.split(",")[1],o=!0):(i.imageHeight=b.large.height,i.imageWidth=b.large.width);break;case"medium":T(e.utils.unwrapObservable(y.medium))?(i.imageHeight=y.medium.split(",")[0],i.imageWidth=y.medium.split(",")[1],o=!0):(i.imageHeight=b.medium.height,i.imageWidth=b.medium.width);break;case"small":T(e.utils.unwrapObservable(y.small))?(i.imageHeight=y.small.split(",")[0],i.imageWidth=y.small.split(",")[1],o=!0):(i.imageHeight=b.small.height,i.imageWidth=b.small.width);break;case"xsmall":T(e.utils.unwrapObservable(y.xsmall))?(i.imageHeight=y.xsmall.split(",")[0],i.imageWidth=y.xsmall.split(",")[1],o=!0):(i.imageHeight=b.xsmall.height,i.imageWidth=b.xsmall.width)}return i},C=function(e){if(e){var t=e.minWidth,r=e.maxWidth,i=e.imageWidth,a="";t&&(a="(min-width:"+t+"px)");var o="";return r&&(o="(max-width:"+r+"px)"),a&&o&&i?a+" and "+o+" "+i+"px":a&&i?a+" "+i+"px":o&&i?o+" "+i+"px":""}},R=function(e,t,r){if(e.indexOf(u.ENDPOINT_IMAGES+"?source=")>-1){var i=/height=[0-9]+/i;e.search(i)&&(e=e.replace(i,"height="+t));var a=/width=[0-9]+/i;return e.search(a)&&(e=e.replace(a,"width="+r)),e}return u.ENDPOINT_IMAGES+"?source="+s+"&height="+t+"&width="+r};if("object"==typeof y&&"IMG"===t.nodeName){var O=A();g=O.imageHeight,v=O.imageWidth;var N=!y.setMinHeightBeforeImageLoad||!e.utils.unwrapObservable(y.isSetMinHeightBeforeImageLoad)||e.utils.unwrapObservable(y.isSetMinHeightBeforeImageLoad);if(t.parentNode&&N){var D=t.parentNode;if("cc_img__resize_wrapper"!==D.getAttribute("id")){var L=document.createElement("div");t.onload=function(){L.style.minHeight="0px"},L.style.maxWidth="100%",L.style.minHeight=g+"px",L.style.height="100%",L.setAttribute("id","cc_img__resize_wrapper"),D.replaceChild(L,t),L.appendChild(t)}}if(E=_(),s=e.utils.unwrapObservable(y.source),s?(n=S()?s:R(s,g,v),E&&(n+=E)):n=y.errorSrc,c=e.utils.unwrapObservable(y.errorSrc),l=e.bindingHandlers.ccResizeImage.getNoImageSiteSetting(o),d=c?c:l,"/img/no-image.jpg"===n&&(n=d,s=d),l&&l.length>0){var w=new Image;w.onerror=function(){d=c},w.src=l}if(p||(p=e.utils.unwrapObservable(y.alt)),h||(h=e.utils.unwrapObservable(y.title)),f=e.utils.unwrapObservable(y.errorAlt),m=e.utils.unwrapObservable(y.onerror),n){if(p&&(t.alt=p),h&&(t.title=h),t.onerror=function(){var e=new Image;e.onload=function(){t.src=d,t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),m&&m(t),t.onerror=""},e.onerror=function(){var e=new Image;e.onload=function(){t.src=e.src,t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),m&&m(t),t.onerror=""},e.onerror=function(){t.src="/img/no-image.jpg",t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),m&&m(t),t.onerror=""},e.src=c},e.src=d,f&&(t.alt=f)},t.src=n,S()){for(var M="",k="",U=0;U<I.length;U++){var x=A(I[U]),F=P(I[U],x,s);F&&M.indexOf(F)<0&&(M=M?M+","+F:F);var G=C(x);G&&(k=k?k+","+G:G)}M&&(t.srcset=M),k&&(t.sizes=k)}}else t.src=d,f?t.alt=f:p&&(t.alt=p),m&&m(t)}}},e.bindingHandlers.ccDateTime={update:function(t,r,i,a,o){var n=r(),s=e.utils.unwrapObservable(n),l=e.utils.unwrapObservable(s.date),u=e.utils.unwrapObservable(s.format),d=e.utils.unwrapObservable(s.dateFormat),p=e.utils.unwrapObservable(s.timeFormat),h=e.utils.unwrapObservable(s.date);h=c.getFormattedDateTime(l,u,d,p),$(t).text(h)}},e.bindingHandlers.ccNumber={update:function(t,r,i,a,n){var s=r(),c=e.utils.unwrapObservable(s),l=null;l=o.formatNumber(c),$(t).text(l)}},e.bindingHandlers.setContextVariable={update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());o["$"+n.name]=e.utils.unwrapObservable(n.value)}},e.virtualElements.allowedBindings.setContextVariable=!0,e.bindingHandlers.element={init:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r()),c=a.jsPath()+"/";for(var l in a.elementsJs)if(n===l&&a.elementsJs.hasOwnProperty(l)){var u=a.elementsJs[l]();if(null!==u){var d="widget/",p=u.indexOf(d)+d.length;u.substring(0,p-1),u.lastIndexOf(".");require({baseUrl:c},[u],function(e){"function"==typeof e?e():e.hasOwnProperty("onLoad")&&"function"==typeof e.onLoad&&e.onLoad(a);var t=e.elementName;a.hasOwnProperty(t)?s.warn("Element name "+t+" is same as existing property"):a[t]=e,a.elements[t]=e,
a.initialized()&&a.initialized.valueHasMutated()})}}return{controlsDescendantBindings:!0}},update:function(t,r,i,a,o){var n,s,c=e.utils.unwrapObservable(r());if(c){if("string"==typeof c)n=c;else{if("object"!=typeof c||void 0==c.type)return;n=c.type,void 0!=c.id&&(s=c.id)}s&&""!==s||(s=i().id&&""!==i().id?i().id:"id");var l=o.$data.id&&o.$data.id()?o.$data.id():"",u=o.$data.typeId&&o.$data.typeId()?o.$data.typeId():"",d={};d.type=n,d.fullType=u+"-"+n,d.id=s,d.textId="text."+s,d.elementId=l+"-"+n+"-"+s,d.styles="",""!==s&&o.$elementConfig&&(d.config=o.$elementConfig[s],d.config&&d.config.font&&(d.styles=d.config.font.styles||"",d.config.font.styles.display&&"block"===d.config.font.styles.display&&d.config.padding&&(d.config.padding.paddingTop>0||d.config.padding.paddingBottom>0||d.config.padding.paddingLeft>0||d.config.padding.paddingRight>0)&&(d.styles.padding=d.config.padding.paddingTop+"px "+d.config.padding.paddingRight+"px "+d.config.padding.paddingBottom+"px "+d.config.padding.paddingLeft+"px"))),$(t).attr("id",d.elementId),""!=d.styles&&$(t).css(d.styles),o.$elementInstance=d;var p={};p.name=d.fullType,p.data=a,p.url="",e.bindingHandlers.template.update(t,function(){return p},i,a,o)}}},e.bindingHandlers.addTemplate={update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());"string"==typeof n&&$(n).not("text").each(function(){var e=this.id;e&&""!==e&&0==$("body").find("#"+e).length&&$("body").append(this)})}},e.virtualElements.allowedBindings.addTemplate=!0,e.bindingHandlers.previewBar={update:function(t,r,i,a,o){var n=e.utils.unwrapObservable(r());if(n&&o.$data.previewBar){var s=o.$data.previewBar,c=s.cssPath,l=s.templateUrl,u=s.templateName;$("link[href='"+c+"']").length||$('<link href="'+c+'" rel="stylesheet">').appendTo("head");var d={};d.name=u,d.data=a,d.templateUrl=l,d.afterRender=s.attachEventHandlers,$.when(s.ojLoaded).done(function(){e.bindingHandlers.template.update(t,function(){return d},i,a,o)})}}},e.virtualElements.allowedBindings.previewBar=!0,e.bindingHandlers.embeddedAssistance={init:function(t,r,i,a,o){var n=r();n.subscribe(function(){e.bindingHandlers.embeddedAssistance.update(t,r,i,a,o)})},update:function(t,r,i,a,o){var n=r();n.extend({validatable:!0});var s=!1,c=!1;s=n.isModified()&&n().length>0,c=n.isValid();var l=function(){return s?c?null:n.embeddedAssistance:null},u=function(){return!!s&&!c};e.bindingHandlers.text.update(t,l),e.bindingHandlers.visible.update(t,u)}},e.extenders.propertyWatch=function(t){return t.initialState=e.observable(e.toJSON(t)),t.resetWatch=function(){t.initialState(e.toJSON(t))},t.hasChanged=e.computed(function(){var r=t.initialState()!==e.toJSON(t);return r&&t.resetWatch(),r}).extend({notify:"always",throttle:100}).extend({notify:"always"}),t},e.extenders.trigger=function(t,r){return t.triggerSet=!1,t.triggerValue=null,t.triggerMessage="",t.triggerFired=e.observable(!1),r&&(r.value&&(t.triggerValue=r.value,t.triggerSet=!0),r.message&&(t.triggerMessage=r.message)),t.trigger=function(e){t()===t.triggerValue?t.triggerFired(!0):t.triggerFired(!1)},t.clearTrigger=function(){t.triggerFired(!1)},t.triggerSet&&t.subscribe(t.trigger),t},e.bindingHandlers.accessControl={init:function(t,r,i){var a=i().accessControl,o=a.defaultAction?a.defaultAction:u.HIDE;n.isAuthorized(a.accessKey)?o===u.SHOW&&($(t).hide(),e.virtualElements.emptyNode(t)):o===u.SHOW||($(t).hide(),e.virtualElements.emptyNode(t))}},e.virtualElements.allowedBindings.accessControl=!0}),define("ccKoErrorWrapper",["knockout","ccLogger","ccRestClient"],function(e,t,r){"use strict";function i(r){return function(){try{return r.apply(this,arguments)}catch(r){t.error(r);var i=arguments[0],a=e.contextFor($(i)[0]).$root;if(a&&a.isPreview&&a.isPreview()){var o=$(i).parents(".widget-container,.stack-container");o.length>0&&(o.find(".stack-template,.displayTemplate").addClass("error"),o.find("div.display-error").show(),o.find("span.error-msg").first().text(r.message));var n=$(i).prev("div.sf-display-error");0==n.length&&(n=$(i).parents().prev("div.sf-display-error")),n.length>0&&(n.show(),n.find("span.sf-error-msg").text(r.message),n.next("div").addClass("sf-error"))}}}}var a,o=["attr","css","template","text","style","value"];if(r.previewMode)for(a in o){var n=o[a];if(e.bindingHandlers[n]&&e.bindingHandlers[n].update){var s=e.bindingHandlers[n].update;e.bindingHandlers[n].update=i(s)}}}),define("shared/store-loader",["knockout","koMapping","koExternalTemplate","bootstrap","koExtensions","ccKoExtensions","ccKoValidateRules","ccKoErrorWrapper"],function(e,t){"use strict";$.uiBackCompat=!1,infuser.defaults.templateSuffix=".template",e.mapping=t,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,i=function(){},a=function(){return r.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,a.prototype=new i,a})}),define("ccResourceLoader",["module","ccLogger"],function(e,t){function r(e){var t=e.indexOf(a),r=e.indexOf(o);if(r==-1&&(r=e.indexOf(n)),t>-1&&r>-1)return e.substring(t,r)}function i(){function a(e,t){i.moduleUrls[e]=t}function o(e){return i.moduleUrls[e]}function n(t,i,o){var n=e.config();i(n.jsUrls,function(){for(var e=arguments,i=0;i<e.length;i++){var s=e[i];s&&s.onLoad&&s.onLoad();var c=r(n.jsUrls[i]);a(c,n.jsUrls[i])}o(t)})}function c(e,r,i){var a=o(e);a?r([a],function(e){i(e)},function(r){t.error("Module "+e+" could not be loaded :"+r),i()}):(t.warn(" Url for Module "+e+" was not found."),i())}var l=this;i.moduleUrls={},l.load=function(t,r,i,a){e.config();a.isBuild?i():t==s?n(t,r,i):c(t,r,i)}}var a="global",o=".min.js",n=".js",s="APPLICATION_JS";return new i}),require.config({baseUrl:"js",packages:["packageAce",{name:"packageAce",location:"/shared/js/libs/ace",main:"ace"}],shim:{jqueryui:{deps:["jquery"]},jquerymobile:{deps:["jquery"]},jquery:{deps:[],exports:"$"},trafficCop:{deps:["jquery"]},infuser:{deps:["jquery","trafficCop"]},spectrumColorPicker:{deps:["jquery"]},bootstrapDatePicker:{deps:["jquery"]},bootstrapTimePicker:{deps:["jquery"]},bootstrap:{deps:["jquery"]},bstypeahead:{deps:["jquery"]},tagsInput:{deps:["jquery"]},chosen:{deps:["jquery"]},viewportVisible:{deps:["jquery"]},imagesloaded:{deps:["jquery"]},facebook:{exports:"FB"}},paths:{jqueryui:"/shared/js/libs/jquery-ui-1.11.4.custom.min",jquerymswipe:"/shared/js/libs/jquery.mobile.swipe-1.4.5.min",i18next:"/shared/js/libs/i18next.3.5.0.min",i18nextBackend:"/shared/js/libs/i18nextXHRBackend.1.2.1",tagsInput:"/shared/js/libs/jquery.tagsinput-1.3.5",chosen:"/shared/js/libs/chosen.jquery-1.4.2.min",viewportVisible:"/shared/js/libs/jquery.visible.min",koMapping:"/shared/js/libs/knockout.mapping-2.4.1.min",koValidate:"/shared/js/libs/knockout.validation-2.0.3",trafficCop:"/shared/js/libs/TrafficCop",infuser:"/shared/js/libs/infuser",bootstrap:"/shared/js/libs/bootstrap.3.1.1",bootstrapDatePicker:"/shared/js/libs/bootstrap-datepicker",bootstrapTimePicker:"/shared/js/libs/bootstrap-timepicker",bootstrapSlider:"/shared/js/libs/bootstrap-slider",spectrumColorPicker:"/shared/js/libs/spectrum-1.7.0",bstypeahead:"/shared/js/libs/bootstrap3-typeahead",crossroads:"/shared/js/libs/crossroads-0.12.0.min",hasher:"/shared/js/libs/hasher-1.2.0",ccURLPatterns:"/shared/js/ccLibs/cc-url-patterns",moment:"/shared/js/libs/moment-2.10.3",momentLangs:"/shared/js/libs/moment",ccStoreConfiguration:"/shared/js/ccLibs/cc-store-configuration-1.0",profiletools:"/shared/js/ccLibs/profile-tools-1.0",ccConstants:"/shared/js/ccLibs/cc-constants",koExtensions:"/shared/js/ccLibs/ko-extensions",storageApi:"/shared/js/ccLibs/cc-storage-api-1.0",ccOAuthTimeout:"/shared/js/ccLibs/cc-oauth-timeout",ccPreviewBar:"/shared/js/ccLibs/cc-preview-bar",ccRestClientConstructor:"/shared/js/ccLibs/cc-rest-client-1.0",ccRestClient:"/shared/js/ccLibs/storefront-rest-client",koExternalTemplate:"/shared/js/ccLibs/koExternalTemplateEngine-amd-2.0.5-modified",ccKoExtensions:"/shared/js/ccLibs/cc-ko-extensions",ccKoErrorWrapper:"/shared/js/ccLibs/cc-ko-error-wrapper",xDomainProxy:"/shared/js/ccLibs/xdomain-proxy",pubsub:"/shared/js/ccLibs/pubsub-1.0",pubsubImpl:"/shared/js/ccLibs/pubsub-impl",routing:"/shared/js/ccLibs/routing-3.0",notifier:"/shared/js/ccLibs/notifier-1.0",notifications:"/shared/js/ccLibs/notifications-1.0",storeKoExtensions:"/shared/js/ccLibs/store-ko-extensions",ccLogger:"/shared/js/ccLibs/ccLogger-1.0",CCi18n:"/shared/js/ccLibs/cc-i18n",ccKoValidateRules:"/shared/js/ccLibs/cc-ko-validate-rules",paginated:"/shared/js/ccLibs/paginated",ccPaginated:"/shared/js/ccLibs/cc-paginated",spinner:"/shared/js/ccLibs/spinner-1.0",placeholderPatch:"/shared/js/libs/jquery.placeholderpatch-1.2.0",imagesloaded:"/shared/js/libs/imagesloaded.pkgd-3.1.8",ccDate:"/shared/js/ccLibs/cc-date-format-1.0",ccNumber:"/shared/js/ccLibs/cc-number-format-1.0",ccPasswordValidator:"/shared/js/ccLibs/cc-password-validator",swmRestClientConstructor:"/shared/js/ccLibs/swm-rest-client-1.0",swmRestClient:"/shared/js/ccLibs/swm-storefront-rest-client",swmKoValidateRules:"/shared/js/ccLibs/swm-ko-validate-rules",ccResourceLoader:"/shared/js/ccLibs/cc-resource-loader",navigation:"/shared/js/ccLibs/cc-navigation-1.0",ccNavState:"/shared/js/ccLibs/cc-nav-state",facebook:"//connect.facebook.net/en_US/sdk",facebook:["//connect.facebook.net/en_US/sdk","/shared/js/ccLibs/load-facebookjs-error-handler-1.0"],facebookjs:"/shared/js/ccLibs/facebook_sdk",pinitjs:"/shared/js/ccLibs/pinit_sdk",imageZoom:"/shared/js/ccLibs/image-zoom",ccImageZoom:"/shared/js/ccLibs/cc-image-zoom-2.0",pageViewTracker:"/shared/js/ccLibs/pageViewTracker-1.0",currencyHelper:"/shared/js/ccLibs/currency-helper",profileHelper:"/shared/js/ccLibs/profile-helper",ccEETagProcessor:"/shared/js/ccLibs/cc-ee-tag-processor-1.0",viewportHelper:"/shared/js/ccLibs/viewport-helper",parentOrganisation:"/shared/js/ccLibs/parentOrganisation",ccClientErrorCodes:"/shared/js/ccLibs/cc-client-error-codes",sfExceptionHandler:"/shared/js/ccLibs/sf-exception-handler",ccStoreServerLogger:"/shared/js/ccLibs/cc-store-server-logger-1.0",ccStoreUtils:"/shared/js/ccLibs/cc-store-utils-1.0",dateTimeUtils:"/shared/js/ccLibs/date-time-utils",numberFormatHelper:"/shared/js/ccLibs/number-format-helper",ccStoreConfiguration:"/shared/js/ccLibs/cc-store-configuration-1.0",hammerjs:"/js/oraclejet/js/libs/hammer/hammer-2.0.4.min",jquery:"/js/oraclejet/js/libs/jquery/jquery-2.1.3.min","jqueryui-amd":"/js/oraclejet/js/libs/jquery/jqueryui-amd-1.11.4.min",knockout:"/js/oraclejet/js/libs/knockout/knockout-3.4.0",ojdnd:"/js/oraclejet/js/libs/dnd-polyfill/dnd-polyfill-1.0.0.min",ojs:"/js/oraclejet/js/libs/oj/v2.0.2/min",ojL10n:"/js/oraclejet/js/libs/oj/v2.0.2/ojL10n",ojtranslations:"/js/oraclejet/js/libs/oj/v2.0.2/resources",ojswitch:"/js/oraclejet/js/libs/oj/v2.0.2/ojswitch",promise:"/js/oraclejet/js/libs/es6-promise/promise-1.0.0.min",signals:"/js/oraclejet/js/libs/js-signals/signals.min",template:"/js/oraclejet/js/libs/require/text",pageLayout:"/shared/js/pageLayout",viewModels:"/shared/js/viewModels",shared:"/shared/js"},waitSeconds:45});var paths={layoutContainer:"pageLayout/layout-container"};if("function"==typeof configurePaths&&configurePaths(paths),"undefined"==typeof container)var container;require(["shared/store-libs"],function(){require(["jquery","ccConstants","spinner","pubsub","profiletools","knockout","koValidate","ccKoValidateRules",paths.layoutContainer,"pageLayout/rest-adapter","pageLayout/api-builder","routing","CCi18n","ccDate","ccEETagProcessor","ccRestClient","ccOAuthTimeout","viewportHelper","ccPreviewBar","shared/store-loader","ccResourceLoader!APPLICATION_JS"],function(e,t,r,i,a,o,n,s,c,l,u,d,p,h,f,m,g,v,E){"use strict";function y(e){var t;m.samlLogin(e,b,I,t)}function b(e){var t=m.getSessionStoredValue("SSO_RETURN_URL");null==t&&(t="/"),window.location.assign(t)}function I(e){var t=m.getSessionStoredValue("SSO_RETURN_URL");null==t&&(t="/"),window.location.assign(t)}function T(){y(getSamlResponse())}if(container===t.CONTAINER_DESIGN_STUDIO){var S=!1,_=!1;e.Topic(i.topicNames.PAGE_CHANGED).subscribe(function(){S||_||(r.createWithTimeout({parent:"body",posTop:"200px"},1e4,function(){e(".modal-backdrop").remove()}),e(".cc-spinner").css("z-index","20000"),S=!0),_=!1}),e.Topic(i.topicNames.PAGE_READY).subscribe(function(){S?(r.destroyWithoutDelay("body"),S=!1,_=!1):_=!0}),f.enabled=!1}if("function"==typeof getSamlResponse&&null!=getSamlResponse()&&getSamlResponse().length>0)return void m.registerInitCallback(T);var P=new l("/ccstore/v1/"),A="/",C=new c(P,A),R=new C.LayoutViewModel;new d,new g(m);C.masterViewModel(R),f.init(),infuser.defaults.templateSuffix="";var O={};O.errorsAsTitle=!1,O.insertMessages=!1,O.decorateElement=!0,O.errorElementClass="invalid",o.validation.init(O);var N={compatibilityJSON:"v1",compatibilityAPI:"v1",ns:{namespaces:["ns.common","ns.ccformats"],defaultNs:["ns.common"]},fallbackLng:["en"],useLocalStorage:!1,useCookie:!1,debug:!1,contextSeparator:":",resGetPath:"/ccstoreui/v1/resources/__ns__?locale=__lng__",backend:{ajax:p.ajax}};p.deferInit(N,function(){R.previewMessage(p.t("ns.common:resources.previewMessage")),R.sharedWidgetMessage(p.t("ns.common:resources.sharedWidget")),R.displayErrorMessage(p.t("ns.common:resources.displayError")),""==R.pageChangeMessage()&&(R.dataForPageChangeMessage().page.category?R.pageChangeMessage(p.t("ns.common:resources.categoryPageLoadedText",{collection:R.dataForPageChangeMessage().page.category.displayName})):R.dataForPageChangeMessage().page.product?R.pageChangeMessage(p.t("ns.common:resources.productPageLoadedText",{product:R.dataForPageChangeMessage().page.product.displayName})):"userSpacesPage"===R.dataForPageChangeMessage().page.repositoryId?R.pageChangeMessage(p.t("ns.common:resources.wishlistPageLoadedText")):"searchResultsPage"!=R.dataForPageChangeMessage().repositoryId&&R.pageChangeMessage(p.t("ns.common:resources.pageLoadedText",{page:R.dataForPageChangeMessage().page.repositoryId})))});var D=window.location.protocol+"//"+window.location.host,L=function(e,t){var r;if(e.canonicalRoute){var i=e.data.global.site.additionalLanguages,a=i[i.length-1].name,n=e.data.global.locale,s=e.canonicalRoute;o.isObservable(s)&&(s=o.utils.unwrapObservable(s)),r=n===a?D+s:D+"/"+n+s}R.canonicalRoute(r),R.alternates(e.alternates),R.nextPageNo(null),R.prevPageNo(null),R.currPageNo(""),R.paginationDone(!1)},w=function(e){R.nextPageNo(e.nextPageNo),R.prevPageNo(e.prevPageNo),R.currPageNo(e.currPageNo),R.paginationDone(!0)},M=function(e){R.title(e.title()),R.keywords(e.keywords()),R.description(e.description()),R.metaTags(e.metaTags()),R.isPreview(e.isPreview()),v.layoutViewports(e.viewports?e.viewports():"")};e.Topic(i.topicNames.PAGE_LAYOUT_UPDATED).subscribe(L),e.Topic(i.topicNames.PAGE_PAGINATION_CALCULATED).subscribe(w),e.Topic(i.topicNames.PAGE_METADATA_CHANGED).subscribe(M),R.name=o.observable("Master View Model"),R.itemBeforeRemove=function(t,r,i){e(t).remove()},R.itemAfterAdd=function(e,t,r){},R.afterRender=function(e,t){},R.previewBar=E.getInstance(),u.widgetBuilder(C.WidgetViewModel,C),u.regionBuilder(C.RegionViewModel,C),C.WidgetViewModel.prototype.profileTools=new a,o.applyBindings(R,document.getElementById("oracle-cc")),"function"==typeof waitForRenderComplete&&waitForRenderComplete(o,C,R)})}),define("js/main",function(){}),define("ccStoreUtils",["knockout"],function(e){"use strict";function t(){}return t.prototype.fromJS=function(t,r,i,a,o,n){var s=[];if(i)for(var c in t)s.push(c);if(!i&&a&&a.length>0)for(var c in t)t[c]instanceof Object&&!(t[c]instanceof Array)&&s.push(c);var l={copy:s,observe:a,ignore:o,include:n};e.mapping.fromJS(t,l,r)},new t}),define("shared/ccLibs/cc-store-utils-1.0",function(){}),define("pageLayout/data",["knockout"],function(e){"use strict";function t(){}return t}),define("pageLayout/layout",["jquery","knockout","ccConstants"],function(e,t,r){"use strict";function i(){var i=this;this.MAX_ROW_COLUMNS=12,this.layoutName=t.observable(),this.regions=t.observableArray([]),this.title=t.observable(),this.keywords=t.observable(),this.description=t.observable(),this.metaTags=t.observable(),this.isPreview=t.observable(),this.previewMessage=t.observable(),this.sharedWidgetMessage=t.observable(),this.displayErrorMessage=t.observable(),this.containPage=t.observable(!0),this.containHeader=t.observable(!1),this.containMain=t.observable(!1),this.containFooter=t.observable(!1),this.pageChangeMessage=t.observable(""),this.dataForPageChangeMessage=t.observable(),this.headerRows=t.observableArray().extend({deferred:!0}),this.bodyRows=t.observableArray().extend({deferred:!0}),this.footerRows=t.observableArray().extend({deferred:!0}),this.canonicalRoute=t.observable(),this.alternates=t.observableArray(),this.prevPageNo=t.observable(),this.nextPageNo=t.observable(),this.currPageNo=t.observable(""),this.supportedLocales=t.observableArray().extend({deferred:!0}),this.paginationDone=t.observable(!1);var a=["/checkout","/cart","/wishlist_settings","/searchresults","/nosearchresults","/confirmation","/error","/signup","/profile","/orderhistory","/orderdetails","/payment","/wishlist"],o=[window.location.protocol,"//",window.location.host].join("").toLowerCase(),n=function(e){for(var t=document.head.querySelectorAll('[rel="'+e+'"]'),r=t.length,i=0;i<r;i++)document.head.removeChild(t[i])},s=function(e){var t="canonical";if(!e||0==e.toLowerCase().indexOf(o)){if(!e||a.indexOf(e.substring(o.length).toLowerCase())>=0)return void n(t);i.paginationDone()&&(e+=i.currPageNo());var r=document.head.querySelectorAll('[rel="'+t+'"]'),s=r.length;if(s>1&&n(t),1===s)r[0].href!==e&&(r[0].href=e);else{var c=document.createElement("link");c.rel=t,c.href=e,document.head.appendChild(c)}}};return this.paginationDone.subscribe(function(){i.canonicalRoute.valueHasMutated()}),this.canonicalRoute.subscribe(s),this.headerRegions=t.computed({read:function(){return t.utils.arrayFilter(this.regions(),function(e){return t.unwrap(e.type)===r.REGION_TYPE_HEADER})},owner:this}).extend({deferred:!0}),this.bodyRegions=t.computed({read:function(){return t.utils.arrayFilter(this.regions(),function(e){return!t.unwrap(e.type)||t.unwrap(e.type)===r.REGION_TYPE_BODY})},owner:this}).extend({deferred:!0}),this.footerRegions=t.computed({read:function(){return t.utils.arrayFilter(this.regions(),function(e){return t.unwrap(e.type)===r.REGION_TYPE_FOOTER})},owner:this}).extend({deferred:!0}),this.calculateRows=function(e,r){var a,o=this,n={},s=0,c=[];if(e.length===r.length){for(var l=!0,u=0;u<e.length;u++)if(e[u].id()!==r[u].id()||e[u].width()!==r[u].width()){l=!1;break}if(l)return}if(t.isObservable(o)&&void 0!==o.removeAll){c=o(),c.splice(0,c.length),n.regions=t.observableArray().extend({deferred:!0});for(var u=0;u<e.length;u++)a=e[u],(s==i.MAX_ROW_COLUMNS||s+a.width()>i.MAX_ROW_COLUMNS)&&(c.push(n),n={},n.regions=t.observableArray().extend({deferred:!0}),s=0),n.regions.push(a),s+=a.width();c.push(n),o.valueHasMutated()}},this.subscribeArrayChanged=function(r,i,a){if(t.isObservable(r)){var o=r.peek();r.subscribe(function(t){var r=o;o=e.extend(!0,[],t),i.call(a,t,r)})}},this.subscribeArrayChanged(this.headerRegions,this.calculateRows,this.headerRows),this.subscribeArrayChanged(this.bodyRegions,this.calculateRows,this.bodyRows),this.subscribeArrayChanged(this.footerRegions,this.calculateRows,this.footerRows),this.hasWidgetType=function(e){var t;if(i.regions())for(var r=0;r<i.regions().length;r++)if(t=i.regions()[r],t.widgets().length)for(var a=0;a<i.regions().length;a++){var o=t.widgets()[a].typeId();if(o===e)return!0}return!1},this}return i}),define("pageLayout/region",["jquery","knockout","viewportHelper","pubsub"],function(e,t,r,i){"use strict";function a(){var a=this;return a.regions=t.observableArray(),a.widgets=t.observableArray(),a.width=t.observable(),a.offset=t.observable(),a.name=t.observable("defaultName"),a.metadata=t.observable(),a.similarRegions=new Object,a.widthClass=t.computed(function(){return r.getWidthClass(a.width(),a.offset())},a),a.globalWidgetsOnly=t.computed(function(){for(var e=0;e<a.widgets().length;e++)if(!a.widgets()[e].global())return!1;return!0},a),a.nextTab=function(){return a.validateWidgets()},a.previousTab=function(){return!0},a.validateWidgets=function(){var e=!0;for(var t in a.widgets())a.widgets()[t].checkForValidation()||(e=!1);return e},a.handleMetadata=function(){if(a.metadata()){var r=t.toJS(a.metadata);e.Topic(i.topicNames.REGION_METADATA_CHANGED).publish(r)}},this}return a}),define("notifier",["knockout","pubsub","jquery"],function(e,t,r){"use strict";function i(t,r,i,a,o){var n=this;n.id=e.observable(t),n.text=e.observable(r),n.type=e.observable(i),n.dismissable=e.observable(a),n.scrollToMessage=e.observable(o),n.alertClass=e.computed(function(){return"alert alert-"+n.type()})}function a(){var e=this;e.types={SUCCESS:"success",WARNING:"warning",INFO:"info",ERROR:"error"},e.sendMessage=function(e,a,o,n,s){var c=new i(e,a,o,n,s);r.Topic(t.topicNames.NOTIFICATION_ADD).publishWith(c,[{message:"success"}])},e.sendError=function(t,r,i){e.sendMessage(t,r,e.types.ERROR,!0,i)},e.sendWarning=function(t,r,i){e.sendMessage(t,r,e.types.WARNING,!0,i)},e.sendSuccess=function(t,r,i){e.sendMessage(t,r,e.types.SUCCESS,!0,i)},e.sendInfo=function(t,r,i){e.sendMessage(t,r,e.types.INFO,!0,i)};var a={};return e.sendMessageToPage=function(t,i,o,n,s,c){a[n]||(a[n]=r.Deferred()),a[n].done(function(){setTimeout(function(){e.sendMessage(t,i,c,s,o)},300),a[n]=null})},r.Topic(t.topicNames.PAGE_LAYOUT_UPDATED).subscribe(function(e,t){t.pageId&&a[t.pageId]&&a[t.pageId].resolve()}),e.sendErrorToPage=function(t,r,i,a,o){e.sendMessageToPage(t,r,i,a,!!o,e.types.ERROR)},e.sendWarningToPage=function(t,r,i,a,o){e.sendMessageToPage(t,r,i,a,o,e.types.WARNING)},e.sendSuccessToPage=function(t,r,i,a,o){e.sendMessageToPage(t,r,i,a,o,e.types.SUCCESS)},e.sendInfoToPage=function(t,r,i,a,o){e.sendMessageToPage(t,r,i,a,o,e.types.INFO)},e.sendTemplateMessage=function(e,a,o,n,s,c){var l=new i(e,o,n,s,c);r.Topic(t.topicNames.NOTIFICATION_TEMPLATE_ADD).publish(l,a,o)},e.sendTemplateError=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.ERROR,!1,a)},e.sendTemplateWarning=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.WARNING,!0,a)},e.sendTemplateSuccess=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.SUCCESS,!0,a)},e.sendTemplateInfo=function(t,r,i,a){e.sendTemplateMessage(t,r,i,e.types.INFO,!0,a)},e.clearMessage=function(e,a){var o=new i(e,"",a,!1,!1);r.Topic(t.topicNames.NOTIFICATION_DELETE).publishWith(o,[{message:"success"}])},e.clearError=function(t){e.clearMessage(t,e.types.ERROR)},e.clearWarning=function(t){e.clearMessage(t,e.types.WARNING)},e.clearSuccess=function(t){e.clearMessage(t,e.types.SUCCESS)},e.clearInfo=function(t){e.clearMessage(t,e.types.INFO)},e}return new a}),define("viewModels/messageHandler",["knockout","pubsub","notifier","notifications","jquery"],function(e,t,r,i,a){"use strict";function o(){var u=this;if(o.singleInstance)throw new Error("Cannot instantiate more than one MessageHandler, use getInstance()");return u.message=e.observable(),u.messageFlag=e.observable(),u.errorMsgs=Array(),u.warnMsgs=Array(),u.successMsgs=Array(),u.infoMsgs=Array(),u.pageId="",u.scrollIfNeccessary=function(e,t){if(e.scrollToMessage()){var r=a(t);r&&r.offset()&&a("html, body").animate({scrollTop:r.offset().top},1e3)}},u.updateMessages=function(){for(var e=0;e<u.errorMsgs.length;e++)if(u.errorMsgs[e].pageId==u.pageId)return u.message(u.errorMsgs[e]),void(u.messageFlag()||(i.notify([{style:"inline",status:"error",id:"#CC-messages",close:u.message().dismissable(),fade:!1,message:u.message().text()}]),a(".cc-notification-message").addClass("container"),u.messageFlag(!0),u.scrollIfNeccessary(u.message(),"#CC-messages")));for(var e=0;e<u.warnMsgs.length;e++)if(u.warnMsgs[e].pageId==u.pageId)return u.message(u.warnMsgs[e]),void(u.messageFlag()||(i.notify([{style:"inline",status:"warning",id:"#CC-messages",close:u.message().dismissable(),fade:!1,message:u.message().text()}]),a(".cc-notification-message").addClass("container"),u.messageFlag(!0),u.scrollIfNeccessary(u.message(),"#CC-messages")));for(var e=0;e<u.successMsgs.length;e++)if(u.successMsgs[e].pageId==u.pageId)return u.message(u.successMsgs[e]),void(u.messageFlag()||(i.notify([{style:"inline",status:"success",id:"#CC-messages",close:u.message().dismissable(),fade:!1,message:u.message().text()}]),a(".cc-notification-message").addClass("container"),u.messageFlag(!0),u.scrollIfNeccessary(u.message(),"#CC-messages")));for(var e=0;e<u.infoMsgs.length;e++)if(u.infoMsgs[e].pageId==u.pageId)return u.message(u.infoMsgs[e]),void(u.messageFlag()||(i.notify([{style:"inline",status:"info",id:"#CC-messages",close:u.message().dismissable(),fade:!1,message:u.message().text()}]),a(".cc-notification-message").addClass("container"),u.messageFlag(!0),u.scrollIfNeccessary(u.message(),"#CC-messages")));u.messageFlag(!1),i.emptyNotifications("#CC-messages"),u.message(null)},u.addMessage=function(e,r){var o=e.id();if(u.messageFlag()&&null!=u.message()){if(u.message().id()==o&&u.message().text()==e.text())return;i.emptyNotifications("#CC-messages"),a.Topic(t.topicNames.NOTIFICATION_DELETE).publishWith(u.message(),[{message:"success"}])}for(var n=0;n<r.length;n++)r[n].id()==o&&r[n].text(e.text());e.pageId=u.pageId,r.push(e),u.messageFlag(!1),u.updateMessages(),a(".close.cc-notification-close").on("click",function(){u.removeCurrentMessage(e)})},u.removeCurrentMessage=function(e){u.messageFlag()&&null!=u.message()&&u.message().id()==e.id()&&(a.Topic(t.topicNames.NOTIFICATION_DELETE).publishWith(e,[{message:"success"}]),u.messageFlag(!1),i.emptyNotifications("#CC-messages"),u.message(null))},u.removeMessage=function(e,t){for(var r=e.id(),i=0;i<t.length;i++)if(t[i].id()==r){t.splice(i,1),u.removeCurrentMessage(e);break}u.updateMessages()},u.removeAllMessages=function(){u.errorMsgs=[],u.warnMsgs=[],u.successMsgs=[],u.infoMsgs=[],u.updateMessages()},u.addMessageHandler=function(e){var t=this,i=t.type();switch(i){case r.types.ERROR:u.addMessage(t,u.errorMsgs);break;case r.types.WARNING:u.addMessage(t,u.warnMsgs);break;case r.types.SUCCESS:u.addMessage(t,u.successMsgs);break;case r.types.INFO:u.addMessage(t,u.infoMsgs)}},u.deleteMessageHandler=function(e){var t=this,i=t.type();switch(i){case r.types.ERROR:u.removeMessage(t,u.errorMsgs);break;case r.types.WARNING:u.removeMessage(t,u.warnMsgs);break;case r.types.SUCCESS:u.removeMessage(t,u.successMsgs);break;case r.types.INFO:u.removeMessage(t,u.infoMsgs)}},u.pageContextHandler=function(e){var t="";e&&e.pageId&&(t=e.pageId,e.contextId&&(t+="-"+e.contextId),u.pageId=t,u.removeAllMessages())},void 0!=n&&a.Topic(t.topicNames.NOTIFICATION_ADD).unsubscribe(n),n=u.addMessageHandler,void 0!=s&&a.Topic(t.topicNames.NOTIFICATION_DELETE).unsubscribe(s),s=u.deleteMessageHandler,void 0!=c&&a.Topic(t.topicNames.PAGE_VIEW_CHANGED).unsubscribe(c),c=u.pageContextHandler,void 0!=l&&a.Topic(t.topicNames.PAGE_VIEW_CHANGED).unsubscribe(l),l=u.removeAllMessages,a.Topic(t.topicNames.NOTIFICATION_ADD).subscribe(n),a.Topic(t.topicNames.NOTIFICATION_DELETE).subscribe(s),a.Topic(t.topicNames.PAGE_VIEW_CHANGED).subscribe(c),a.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).subscribe(l),u.messageFlag(!1),u}var n,s,c,l;return o.getInstance=function(){return o.singleInstance||(o.singleInstance=new o,i.emptyNotifications("#CC-messages")),o.singleInstance},o}),define("pageLayout/widget",["knockout","CCi18n","ccDate","ccNumber","pubsub","ccConstants","viewModels/messageHandler","jquery","navigation"],function(e,t,r,i,a,o,n,s,c){"use strict";function l(r){function i(r){var i,a;if(n.localeResources)for(var o in n.localeResources){var c=e.toJS(n.localeResources[o].resources);n.customTranslations()&&(i=e.toJS(n.customTranslations()),a=n.mergeTextSnippetResources(c,i)),t.addResourceBundle(o,n.localeResources[o].namespace(),{resources:c});var l=t.t("ns."+n.i18nresources()+":resources",{returnObjectTrees:!0,interpolation:{prefix:"##",suffix:"##"}});s.extend(l,a),n.resources(l)}n.customTranslations()&&!n.resources()&&(i=e.toJS(n.customTranslations()),n.resources(i)),n.resources()&&n.resourcesLoaded&&n.resourcesLoaded(n)}var n=this;return this.basePath=r,this.initialized=e.observable(!1),this.deferredInit=s.Deferred(),this.id=e.observable(),this.typeId=e.observable(),this.rootPath=e.observable(),this.imagePath=e.observable(),this.templatePath=e.observable(),this.jsPath=e.observable(),this.i18nresources=e.observable(),this.resources=e.observable(),this.locale=e.observable(),this.customTranslations=e.observable(),this.widgetId=e.observable(),this.numberOnPage=e.observable(),this.isPreview=e.observable(),this.elements={},this.isShared=e.computed(function(){var e;return e=!!(this.numberOnPage&&this.numberOnPage()>1)||!!(this.pageIds&&this.pageIds().length>1)},this),this.contextDataLoaded=e.observable(!1),this.pageReady=function(){this.contextDataLoaded(!0),this.links&&c.isPathEqualTo(this.links().checkout.route)&&(s("#CC-headermodalpane").modal("hide"),s("body").removeClass("modal-open"),s(".modal-backdrop").remove())},s.Topic(a.topicNames.PAGE_READY).subscribe(n.pageReady.bind(n)),this.historyStack=[],this.prevHistoryLength=0,this.newHistoryLength=0,this.updateHistoryStackArray=function(e){var t;if(1===history.length)try{window.sessionStorage.removeItem(o.SESSION_STORAGE_HISTORY_STACK)}catch(e){}try{t=window.sessionStorage.getItem(o.SESSION_STORAGE_HISTORY_STACK)}catch(e){}if(t&&!n.historyStack.length&&(n.historyStack=JSON.parse(t)),n.prevHistoryLength=n.newHistoryLength,n.newHistoryLength=history.length,void 0!=e.oldHash&&n.links&&n.links().hasOwnProperty(404)){if(n.historyStack.length){var r=n.historyStack[n.historyStack.length-1];e.newHash===r.oldHash&&e.oldHash===r.newHash&&n.prevHistoryLength===n.newHistoryLength?n.historyStack.pop():n.historyStack[n.historyStack.length-1].oldHash==e.oldHash&&n.historyStack[n.historyStack.length-1].newHash==e.newHash||n.historyStack[n.historyStack.length-1].newHash!=e.oldHash||n.historyStack.push(e)}else n.historyStack.push(e);try{window.sessionStorage.setItem(o.SESSION_STORAGE_HISTORY_STACK,JSON.stringify(n.historyStack))}catch(e){}}},s.Topic(a.topicNames.UPDATE_HASH_CHANGES).subscribe(n.updateHistoryStackArray),this.mergeTextSnippetResources=function(e,t){var r={};if(e&&"object"==typeof e&&t&&"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(i.indexOf(".")===-1?e[i]=t[i]:r[i]=t[i]);return r},this.localeSubscription=this.locale.subscribe(function(e){var r=this;t.setLocaleOnce(e.replace("_","-"),function(){r.localeSubscription.dispose(),r.deferUntilAllPropertiesSet(r,function(){i(r.i18nresources())})})},this),this.typeId.subscribe(function(e){this.rootPath(this.basePath+"widget/"+e),this.imagePath(this.rootPath()+"/images"),this.jsPath(this.rootPath()+"/js"),this.widgetId(e)},this),this.absoluteUrl=function(e){var t=e;return this.assetMappings&&(t=this.assetMappings[e]),t},this.templateAbsoluteUrl=function(e){var t=e;return this.assetMappings&&(t=this.assetMappings[e]()),t},this.notificationTemplateUrl=function(e){var t="/templates/";return t+=e+".template",this.absoluteUrl(t)()},this.redirectToLocalizedURL=function(e,t){var r=c.getLocaleBasedUrl(e);window.location.assign(r)},this.translate=function(e,r,i,a){var o="",s=e,c="";if(n.resources()){if(a&&null!=n.resources()[a]&&"null"!=n.resources()[a])return n.resources()[a];if(n.resources()[e]&&(o=n.resources()[e],o.indexOf("__")===-1))return o}return r?r.defaultValue&&(s=r.defaultValue,r.defaultValue=void 0):r={},void 0===i&&(i=!0),o="",n.i18nresources()&&""!==n.i18nresources()&&(c="ns."+n.i18nresources()+":resources."+e,o=t.t(c,r)),o===c&&(i?(r.defaultValue=s,o=t.t("ns.common:resources."+e,r)):o=s),o},this}return l.prototype.allPropertiesSet=function(e){e.deferredInit.resolveWith(e)},l.prototype.deferUntilAllPropertiesSet=function(e,t){e.deferredInit.done(t)},l.prototype.requiresRefresh=function(e){
return!(!this.pageIds()||!e.pageIds()||this.pageIds().length===e.pageIds().length)},l.prototype.isActiveOnPage=function(e){return!!this.global()||!(!e||this.pageIds().indexOf(e.pageRepositoryId)==-1)},l.prototype.maybeFireBeforeAppear=function(e){var t=this;if(this.isActiveOnPage(e))if(this.initialized())this.beforeAppear(e);else{var r=s.Deferred();r.done(this.beforeAppear);var i=this.initialized.subscribe(function(a){a&&(r.resolveWith(t,[e]),i.dispose())})}},l.prototype.hasBeforeAppear=function(){var e=!1;return"beforeAppear"in this&&"function"==typeof this.beforeAppear&&(e=!0),e},l.prototype.ccDate=function(e,t,i,a){return r.formatDateAndTime(e,t,i,a)},l.prototype.ccNumber=function(e){return i.formatNumber(e)},l.prototype.formatPrice=function(e,t){e=e.toFixed(t);var r=e.split("."),a=i.formatNumber(r[0],!0);return 0===t?a=a.substring(0,a.length-3):(a=a.substring(0,a.length-2),a+=r[1]),a},l.prototype.messageBox=n.getInstance(),l.prototype.checkForValidation=function(){return!this.validate||this.validate()},l}),define("storeKoExtensions",["knockout","jqueryui","notifier","ccLogger","koValidate"],function(e,t,r,i,a){"use strict";e.extenders.notify=function(t,a){if(t.isValid&&e.isObservable(t.isValid)&&t.isModified&&e.isObservable(t.isModified)){var o="",n="An error has occurred.";if(a&&(a.id?(o=a.id,a.message&&(n=a.message)):""!==a.toString()&&(o=a.toString())),""===o)throw i.error("Notify ID not set"),new Error("Notify ID not set.");t.notify=function(e){t.isValid()||!t.isModified()?r.clearError(o):r.sendError(o,n)},t.clearError=function(){r.clearError(o)},t.isModified.subscribe(t.notify),t.isValid.subscribe(t.notify)}return t},e.bindingHandlers.productVariantImageSource={getNoImageSiteSetting:function(t){for(var r=null,i=0;i<t.$parents.length;i++)if(e.isObservable(t.$parents[i].site)){r=e.unwrap(t.$parents[i].site().noImageSrc);break}return r},init:function(t,r,i,a,o){var n,s,c,l,u,d=e.utils.unwrapObservable(r());"object"==typeof d&&"IMG"===t.nodeName&&(n=e.utils.unwrapObservable(d.src),s=e.utils.unwrapObservable(d.errorSrc),c=e.bindingHandlers.productVariantImageSource.getNoImageSiteSetting(o),l=c&&c.length>0?c:s,n&&l&&(u=new Image,u.src=l))},update:function(t,r,i,a,o){var n,s,c,l,u,d,p,h,f,m,g,v=e.utils.unwrapObservable(r());if("object"==typeof v&&"IMG"===t.nodeName){if(l=e.utils.unwrapObservable(v.src),n=e.utils.unwrapObservable(v.imageType),n||(n="medium"),l)switch(n){case"full":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryFullImageURL?l.childSKUs[0].primaryFullImageURL:l.primaryFullImageURL);break;case"large":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryLargeImageURL?l.childSKUs[0].primaryLargeImageURL:l.primaryLargeImageURL);break;case"medium":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryMediumImageURL?l.childSKUs[0].primaryMediumImageURL:l.primaryMediumImageURL);break;case"small":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primarySmallImageURL?l.childSKUs[0].primarySmallImageURL:l.primarySmallImageURL);break;case"thumb":c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryThumbImageURL?l.childSKUs[0].primaryThumbImageURL:l.primaryThumbImageURL);break;default:c=e.utils.unwrapObservable(l.childSKUs&&l.childSKUs.length>0&&l.childSKUs[0].primaryMediumImageURL?l.childSKUs[0].primaryMediumImageURL:l.primaryMediumImageURL)}else c=v.errorSrc;if(h=e.utils.unwrapObservable(l.primaryImageAltText),f=e.utils.unwrapObservable(l.primaryImageTitle),u=e.utils.unwrapObservable(v.errorSrc),d=e.bindingHandlers.productImageSource.getNoImageSiteSetting(o),p=d&&d.length>0?d:u,c!==u&&"/img/no-image.jpg"!==c||(c=p),d&&d.length>0){var E=new Image;E.onerror=function(){p=u},E.src=d}return h||(h=e.utils.unwrapObservable(v.alt)),f||(f=e.utils.unwrapObservable(v.title)),m=e.utils.unwrapObservable(v.errorAlt),g=e.utils.unwrapObservable(v.onerror),p?void(c?(s=new Image,s.onload=function(){t.src=c,h&&(t.alt=h),f&&(t.title=f)},s.onerror=function(){t.src=p,m&&(t.alt=m),g&&g(t)},s.src=c):(t.src=p,m?t.alt=m:h&&(t.alt=h),g&&g(t))):(t.src=c,void(h&&(t.alt=h)))}}}}),define("pageViewTracker",["knockout","ccRestClient","ccConstants","storageApi"],function(e,t,r,i){"use strict";function a(t){var r=this;r.pageViews=e.observable(t)}function o(){var o=this;return this.tenantId=e.observable(),this.visitId=e.observable(),this.visitorId=e.observable(),this.visitDetailsChanged=e.observable(!1),o.createPageViewEvent=function(e){var t=new a(e);return t},o.getVisitorId=function(){return i.getInstance().getItem(r.VISITOR_ID)},o.getVisitId=function(){return i.getInstance().getItem(r.VISIT_ID)},o.handleVisitDetails=function(){var e=this;if(e.visitorId||e.visitId){var t=e.getVisitorId(),r=e.getVisitId();t&&t==e.visitorId()||(e.visitorId(t),e.visitDetailsChanged(!0)),r&&r==e.visitId()||(e.visitId(r),e.visitDetailsChanged(!0)),e.visitDetailsChanged()&&e.persistVisitDetails(e.visitorId(),e.visitId())}},o.persistVisitDetails=function(e,i){var a={};a[r.VISITOR_ID]=e,a[r.VISIT_ID]=i;var o=r.ENDPOINT_SAVE_VISIT_DETAILS,n=function(e){},s=function(e){};t.request(o,a,n,s)},o.recordPageChange=function(e){var i={pageViews:e.pageViews()},a=r.ENDPOINT_RECORD_PAGEVIEWS_COUNT,o=function(e){},n=function(e){};t.request(a,i,o,n)},o}return new o}),define("pageLayout/site",["knockout","ccRestClient","ccConstants","jquery","storageApi","pageViewTracker"],function(e,t,r,i,a,o){"use strict";function n(t,r,i){if(n.singleInstance)throw new Error("Cannot instantiate more than one SiteViewModel, use getInstance(pAdapter, data, pParams)");var a=this;a.selectedPriceListGroup=e.observable(r?r.priceListGroup.defaultPriceListGroup:null),a.activePriceListGroups=e.observableArray([]);var o="/img/no-image.jpg";return r&&r.siteInfo&&r.siteInfo.noimage&&(o=r.siteInfo.noimage),a.noImageSrc=e.observable(o),a}return n.prototype.getCurrentLocale=function(){var e=t.getStoredValue(r.LOCAL_STORAGE_USER_CONTENT_LOCALE);return null!=e?JSON.parse(e)[0].name:i(":root").attr("lang")},n.prototype.setContextData=function(e){var i=this;for(var a in e)i[a]=e[a];if(i.selectedPriceListGroup()){for(var o=!1,n=JSON.parse(t.getStoredValue(r.LOCAL_STORAGE_PRICELISTGROUP_ID)),s=0;s<i.priceListGroup.activePriceListGroups.length;s++)if(n&&n==i.priceListGroup.activePriceListGroups[s].id){i.selectedPriceListGroup(i.priceListGroup.activePriceListGroups[s]),o=!0;break}o||i.selectedPriceListGroup(e.priceListGroup.defaultPriceListGroup)}i.activePriceListGroups(e.priceListGroup.activePriceListGroups)},n.initializeVisitorService=function(e){e&&e.visitorServiceHost&&e.tenantId&&e.oracleUnifiedVisitHost&&(window.OracleUnifiedVisit={accountId:e.tenantId+"_"+e.siteInfo.id,host:e.visitorServiceHost,handle:function(){window.ATGSvcs&&ATGSvcs.visitIDsLoaded(),a.getInstance().setItem(r.VISITOR_ID,window.OracleUnifiedVisit.visitorId()),a.getInstance().setItem(r.VISIT_ID,window.OracleUnifiedVisit.visitId()),o.handleVisitDetails()}},require([e.oracleUnifiedVisitHost]))},n.getInstance=function(e,t,r){return n.singleInstance||(n.singleInstance=new n(e,t,r),n.initializeVisitorService(t)),t&&n.singleInstance.setContextData(t),n.singleInstance},n}),define("viewModels/dynamicProperty",["knockout","koValidate","ccKoValidateRules","storeKoExtensions","CCi18n"],function(e,t,r,i,a){"use strict";function o(){var t=this;t.id=e.observable(),t.label=e.observable(),t.type=e.observable(),t.uiEditorType=e.observable(),t.default=e.observable(null),t.required=e.observable(!1),t.length=e.observable(),t.value=e.observable(),t.value.extend({required:!1}),t.isValid=function(){return void 0===t.value()||null===t.value()?!t.required():void 0===t.value.isValid||t.value.isValid()},t.validateNow=function(){return void 0!==t.value.isModified&&t.value.isModified(!0),t.isValid()},t.reset=function(){t.value(null),t.value.isModified(!1)},t.initializeMetadata=function(e,r){t.id(e.id),t.label(e.label),t.type(e.type),t.uiEditorType(e.uiEditorType),null!=e.default&&t.default(e.default),t.required(e.required),e.length&&t.length(e.length);var i={required:!1};i.required={params:t.required(),message:a.t("ns.common:resources.dynamicPropertyRequired",{})},t.length()>0&&"checkbox"!==t.type()&&"number"!==t.type()&&"date"!=t.type()&&(i.maxLength={params:t.length(),message:a.t("ns.common:resources.maxlengthValidationMsg",{maxLength:t.length(),fieldName:t.label()})}),t.value.extend(i),void 0!==t.value()&&null!==t.value()||t.value(t.default()),"checkbox"===t.type()&&t.value()!==!0&&t.value(!1)},t.getMetadata=function(){var e=new Object;return e.id=t.id(),e.label=t.label(),e.type=t.type(),e.uiEditorType=t.uiEditorType(),e.default=t.default(),e.required=t.required(),e.length=t.length(),e}}return o}),define("viewModels/address",["knockout","ccConstants","koValidate","ccKoValidateRules","storeKoExtensions","ccLogger"],function(e,t,r,i,a,o){"use strict";function n(r,i,a,n,s){var c=this;if(!r||""===r)throw o.error("Address ID not set"),new Error("Address ID not set");return c.alias=e.observable(""),c.prefix=e.observable(""),c.firstName=e.observable(""),c.middleName=e.observable(""),c.lastName=e.observable(""),c.suffix=e.observable(""),c.country=e.observable(""),c.postalCode=e.observable(""),c.address1=e.observable(""),c.address2=e.observable(""),c.address3=e.observable(""),c.city=e.observable(""),c.state=e.observable(""),c.county=e.observable(""),c.phoneNumber=e.observable(""),c.email=e.observable(),c.jobTitle=e.observable(""),c.companyName=e.observable(""),c.faxNumber=e.observable(""),c.repositoryId="",c.postalCodePattern=e.observable(""),c.US_POSTAL_CODE_PATTERN="^[0-9]{5}([ -][0-9]{4})?$",c.CANADA_POSTAL_CODE_PATTERN="^[abceghjklmnprstvxyABCEGHJKLMNPRSTVXY]{1}[0-9]{1}[a-zA-Z]{1} *[0-9]{1}[a-zA-Z]{1}[0-9]{1}$",c.DEFAULT_POSTAL_CODE_PATTERN="^[0-9a-zA-Z]{1,}([ -][0-9a-zA-Z]{1,})?$",c.stateList=e.observableArray(),c.selectedCountry=e.observable(),c.selectedState=e.observable(),c.state_ISOCode=e.observable(),c.countriesList=e.observableArray(),c.countriesList(n),c.defaultCountryCode=e.observable(s),c.isDefaultAddress=e.observable(!1),c.alias.extend({maxLength:{params:t.CYBERSOURCE_ALIAS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("aliasText"),maxLength:t.CYBERSOURCE_ALIAS_MAXIMUM_LENGTH})}}),c.prefix.extend({required:!1}),c.firstName.extend({required:{params:!0,message:a.translate("firstNameRequired")},maxLength:{params:t.CYBERSOURCE_FIRSTNAME_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("firstNameText"),maxLength:t.CYBERSOURCE_FIRSTNAME_MAXIMUM_LENGTH})}}),c.middleName.extend({required:!1}),c.lastName.extend({required:{params:!0,message:a.translate("lastNameRequired")},maxLength:{params:t.CYBERSOURCE_LASTNAME_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("lastNameText"),maxLength:t.CYBERSOURCE_LASTNAME_MAXIMUM_LENGTH})}}),c.suffix.extend({required:!1}),c.country.extend({required:{params:!0,message:a.translate("countryRequired")}}),c.address1.extend({required:{params:!0,message:a.translate("addressLine1Required")},maxLength:{params:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("addressLine1Text"),maxLength:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH})}}),c.address2.extend({required:!1,maxLength:{params:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("addressLine2Text"),maxLength:t.CYBERSOURCE_ADDRESS_MAXIMUM_LENGTH})}}),c.address3.extend({required:!1}),c.city.extend({required:{params:!0,message:a.translate("cityRequired")},maxLength:{params:t.CYBERSOURCE_CITY_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("cityText"),maxLength:t.CYBERSOURCE_CITY_MAXIMUM_LENGTH})}}),c.state.extend({required:{params:!0,onlyIf:function(){return c.stateList().length>0},message:a.translate("stateRequired")}}),c.county.extend({required:!1}),c.postalCode.extend({required:{params:!0,message:a.translate("zipCodeRequired")},maxLength:{params:t.CYBERSOURCE_POSTAL_CODE_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("zipCodeText"),maxLength:t.CYBERSOURCE_POSTAL_CODE_MAXIMUM_LENGTH})},observablePattern:{params:c.postalCodePattern,onlyIf:function(){return""!=c.postalCodePattern()},message:a.translate("zipCodeInvalid")}}),c.phoneNumber.extend({required:!1,pattern:{params:"^[0-9()+ -]+$",message:a.translate("phoneNumberInvalid")},maxLength:{params:t.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH,message:a.translate("maxlengthValidationMsg",{fieldName:a.translate("phoneNumberText"),maxLength:t.CYBERSOURCE_PHONE_NUMBER_MAXIMUM_LENGTH})}}),c.jobTitle.extend({required:!1}),c.companyName.extend({required:!1}),c.faxNumber.extend({required:!1}),c.isDefaultAddress.extend({required:!0}),c.alias.isData=!0,c.prefix.isData=!0,c.firstName.isData=!0,c.middleName.isData=!0,c.lastName.isData=!0,c.suffix.isData=!0,c.country.isData=!0,c.postalCode.isData=!0,c.address1.isData=!0,c.address2.isData=!0,c.address3.isData=!0,c.city.isData=!0,c.state.isData=!0,c.county.isData=!0,c.phoneNumber.isData=!0,c.jobTitle.isData=!0,c.companyName.isData=!0,c.faxNumber.isData=!0,c.stateIsDropDown=e.computed(function(){return c.stateList().length>0},c),c.selectedCountry.subscribe(function(e){if(void 0===c.selectedCountry()||""===c.selectedCountry())c.country(""),c.postalCodePattern("");else for(var r=0;r<c.countriesList().length;r++)c.countriesList()[r].countryCode==c.selectedCountry()&&c.country(c.countriesList()[r].displayName);void 0===c.selectedState()&&""===c.selectedState()||c.selectedState(null),c.stateList([]);for(var r=0;r<c.countriesList().length;r++)c.countriesList()[r].countryCode===c.selectedCountry()&&(c.stateList(c.countriesList()[r].regions),c.selectedCountry()===t.UNITED_STATES?c.postalCodePattern(c.US_POSTAL_CODE_PATTERN):c.selectedCountry()===t.CANADA?c.postalCodePattern(c.CANADA_POSTAL_CODE_PATTERN):c.postalCodePattern(c.DEFAULT_POSTAL_CODE_PATTERN))}),c.selectedState.subscribe(function(e){if(c.selectedState()){for(var t=0;t<c.stateList().length;t++)if(c.stateList()[t].abbreviation===c.selectedState()){c.state(c.stateList()[t].displayName),c.state_ISOCode(c.stateList()[t].regionCode);break}}else c.state(""),c.state_ISOCode(""),c.selectedState("")}),c.postalCode.subscribe(function(e){}),c.compare=function(e){return c.alias()===e.alias()&&c.prefix()===e.prefix()&&c.firstName()===e.firstName()&&c.middleName()===e.middleName()&&c.lastName()===e.lastName()&&c.suffix()===e.suffix()&&c.address1()===e.address1()&&c.address2()===e.address2()&&c.address3()===e.address3()&&c.city()===e.city()&&c.state()===e.state()&&c.postalCode()===e.postalCode()&&c.country()===e.country()&&c.county()===e.county()&&c.phoneNumber()===e.phoneNumber()&&c.jobTitle()===e.jobTitle()&&c.companyName()===e.companyName()&&c.faxNumber()===e.faxNumber()},c.compareTo=function(e){return c.alias()===e.alias()&&c.address1()===e.address1()&&c.address2()===e.address2()&&c.address3()===e.address3()&&c.city()===e.city()&&c.state()===e.state()&&c.postalCode()===e.postalCode()&&c.country()===e.country()&&c.county()===e.county()&&c.phoneNumber()===e.phoneNumber()&&c.jobTitle()===e.jobTitle()&&c.companyName()===e.companyName()&&c.faxNumber()===e.faxNumber()},c.isModified=function(){return c.alias.isModified()||c.firstName.isModified()||c.lastName.isModified()||c.address1.isModified()||c.address2.isModified()||c.city.isModified()||c.state.isModified()||c.postalCode.isModified()||c.phoneNumber.isModified()||c.country.isModified()||c.isDefaultAddress.isModified()},c.isEmpty=function(){return""==c.alias()&&""==c.firstName()&&""==c.lastName()&&""==c.address1()&&""==c.address2()&&""==c.city()&&""==c.state()&&""==c.postalCode()},c.isValid=function(){return c.alias.isValid()&&c.prefix.isValid()&&c.firstName.isValid()&&c.middleName.isValid()&&c.lastName.isValid()&&c.suffix.isValid()&&c.address1.isValid()&&c.address2.isValid()&&c.address3.isValid()&&c.city.isValid()&&c.state.isValid()&&c.postalCode.isValid()&&c.country.isValid()&&c.county.isValid()&&c.phoneNumber.isValid()&&c.jobTitle.isValid()&&c.companyName.isValid()&&c.faxNumber.isValid()},c.validateForShippingMethod=function(){return c.country.isValid()&&c.state.isValid()&&c.postalCode.isValid()},c.validateNow=function(){return c.alias.isModified(!0),c.prefix.isModified(!0),c.firstName.isModified(!0),c.middleName.isModified(!0),c.lastName.isModified(!0),c.suffix.isModified(!0),c.address1.isModified(!0),c.address2.isModified(!0),c.city.isModified(!0),c.state.isModified(!0),c.postalCode.isModified(!0),c.country.isModified(!0),c.county.isModified(!0),c.phoneNumber.isModified(!0),c.jobTitle.isModified(!0),c.companyName.isModified(!0),c.faxNumber.isModified(!0),c.isValid()},c.reset=function(){c.alias(""),c.firstName(""),c.lastName(""),c.address1(""),c.address2(""),c.address3(""),c.city(""),c.selectedState(""),c.state(""),c.postalCode(""),c.selectedCountry(""),c.country(""),c.phoneNumber(""),c.email(null),c.isDefaultAddress(!1),c.alias.isModified(!1),c.firstName.isModified(!1),c.lastName.isModified(!1),c.address1.isModified(!1),c.address2.isModified(!1),c.city.isModified(!1),c.state.isModified(!1),c.postalCode.isModified(!1),c.country.isModified(!1),c.phoneNumber.isModified(!1),c.isDefaultAddress.isModified(!1),c.selectedCountry(c.defaultCountry())},c.copyTo=function(e){return e.alias(c.alias()||""),e.prefix(c.prefix()||""),e.firstName(c.firstName()||""),e.middleName(c.middleName()||""),e.lastName(c.lastName()||""),e.suffix(c.suffix()||""),e.address1(c.address1()||""),e.address2(c.address2()||""),e.address3(c.address3()||""),e.city(c.city()||""),e.postalCode(c.postalCode()||""),e.county(c.county()||""),e.email(c.email()),e.selectedCountry(c.selectedCountry()),e.selectedState(c.selectedState()),e.phoneNumber(c.phoneNumber()||""),e.jobTitle(c.jobTitle()||""),e.companyName(c.companyName()||""),e.faxNumber(c.faxNumber()||""),e.repositoryId=c.repositoryId,e.isDefaultAddress(c.isDefaultAddress()||!1),e},c.toJSON=function(){var t=e.toJS(this);return t.email||(t.email=null),delete t.countryList,delete t.stateList,delete t.stateIsDropDown,delete t.postalCodePattern,delete t.US_POSTAL_CODE_PATTERN,delete t.CANADA_POSTAL_CODE_PATTERN,delete t.DEFAULT_POSTAL_CODE_PATTERN,delete t.countriesList,t},c.copyFrom=function(e,t){var r;c.alias(e.alias||""),c.firstName(e.firstName||""),c.middleName(e.middleName||""),c.lastName(e.lastName||""),c.address1(e.address1||""),c.address2(e.address2||""),c.address3(e.address3||""),c.city(e.city||""),c.county(e.county||""),c.postalCode(e.postalCode||""),c.phoneNumber(e.phoneNumber||""),c.prefix(e.prefix||""),c.suffix(e.suffix||""),c.email(e.email),c.repositoryId=e.repositoryId,e.selectedCountry?c.selectedCountry(e.selectedCountry):t&&$.each(t,function(t,i){return i.countryCode===e.country?(c.selectedCountry(i.countryCode),r=i.regions,!1):void c.selectedCountry("")}),e.selectedState?c.selectedState(e.selectedState):r&&$.each(r,function(t,r){if(r.abbreviation===e.state)return c.selectedState(r.abbreviation),c.state_ISOCode(r.regionCode),!1}),c.jobTitle(e.jobTitle||""),c.companyName(e.companyName||""),c.faxNumber(e.faxNumber||""),c.isDefaultAddress(e.isDefaultAddress||!1)},c.resetModified=function(){c.alias.isModified(!1),c.firstName.isModified(!1),c.lastName.isModified(!1),c.address1.isModified(!1),c.address2.isModified(!1),c.city.isModified(!1),c.state.isModified(!1),c.postalCode.isModified(!1),c.country.isModified(!1),c.phoneNumber.isModified(!1),c.isDefaultAddress.isModified(!1)},c.defaultCountry=function(){if(c.countriesList()&&c.countriesList().length>0){if(null!==c.defaultCountryCode())for(var e in c.countriesList())if(c.defaultCountryCode()===c.countriesList()[e].countryCode)return c.defaultCountryCode();return c.countriesList()[0].countryCode}},c.selectedCountry(c.defaultCountry()),c}return n}),define("ccStoreConfiguration",[],function(){"use strict";function e(){if(e.prototype.singleInstance)throw new Error("Cannot instantiate more than one CCStoreConfiguration. Use getInstance() method")}return e.prototype.filterMap={getCollection:{megaMenuNavigation:{ccFilterConfigKey:"categoryNavData"},categoryNavigation:{ccFilterConfigKey:"categoryNavData"}},listProducts:{productListingData:{ccFilterConfigKey:"PLPData"},collectionWidget:{ccFilterConfigKey:"collectionData"},getProductData:{ccFilterConfigKey:"productData"},getProductDataAndRedirect:{ccFilterConfigKey:"productData"}}},e.prototype.priorityList=["endpoint","page","identifier"],e.prototype.filterEnabled=!1,e.prototype.resetShippingGroupRelationships=!0,e.prototype.getFilterToUse=function(e){var t=this;if(t.filterEnabled&&null!=e&&e.constructor===Object){for(var r=Object.keys(e).length,i=t.filterMap,a="",o=null,n=0;n<t.priorityList.length;n++)if(a=t.priorityList[n],e[a]){if(r--,o=i[e[a]],null!=o&&o.constructor===Object&&o.ccFilterConfigKey&&0==r)return o.ccFilterConfigKey;if(null!=o&&o.constructor===Object)i=o;else{if(null!=o||!i.default)return null!=o&&0!=r||!i.ccFilterConfigKey?null:i.ccFilterConfigKey;if(o=i.default,o.constructor===Object&&o.ccFilterConfigKey&&0==r)return o.ccFilterConfigKey;if(o.constructor!==Object)return null!=o&&0!=r||!i.ccFilterConfigKey?null:i.ccFilterConfigKey;i=o}}if(null!=o&&o.constructor===Object&&o.ccFilterConfigKey)return o.ccFilterConfigKey}return null},e.prototype.enableFilter=function(){this.filterEnabled=!0},e.prototype.disableFilter=function(){this.filterEnabled=!1},e.prototype.updateFiltersToUse=function(e){var t=this;if(null!=e&&e.constructor===Object)for(var r=Object.keys(e),i=0;i<r.length;i++)t.filterMap[r[i]]=e[r[i]]},e.prototype.replaceAllFiltersToUse=function(e){var t=this;null!=e&&e.constructor===Object&&(t.filterMap=e)},e.prototype.addDataToPriorityList=function(e){var t=this;if(null!=e&&e.constructor===Array)for(var r=0;r<e.length;r++)t.priorityList.push(e[r])},e.prototype.replacePriorityList=function(e){var t=this;null!=e&&e.constructor===Array&&(t.priorityList=e)},e.prototype.layoutIdsRendered=[],e.prototype.layoutsRenderedArraySize=15,e.prototype.enableLayoutsRenderedForLayout=!1,e.prototype.getLayoutIdsRendered=function(){return this.layoutIdsRendered},e.prototype.storeLayoutIdsRendered=function(e){var t=this;e&&e.layout&&null!=e.layout&&t.layoutIdsRendered.indexOf(e.layout)==-1&&(t.layoutIdsRendered.length==t.layoutsRenderedArraySize&&t.layoutIdsRendered.shift(),t.layoutIdsRendered.push(e.layout))},e.getInstance=function(){return e.singleInstance||(e.singleInstance=new e),e.singleInstance},e}),define("viewModels/shipping-group-relationship",["require","knockout","ccConstants"],function(e){"use strict";function t(e,t){t=t||0,this.catRefId=e.catRefId,this.productId=e.productId,this.quantity=r.observable(t),this.shippingOptions=r.observableArray(),this.shippingAddress=r.observable(),this.shippingMethod=r.observable()}var r=e("knockout");e("ccConstants");return t.prototype.generateKey=function(){var e=this.shippingAddress(),t=this.shippingMethod(),i="";return e&&(i+=r.toJSON(e)),t&&(i+=t.repositoryId),i},t.prototype.asMap=function(e){var t={},i=this.generateKey(),a={};if(this.commerceItemId)var o=this.catRefId+"_"+this.commerceItemId;else var o=this.catRefId;var n=r.toJS(this.shippingAddress());!e||n.email&&n.email==e||(n.email=e);var s=this.shippingMethod()?{value:this.shippingMethod().repositoryId}:null;return this.commerceItemId?a[o]={productId:this.productId,catRefId:this.catRefId,quantity:parseFloat(this.quantity(),10),commerceItemId:this.commerceItemId}:a[o]={productId:this.productId,catRefId:this.catRefId,quantity:parseFloat(this.quantity(),10)},t[i]={items:a,shippingAddress:n,shippingMethod:s},t},t.prototype.addQuantity=function(e){this.quantity(parseFloat(this.quantity())+parseFloat(e))},t}),define("viewModels/cart-item-external-data",["knockout"],function(e){"use strict";function t(t){t=t||{},this.name=e.observable(t.name),this.actionCode=e.observable(t.actionCode),this.values=e.observable(t.values)}return t.prototype.toJSON=function(){var t=e.toJS(this);return t},t}),define("viewModels/cart-item",["require","knockout","pubsub","CCi18n","jquery","ccConstants","pageLayout/site","currencyHelper","koMapping","viewModels/shipping-group-relationship","viewModels/cart-item-external-data","ccStoreConfiguration"],function(e){"use strict";function t(e,t,p,h,f,m,g,v,E,y,b,I,T,S,_,P,A){_=_||[];var C=this;if(C.productId=e,C.productData=r.observable(t),C.quantity=r.observable(p),C.catRefId=h,C.itemTotal=r.observable(0),C.stockStatus=r.observable(!0),C.updatableQuantity=r.observable(p),C.selectedOptions=f,C.selectedSkuProperties=[],C.discountInfo=r.observable(g),C.rawTotalPrice=r.observable(v),C.detailedItemPriceInfo=r.observableArray(),C.externalPrice=r.observable(E),C.externalPriceQuantity=r.observable(y),C.externalData=r.observableArray(_.map(function(e){return new u(e)})),C.actionCode=r.observable(P),C.isPersonalized=r.observable(!1),Object.defineProperty(C,"shippingGroupRelationships",{value:r.observableArray([new l(C,p)]).extend({validation:[{validator:function(e){if(e){var t=e.reduce(function(e,t){return e+=parseFloat(t.quantity())},0);return!(t>C.quantity())}},message:a.t("ns.common:resources.quantityAllocationExceeded")},{validator:function(e){var t=e.reduce(function(e,t){return e+=parseFloat(t.quantity())},0);return!(t<C.quantity())},message:a.t("ns.common:resources.quantityNotFullyAllocated")}]}).isModified(!0),enumerable:!1}),d.getInstance().resetShippingGroupRelationships!==!1&&o.Topic(i.topicNames.CART_UPDATE_QUANTITY_SUCCESS).subscribe(C.resetShippingGroupRelationships.bind(C)),A)for(var R=0;R<A().length;R++)C[A()[R].id()]=r.observable(A()[R].value());C.setUnpricedError=function(e){var t=this;t.isUnpricedError(!0),t.unpricedExternalMessage(e?e:"")},C.clearUnpricedError=function(){var e=this;e.isUnpricedError(!1),e.unpricedExternalMessage("")},t&&(C.displayName=r.observable(t.displayName)),C.configuratorId=b,C.childItems=I,C.invalid=!1,C.isGWPChoicesAvaliable=r.observable(!1),t&&t.giftProductData&&(C.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:t.giftProductData.giftWithPurchaseIdentifier,promotionId:t.giftProductData.promotionId,giftWithPurchaseQuantity:t.giftProductData.giftWithPurchaseQuantity}]),C.commerceItemId=T,C.updatableQuantity.extend({required:{params:!0,message:a.t("ns.common:resources.quantityRequireMsg")},digit:{params:!0,message:a.t("ns.common:resources.quantityNumericMsg")},trigger:{value:"0",message:a.t("ns.common:resources.removeItemMsg")}}),C.originalPrice=r.observable(0),C.currentPrice=r.observable(0),C.priceListGroupId=r.observable(n.getInstance().selectedPriceListGroup().id),C.priceChangedMessage=r.computed(function(){return a.t("ns.common:resources.productPriceChanged",{originalPrice:s.handleFractionalDigits(C.originalPrice(),m.fractionalDigits),currency:void 0===m?"":m.symbol})}),C.unpricedExternalMessage=r.observable(null!=S?S:""),C.isUnpricedError=r.observable(C.unpricedExternalMessage().length>0),C.unpricedErrorMessage=r.computed(function(){var e="";return e=C.childItems&&C.childItems.length>0?a.t("ns.common:resources.configurableProductNoPrice",{message:C.unpricedExternalMessage()}):a.t("ns.common:resources.noPrice")}),C.productPriceChanged=r.observable(!1),C.productPriceChanged.extend({trigger:{value:!0,message:C.priceChangedMessage}}),C.revertQuantity=function(){C.updatableQuantity(C.quantity())},C.removeSpaces=function(e){return e?e.replace(/\s+/g,"-"):""},C.optionText=function(e){for(var t=C.selectedOptions[e],r=e+1;r<C.selectedOptions.length;r++){var i=C.selectedOptions[r];if(i.optionValue)return a.t("ns.common:resources.optionHasNext",{optionName:t.optionName,optionValue:t.optionValue})}return a.t("ns.common:resources.optionLast",{optionName:t.optionName,optionValue:t.optionValue})},C.toJSON=function(){var e=c.defaultOptions().ignore;c.defaultOptions().ignore=["productData","itemTotal","updatableQuantity","productPriceChanged","originalPrice","priceChangedMessage","isGWPChoicesAvaliable","giftData","unpricedErrorMessage","unpricedExternalMessage","isUnpricedError","isPersonalized","currentPrice"];var t=c.toJS(C);return c.defaultOptions().ignore=e,t},C.addLimitsValidation=function(e,t){if(C.stockStatus(e),C.updatableQuantity.rules.remove(function(e){return"max"==e.rule}),null!==t&&!isNaN(t)&&t>0){var r=a.t("ns.common:resources.insufficientStockMsg",{stockLimit:t});C.updatableQuantity.extend({max:{params:t,message:r}})}else{var i=a.t("ns.common:resources.outOfStockMsg");C.updatableQuantity.extend({max:{params:0,message:i}})}C.updatableQuantity.isModified(!0)},C.addConfigurableStockValidation=function(e){for(var t=0,i=!1,o=0;o<e.length;o++)if(C.productId===e[o].productId&&C.catRefId===e[o].catRefId){"IN_STOCK"===e[o].stockStatus&&null!==e[o].orderableQuantity&&!isNaN(e[o].orderableQuantity)&&e[o].orderableQuantity>0?(i=!0,t=e[o].orderableQuantity):i=!1;break}if(C.childItems&&i)for(var o=0;o<C.childItems.length;o++){for(var n=C.childItems[o].productId,s=C.childItems[o].catRefId,c=r.utils.unwrapObservable(C.childItems[o].quantity),l=0;l<e.length;l++)if(n===e[l].productId&&s===e[l].catRefId){if("IN_STOCK"===e[l].stockStatus)if(null!==e[l].orderableQuantity&&!isNaN(e[l].orderableQuantity)&&e[l].orderableQuantity>0){i=!0;var u=Math.floor(e[l].orderableQuantity/c);t=t>u?u:t}else i=!1;else i=!1;break}if(!i)break}if(C.stockStatus(i),C.updatableQuantity.rules.remove(function(e){return"max"==e.rule}),i&&t>0){var d=a.t("ns.common:resources.insufficientStockMsg",{stockLimit:t});C.updatableQuantity.extend({max:{params:t,message:d}})}else{var p=a.t("ns.common:resources.configurableProductOutOfStockMsg");C.updatableQuantity.extend({max:{params:0,message:p}})}C.updatableQuantity.isModified(!0)},C.populateItemDynamicProperties=function(e){var t=this;for(var r in e)t[r](e[r]())}}var r=e("knockout"),i=e("pubsub"),a=e("CCi18n"),o=e("jquery"),n=(e("ccConstants"),e("pageLayout/site")),s=e("currencyHelper"),c=e("koMapping"),l=e("viewModels/shipping-group-relationship"),u=e("viewModels/cart-item-external-data"),d=e("ccStoreConfiguration");return t.prototype.canAddShippingGroupRelationship=function(){var e=this.quantity()>this.shippingGroupRelationships().length;return e},t.prototype.addShippingGroupRelationship=function(){if(this.canAddShippingGroupRelationship()){this.shippingGroupRelationships.push(new l(this,1));var e=r.utils.arrayFirst(this.shippingGroupRelationships(),function(e){return e.quantity()>1});e.addQuantity(-1)}},t.prototype.removeShippingGroupRelationShip=function(e){if(this.shippingGroupRelationships().length>1){this.shippingGroupRelationships.remove(e);var t=this.shippingGroupRelationships()[0];t.addQuantity(e.quantity())}},t.prototype.resetShippingGroupRelationships=function(){this.shippingGroupRelationships().length<1?this.shippingGroupRelationships(new l(this,this.quantity())):(this.shippingGroupRelationships()[0].quantity(this.quantity()),this.shippingGroupRelationships.splice(1,this.shippingGroupRelationships().length))},t}),define("pageLayout/cart",["knockout","pubsub","notifier","notifications","storeKoExtensions","CCi18n","ccNumber","jquery","ccConstants","navigation","storageApi","pageLayout/site","viewModels/dynamicProperty","ccRestClient","viewModels/address","koMapping","ccStoreConfiguration","viewModels/cart-item","viewModels/shipping-group-relationship","viewModels/cart-item-external-data"],function(e,t,r,i,a,o,n,s,c,l,u,d,p,h,f,m,g,v,E,y){"use strict";function b(r,a,n,l){if(b.singleInstance)throw new Error("Cannot instantiate more than one CartViewModel, use getInstance(pAdapter, pShoppingCartData)");var u=this;u.currency=d.getInstance().selectedPriceListGroup().currency,u.user=n,u.deferLoadCart=s.Deferred(),u.deferLoadCartForUser=function(){u.user()&&(u.deferLoadCart.resolve(),p.dispose())};var p=u.user.subscribe(u.deferLoadCartForUser);u.isDirty=e.observable(!1),u.callPriceBeforeShippingMethods=!1,u.updatedFromRepository=!1,u.adapter=r,u.errors=e.observableArray([]),u.items=e.observableArray([]),
u.allItems=e.observableArray([]),u.coupons=e.observableArray([]),u.orderItems=e.observableArray([]),u.orderCurrency={},u.couponMultiPromotions=e.observableArray([]),u.claimedCouponMultiPromotions=e.observableArray([]),u.numberOfItems=e.observable(0),u.total=e.observable(0),u.totalWithoutTax=e.observable(0),u.subTotal=e.observable(0),u.amount=e.observable(0),u.tax=e.observable(0),u.shipping=e.observable(0),u.shippingDiscount=e.observable(0),u.currencyCode=e.observable(""),u.shippingMethod=e.observable(""),u.catalogId=e.observable(""),u.priceListGroupId=e.observable(""),u.shippingAddress=e.observable(""),u.currentCountry=e.observable(""),u.currentState=e.observable(""),u.selectedCountry=e.observable(""),u.selectedState=e.observable(""),u.shippingSurcharge=e.observable(0),u.updatedProduct=e.observable(""),u.validateAndRedirectCart=e.observable(!1),u.orderDiscount=e.observable(0),u.orderDiscountDescList=e.observableArray([]),u.couponErrorMessage=e.observable(),u.skipPriceChange=e.observable(!1),u.isPricingRequired=e.observable(!1),u.invalidProductNames=[],u.checkoutWithPaypalClicked=e.observable(!1),u.isMatchingCookieData=e.observable(!1),u.giftCards=e.observableArray([]),u.dynamicProperties=e.observableArray([]),u.lineAttributes=e.observableArray([]),u.cartPriceListGroupId=e.observable(),u.showSelectedOptions=e.observable(!1),u.isSplitShipping=e.observable(!1),u.orderShippingGroups=e.observableArray(),u.mergeCart=e.observable(!1),u.storeConfiguration=g.getInstance(),u.usingImprovedShippingWidgets=e.observable(!1),l&&l.global&&l.global.site&&l.global.site.extensionSiteSettings&&l.global.site.extensionSiteSettings.storeEndpointSettings&&l.global.site.extensionSiteSettings.storeEndpointSettings.cartFields&&(u.fields=l.global.site.extensionSiteSettings.storeEndpointSettings.cartFields),u.callbacks={},u.combineLineItems=c.COMBINE_YES,u.giftWithPurchaseOrderMarkers=[],u.gwpQualified=!1,u.placeHolderItems=e.observableArray([]),u.skipGWPMessage=!1,u.currentOrderId=e.observable(null),u.currentOrderState=e.observable(null),u.isOrderSubmissionInProgress=!1,u.markDirty=function(){u.isDirty()||u.isOrderSubmissionInProgress||u.isDirty(!0)},u.emailAddressForGuestUser=null,u.cartUpdated=function(){u.isDirty()&&u.isDirty(!1),u.saveCartCookie(),s.Topic(t.topicNames.CART_UPDATED).publish(u),u.updateAllItemsArray(),u.validateAndRedirectCart()&&u.handleValidateCart()},u.isDirty.subscribe(u.priceCartIfNeccessary.bind(u)),u.handleValidateCart=function(){u.validatePrice=!0,s.Topic(t.topicNames.LOAD_CHECKOUT).publishWith(u,[{message:"success"}])},u.updateCartItems=function(){if(u.events.length>0){var e,t=u.events.pop();switch(u.events.push(t),t.type){case D:e=t.product,u.addItem(e);break;case L:e=t.product,u.updateItemQuantity(e);break;case w:e=t.product,u.removeItemsByProduct(e.id),u.removeItem(e);break;case k:e=t.coupon,u.removeCouponFromCart(e);break;case M:e=t.coupon,u.addCouponToCart(e);break;case H:e=t.product,u.addItem(e)}}},u.addItem=function(e){if(e&&e.childSKUs){var r,i,a=!1;if(e.childItems){i=[];for(var o=0;o<e.childItems.length;o++){var n=e.childItems[o];i[o]=new v(n.id,n,n.orderQuantity,n.catalogRefId,n.selectedOptions,u.currency,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,n.externalData,n.actionCode)}}var l=null;if(!e.commerceItemId&&e.childItems?l=u.getConfigurableCartItem(e.id,e.childSKUs[0].repositoryId,e.commerceItemId):u.combineLineItems==c.COMBINE_YES&&(l=u.getCartItem(e.id,e.childSKUs[0].repositoryId,e.commerceItemId)),null!==l&&(r=l.quantity()+e.orderQuantity,l.quantity(r),e.giftProductData&&(l.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:e.giftProductData.giftWithPurchaseIdentifier,promotionId:e.giftProductData.promotionId,giftWithPurchaseQuantity:e.giftProductData.giftWithPurchaseQuantity}]),a=!0,s.Topic(t.topicNames.CART_UPDATE_QUANTITY_SUCCESS).publishWith(function(){})),e.childItems&&null==e.commerceItemId&&e.configuratorId&&(l=u.getCartItemForReconfiguration(e.id,e.childSKUs[0].repositoryId,e.configuratorId),null!==l&&(l.childItems=i,l.externalPrice(e.itemTotal),l.clearUnpricedError(),l.updatableQuantity.rules.remove(function(e){return"max"==e.rule}),u.getCartAvailability(),e.giftProductData&&(l.giftWithPurchaseSelections=[{giftWithPurchaseIdentifier:e.giftProductData.giftWithPurchaseIdentifier,promotionId:e.giftProductData.promotionId,giftWithPurchaseQuantity:e.giftProductData.giftWithPurchaseQuantity}]),a=!0)),!a){r=e.orderQuantity;var d;d=e.childItems?new v(e.id,e,r,e.childSKUs[0].repositoryId,e.selectedOptions,u.currency,void 0,void 0,e.itemTotal,-1,e.configuratorId,i,void 0,void 0,e.externalData,e.actionCode,u.lineAttributes):e.externalPrice&&e.externalPriceQuantity?new v(e.id,e,r,e.childSKUs[0].repositoryId,e.selectedOptions,u.currency,void 0,void 0,e.externalPrice,e.externalPriceQuantity,void 0,void 0,void 0,void 0,e.externalData,e.actionCode,u.lineAttributes):new v(e.id,e,r,e.childSKUs[0].repositoryId,e.selectedOptions,u.currency,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e.externalData,e.actionCode,u.lineAttributes),d.skuProperties=e.skuProperties,d.selectedSkuProperties=e.selectedSkuProperties,u.items.push(d)}u.isDirty(!1),u.markDirty()}},u.addToCart=function(){var e=u.getCookieDataAndCompare();u.events.push(new O(D,1,this)),u.mergeCart()||!e||u.isMatchingCookieData()?u.addItem(this):(u.getLocalData(e),0==e.items.length&&u.addItem(this))},s.Topic(t.topicNames.CART_PRICE_COMPLETE).subscribe(u.updateCartItems),u.removeFromCart=function(e){u.events.push(new O(w,0,this));var t=u.getCookieDataAndCompare();if(t&&t.items.length>0&&!u.isMatchingCookieData())u.getLocalData(t);else{if(e)var r=u.getCartItem(this.id,this.childSKUs[0].repositoryId,e.commerceItemId);else var r=u.getCartItem(this.id,this.childSKUs[0].repositoryId);null!==r&&u.removeItem(r)}},u.getCookieDataAndCompare=function(){var e=u.getCookieData();return e&&u.isMatchingCookieData(u.compareItems(e.items)),e},u.removeItem=function(e){if(void 0!==e){u.items.remove(e),u.allItems.remove(e);var r=u.events.pop();r&&r.type==V||u.markDirty(),s.Topic(t.topicNames.CART_REMOVE_SUCCESS).publishWith([{message:"success",commerceItemId:e.commerceItemId}])}},u.emptyCart=function(){u.items.removeAll(),u.allItems.removeAll(),u.shippingMethod(""),s.Topic(t.topicNames.CHECKOUT_RESET_SHIPPING_METHOD).publish(),u.numberOfItems(0),u.total(0),u.totalWithoutTax(0),u.subTotal(0),u.amount(0),u.shipping(0),u.shippingDiscount(0),u.shippingSurcharge(0),u.tax(0),u.currencyCode(""),u.orderDiscount(0),u.giftCards([]),u.giftWithPurchaseOrderMarkers=[],u.placeHolderItems.removeAll(),u.orderDiscountDescList()&&u.orderDiscountDescList.removeAll(),u.coupons()&&u.coupons().length>0&&u.coupons.removeAll(),u.couponMultiPromotions()&&u.couponMultiPromotions().length>0&&(u.couponMultiPromotions.removeAll(),u.claimedCouponMultiPromotions.removeAll()),u.dynamicProperties()&&u.dynamicProperties().length>0&&u.dynamicProperties.removeAll(),u.cartUpdated()},u.handleOrderSubmit=function(){u.emptyCart(),u.user().loggedIn()&&u.user().orderId()&&""!=u.user().orderId()&&(u.user().orderId(""),u.user().persistedOrder(null),u.user().setLocalData("orderId"))},u.updateShippingMethod=function(){this&&this.repositoryId?(u.shippingMethod(this.repositoryId),u.shipping(this.shippingCost),u.items().length&&u.priceCartForCheckout()):(u.shippingMethod(""),u.shippingDiscount(0),u.shippingSurcharge(0),0!=u.shipping()&&u.markDirty())},u.shippingMethodsLoaded=function(){var e,r=!1;if(this.shippingOptions()){for(var i=0;i<this.shippingOptions().length;i++)if(u.shippingMethod()&&u.shippingMethod()===this.shippingOptions()[i].repositoryId){e=this.shippingOptions()[i],r=!0;break}if(!r)for(var i=0;i<this.shippingOptions().length;i++)if(this.defaultShipping()===this.shippingOptions()[i].repositoryId){e=this.shippingOptions()[i];break}}s.Topic(t.topicNames.CHECKOUT_SHIPPING_METHOD).publishWith(e,[{message:"success"}])},u.updateShippingAddress=function(){if(this&&this.shippingAddress&&this.shippingAddress.validateForShippingMethod()){var e=u.shippingAddress();u.shippingAddress(this.shippingAddress.toJSON()),!u.isShippingAddressChanged(u.shippingAddress(),e)&&u.shippingMethod()||s.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).publishWith(this,[{message:"success"}])}else u.shippingAddress("")},u.updateShippingAddressAndReloadMethod=function(){if(this&&this.shippingAddress&&this.shippingAddress().validateForShippingMethod()){var e=u.shippingAddress();u.shippingAddress(this.shippingAddress().toJSON()),!u.isShippingAddressChanged(u.shippingAddress(),e)&&u.shippingMethod()||s.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).publishWith(this,[{message:"success"}])}else u.shippingAddress("")},u.resetShippingAddress=function(){u.shippingAddress("")},u.updateQuantity=function(e){e&&e.commerceItemId&&(this.commerceItemId=e.commerceItemId),u.events.push(new O(L,0,this));var t=u.getCookieDataAndCompare();u.mergeCart()||!t||u.isMatchingCookieData()?u.updateItemQuantity(this):u.getLocalData(t)},u.updateItemQuantity=function(e){var r;if(r=e.childSKUs?u.getCartItem(e.id,e.childSKUs[0].repositoryId,e.commerceItemId):u.getCartItem(e.productId,e.catRefId,e.commerceItemId),null!==r){var i=r;if(i.productPriceChanged()&&i.productPriceChanged(!1),i.updatableQuantity.isValid()){var a=parseInt(i.updatableQuantity());a?(i.quantity(parseFloat(i.updatableQuantity())),u.validateProduct(i),s.Topic(t.topicNames.CART_UPDATE_QUANTITY_SUCCESS).publishWith(function(){})):u.removeItem(i)}}},u.validateProduct=function(e){var t=this.catalogId();u.user().catalogId&&(t=u.user().catalogId());var r=new Array(e.catRefId,e.productId,t),i={},a={};a[c.ENDPOINT_KEY]=c.ENDPOINT_GET_PRODUCT_AVAILABILITY,a[c.IDENTIFIER_KEY]="stockStatusForProdValidation";var o=u.storeConfiguration.getFilterToUse(a);o&&(i[c.FILTER_KEY]=o),u.adapter.loadJSON("getStockStatus",r,i,function(e){u.validateProductForPricing(e)},function(e){u.reloadCart()})},u.validateProductForPricing=function(e){if("IN_STOCK"===e.stockStatus){for(var t=0;t<u.items().length;t++)if(u.items()[t].productId===e.productId&&u.items()[t].catRefId===e.catRefId)return u.items()[t].updatableQuantity()<=e.orderableQuantity?(u.items()[t].stockStatus(!0),u.updatedProduct(u.items()[t].catRefId),void u.markDirty()):void u.reloadCart();u.reloadCart()}else u.reloadCart()};var h=function(){i.emptyGrowlMessages();for(var e=0;e<u.items().length;e++)u.items()[e].revertQuantity()};return u.getCartItem=function(e,t,r){for(var i=0;i<u.items().length;i++)if(u.items()[i].productId===e&&u.items()[i].catRefId===t&&(null==r&&!u.items()[i].childItems||r&&r==u.items()[i].commerceItemId))return u.items()[i];return null},u.getConfigurableCartItem=function(e,t,r){for(var i=0;i<u.items().length;i++)if(u.items()[i].productId===e&&u.items()[i].catRefId===t&&u.items()[i].childItems&&(!r&&!u.items()[i].childItems||r&&u.items()[i].childItems&&r==u.items()[i].commerceItemId))return u.items()[i];return null},u.getCartItemForReconfiguration=function(e,t,r){for(var i=0;i<u.items().length;i++)if(u.items()[i].productId===e&&u.items()[i].catRefId===t&&r&&u.items()[i].childItems&&r==u.items()[i].configuratorId)return u.items()[i];return null},u.getRemoveCouponReadText=function(){return o.t("ns.common:resources.removeCouponLinkReadText")},u.populateGiftCards=function(e,t){if(u.giftCards().length>0){e.payments=[];for(var r=0;r<u.giftCards().length;r++){var i={},a=u.giftCards()[r];i.type=c.GIFT_CARD_PAYMENT_TYPE,i.giftCardNumber=a.giftCardNumber(),i.giftCardPin=a.giftCardPin(),a.amountInGiftCard()&&(t&&t.type===F&&t.product.giftCardNumber()===a.giftCardNumber()||(i.amount=a.amountInGiftCard())),e.payments.push(i)}}},u.validateGiftCards=function(){for(var e=0;e<u.giftCards().length;e++){var t=u.giftCards()[e];if(!t.validateNow())return!1}return!0},u.updateAllItemsArray=function(){u.allItems.removeAll(),e.utils.arrayForEach(u.items(),function(e){u.allItems.push(e)}),e.utils.arrayForEach(u.placeHolderItems(),function(e){u.allItems.push(e)})},s.Topic(t.topicNames.CART_ADD).subscribe(u.addToCart),s.Topic(t.topicNames.CART_REMOVE).subscribe(u.removeFromCart),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).subscribe(u.handleOrderSubmit),s.Topic(t.topicNames.SCHEDULED_ORDER_SUBMISSION_SUCCESS).subscribe(u.handleOrderSubmit),s.Topic(t.topicNames.CART_UPDATE_QUANTITY).subscribe(u.updateQuantity),s.Topic(t.topicNames.CHECKOUT_SHIPPING_METHOD).subscribe(u.updateShippingMethod),s.Topic(t.topicNames.PAGE_CONTEXT_CHANGED).subscribe(i.emptyGrowlMessages),s.Topic(t.topicNames.PAGE_VIEW_CHANGED).subscribe(h),s.Topic(t.topicNames.PAGE_LAYOUT_UPDATED).subscribe(u.initCatalog.bind(u)),s.Topic(t.topicNames.LOAD_CHECKOUT).subscribe(u.checkPriceDataAndRedirect),s.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).subscribe(u.updateShippingAddress),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS_INVALID).subscribe(u.resetShippingAddress),s.Topic(t.topicNames.USER_PROFILE_ADDRESSES_REMOVED).subscribe(u.resetShippingAddress),s.Topic(t.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).subscribe(u.loadCartForProfile.bind(u)),s.Topic(t.topicNames.USER_LOAD_CART).subscribe(u.loadCartForProfile.bind(u)),s.Topic(t.topicNames.USER_CLEAR_CART).subscribe(u.clearCartForProfile.bind(u)),s.Topic(t.topicNames.REFRESH_USER_CART).subscribe(u.refreshUserCart.bind(u)),s.Topic(t.topicNames.REMOVE_INVALID_ITEMS).subscribe(u.handleInvalidItems.bind(u)),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).subscribe(u.clearPins.bind(u)),s.Topic(t.topicNames.PAGE_CHANGED).subscribe(function(e){u.clearLoadedOrder(e),u.clearPins()}),s.Topic(t.topicNames.USER_LOGOUT_SUBMIT).subscribe(u.clearPins.bind(u)),s.Topic(t.topicNames.USER_SESSION_RESET).subscribe(u.clearPins.bind(u)),s.Topic(t.topicNames.GIFTCARD_REAPPLY_PINS).subscribe(u.reApplyGiftCardPins.bind(u)),s.Topic(t.topicNames.PLACE_HOLDER_REMOVE).subscribe(function(e){u.removePlaceHolderFromCart(e)}),s.Topic(t.topicNames.USER_LOAD_SHIPPING).subscribe(function(e){u.user()&&!u.user().loggedIn()&&u.resetShippingAddress()}),u}function I(e){var t=null;if(e.variant&&e.variant.length>0){var r=e.variant;t=[];for(var i=0;i<r.length;i++)t.push({optionName:r[i].optionName,optionValue:r[i].optionValue})}return t}function T(t,r,i,a,o,n){var s=this;return s.code=e.observable(t),s.description=e.observable(r),s.status=e.observable(i),s.level=e.observable(a),s.id=e.observable(o),s.totalAdjustment=e.observable(n),s.toJSON=function(){var t=e.toJS(s);return t},s}function S(t,r,i,a){var o=this;return o.code=e.observable(t),o.couponStatus=e.observable(i?i:""),o.promotions=e.observableArray([]),o.newPromotionInfo=function(t,r,i,a,o){var n={};return n.promotionId=e.observable(t?t:""),n.promotionDesc=e.observable(r?r:""),n.promotionApplied=e.observable(!!i&&i),n.promotionLevel=e.observable(a?a:""),n.totalAdjustment=e.observable(o?o:"0"),n.toJSON=function(){var t=e.toJS(n);return t},n},o.populatePromotionData=function(e,t,r){t.promotionDesc(e.promotionDesc),t.promotionApplied(r?r:e.promotionApplied),t.promotionLevel(e.promotionLevel),t.totalAdjustment(e.totalAdjustment)},o.populateCouponData=function(t,r){var i=this,a=e.observableArray([]),o=!1;if(t&&t.length>0)for(var n=0;n<t.length;n++){o=!1;for(var s=0;s<i.promotions().length;s++)if(t[n].promotionId==i.promotions()[s].promotionId()){i.populatePromotionData(t[n],i.promotions()[s],r),o=!0;break}o||a.push(i.newPromotionInfo(t[n].promotionId,t[n].promotionDesc,r?r:t[n].promotionApplied,t[n].promotionLevel,t[n].totalAdjustment))}for(var n=0;n<a().length;n++)i.promotions.push(a()[n])},o.toJSON=function(){var t=e.toJS(o);return t},r&&r.length>0&&o.populateCouponData(r,a),o}function _(e,t,r,i,a,o){for(var n=!1,s=0;s<e.length;s++){for(var l=!1,u=0;t&&u<t().length;u++)if(e[s].productId==t()[u].productId&&e[s].catRefId==t()[u].catRefId&&(!e[s].childItems&&!t()[u].childItems&&null!=e[s].commerceItemId&&e[s].commerceItemId==t()[u].commerceItemId||e[s].childItems&&t()[u].childItems&&null!=e[s].commerceItemId&&e[s].commerceItemId==t()[u].commerceItemId)){t()[u].quantity(e[s].quantity),t()[u].discountInfo(e[s].discountInfo),t()[u].rawTotalPrice(e[s].rawTotalPrice),r&&t()[u].updatableQuantity(e[s].quantity),t()[u].itemTotal(e[s].price),t()[u].detailedItemPriceInfo(e[s].detailedItemPriceInfo),t()[u].giftWithPurchaseCommerceItemMarkers=e[s].giftWithPurchaseCommerceItemMarkers,t()[u].isGWPChoicesAvaliable(!1),i.addGiftDataToItem(t()[u],a),delete t()[u].giftWithPurchaseSelections,i.updateItemDynamicProperties(t()[u],e[s]),l=!0;break}if(!l)for(var u=0;t&&u<t().length;u++)if(!t()[u].commerceItemId){t()[u].quantity(e[s].quantity),t()[u].discountInfo(e[s].discountInfo),t()[u].rawTotalPrice(e[s].rawTotalPrice),(r||t()[u].giftWithPurchaseCommerceItemMarkers&&t()[u].giftWithPurchaseCommerceItemMarkers.length||e[s].giftWithPurchaseCommerceItemMarkers&&e[s].giftWithPurchaseCommerceItemMarkers.length)&&t()[u].updatableQuantity(e[s].quantity),t()[u].itemTotal(e[s].price),t()[u].detailedItemPriceInfo(e[s].detailedItemPriceInfo),t()[u].giftWithPurchaseCommerceItemMarkers=e[s].giftWithPurchaseCommerceItemMarkers,t()[u].isGWPChoicesAvaliable(!1),i.addGiftDataToItem(t()[u],a),delete t()[u].giftWithPurchaseSelections,i.updateItemDynamicProperties(t()[u],e[s]),i.currentOrderState()!=c.QUOTED_STATES&&i.currentOrderState()!=c.PENDING_PAYMENTS&&i.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&(t()[u].commerceItemId=e[s].id),l=!0;break}if((r||P(e[s].discountInfo))&&!l){var d=I(e[s]),p=null;if(e[s].childItems){p=[];for(var u=0;u<e[s].childItems.length;u++){var h=e[s].childItems[u];p[u]=new v(h.productId,void 0,h.quantity,h.catRefId,h.selectedOptions,b.singleInstance.currency,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,h.externalData,h.actionCode),p[u].displayName=h.displayName}}var f=new v(e[s].productId,void 0,e[s].quantity,e[s].catRefId,d,b.singleInstance.currency,e[s].discountInfo,e[s].rawTotalPrice,e[s].externalPrice,e[s].externalPriceQuantity,e[s].configuratorId,p,e[s].commerceItemId,void 0,e[s].externalData,e[s].actionCode,b.singleInstance.lineAttributes);f.itemTotal(e[s].price),f.detailedItemPriceInfo(e[s].detailedItemPriceInfo),f.giftWithPurchaseCommerceItemMarkers=e[s].giftWithPurchaseCommerceItemMarkers,i.addGiftDataToItem(f,a),t.push(f),n=!0}}for(var u=0;t&&u<t().length;u++){for(var l=!1,s=0;s<e.length;s++)if(e[s].productId==t()[u].productId&&e[s].catRefId==t()[u].catRefId){l=!0;break}l||(t.remove(t()[u]),u--)}return n}function P(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(e[t].giftWithPurchaseDiscountInfo&&e[t].giftWithPurchaseDiscountInfo.length)return!0;return!1}function A(e){for(var t={},r=0;r<e.childSKUs.length;r++)e.childSKUs[r].primaryThumbImageURL&&(t[e.childSKUs[r].repositoryId]=e.childSKUs[r].primaryThumbImageURL);return t}function C(e){this.operation="availability",this.products=new Array,this.catalogId=e.catalogId();for(var t=0;t<e.items().length;t++){var r=e.items()[t].productId,i=e.items()[t].catRefId;if(i&&(r=r+":"+i),this.products.push(r),e.items()[t].childItems)for(var a=0;a<e.items()[t].childItems.length;a++){var o=e.items()[t].childItems[a].productId,n=e.items()[t].childItems[a].catRefId;n&&(o=o+":"+n),this.products.push(o)}}s.unique(this.products),this.products=this.products.join(",")}function R(e){this.shoppingCart=new Object,this.shoppingCart.items=e.items(),this.shoppingCart.coupons=e.coupons(),!e.mergeCart()&&e.currentOrderId()&&(this.id=e.currentOrderId()),e.giftWithPurchaseOrderMarkers&&e.giftWithPurchaseOrderMarkers.length&&(this.giftWithPurchaseOrderMarkers=e.giftWithPurchaseOrderMarkers),this.combineLineItems=e.combineLineItems,e.populateDynamicProperties(this)}function O(e,t,r){this.type=e,this.quantity=t,e==M||e==k?this.coupon=r:this.product=r}function N(e,t){if(this.operation="availability",this.products=new Array,this.catalogId=t,this.products.push(e.id+":"+e.catalogRefId),e.childItems)for(var r=0;r<e.childItems.length;r++){var i=e.childItems[r].id,a=e.childItems[r].catalogRefId;a&&(i=i+":"+a),this.products.push(i)}this.products=this.products.join(",")}var D=1,L=2,w=3,M=4,k=5,U=6,x=7,F=8,G=9,H=10,V=11,j="CartViewModel",Y="GiftWithPurchase",q=c.APPLICATION_STOREFRONT;return b.prototype.loadCartForProfile=function(i){var a=this;r.clearError(j);if(a.user()&&!a.user().loggedinAtCheckout()){if(i&&i.catalog){var n=i.catalog.repositoryId;this.catalogId()!=n&&this.catalogId(n)}i&&i.priceListGroup&&i.priceListGroup.id&&this.priceListGroupId(i.priceListGroup.id);var l={},u={};u[c.ENDPOINT_KEY]=c.ENDPOINT_GET_PROFILE_ORDER,u[c.IDENTIFIER_KEY]="loadCartForProfile";var d=a.storeConfiguration.getFilterToUse(u);d&&(l[c.FILTER_KEY]=d),a.adapter.loadJSON("getCurrentProfileOrder","0",l,function(r){if(void 0===r&&(a.shippingAddress()&&e.utils.unwrapObservable(a.shippingAddress().email)&&(a.shippingAddress().email=null),s.Topic(t.topicNames.CART_READY).publish(a)),r&&r.orderId){a.user().orderId(r.orderId),a.user().persistedOrder(r),a.user().setLocalData("orderId");a.removeItems(r);if(a.mergeItems(r),a.isPricingRequired(!0),a.validateServerCart(),a.getProductData(),a.getDynamicPropertiesMetadata(!0),a.getItemDynamicPropertiesMetadata(c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM),a.updateDynamicProperties(r),r.shippingGroups&&1==r.shippingGroups.length&&a.shippingAddress&&""==a.shippingAddress()&&!(a.user()&&a.user().shippingAddressBook()&&a.user().shippingAddressBook.length>0)){var i={translate:function(e,t){return o.t("ns.common:resources."+e,t)}},n=new f("cart-shipping-address","",i,a.contextData.page.shippingCountriesPriceListGroup,a.contextData.page.defaultShippingCountry);n.copyFrom(r.shippingGroups[0].shippingAddress,a.contextData.page.shippingCountriesPriceListGroup),n.resetModified(),n.validateForShippingMethod()&&(a.shippingAddress(n),a.shippingMethod(r.shippingGroups[0].shippingMethod.value),s.Topic(t.topicNames.CART_SHIPPING_ADDRESS_UPDATED).publishWith())}}else a.items()&&a.items().length>0&&(a.validateServerCart(),a.getProductData(),a.createCurrentProfileOrder())},function(e){a.loadCart()})}},b.prototype.loadOrderForProfile=function(e,t){var r=this;r.user()||(r.user=t),r.user().persistedOrder(null),r.emptyCart(),r.orderCurrency=e.priceListGroup.currency,r.orderItems(e.order.items),r.mergeItems(e),r.updateCartData(e,!1,!0),r.cartUpdated()},b.prototype.clearLoadedOrder=function(e){var r=this;!r.mergeCart()&&r.currentOrderId()&&(e.pageId==c.PAGE_TYPE_CHECKOUT||r.currentOrderState()!=c.QUOTED_STATES&&r.currentOrderState()!=c.PENDING_PAYMENTS&&r.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE||(r.currentOrderId(null),r.currentOrderState(null),r.orderItems([]),r.orderCurrency={},r.emptyCart(),r.loadCartForProfile(r.user()),s.Topic(t.topicNames.LOAD_ORDER_RESET_ADDRESS).publish()))},b.prototype.isShippingAddressChanged=function(e,t){return e.state&&e.state!=t.state||e.postalCode&&e.postalCode!=t.postalCode||e.country&&e.country!=t.country},b.prototype.removeItems=function(e){for(var t=this,r=!1,i=e.shoppingCart.items,a=0;a<i.length;a++)i[a].isItemValid||(i[a].displayName&&t.invalidProductNames.indexOf(i[a].displayName)==-1&&t.invalidProductNames.push(i[a].displayName),i.splice(a,1),a--,r=!0);return r},b.prototype.compareItems=function(e){var t,r=this,i=e;if(i.length!=r.items().length||0==i.length)return!1;if(0==i.length)return!0;var a=r.events.pop();a&&r.events.push(a);for(var o=0;o<r.items().length;o++){t=!1;for(var n=0;n<i.length;n++)if(i[n].productId==r.items()[o].productId&&i[n].catRefId==r.items()[o].catRefId&&(!i[n].childItems&&!r.items()[o].childItems&&null!=i[n].commerceItemId&&i[n].commerceItemId==r.items()[o].commerceItemId||i[n].childItems&&r.items()[o].childItems&&i[n].commerceItemId==r.items()[o].commerceItemId)){a&&2==a.type&&a.product.id==i[n].productId||i[n].quantity!=r.items()[o].quantity()&&(r.items()[o].quantity(i[n].quantity),r.items()[o].updatableQuantity(i[n].quantity)),t=!0;break}if(!t)return!1}return!0},b.prototype.compareItemsAndQuantity=function(e){var t,r=this,i=e;if(i.length!=r.items().length||0==i.length)return!1;if(0==i.length)return!0;var a=r.events.pop();a&&r.events.push(a);for(var o=0;o<r.items().length;o++){t=!1;for(var n=0;n<i.length;n++)if(!r.items()[n].childItems&&i[n].productId==r.items()[o].productId&&i[n].catRefId==r.items()[o].catRefId&&(!i[n].childItems&&!r.items()[o].childItems&&null!=i[n].commerceItemId&&i[n].commerceItemId==r.items()[o].commerceItemId||i[n].childItems&&r.items()[o].childItems&&i[n].commerceItemId==r.items()[o].commerceItemId)){if((!a||2!=a.type||a.product.id!=i[n].productId)&&i[n].quantity!=r.items()[o].quantity())break;t=!0;break}if(!t)return!1}return!0},b.prototype.compareCoupons=function(e){var t,r=this;if(e.length!=r.coupons().length)return!1;if(0==e.length)return!0;for(var i=0;i<r.coupons().length;i++){t=!1;for(var a=0;a<e.length;a++)e[a].code==r.coupons()[i].code()&&(t=!0);if(!t)return!1}return!0},b.prototype.mergeItems=function(e){var t,r=this;t=e.order&&(r.currentOrderId()||r.mergeCart())?e.order.items:e.commerceItems&&r.mergeCart()?e.commerceItems:e.shoppingCart.items;for(var i=[],a=0;a<t.length;a++){var o=!1;t[a].catalogRefId&&(t[a].catRefId=t[a].catalogRefId),r.combineLineItems=1==(r.shouldCombineLineItems(r.items())&&r.shouldCombineLineItems(t))?c.COMBINE_YES:c.COMBINE_NO;var n=null;if(n=t[a].childItems?r.getConfigurableCartItem(t[a].productId,t[a].catRefId,t[a].commerceItemId):r.combineLineItems==c.COMBINE_YES?r.getCartItem(t[a].productId,t[a].catRefId):r.getCartItem(t[a].productId,t[a].catRefId,t[a].commerceItemId),null!==n){var s=t[a].quantity+n.quantity();n.quantity(s),n.updatableQuantity(s),n.discountInfo(t[a].discountInfo),n.rawTotalPrice(t[a].rawTotalPrice),n.detailedItemPriceInfo(t[a].detailedItemPriceInfo),o=!0}o||i.push(t[a])}for(var a=0;a<i.length;a++){var l=I(i[a]),u=null;if(i[a].childItems){u=[];for(var d=0;d<i[a].childItems.length;d++){var p=i[a].childItems[d];u[d]=new v(p.productId,void 0,p.quantity,p.catRefId,p.selectedOptions,r.currency,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,p.externalData,p.actionCode),u[d].displayName=p.displayName}}var h=new v(i[a].productId,void 0,i[a].quantity,i[a].catRefId,l,r.currency,i[a].discountInfo,i[a].rawTotalPrice,i[a].externalPrice,i[a].externalPriceQuantity,i[a].configuratorId,u,i[a].commerceItemId,void 0,i[a].externalData,i[a].actionCode);h.itemTotal(i[a].price),h.originalPrice(i[a].unitPrice),h.updatableQuantity(i[a].quantity),h.detailedItemPriceInfo(i[a].detailedItemPriceInfo),r.updateItemDynamicProperties(h,i[a]),e.priceListGroup&&null!=e.priceListGroup.repositoryId&&h.priceListGroupId(e.priceListGroup.repositoryId),r.items.push(h)}},b.prototype.validateServerCart=function(){var e=this;e.user().pageToRedirect()&&e.user().pageToRedirect()==e.checkoutLink?e.validateAndRedirectCart(!0):e.validateAndRedirectCart(!1)},b.prototype.clearCartForProfile=function(e){var t=this;t.user()||t.user(e),t.user()&&(t.user().persistedOrder(null),t.user().loggedinAtCheckout()||t.user().loggedoutAtCheckout()||""==t.user().orderId()||t.emptyCart(),t.user().orderId(""),t.user().setLocalData("orderId"))},b.prototype.refreshUserCart=function(e){var r=this;if(r.user()||r.user(e),!r.updatedFromRepository&&r.currentOrderState()!=c.PENDING_PAYMENTS&&r.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&r.user()&&r.user().loggedIn()&&!r.user().loggedinAtCheckout()&&!l.isPathEqualTo(r.checkoutLink)){var i={},a={};a[c.ENDPOINT_KEY]=c.ENDPOINT_GET_PROFILE_ORDER,a[c.IDENTIFIER_KEY]="refreshCart";var n=r.storeConfiguration.getFilterToUse(a);n&&(i[c.FILTER_KEY]=n),r.adapter.loadJSON("getCurrentProfileOrder","0",i,function(e){if(null!=e&&e.orderId){r.user().orderId(e.orderId),r.user().persistedOrder(e),r.user().setLocalData("orderId");var i=r.removeItems(e);if(r.isPricingRequired(i),r.compareItemsAndQuantity(e.shoppingCart.items)||(r.updateCartData(e,!0),r.isPricingRequired(!0)),r.getProductData(),r.getDynamicPropertiesMetadata(!0),r.getItemDynamicPropertiesMetadata(c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM),r.updateDynamicProperties(e),1==e.shippingGroups.length&&r.shippingAddress&&""==r.shippingAddress()){var a={translate:function(e,t){return o.t("ns.common:resources."+e,t)}},n=new f("cart-shipping-address","",a,r.contextData.page.shippingCountriesPriceListGroup,r.contextData.page.defaultShippingCountry);n.copyFrom(e.shippingGroups[0].shippingAddress,r.contextData.page.shippingCountriesPriceListGroup),n.resetModified(),n.validateForShippingMethod()&&(r.shippingAddress(n),r.shippingMethod(e.shippingGroups[0].shippingMethod.value),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS).publishWith(r.shippingAddress(),[{message:"success"}]))}r.cartUpdated()}else r.user().orderId(""),r.user().persistedOrder(null),r.user().setLocalData("orderId")},function(e){r.loadCart()})}},b.prototype.handleInvalidItems=function(e){var t=this;if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND){t.removeItemsByProduct(e.moreInfo);t.markDirty()}if(e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND){var r=JSON.parse(e.moreInfo);t.removeItemsByProductCatRef(r.productId,r.catRefId);t.markDirty()}},b.prototype.initCatalog=function(){var e=this;if(arguments[0].data.global.user&&arguments[0].data.global.user.catalog){var t=arguments[0].data.global.user.catalog.repositoryId;this.catalogId()!=t&&this.catalogId(t)}if(arguments[0].data.global.user&&arguments[0].data.global.user.priceListGroup){var r=arguments[0].data.global.user.priceListGroup.id;this.priceListGroupId(r)}var i=u.getInstance().getItem(c.REDIRECTED_TO_WEB_PAYMENT)&&(arguments[1].token||arguments[1].authorizationCode)?"true":"false";u.getInstance().setItem(c.REDIRECTED_TO_WEB_PAYMENT,"false"),l.isPathEqualTo(arguments[0].data.global.links.checkout.route)&&e.checkoutLink||"undefined"!=typeof i&&"true"===i||e.loadCart()},b.prototype.shouldCombineLineItems=function(e){for(var t=0;t<e.length;t++)for(var r=t+1;r<e.length;r++)if(!e[t].childItems&&!e[r].childItems&&e[t].productId==e[r].productId&&e[t].catRefId==e[r].catRefId&&e[t].commerceItemId!=e[r].commerceItemId)return!1;return!0},b.prototype.loadCart=function(){var e=this;if(e.isDirty(!1),u.getInstance().setItem(c.REDIRECTED_TO_WEB_PAYMENT,"false"),!e.updatedFromRepository&&(l.isPathEqualTo(e.checkoutLink)||!e.user()||!e.user().loggedIn()||e.user().loggedinAtCheckout()||!e.user().orderId())){var t=e.getCookieData();null!=t&&e.getLocalData(t)}e.combineLineItems=1==e.shouldCombineLineItems(e.items())?c.COMBINE_YES:c.COMBINE_NO},b.prototype.reloadCart=function(){var e=this;e.user()&&e.user().loggedIn()&&!e.user().loggedinAtCheckout()?(e.isDirty(!1),e.refreshUserCart(e.user())):e.loadCart()},b.prototype.getItemPrice=function(e){var t=0;if(null!=e.productData()){if(e.productData().childSKUs){for(var r=(e.productData().childSKUs,e.productData().childSKUs.length),i=0;i<r;i++)if(e.productData().childSKUs[i].repositoryId==e.catRefId){var a=e.productData().childSKUs[i];t=null!=a.salePrice?a.salePrice:null!=e.productData().salePrice?e.productData().salePrice:null!=a.listPrice?a.listPrice:e.productData().listPrice}}else t=null!=e.productData().salePrice?e.productData().salePrice:e.productData().listPrice;return t}},b.prototype.saveCartCookie=function(){var e=this,t=!1,r=new Object;r.numberOfItems=e.numberOfItems(),r.total=e.total(),r.totalWithoutTax=e.totalWithoutTax(),r.subTotal=e.subTotal(),r.amount=e.amount(),r.tax=e.tax(),r.currencyCode=e.currencyCode(),r.shipping=e.shipping(),r.shippingDiscount=e.shippingDiscount(),r.shippingSurcharge=e.shippingSurcharge(),r.orderDiscount=e.orderDiscount(),r.orderDiscountDescList=e.orderDiscountDescList(),r.coupons=e.coupons(),r.cartPriceListGroupId=d.getInstance().selectedPriceListGroup().id,r.giftWithPurchaseOrderMarkers=e.giftWithPurchaseOrderMarkers,r.items=new Array;var i=e.getCookieData();"string"==typeof i&&(i=JSON.parse(i));var a={};if(null!=i)for(var o=0;o<i.items.length;o++)void 0===a[i.items[o].catRefId]&&(a[i.items[o].catRefId]=i.items[o].originalPrice);var n=e.user().persistedOrder();if(n&&n.shoppingCart.items)for(var s=n.shoppingCart,l=s.items.length,o=0;o<l;o++)void 0===a[s.items[o].catRefId]&&(a[s.items[o].catRefId]=s.items[o].unitPrice);if(e.lineAttributes){r.lineAttributes=new Array;for(var o=0;o<e.lineAttributes().length;o++){
var p=e.lineAttributes()[o],h=p.id(),f=null;null!=p.value()&&(f=p.value()),r.lineAttributes.push({id:h,value:f})}}for(var o=0;o<e.items().length;o++){var m=0,g=e.getItemPrice(e.items()[o]);void 0==a[e.items()[o].catRefId]?m=g:""!=e.updatedProduct()&&e.updatedProduct()===e.items()[o].catRefId?(m=g,e.updatedProduct("")):m=a[e.items()[o].catRefId],e.items()[o].priceListGroupId()!=d.getInstance().selectedPriceListGroup().id&&void 0!=g&&(e.items()[o].priceListGroupId(d.getInstance().selectedPriceListGroup().id),m=g,t=!0),e.items()[o].originalPrice(m);var v={productId:e.items()[o].productId,quantity:e.items()[o].quantity(),catRefId:e.items()[o].catRefId,itemTotal:e.items()[o].itemTotal(),rawTotalPrice:e.items()[o].rawTotalPrice(),originalPrice:m,selectedOptions:e.items()[o].selectedOptions,selectedSkuProperties:e.items()[o].selectedSkuProperties,discountInfo:e.items()[o].discountInfo(),detailedItemPriceInfo:e.items()[o].detailedItemPriceInfo(),externalPrice:e.items()[o].externalPrice(),externalPriceQuantity:e.items()[o].externalPriceQuantity(),configuratorId:e.items()[o].configuratorId,childItems:e.items()[o].childItems,externalData:e.items()[o].externalData(),actionCode:e.items()[o].actionCode(),commerceItemId:e.items()[o].commerceItemId,unpricedExternalMessage:e.items()[o].unpricedExternalMessage(),isGWPChoicesAvaliable:e.items()[o].isGWPChoicesAvaliable(),giftData:e.items()[o].giftData?e.items()[o].giftData:null,giftWithPurchaseCommerceItemMarkers:e.items()[o].giftWithPurchaseCommerceItemMarkers,isPersonalized:e.items()[o].isPersonalized()};for(var E in e.lineAttributes())v[e.lineAttributes()[E].id()]=e.items()[o][e.lineAttributes()[E].id()]();r.items.push(v)}if(t&&e.cartPriceListGroupId(d.getInstance().selectedPriceListGroup().id),e.dynamicProperties){e.getDynamicPropertiesMetadata(!0),r.dynamicProperties=new Array;for(var o=0;o<e.dynamicProperties().length;o++){var p=e.dynamicProperties()[o],h=p.id(),f=null;null!=p.value()&&(f=p.value()),r.dynamicProperties.push({id:h,value:f})}}try{e.currentOrderState()!=c.PENDING_PAYMENT&&u.getInstance().setItem("shoppingCart",JSON.stringify(r))}catch(e){}},b.prototype.getLocalData=function(t){var r=this;if("string"==typeof t&&(t=JSON.parse(t)),t){if(r.numberOfItems(t.numberOfItems),r.total(t.total),r.totalWithoutTax(t.totalWithoutTax),r.subTotal(t.subTotal),r.amount(t.amount),r.tax(t.tax),r.currencyCode(t.currencyCode),r.shipping(t.shipping),r.shippingDiscount(t.shippingDiscount),r.shippingSurcharge(t.shippingSurcharge),r.orderDiscount(t.orderDiscount),r.orderDiscountDescList(t.orderDiscountDescList),r.cartPriceListGroupId(t.cartPriceListGroupId),r.giftWithPurchaseOrderMarkers=t.giftWithPurchaseOrderMarkers,r.coupons.splice(0),t.hasOwnProperty("coupons"))for(var i=0;i<t.coupons.length;i++){var a=new T(t.coupons[i].code,t.coupons[i].description,t.coupons[i].status,t.coupons[i].level,t.coupons[i].id,t.coupons[i].totalAdjustment);r.coupons.push(a)}r.populateClaimedCouponMultiPromotions(r.couponMultiPromotions()),r.items.splice(0);for(var i=0;i<t.items.length;i++){var o=void 0;if(t.items[i].childItems){o=[];for(var n=0;n<t.items[i].childItems.length;n++){var s=t.items[i].childItems[n];o[n]=new v(s.productId,void 0,s.quantity,s.catRefId,s.selectedOptions,r.currency,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,s.externalData,s.actionCode),o[n].displayName=e.observable(s.displayName)}}var c=new v(t.items[i].productId,void 0,t.items[i].quantity,t.items[i].catRefId,t.items[i].selectedOptions,r.currency,t.items[i].discountInfo,t.items[i].rawTotalPrice,t.items[i].externalPrice,t.items[i].externalPriceQuantity,t.items[i].configuratorId,o,t.items[i].commerceItemId,t.items[i].unpricedExternalMessage,t.items[i].externalData,t.items[i].actionCode);c.itemTotal(t.items[i].itemTotal),c.originalPrice(t.items[i].originalPrice),c.productPriceChanged(!1),c.detailedItemPriceInfo(t.items[i].detailedItemPriceInfo),c.priceListGroupId(t.cartPriceListGroupId),c.isGWPChoicesAvaliable(t.items[i].isGWPChoicesAvaliable),c.skuProperties=t.items[i].skuProperties,c.isPersonalized=e.observable(t.items[i].isPersonalized),t.items[i].giftWithPurchaseCommerceItemMarkers&&(c.giftWithPurchaseCommerceItemMarkers=t.items[i].giftWithPurchaseCommerceItemMarkers),t.items[i].giftData&&(c.giftData=t.items[i].giftData);for(var l in t.lineAttributes)c[t.lineAttributes[l].id]=e.observable(t.items[i][t.lineAttributes[l].id]);r.items.push(c)}}r.items().length>0&&r.getProductData(),r.getDynamicPropertiesMetadata(!0),t.hasOwnProperty("dynamicProperties")&&r.updateDynamicProperties(t)},b.prototype.processCartData=function(e){for(var t=this,r=!1,i=0;i<t.items().length;i++)for(var a=0;a<e.length;a++){var o=e[a];if(o.id==t.items()[i].productId)for(var n=A(o),s=0;s<o.childSKUs.length;s++)if(o.childSKUs[s].repositoryId==t.items()[i].catRefId){var c=o.childSKUs[s],l=jQuery.extend(!0,{},o);if(l.childSKUs=[c],t.items()[i].currentPrice(t.getItemPrice(t.items()[i])),!l.childSKUs[0].primaryThumbImageURL&&l.childSKUs[0].listingSKUId&&(l.childSKUs[0].primaryThumbImageURL=n[l.childSKUs[0].listingSKUId]),t.items()[i].productData(l),!P(t.items()[i].discountInfo())){var u=t.getItemPrice(t.items()[i]);if(c=c||{},c.saleVolumePrice||c.listVolumePrice||l.saleVolumePrice||l.listVolumePrice?t.items()[i].productPriceChanged(!1):t.items()[i].originalPrice()!=u&&d.getInstance().selectedPriceListGroup().id==t.items()[i].priceListGroupId()?(t.skipPriceChange()&&t.items()[i].productPriceChanged()&&t.items()[i].currentPrice()==u||t.items()[i].invalid||(r=!0),null!=u&&t.items()[i].productPriceChanged(!0)):(t.items()[i].productPriceChanged(!1),t.items()[i].currentPrice()&&u&&t.items()[i].currentPrice()!=u&&!t.items()[i].invalid&&t.isPricingRequired(!0)),o.productVariantOptions)for(var p=0;p<o.productVariantOptions.length;p++)t.updateItemOptionDetails(o.productVariantOptions[p],t.items()[i].catRefId);break}}if(t.items()[i].childItems)for(var p=0;p<t.items()[i].childItems.length;p++)if(o.id==t.items()[i].childItems[p].productId)for(var s=0;s<o.childSKUs.length;s++)o.childSKUs[s].repositoryId==t.items()[i].childItems[p].catRefId&&t.items()[i].childItems[p].productData(jQuery.extend(!0,{},o))}return t.skipPriceChange(!1),t.showSelectedOptions(!0),r},b.prototype.getProductData=function(){for(var e=this,r=[],i=0;i<e.items().length;i++)if(r.indexOf(e.items()[i].productId)===-1&&r.push(e.items()[i].productId),e.items()[i].childItems)for(var a=0;a<e.items()[i].childItems.length;a++)r.indexOf(e.items()[i].childItems[a].productId)===-1&&r.push(e.items()[i].childItems[a].productId);var o=new Array(e.catalogId(),r,!0,e.priceListGroupId(),e.fields,!0),n={},u={};u[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_PRODUCTS,u[c.IDENTIFIER_KEY]="getProductData";var p=e.storeConfiguration.getFilterToUse(u);p&&(n[c.FILTER_KEY]=p),e.adapter.loadJSON("cart",o,n,function(r){if(e.mergeCart())for(var i=0;i<r.length;i++)r[i].active||r[i].displayName&&e.invalidProductNames.indexOf(r[i].displayName)==-1&&e.invalidProductNames.push(r[i].displayName);var a=e.removeInvalidItems(r,e.invalidProductNames),o=e.processCartData(r);1==a||o===!0||e.isPricingRequired()?(e.events.push(new O(G,0,r)),l.isPathEqualTo(e.checkoutLink)&&""!=e.shippingMethod()?e.priceCartForCheckout():e.markDirty(),e.isPricingRequired(!1)):e.cartPriceListGroupId()&&e.cartPriceListGroupId()!=d.getInstance().selectedPriceListGroup().id?(e.events.push(new O(G,0,r)),e.markDirty()):s.Topic(t.topicNames.CART_PRICE_COMPLETE).publish(),e.currentOrderState()!=c.PENDING_PAYMENTS&&e.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&e.getCartAvailability(),e.mergeCart()?(e.notifyInvalidProducts("cart"),e.isDirty()||e.markDirty(),e.mergeCart(!1)):e.notifyInvalidProducts(),e.updateAllItemsArray(),s.Topic(t.topicNames.CART_READY).publish(e)},function(t){t.errors&&t.errors.length>0&&(e.handleListProductsFailure(t),e.getProductData())})},b.prototype.notifyInvalidProducts=function(e){var t=this,i="";if(t.invalidProductNames.length>0){for(var a="",n=t.invalidProductNames.length-1,s=0;s<n;s++)a+=o.t("ns.common:resources.productNameHasNext",{productName:t.invalidProductNames[s]});a+=t.invalidProductNames[n],i=o.t("ns.common:resources.invalidCartItemsError",{productNames:a})}i&&(e?r.sendWarningToPage(j,i,!0,e,!0):(t.user().redirectNotificationMessage(i),r.sendWarning(j,i,!0))),t.invalidProductNames=[]},b.prototype.removeItemsByProduct=function(e){for(var t=this,r=!1,i=0;i<t.items().length;i++)t.items()[i].productId===e&&(t.items.remove(t.items()[i]),i--,r=!0,t.isPricingRequired(!0));return r},b.prototype.removeItemsByProductCatRef=function(e,t){for(var r=this,i=!1,a=0;a<r.items().length;a++)r.items()[a].productId===e&&r.items()[a].catRefId===t&&(r.items.remove(r.items()[a]),a--,i=!0,r.isPricingRequired(!0));return i},b.prototype.markInvalidItems=function(e,t){for(var r=this,i=0;i<r.items().length;i++)for(var a=r.items()[i],o=!1,n=0;n<e.length;n++)if(e[n].id==a.productId){if(!e[n].active||!e[n].childSKUs||0==e[n].childSKUs.length){a.invalid=!0;break}for(var s=0;e[n].childSKUs&&s<e[n].childSKUs.length;s++)if(e[n].childSKUs[s].repositoryId==a.catRefId&&e[n].childSKUs[s].active){o=!0;break}if(o)break;a.invalid=!0}return!1},b.prototype.removeInvalidItems=function(t,r){for(var i=this,a=!1,o=0;o<i.items().length;o++){for(var n=i.items()[o],s="",l=!1,u=!1,d=0;d<t.length;d++)if(t[d].id==n.productId){if(!t[d].active||!t[d].childSKUs||0==t[d].childSKUs.length||t[d].notForIndividualSale){u=!0,s=t[d].displayName;break}for(var p=0;t[d].childSKUs&&p<t[d].childSKUs.length;p++)if(t[d].childSKUs[p].repositoryId==n.catRefId&&t[d].childSKUs[p].active&&null!=t[d].childSKUs[p].listPrice){l=!0;break}l||(u=!0,s=t[d].displayName)}else for(var p=0;n.childItems&&p<n.childItems.length;p++)if(t[d].id==n.childItems[p].productId){if(!t[d].active||!t[d].childSKUs||0==t[d].childSKUs.length){u=!0,r.indexOf(t[d].displayName)==-1&&r.push(t[d].displayName);break}for(var h=0;t[d].childSKUs&&h<t[d].childSKUs.length;h++)if(t[d].childSKUs[h].repositoryId==n.childItems[p].catRefId){l=!0;break}if(!l){u=!0;for(var f=0;f<t.length;e++)if(t[f].id==n.productId){s=t[f].displayName;break}break}}i.currentOrderState()==c.PENDING_PAYMENTS||i.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE||l&&!u||(i.items.remove(n),r&&s&&r.indexOf(s)==-1&&r.push(s),a=!0,o--)}return a},b.prototype.updateItemOptionDetails=function(e,t){for(var r=0;r<this.items().length;r++)if(this.items()[r].catRefId===t&&this.items()[r].selectedOptions)for(var i=0;i<this.items()[r].selectedOptions.length;i++)if(this.items()[r].selectedOptions[i].optionId===e.optionId){this.items()[r].selectedOptions[i].optionName=e.optionName;var a=e.optionValueMap;for(var o in a)if(a[o]===this.items()[r].selectedOptions[i].optionValueId){this.items()[r].selectedOptions[i].optionValue=o;break}break}var n=this.getCookieData();if(n){for(var s=n.items,c=0;c<this.items().length;c++)for(var l=0;l<s.length;l++)if(this.items()[c].catRefId===s[l].catRefId){s[l].selectedOptions=this.items()[c].selectedOptions;break}n.items=s;try{u.getInstance().setItem("shoppingCart",JSON.stringify(n))}catch(e){}}},b.prototype.getCookieData=function(){var e=null;try{e=u.getInstance().getItem("shoppingCart"),e&&"string"==typeof e&&(e=JSON.parse(e))}catch(e){}return e},b.prototype.getCookieUserData=function(){var e=null;try{e=u.getInstance().getItem("user"),e&&"string"==typeof e&&(e=JSON.parse(e))}catch(e){}return e},b.prototype.checkPriceDataAndRedirect=function(){for(var e=this,t=[],r=0;r<e.items().length;r++)t.indexOf(e.items()[r].productId)===-1&&t.push(e.items()[r].productId);var i=e.catalogId();e.user().catalogId()&&(i=e.user().catalogId());var a=new Array(i,t,!0,d.getInstance().selectedPriceListGroup().id,e.fields,!0),o={},n={};n[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_PRODUCTS,n[c.IDENTIFIER_KEY]="getProductDataAndRedirect";var s=e.storeConfiguration.getFilterToUse(n);s&&(o[c.FILTER_KEY]=s),e.adapter.loadJSON("cart",a,o,function(t){if(e.markInvalidItems(t,e.invalidProductNames),e.items().length>0){var r=e.processCartData(t);(r===!0||e.isPricingRequired())&&(l.isPathEqualTo(e.checkoutLink)&&""!=e.shippingMethod()?e.priceCartForCheckout():e.markDirty(),e.isPricingRequired(!1)),r===!0?(e.redirect(e.cartLink),e.notifyInvalidProducts("cart")):e.validateCartAvailability()}else e.isPricingRequired()&&(e.markDirty(),e.isPricingRequired(!1)),e.notifyInvalidProducts()},function(t){t.errors&&t.errors.length>0&&(e.handleListProductsFailure(t),e.checkPriceDataAndRedirect()),e.checkoutWithPaypalClicked(!1)})},b.prototype.getProductIdsForItemsInCart=function(){for(var e=this,t=[],r=0;r<e.items().length;r++)t.push(e.items()[r].productId);return t},b.prototype.handleListProductsFailure=function(e){for(var t=this,r=0;r<e.errors.length;r++){var i=e.errors[r];i.errorCode==c.GET_PRODUCT_NO_PRODUCT_FOUND&&(i.devMessage&&t.invalidProductNames.indexOf(i.devMessage)==-1&&t.invalidProductNames.push(i.devMessage),t.removeItemsByProduct(i.moreInfo),t.isPricingRequired(!0))}},b.prototype.getCartAvailability=function(){var e=this,t=new C(e),r={};r[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,r[c.IDENTIFIER_KEY]="stockStatusesForCart";var i=e.storeConfiguration.getFilterToUse(r);i&&(t[c.FILTER_KEY]=i),e.adapter.loadJSON("getStockStatuses","0",t,function(t){for(var r=0;r<e.items().length;r++)if(e.items()[r].childItems)e.items()[r].addConfigurableStockValidation(t);else for(var i=0;i<t.length;i++)if(e.items()[r].productId===t[i].productId&&e.items()[r].catRefId===t[i].catRefId){"IN_STOCK"===t[i].stockStatus?e.items()[r].addLimitsValidation(!0,t[i].orderableQuantity):e.items()[r].addLimitsValidation(!1,t[i].orderableQuantity);break}},function(t){for(var r=0;r<e.items().length;r++)e.items()[r].addLimitsValidation(!1,0)})},b.prototype.priceCartIfNeccessary=function(e){var t=this;if(e)if(t.callbacks&&t.callbacks.hasOwnProperty(c.PREPRICING)&&"function"==typeof t.callbacks[c.PREPRICING]&&t.callbacks[c.PREPRICING](),t.items().length>0)!l.isPathEqualTo(t.checkoutLink)&&t.user()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()||t.user()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&!t.shippingMethod()?t.priceItemsAndPersist():!t.callPriceBeforeShippingMethods&&t.shippingMethod()?t.usingImprovedShippingWidgets()?t.priceCartForCheckout():t.populateShipppingMethods():t.priceItems();else{t.emptyCart(),t.events.pop();var r=t.getCookieUserData();r&&t.user().orderId(r.orderId),0==t.items().length&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&t.user().orderId()&&""!=t.user().orderId()&&t.removeCurrentProfileOrder()}},b.prototype.populateShipppingMethods=function(){var e=this;if(e.hasSplitShippingInformation()||e.shippingAddress().afterValidation&&e.shippingMethod())e.priceCartForCheckout();else{var r={};r[c.SHIPPING_ADDRESS_FOR_METHODS]=e.shippingAddress()?{toJSON:function(){return e.shippingAddress()}}:e.shippingAddress(),r[c.PRODUCT_IDS_FOR_SHIPPING]=this.getProductIdsForItemsInCart(),s.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).publishWith(r,[{message:"success"}])}},b.prototype.priceItemsAndPersist=function(){var e=this,t=!1,r=e.getCookieUserData();r&&e.user().orderId(r.orderId),e.user().loggedIn()&&e.user().orderId()&&""!=e.user().orderId()?e.updateCurrentProfileOrder(!1,t):e.createCurrentProfileOrder()},b.prototype.updateCurrentProfileOrder=function(e,r){var i=this,a=i.events.pop();if(i.isOrderSubmissionInProgress)console.warn(o.t("ns.common:resources.priceOrderBlockedText"));else{var n=new R(i);i.populateGiftCards(n,a),i.populateDynamicProperties(n),n.merge=e,n.clearCoupons=r,this.currentOrderState()!=c.PENDING_PAYMENTS&&i.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&i.adapter.persistUpdate("order",i.user().orderId(),n,function(r){i.isPricingRequired(!1),i.updateCart(r,a,e),i.shippingMethod()&&(i.skipGWPMessage=!0,i.usingImprovedShippingWidgets()?i.priceCartForCheckout():i.populateShipppingMethods()),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish(),i.callbacks&&i.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof i.callbacks[c.PRICING_SUCCESS_CB]&&i.callbacks[c.PRICING_SUCCESS_CB](r)},function(e){e.status==c.HTTP_UNAUTHORIZED_ERROR?i.handleSessionExpiry(a):e.errorCode==c.COUPON_APPLY_ERROR?i.handleCouponPricingError(e,a):e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND||e.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE?(i.handleInvalidAddItem(e,a),i.notifyInvalidProducts(),i.reloadCart(),i.tax(0)):e.errorCode==c.GIFTCARD_APPLY_ERROR||e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||e.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||e.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR?i.handleGiftCardError(e):(i.shippingMethod(""),i.reloadCart(),i.tax(0)),i.callbacks&&i.callbacks.hasOwnProperty(c.PRICING_FAILURE_CB)&&"function"==typeof i.callbacks[c.PRICING_FAILURE_CB]&&i.callbacks[c.PRICING_FAILURE_CB](e)})}},b.prototype.handleInvalidAddItem=function(e,t){var r=this;if(e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND&&t&&t.type===D&&t.product.id==e.moreInfo&&t.product.displayName&&r.invalidProductNames.indexOf(t.product.displayName)==-1)r.invalidProductNames.push(t.product.displayName);else if(e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND){var i=JSON.parse(e.moreInfo);t&&t.type===D&&t.product.id==i.productId&&t.product.childSKUs[0].repositoryId==i.catRefId&&t.product.displayName&&r.invalidProductNames.indexOf(t.product.displayName)==-1&&r.invalidProductNames.push(t.product.displayName)}else e.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE&&t&&t.type===D&&t.product.displayName&&r.invalidProductNames.indexOf(t.product.displayName)==-1&&r.invalidProductNames.push(t.product.displayName)},b.prototype.createCurrentProfileOrder=function(){var e=this,r={incomplete:!0};if(e.items()&&e.items().length>0&&!e.isOrderSubmissionInProgress){var i=e.events.pop(),a=new R(e);e.populateGiftCards(a,i),e.adapter.persistCreate("order","0",a,r,function(r){e.isPricingRequired(!1),e.updateCart(r,i,!1),e.shippingMethod()?(e.skipGWPMessage=!0,e.populateShipppingMethods()):e.updateCart(r,i,!1,!0),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish(),e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof e.callbacks[c.PRICING_SUCCESS_CB]&&e.callbacks[c.PRICING_SUCCESS_CB](r)},function(t){t.status==c.HTTP_UNAUTHORIZED_ERROR?e.handleSessionExpiry(i):(t.errorCode==c.COUPON_APPLY_ERROR?e.handleCouponPricingError(t,i):t.errorCode==c.GIFTCARD_APPLY_ERROR||t.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||t.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||t.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR?e.handleGiftCardError(t):t.errorCode!=c.CREATE_ORDER_PRODUCT_NOT_FOUND&&t.errorCode!=c.CREATE_ORDER_SKU_NOT_FOUND&&t.errorCode!=c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE||(e.handleInvalidAddItem(t,i),e.notifyInvalidProducts()),e.loadCart()),e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof e.callbacks[c.PRICING_SUCCESS_CB]&&e.callbacks[c.PRICING_SUCCESS_CB](t)})}else e.isOrderSubmissionInProgress&&console.warn(o.t("ns.common:resources.priceOrderBlockedText"))},b.prototype.removeCurrentProfileOrder=function(){var e=this;e.adapter.persistRemove("order",e.user().orderId(),null,function(t){e.user().orderId(""),e.user().persistedOrder(null),e.user().setLocalData("orderId")},function(t){e.loadCart()})},b.prototype.addCoupon=function(e){var t=this;if(e){var r=t.getCookieDataAndCompare(),i=new T(e,"","","","");t.events.push(new O(M,1,i)),r&&!t.isMatchingCookieData()?t.getLocalData(r):t.addCouponToCart(i)}},b.prototype.addGiftCard=function(e){var t=this;e.giftCardNumber&&e.giftCardPin&&(t.giftCards.push(e),t.currentOrderState()==c.PENDING_PAYMENTS||t.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?t.pendingPaymentGiftCardCheck(e):(t.events.push(new O(U,0,e)),t.markDirty()))},b.prototype.pendingPaymentGiftCardCheck=function(e){for(var t=this,r="inquireBalance",i=[],a={},o=0;o<t.giftCards().length;o++){var n=t.giftCards()[o],a={};a.paymentMethodType=c.GIFT_CARD_PAYMENT_TYPE,a.giftCardNumber=n.giftCardNumber(),a.giftCardPin=n.giftCardPin(),null!=a.giftCardPin&&void 0!=a.giftCardPin&&""!=a.giftCardPin&&i.push(a)}var s={};s.orderId=t.currentOrderId(),s.op=r,s.profileId=t.user().id?t.user().id():t.user().customerId(),s.payments=i;var l="addPayments";h.request(l,s,function(e){t.updateGiftCardDetailsForPendingPayment(e)},function(r){t.handleGiftCardErrorPendingPayment(r,e)})},b.prototype.updateGiftCardDetailsForPendingPayment=function(e){var r=this;if(e.paymentResponses&&r.giftCards().length>0)for(var i=0;i<r.giftCards().length;i++){for(var a=!1,o=r.giftCards()[i],n=0;n<e.paymentResponses.length;n++){var c=e.paymentResponses[n];if(o.giftCardNumber()==c.giftCardNumber){o.amountInGiftCard(c.balance),e.amountRemaining>=parseFloat(c.balance)?(o.amountUsed(parseFloat(c.balance)),o.isAmountRemaining(!1),e.amountRemaining=parseFloat(e.amountRemaining)-parseFloat(c.balance)):(o.amountUsed(parseFloat(e.amountRemaining)),o.isAmountRemaining(!0),e.amountRemaining=0),o.maskedGiftCardNumber(c.maskedCardNumber),o.isApplyGiftCardClicked(!1),a=!0;break}}0==a?o.isPinCleared(!0):o.isPinCleared(!1)}s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(r.giftCards()),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING).publish(e.amountRemaining),s.Topic(t.topicNames.CART_UPDATED_PENDING_PAYMENT).publish(r)},b.prototype.pendingPaymentRemoveGiftCard=function(e){var r=this;s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(r.giftCards()),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING_PENDING_PAYMENT).publish(e.amountUsed()),s.Topic(t.topicNames.CART_UPDATED_PENDING_PAYMENT).publish(r)},b.prototype.handleGiftCardErrorPendingPayment=function(e,r){var i=this;i.giftCards.remove(function(e){return e.giftCardNumber()==r.giftCardNumber()}),s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(i.giftCards()),s.Topic(t.topicNames.GIFTCARD_PRICING_FAILED).publish(e,r),i.isDirty(!1)},b.prototype.clearPins=function(){for(var e=this,r=0;r<e.giftCards().length;r++){var i=e.giftCards()[r];i.giftCardPin(""),i.isPinCleared(!0),i.isApplyGiftCardClicked(!1)}s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(e.giftCards())},b.prototype.reApplyGiftCardPins=function(e){var t=this;t.currentOrderState()==c.PENDING_PAYMENTS||t.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?t.pendingPaymentGiftCardCheck(e):(t.events.push(new O(F,0,e)),t.markDirty())},b.prototype.removeGiftCard=function(e){var t=this;t.giftCards.remove(function(t){return t.giftCardNumber()==e.giftCardNumber()}),t.currentOrderState()==c.PENDING_PAYMENTS||t.currentOrderState()==c.PENDING_PAYMENT_TEMPLATE?t.pendingPaymentRemoveGiftCard(e):(t.events.push(new O(x,0,e)),t.markDirty())},b.prototype.addCouponToCart=function(e){var t=this;t.coupons.push(e),t.couponMultiPromotions.push(new S(e.code())),t.markDirty()},b.prototype.removeCoupon=function(e){var t=this;if(e.code){var r=t.getCookieDataAndCompare();t.events.push(new O(k,0,e)),r&&!t.isMatchingCookieData()?t.getLocalData(r):t.removeCouponFromCart(e)}},b.prototype.removeCouponFromCart=function(e){var t=this;t.coupons.remove(function(t){return t.code()==e.code()}),t.couponMultiPromotions.remove(function(t){return t.code()==e.code()}),t.markDirty()},b.prototype.handleSessionExpiry=function(e){var t=this;if(e&&e.type===D){var i=e.product,a=t.addToCart.bind(i);a()}else e&&(e.type===L||e.type===w||e.type===M||e.type===k)&&l.isPathEqualTo(t.cartLink)?(r.sendError(j,o.t("ns.common:resources.cartSessionExpired"),!0),t.user().clearUserData()):e&&(e.type===M||e.type===k)&&l.isPathEqualTo(t.checkoutLink)&&(t.isDirty(!1),t.markDirty())},b.prototype.handleCouponPricingError=function(e,t){var i=this;e.message&&t&&t.type===M&&i.coupons()[i.coupons().length-1].code()==e.moreInfo?i.couponErrorMessage(e.message):!e.message||t&&t.type==M||r.sendError(j,o.t("ns.common:resources.orderPricingPromotionError"),!0),e.moreInfo&&(i.isDirty(!1),i.coupons.remove(function(t){return t.code()==e.moreInfo}),i.couponMultiPromotions.remove(function(t){return t.code()==e.moreInfo}),i.markDirty())},b.prototype.handleCurrencyPricingError=function(){var t=this;t.cartPriceListGroupId(d.getInstance().selectedPriceListGroup().id),h.setStoredValue(c.LOCAL_STORAGE_PRICELISTGROUP_ID,e.toJSON(d.getInstance().selectedPriceListGroup().id)),t.isDirty(!1),t.markDirty()},b.prototype.priceItems=function(){var e=this,i=e.events.pop(),a=new R(e);e.populateGiftCards(a,i),e.adapter.persistCreate(c.ENDPOINT_ORDERS_PRICE_ORDER,"0",a,function(r){e.isPricingRequired(!1),e.updateCart(r,i,!1),e.callPriceBeforeShippingMethods&&e.populateShipppingMethods(),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish(),e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_SUCCESS_CB)&&"function"==typeof e.callbacks[c.PRICING_SUCCESS_CB]&&e.callbacks[c.PRICING_SUCCESS_CB](r)},function(t){t.errorCode==c.SELECTED_CURRENCY_NOT_FOUND?e.handleCurrencyPricingError():t.errorCode==c.COUPON_APPLY_ERROR?e.handleCouponPricingError(t,i):t.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||t.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND||t.errorCode==c.PRODUCT_NOT_FOR_INDIVIDUAL_SALE?(e.handleInvalidAddItem(t,i),e.notifyInvalidProducts(),e.loadCart(),e.tax(0)):t.errorCode==c.GIFTCARD_APPLY_ERROR||t.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||t.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||t.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR?e.handleGiftCardError(t,i):t.errorCode==c.ANONYMOUS_USER_ACCESS_CONTROL_ERROR?r.sendError("UserNotAuthorized",o.t("ns.common:resources.anonymousAccessControlError"),!0):e.tax(0),e.callbacks&&e.callbacks.hasOwnProperty(c.PRICING_FAILURE_CB)&&"function"==typeof e.callbacks[c.PRICING_FAILURE_CB]&&e.callbacks[c.PRICING_FAILURE_CB](t)})},b.prototype.hasSingleShippingInformation=function(){var e=!1;return this.isSplitShipping()||(e=""!==this.shippingAddress()&&""!==this.shippingMethod()),e},b.prototype.hasSplitShippingInformation=function(){var e=!1;return this.isSplitShipping()&&(e=this.items().every(function(e){return e.shippingGroupRelationships.isValid()&&e.shippingGroupRelationships().every(function(e){return e.shippingAddress()&&e.shippingMethod()})})),e},b.prototype.hasShippingInformation=function(){var e=this.hasSplitShippingInformation()||this.hasSingleShippingInformation();return e},b.prototype.setUnpricedErrorAndSaveCart=function(t,r){var i=this;e.utils.arrayForEach(i.items(),function(e){e.commerceItemId==t&&e.childItems&&e.childItems.length>0&&e.setUnpricedError(r)}),i.saveCartCookie()},b.prototype.clearAllUnpricedErrorsAndSaveCart=function(){var t=this;e.utils.arrayForEach(t.items(),function(e){e.clearUnpricedError()}),t.saveCartCookie()},b.prototype.setExternalPricesForItems=function(t){var r=this;e.utils.arrayForEach(r.items(),function(e){t.commerceItemId==e.commerceItemId&&e.externalPrice(t.externalPrice)})},b.prototype.priceCartForCheckout=function(){var r=this,i=r.events.pop();if(r.hasShippingInformation()&&!r.isOrderSubmissionInProgress){var a=new R(r);this.isSplitShipping()?a.shippingGroups=this.createShippingGroups():(a.shippingMethod={value:this.shippingMethod()},a.shippingAddress=this.shippingAddress(),this.user().emailAddress()&&!e.utils.unwrapObservable(a.shippingAddress.email)?a.shippingAddress.email=this.user().emailAddress():this.user().loggedIn()||!this.emailAddressForGuestUser||e.utils.unwrapObservable(a.shippingAddress.email)&&a.shippingAddress.email==this.emailAddressForGuestUser||(a.shippingAddress.email=this.emailAddressForGuestUser)),a.populateShippingMethods=!0,r.populateGiftCards(a,i),r.items().length>0?this.currentOrderState()!=c.PENDING_PAYMENTS&&this.currentOrderState()!=c.PENDING_PAYMENT_TEMPLATE&&(r.user()&&r.user().loggedIn()&&!r.user().loggedinAtCheckout()?(a.checkout=!0,a.clearCoupons=!1,a.merge=!1,r.adapter.persistUpdate("order",r.user().orderId(),a,function(e){r.isPricingRequired(!1),r.updateCart(e,i,!1),s.Topic(t.topicNames.ORDER_PRICING_SUCCESS).publish([{message:"success"}]),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish()},function(e){e.errorCode==c.SELECTED_CURRENCY_NOT_FOUND?r.handleCurrencyPricingError():e.errorCode==c.COUPON_APPLY_ERROR?r.handleCouponPricingError(e,i):e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND?(r.loadCart(),r.tax(0)):e.errorCode==c.GIFTCARD_APPLY_ERROR||e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||e.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||e.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR?r.handleGiftCardError(e,i):e.errorCode==c.INVALID_SHIPPING_METHOD&&r.usingImprovedShippingWidgets()?r.populateShipppingMethods():(r.shippingMethod(""),r.loadCart(),r.tax(0),s.Topic(t.topicNames.ORDER_PRICING_FAILED).publishWith(e)),s.Topic(t.topicNames.DESTROY_SHIPPING_METHODS_SPINNER).publishWith(e)})):r.adapter.loadJSON("orderPricing","0",a,function(e){r.isPricingRequired(!1),r.updateCart(e,i,!1),s.Topic(t.topicNames.ORDER_PRICING_SUCCESS).publish([{message:"success"}]),s.Topic(t.topicNames.COUPON_ADD_CLEAR_INPUT).publish()},function(e){e.errorCode==c.SELECTED_CURRENCY_NOT_FOUND?r.handleCurrencyPricingError():e.errorCode==c.COUPON_APPLY_ERROR?r.handleCouponPricingError(e,i):e.errorCode==c.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==c.CREATE_ORDER_SKU_NOT_FOUND?(r.loadCart(),r.tax(0)):e.errorCode==c.GIFTCARD_APPLY_ERROR||e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR||e.errorCode==c.INVALID_GIFTCARD_DATA_ERROR||e.errorCode==c.GIFTCARD_ORDER_PROCESSING_ERROR?r.handleGiftCardError(e,i):e.errorCode==c.INVALID_SHIPPING_METHOD&&r.usingImprovedShippingWidgets()?r.populateShipppingMethods():(r.shippingMethod(""),r.loadCart(),r.tax(0),s.Topic(t.topicNames.ORDER_PRICING_FAILED).publishWith(e)),s.Topic(t.topicNames.DESTROY_SHIPPING_METHODS_SPINNER).publishWith(e)})):(r.emptyCart(),s.Topic(t.topicNames.ORDER_PRICING_FAILED).publish(),r.user()&&r.user().loggedIn()&&!r.user().loggedinAtCheckout()&&r.removeCurrentProfileOrder())}else r.isOrderSubmissionInProgress&&console.warn(o.t("ns.common:resources.priceOrderBlockedText"))},b.prototype.handleGiftCardError=function(e,r){var i=this,a=r.product;r.type===U?i.giftCards.remove(function(e){return e.giftCardNumber()==a.giftCardNumber()}):r.type===F&&e.errorCode==c.GIFTCARD_INSUFFICIENT_ERROR&&(i.giftCards.remove(function(e){return e.giftCardNumber()==a.giftCardNumber()}),s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(i.giftCards()),i.isDirty(!1),i.isDirty(!0)),s.Topic(t.topicNames.GIFTCARD_PRICING_FAILED).publish(e,a,r),i.isDirty(!1)},b.prototype.updateCart=function(e,r,i,a){var o=this;(i||o.items().length>0)&&(o.updateCartData(e,i,a),o.updateGiftCardDetails(e,r),o.updateDynamicProperties(e),o.cartUpdated(),s.Topic(t.topicNames.CART_PRICE_COMPLETE).publish(),r&&r.type===D?s.Topic(t.topicNames.CART_ADD_SUCCESS).publish(r.product):r&&r.type===L?s.Topic(t.topicNames.CART_UPDATE_SUCCESS).publish():r&&r.type===M?s.Topic(t.topicNames.COUPON_APPLY_SUCCESSFUL).publish():r&&r.type===k&&s.Topic(t.topicNames.COUPON_DELETE_SUCCESSFUL).publish())},b.prototype.updateGiftCardDetails=function(e,i){var a=this,n=[];if(e.payments&&a.giftCards().length>0){for(var l=0;l<a.giftCards().length;l++){for(var u=!1,d=a.giftCards()[l],p=0;p<e.payments.length;p++){var h=e.payments[p];if(h.paymentMethod==c.GIFT_CARD_PAYMENT_TYPE&&d.giftCardNumber()==h.giftCardNumber){d.amountInGiftCard(h.balance),d.amountUsed(h.amount),d.isAmountRemaining(h.isAmountRemaining),d.maskedGiftCardNumber(h.maskedCardNumber),d.isApplyGiftCardClicked(!1),u=!0;break}}i&&i.product&&i.product.giftCardNumber&&i.product.giftCardNumber()===d.giftCardNumber()&&d.isPinCleared(!1),0==u&&n.push(d)}for(var f=0;f<n.length;f++)a.giftCards.remove(function(e){return e.giftCardNumber()==n[f].giftCardNumber()});n&&n.length>0&&r.sendError(j,o.t("ns.common:resources.orderPricingPromotionError"),!0)}s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).publish(a.giftCards()),a.updateRemainingAmount(e)},b.prototype.updateRemainingAmount=function(e){var r=this,i=null;if(e.payments&&r.giftCards().length>0)for(var a=0;a<e.payments.length;a++){var o=e.payments[a];if(1==o.isAmountRemaining){i=o.paymentMethod==c.GIFT_CARD_PAYMENT_TYPE?0:o.amount;break}}s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING).publish(i);
},b.prototype.updateCartData=function(e,t,r){var i=this;e&&(e.orderId||e.id)&&(e.orderId?i.user().orderId(e.orderId):e.id&&i.user().orderId(e.id),i.user().setLocalData("orderId"));var a=null;if(e.priceListGroup&&e.priceListGroup.currency&&(i.currency=e.priceListGroup.currency),a=e.order&&(i.currentOrderId()||i.mergeCart())?_(e.order.items,i.items,t,i,e,r):_(e.shoppingCart.items,i.items,t,i,e,r),e.order&&(i.currentOrderId()||i.mergeCart())?i.numberOfItems(e.order.numberOfItems):i.numberOfItems(e.shoppingCart.numberOfItems),i.total(e.priceInfo.total),i.totalWithoutTax(e.priceInfo.totalWithoutTax),i.subTotal(e.priceInfo.subTotal),i.shipping(e.priceInfo.shipping),i.tax(e.priceInfo.tax),i.currencyCode(e.priceInfo.currencyCode),i.shippingSurcharge(e.priceInfo.shippingSurchargeValue),e.discountInfo){e.discountInfo.orderDiscount?i.orderDiscount(e.discountInfo.orderDiscount):i.orderDiscount(0),e.discountInfo.shippingDiscount?i.shippingDiscount(e.discountInfo.shippingDiscount):i.shippingDiscount(0),e.discountInfo.orderImplicitDiscountList&&i.orderDiscountDescList(e.discountInfo.orderImplicitDiscountList),e.discountInfo.unclaimedCouponsMap&&i.populateCoupons(e.discountInfo.unclaimedCouponsMap,c.COUPON_STATUS_UNCLAIMED),e.discountInfo.orderCouponsMap&&i.populateCoupons(e.discountInfo.orderCouponsMap,c.COUPON_STATUS_CLAIMED),i.couponMultiPromotions.splice(0),e.discountInfo.unclaimedCouponMultiPromotions&&i.populateCouponMultiPromotions(e.discountInfo.unclaimedCouponMultiPromotions,c.COUPON_STATUS_UNCLAIMED,c.PROMOTION_NOT_APPLIED),e.discountInfo.claimedCouponMultiPromotions&&i.populateCouponMultiPromotions(e.discountInfo.claimedCouponMultiPromotions,c.COUPON_STATUS_CLAIMED,c.PROMOTION_APPLIED),i.populateClaimedCouponMultiPromotions(i.couponMultiPromotions());for(var o=i.coupons().length-1;o>=0;o--)e.discountInfo.orderCouponsMap.hasOwnProperty(i.coupons()[o].code())||e.discountInfo.unclaimedCouponsMap.hasOwnProperty(i.coupons()[o].code())||i.coupons.splice(o,1);e.shippingGroups?i.orderShippingGroups(e.shippingGroups):i.shippingDiscount([])}i.amount(e.priceInfo.amount),i.skipGWPMessage||i.sendGWPMessages(e),i.skipGWPMessage=!1,i.giftWithPurchaseOrderMarkers=e.giftWithPurchaseOrderMarkers,i.placeHolderItems.removeAll(),e.giftWithPurchaseInfo&&e.giftWithPurchaseInfo.length&&i.updatePlaceHolderItems(e.giftWithPurchaseInfo);for(var o=0;o<i.items().length;o++)if(null==i.items()[o].productData()){i.getProductData();break}return a},b.prototype.addGiftDataToItem=function(e,t){if(e.discountInfo().length){var r=e.discountInfo();e.giftData=[];for(var i=0;i<r.length;i++)if(r[i].giftWithPurchaseDiscountInfo&&r[i].giftWithPurchaseDiscountInfo.length)for(var a=0;a<r[i].giftWithPurchaseDiscountInfo.length;a++){var o=r[i].giftWithPurchaseDiscountInfo[a];if(o.giftWithPurchaseChoicesAvailable)for(var n=o.giftWithPurchaseIdentifier,s=0;s<t.giftWithPurchaseInfo.length;s++)if(t.giftWithPurchaseInfo[s].giftWithPurchaseIdentifier==n&&t.giftWithPurchaseInfo[s].promotionId==r[i].promotionId){var c={};c.giftWithPurchaseType=t.giftWithPurchaseInfo[s].giftWithPurchaseType,c.giftWithPurchaseDetail=t.giftWithPurchaseInfo[s].giftWithPurchaseDetail,c.promotionId=t.giftWithPurchaseInfo[s].promotionId,c.giftWithPurchaseIdentifier=t.giftWithPurchaseInfo[s].giftWithPurchaseIdentifier,c.giftWithPurchaseQuantity=o.giftWithPurchaseQuantity,e.giftData.push(c),e.isGWPChoicesAvaliable(!0);break}}}},b.prototype.updatePlaceHolderItems=function(e){for(var t=this,r=0;r<e.length;r++)if(e[r].giftWithPurchaseQuantityAvailableForSelection){var i=e[r].giftWithPurchaseQuantityAvailableForSelection;if(i){var a=e[r];a.displayName=o.t("ns.common:resources.freeProductText"),a.imageData={primaryThumbImageURL:"/img/GWP_GiftWithPurchase.jpg",primaryImageAltText:a.displayName,primaryImageTitle:a.displayName},a.quantity=1,a.itemTotal=0,a.quantityDisabled=!0,a.id=Math.floor(1e4*Math.random()),a.isPlaceHolderItem=!0}for(;i;)t.placeHolderItems.push(a),i--}t.numberOfItems(t.numberOfItems()+t.placeHolderItems().length)},b.prototype.removePlaceHolderFromCart=function(e){var r=this;r.placeHolderItems.remove(e),r.allItems.remove(e),s.Topic(t.topicNames.CART_REMOVE_SUCCESS).publishWith([{message:"success"}]),r.numberOfItems(r.numberOfItems()-1)},b.prototype.sendGWPMessages=function(e){var i=this;if(r.clearError(Y),i.gwpQualified&&(s.Topic(t.topicNames.GWP_CLEAR_QUALIFIED_MESSAGE).publish(),i.gwpQualified=!1),e.pricingMessages&&e.pricingMessages.giftWithPurchaseMessages&&e.pricingMessages.giftWithPurchaseMessages.length)for(var a=e.pricingMessages.giftWithPurchaseMessages,o=!1,n=!1,c=null,l=0;l<a.length;l++)"GWPFullFailure"!=a[l].identifier||n?"GWPQualified"!=a[l].identifier||i.gwpQualified?"GWPInvalidated"!=a[l].identifier||o||(r.sendError(Y,a[l].summary,!0),o=!0,s.Topic(t.topicNames.GWP_INVALIDATED_MESSAGE).publish(a[l])):c==a[l].params[0]?(s.Topic(t.topicNames.GWP_CLEAR_QUALIFIED_MESSAGE).publish(),i.gwpQualified=!1,c=null):(s.Topic(t.topicNames.GWP_QUALIFIED_MESSAGE).publish(a[l]),i.gwpQualified=!0,c=a[l].params[0]):(r.sendError(Y,a[l].summary,!0),n=!0,a[l].params[0]==c?(s.Topic(t.topicNames.GWP_CLEAR_QUALIFIED_MESSAGE).publish(),i.gwpQualified=!1,c=null):c=a[l].params[0],s.Topic(t.topicNames.GWP_FAILURE_MESSAGE).publish(a[l]))},b.prototype.populateCoupons=function(e,t){var r=this,i=[],a=!1,o=r.coupons().length;for(var n in e){for(var s=0;s<o;s++)if(n==r.coupons()[s].code()){r.coupons()[s].description(e[r.coupons()[s].code()].promotionDesc),r.coupons()[s].status(t),r.coupons()[s].level(e[r.coupons()[s].code()].promotionLevel),r.coupons()[s].id(e[r.coupons()[s].code()].promotionId),r.coupons()[s].totalAdjustment(e[r.coupons()[s].code()].totalAdjustment),a=!0;break}a||i.push(new T(n,e[n].promotionDesc,t,e[n].promotionLevel,e[n].promotionId,e[n].totalAdjustment))}for(var s=0;s<i.length;s++)r.coupons.push(i[s])},b.prototype.populateCouponMultiPromotions=function(e,t,r){var i=this,a=[],o=!1,n=i.couponMultiPromotions().length;for(var s in e){o=!1;for(var c=0;c<n;c++)if(s==i.couponMultiPromotions()[c].code()){i.couponMultiPromotions()[c].couponStatus(t),i.couponMultiPromotions()[c].populateCouponData(e[s],r),o=!0;break}o||a.push(new S(s,e[s],t,r))}for(var c=0;c<a.length;c++)i.couponMultiPromotions.push(a[c])},b.prototype.populateClaimedCouponMultiPromotions=function(t){var r=this;r.claimedCouponMultiPromotions.splice(0);for(var i=0;i<t.length;i++)if(t[i].couponStatus()===c.COUPON_STATUS_CLAIMED){for(var a=[],o=0;o<t[i].promotions().length;o++)t[i].promotions()[o].promotionApplied()&&a.push(e.mapping.toJS(t[i].promotions()[o]));r.claimedCouponMultiPromotions.push(new S(t[i].code(),a,c.COUPON_STATUS_CLAIMED,c.PROMOTION_APPLIED))}},b.prototype.populateShippingMethodsForShippingGroup=function(t,r,i){var a=this,o={};o.shoppingCart={},o.shoppingCart.items=[],o.shoppingCart.items.push({catRefId:t.catRefId,productId:t.productId,quantity:t.quantity()}),a.adapter.persistCreate(c.ENDPOINT_ORDERS_PRICE_ORDER,"0",o,function(o){var n={},s=t.shippingAddress();if(s){n[c.PRODUCT_IDS_FOR_SHIPPING]=[t.productId],n[c.POPULATE_SHIPPING_METHODS]=!0,n[c.SHIPPING_ADDRESS_FOR_METHODS]=s.toJSON(),n.priceInfo={amount:a.amount(),total:a.total(),shipping:a.shipping(),totalWithoutTax:a.totalWithoutTax(),currencyCode:a.currencyCode(),shippingSurchargeValue:a.shippingSurcharge(),tax:a.tax(),subTotal:a.subTotal()};var l=e.observableArray();_(o.shoppingCart.items,l,!0),n.items=l(),t.shippingOptions.removeAll(),a.adapter.persistCreate(c.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS,"id",n,function(e){r(e)},function(e){i(e)})}},function(e){i(e)})},b.prototype.events=new Array,b.prototype.validateCartAvailability=function(){var e=this;if(e.items().length>0){var t=new C(e),r={};r[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,r[c.IDENTIFIER_KEY]="stockStatsToValidateCart";var i=e.storeConfiguration.getFilterToUse(r);return i&&(t[c.FILTER_KEY]=i),e.adapter.loadJSON("getStockStatuses","0",t,function(t){e.validateCartForCheckout(t)},function(t){e.redirect(e.cartLink),e.notifyInvalidProducts("cart")}),!1}return!0},b.prototype.validateCartForCheckout=function(e){for(var t=this,r=0;r<t.items().length;r++)if(t.items()[r].childItems)t.items()[r].addConfigurableStockValidation(e);else for(var i=0;i<e.length;i++)if(t.items()[r].productId===e[i].productId&&t.items()[r].catRefId===e[i].catRefId){"IN_STOCK"===e[i].stockStatus?t.items()[r].addLimitsValidation(!0,e[i].orderableQuantity):t.items()[r].addLimitsValidation(!1,e[i].orderableQuantity);break}for(var r=0;r<t.items().length;r++)for(var i=0;i<e.length;i++)if(t.items()[r].productId===e[i].productId&&t.items()[r].catRefId===e[i].catRefId){if(!("IN_STOCK"===e[i].stockStatus&&t.items()[r].quantity()<=e[i].orderableQuantity))return t.redirect(t.cartLink),void t.checkoutWithPaypalClicked(!1);break}t.checkoutWithPaypalClicked()?t.redirect(c.PAYPAL_CHECKOUT_TYPE):(t.redirect(t.checkoutLink),t.notifyInvalidProducts("checkout"))},b.prototype.redirect=function(e){var r=this;r.validateAndRedirectCart()||(r.checkoutLink==e||e==c.PAYPAL_CHECKOUT_TYPE)&&(r.user().loggedIn()||r.user().isUserSessionExpired())?(r.validateAndRedirectCart(!1),e==c.PAYPAL_CHECKOUT_TYPE?r.user().validateAndRedirectPage(e):r.user().validateAndRedirectPage(r.checkoutLink)):l.isPathEqualTo(e)?r.reloadCart():e==c.PAYPAL_CHECKOUT_TYPE?s.Topic(t.topicNames.CONTINUE_TO_PAYPAL).publish():l.goTo(e)},b.prototype.setContext=function(e){this.contextData=e,this.cartLink=this.contextData.global.links.cart.route,this.checkoutLink=this.contextData.global.links.checkout.route,this.isTaxIncluded=this.contextData.global.site.isTaxIncluded,this.showTaxSummary=this.contextData.global.site.showTaxSummary},b.prototype.validateDynamicProperties=function(){for(var e=this,t=0;t<e.dynamicProperties().length;t++){var r=e.dynamicProperties()[t];if(!r.validateNow())return!1}return!0},b.prototype.updateDynamicProperties=function(e){var t=this;if(e.dynamicProperties&&t.dynamicProperties){for(var r=!1,i=0;i<e.dynamicProperties.length;i++){for(var a=!1,o=0;o<t.dynamicProperties().length;o++)if(e.dynamicProperties[i].id===t.dynamicProperties()[o].id()){t.dynamicProperties()[o].value(e.dynamicProperties[i].value),a=!0;break}if(!a){r=!0;var n=new p;n.id(e.dynamicProperties[i].id),n.value(e.dynamicProperties[i].value),t.dynamicProperties.push(n)}}r&&t.getDynamicPropertiesMetadata(!1)}},b.prototype.updateItemDynamicProperties=function(t,r){if(r.dynamicProperties)for(var i=0;i<r.dynamicProperties.length;i++)t[r.dynamicProperties[i].id]=e.observable(r.dynamicProperties[i].value)},b.prototype.populateDynamicProperties=function(e){for(var t=this,r=0;r<t.dynamicProperties().length;r++){var i=t.dynamicProperties()[r],a=i.id(),o=i.value();e[a]=o}},b.prototype.getDynamicPropertiesMetadata=function(e){var t=this,r=!0;if(e){var i=null;try{i=t.getStorageItem("cartDynPropsMetadata"),i&&(i=JSON.parse(i),t.processDynamicPropertiesMetadata(i,!1),r=!1)}catch(e){}}if(r){var a={},o={};o[c.ENDPOINT_KEY]=c.ENDPOINT_METADATA_GET_METADATA,o[c.IDENTIFIER_KEY]="dynamicProperties";var n=t.storeConfiguration.getFilterToUse(o);n&&(a[c.FILTER_KEY]=n),t.adapter.loadJSON("dynamicProperties","order",a,function(e){e&&t.processDynamicPropertiesMetadata(e,!0)},function(e){})}},b.prototype.getItemDynamicPropertiesMetadata=function(e){var t=this;t.adapter.loadJSON(c.ENDPOINT_GET_ITEM_TYPE,e,null,function(r){r&&t.processItemDynamicPropertiesMetadata(r,e)},function(e){})},b.prototype.processDynamicPropertiesMetadata=function(e,t){for(var r=this,i=[],a=0;a<e.length;a++){for(var o=!0,n=0;n<r.dynamicProperties().length&&o;n++)e[a].id===r.dynamicProperties()[n].id()&&(o=!1,r.dynamicProperties()[n].initializeMetadata(e[a],!1));if(o){var s=new p;s.initializeMetadata(e[a],!0),i.push(s)}}for(var a=0;a<i.length;a++)r.dynamicProperties.push(i[a]);if(t)try{for(var c=new Array,a=0;a<r.dynamicProperties().length;a++)c.push(r.dynamicProperties()[a].getMetadata());var l=JSON.stringify(c);r.setStorageItem("cartDynPropsMetadata",l,10800)}catch(e){}},b.prototype.processItemDynamicPropertiesMetadata=function(e,t){var r=this,i=[];if(t==c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM){for(var a=0;a<e.specifications.length;a++){for(var o=!0,n=0;n<r.lineAttributes().length&&o;n++)e.specifications[a].id===r.lineAttributes()[n].id()&&(o=!1,r.lineAttributes()[n].initializeMetadata(e.specifications[a],!1));if(o){var s=new p;s.initializeMetadata(e.specifications[a],!0),i.push(s)}}for(var a=0;a<i.length;a++)r.lineAttributes.push(i[a])}},b.prototype.setStorageItem=function(e,t,r){void 0!==r&&null!==r||(r=3600);var i=new Date,a=Math.round(i.setSeconds(i.getSeconds()+r)/1e3);u.getInstance().setItem(e,t),u.getInstance().setItem(e+"_time",a)},b.prototype.getStorageItem=function(e){var t=new Date,r=Math.round(t/1e3),i=u.getInstance().getItem(e),a=u.getInstance().getItem(e+"_time");return void 0!==a&&null!==a||(a=0),a<r?(this.removeStorageItem(e),null):i},b.prototype.removeStorageItem=function(e){u.getInstance().removeItem(e),u.getInstance().removeItem(e+"_time")},b.prototype.setCallbackFunctions=function(e){var t=this;if(e&&Object.keys(e)&&Object.keys(e).length>0)for(var r in e)t.callbacks[r]=e[r]},b.prototype.createShippingGroups=function(){var e,t=null;if(this.user().emailAddress()&&(t=this.user().emailAddress()),!this.user().loggedIn()&&this.emailAddressForGuestUser&&(t=this.emailAddressForGuestUser),this.isSplitShipping()){var r=this.items().reduce(function(e,r){if(r.shippingGroupRelationships())for(var i=0;i<r.shippingGroupRelationships().length;i++)r.shippingGroupRelationships()[i].commerceItemId=r.commerceItemId;return r.shippingGroupRelationships().forEach(function(r){var i=r.asMap(t),a=Object.keys(i)[0],o=e[a],n=i[a];if(r.commerceItemId)var c=r.catRefId+"_"+r.commerceItemId;else var c=r.catRefId;var l=o?o.items[c]:void 0,u=n.items[c];l?l.quantity+=u.quantity:s.extend(!0,e,i)}),e},{});e=Object.keys(r).map(function(e){return r[e]}).filter(function(e){if(e.items=Object.keys(e.items).map(function(t){return e.items[t]}).filter(function(e){if(e.quantity>0)return e}),e.items.length)return e})}return e},b.prototype.splitItems=function(e,t,r){var i=this,a=!1;i.combineLineItems=c.COMBINE_NO,i.events.push(new O(V,11,e)),i.removeItem(e);for(var o=0;o<t.length;o++){var n=new v(e.productId,e.productData(),t[o],e.catRefId,e.selectedOptions,i.currency,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e.externalData(),e.actionCode(),i.lineAttributes);n.populateItemDynamicProperties(r[o]),n.isPersonalized(!0),!a&&P(e.discountInfo())&&(n.giftWithPurchaseCommerceItemMarkers=e.giftWithPurchaseCommerceItemMarkers,a=!0),i.items.push(n)}i.markDirty()},b.prototype.addItemToCart=function(e,t,r){function i(e,t,r){var i=[{errorCode:e,catRefId:t,errorMessage:r}];return i}function a(e,t){for(var i=[],a=0;a<t.length;a++){var o={errorCode:t[a].errorCode,catRefId:t[a].catRefId,errorMessage:t[a].errorMessage};i.push(o)}"function"==typeof r&&r(e,i)}var n=this,s=[];if(s.push(e.catalogRefId),e.childItems)for(var l=0;l<e.childItems.length;l++)s.push(e.childItems[l].catalogRefId);var u=new Array(n.catalogId(),s,d.getInstance().selectedPriceListGroup().id),p={},h={};h[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_LIST_SKUS,h[c.IDENTIFIER_KEY]="skuListing";var f=n.storeConfiguration.getFilterToUse(h);f&&(p[c.FILTER_KEY]=f),n.adapter.loadJSON("sku",u,p,function(r){for(var s,l=[],u=[],d=!0,p=0;p<r.length;p++)r[p].parentProducts[0]&&!r[p].parentProducts[0].active&&(u.push(r[p].repositoryId),d=!1);if(d){for(var p=0;p<r.length;p++){var h=r[p];if(h.repositoryId==e.catalogRefId){s=h.parentProducts[0];var f=h;delete f[c.PARENT_PRODUCTS],s.childSKUs=[f],h.productVariantOptions&&h.productVariantOptions.length>0&&(s.selectedOptions=h.productVariantOptions[0]),s.orderQuantity=parseInt(e.quantity),s.itemTotal=e.amount,s.catalogRefId=e.catalogRefId,e.configurationId&&(s.configuratorId=e.configurationId),s.externalData=e.externalData,s.actionCode=e.actionCode}else for(var m=0;m<e.childItems.length;m++)if(h.repositoryId==e.childItems[m].catalogRefId){var g=h.parentProducts[0],f=h;delete f[c.PARENT_PRODUCTS],g.childSKUs=[f],h.productVariantOptions&&h.productVariantOptions.length>0&&(g.selectedOptions=h.productVariantOptions[0]),g.orderQuantity=parseInt(e.childItems[m].quantity),g.catalogRefId=e.childItems[m].catalogRefId,g.externalData=e.childItems[m].externalData,g.actionCode=e.childItems[m].actionCode,l.push(g);break}}e.childItems&&(s.childItems=l);var v=new N(s,n.catalogId()),E={};E[c.ENDPOINT_KEY]=c.ENDPOINT_PRODUCTS_AVAILABILITY,E[c.IDENTIFIER_KEY]="stockStatsForItem";var y=n.storeConfiguration.getFilterToUse(E);y&&(v[c.FILTER_KEY]=y),n.adapter.loadJSON("getStockStatuses","0",v,function(r){for(var l=[],u=!0,d=0;d<r.length;d++)"IN_STOCK"!=r[d].stockStatus&&(l.push(r[d].catRefId),u=!1);if(u){var p=n.getCookieDataAndCompare(),h=n.getCartItemForReconfiguration(s.id,s.childSKUs[0].repositoryId,s.configuratorId);null!==h?n.events.push(new O(H,1,s)):n.events.push(new O(D,1,s)),p&&!n.isMatchingCookieData()?(n.getLocalData(p),0==p.items.length&&n.addItem(s)):n.addItem(s);var f={pricingsuccess:function(e){f&&"function"==typeof t&&(t(s),f=null)},pricingfailure:function(t){f&&(a(e,i(c.PRODUCT_ADD_TO_CART_PRICING_ERROR,"",t.message)),f=null)}};n.setCallbackFunctions(f)}else{for(var m=[],d=0;d<l.length;d++){var g={sku:l[d]},v={errorCode:c.PRODUCT_ADD_TO_CART_OUT_OF_STOCK,catRefId:l[d],errorMessage:o.t("ns.common:resources.skuOutOfStockError",g)};m.push(v)}a(s,m)}},function(t){a(e,i(c.PRODUCT_ADD_TO_CART_INVENTORY_ERROR,"",t.message))})}else{for(var b=[],p=0;p<u.length;p++){var I={sku:u[p]},T={errorCode:c.CREATE_ORDER_SKU_NOT_FOUND,catRefId:u[p],errorMessage:o.t("ns.common:resources.skuNotFoundError",I)};b.push(T)}a(e,b)}},function(t){a(e,i(c.PRODUCT_ADD_TO_CART_GET_SKU_ERROR,"",t.message))})},b.prototype.requestQuote=function(e,t,r,i){var a=this,o={};e&&(o.note=e),t&&(o.orderId=t),a.adapter.persistCreate("requestQuote","0",a.addDynamicProperties(o),null,r,i)},b.prototype.rejectQuote=function(e,t,r,i){var a=this,o={};e&&(o.note=e),t&&(o.orderId=t),a.adapter.persistCreate("rejectQuote","0",o,null,r,i)},b.prototype.addDynamicProperties=function(e){for(var t=this,r=0;r<t.dynamicProperties().length;r++){var i=t.dynamicProperties()[r],a=i.id(),o=null;null!=i.value&&(o=i.value()),e[a]=o}return e},b.getInstance=function(e,t,r,i){return b.singleInstance||(b.singleInstance=new b(e,t,i,r),b.singleInstance.isPricingRequired(!0),b.singleInstance.getItemDynamicPropertiesMetadata(c.ENDPOINT_COMMERCE_ITEM_TYPE_PARAM)),t&&t.items&&(b.singleInstance.updatedFromRepository=!0,b.singleInstance.getLocalData(t)),r&&b.singleInstance.setContext(r),b.singleInstance},b.prototype.loadTemplateOrderItems=function(e){var i=this;if(i.user()&&i.user().loggedIn()&&!i.user().isUserSessionExpired()){var a={},o={};o[c.ENDPOINT_KEY]=c.ENDPOINT_GET_ORDER,o[c.IDENTIFIER_KEY]="templateOrder";var n=i.storeConfiguration.getFilterToUse(o);n&&(a[c.FILTER_KEY]=n),h.request(c.ENDPOINT_GET_ORDER,a,function(e){var a=e.state;a==c.TEMPLATE||a==c.PENDING_APPROVAL_TEMPLATE||a==c.SCHEDULED_ORDER_STATE_REJECTED||a==c.PENDING_PAYMENT_TEMPLATE?(i.mergeItems(e),i.markDirty(),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),s.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).publish(e.shippingMethod.value),i.shippingMethod(e.shippingMethod.value),i.cartUpdated(),i.user().validateAndRedirectPage("/cart")):r.sendError("scheduledOrder","Invalid order state.",!0)},function(e){l.goTo(i.contextData.global.links[404].route)},e)}else l.doLogin(l.getPath(),i.contextData.global.links.home.route)},b.prototype.loadOrderItems=function(e){var r=this;r.mergeItems(e),r.getProductData(),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),s.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).publish(e.shippingMethod.value),r.shippingMethod(e.shippingMethod.value),r.user().validateAndRedirectPage("/cart")},b.setApplication=function(e){q=e},b}),define("viewModels/paymentDetails",["knockout","ccConstants","pubsub"],function(e,t,r){"use strict";function i(a,o){if(i.singleInstance)throw new Error("Cannot instantiate more than one PaymentDetails, use getInstance(pAdapter, data)");var n=this;return n.nameOnCard=e.observable(),n.cardType=e.observable(),n.cardNumber=e.observable(),n.cardCVV=e.observable(),n.endMonth=e.observable(),n.endYear=e.observable(),n.selectedCardType=e.observable(),n.selectedEndMonth=e.observable(),n.selectedEndYear=e.observable(),n.cardTypeList=e.observableArray(),n.cards=null,n.gateways=null,n.payULatamCountryList=null,n.enabledTypes=null,n.monthList=e.observableArray(),n.endYearList=e.observableArray(),n.cardIINPattern=e.observable("[0-9]"),n.cardNumberLength=e.observable("16"),n.cvvLength=e.observable("3"),n.startDateRequired=e.observable(!1),n.endMonthPlaceholderText=e.observable(""),n.endYearPlaceholderText=e.observable(""),n.cardTypePlaceholderText=e.observable(""),n.isCardPaymentDisabled=e.observable(!1),n.isCardEnabledForScheduledOrder=e.observable(!1),n.isGiftCardEnabledForScheduledOrder=e.observable(!1),n.isInvoiceEnabledForScheduledOrder=e.observable(!1),n.isCashEnabledForScheduledOrder=e.observable(!1),n.isPayULEnabledForScheduledOrder=e.observable(!1),n.isPaypalEnabledForScheduledOrder=e.observable(!1),n.isCardEnabledForApproval=e.observable(!1),n.isGiftCardEnabledForApproval=e.observable(!1),n.isInvoiceEnabledForApproval=e.observable(!1),n.isCashEnabledForApproval=e.observable(!1),n.isPayULEnabledForApproval=e.observable(!1),n.isPaypalEnabledForApproval=e.observable(!1),n.isValid=function(){return n.nameOnCard.isValid()&&n.cardType.isValid()&&n.cardNumber.isValid()&&n.cardCVV.isValid()&&n.endMonth.isValid()&&n.endYear.isValid()},n.validatePaymentDetails=function(){return n.nameOnCard.isModified(!0),n.cardType.isModified(!0),n.cardNumber.isModified(!0),n.cardCVV.isModified(!0),n.endMonth.isModified(!0),n.endYear.isModified(!0),n.isValid()},n.resetPaymentDetails=function(e){n.nameOnCard(null),n.selectedCardType(null),n.cardType(void 0),n.cardNumber(null),n.cardCVV(null),n.selectedEndMonth(void 0),n.selectedEndYear(void 0),n.endMonth(null),n.endYear(null),n.nameOnCard.isModified&&n.nameOnCard.isModified(!1),n.cardType.isModified&&n.cardType.isModified(!1),n.cardNumber.isModified&&n.cardNumber.isModified(!1),n.cardCVV.isModified&&n.cardCVV.isModified(!1),n.endMonth.isModified&&n.endMonth.isModified(!1),n.endYear.isModified&&n.endYear.isModified(!1)},n.resetCVV=function(){n.cardCVV.isModified&&n.cardCVV.isModified(!1),n.cardCVV("")},n.populatePaymentData=function(r){n.cardTypeList=e.observableArray(r.cards),n.cards=r.cards,n.gateways=r.gateways,n.payULatamCountryList=r.payULatamCountryList,n.cashPaymentCountryList=r.cashPaymentCountryList,n.enabledTypes=r.enabledTypes;for(var i=0;i<r.scheduledOrderEnabledGateways.length;i++)r.scheduledOrderEnabledGateways[i]===t.CARD_PAYMENT_TYPE&&n.isCardEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[i]===t.GIFT_CARD_PAYMENT_TYPE&&n.isGiftCardEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[i]===t.INVOICE_PAYMENT_TYPE&&n.isInvoiceEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[i]===t.CASH_PAYMENT_TYPE&&n.isCashEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[i]===t.PAYULATAM_CHECKOUT_TYPE&&n.isPayULEnabledForScheduledOrder(!0),r.scheduledOrderEnabledGateways[i]===t.PAYPAL_PAYMENT_TYPE&&n.isPaypalEnabledForScheduledOrder(!0);for(var i=0;i<r.approvalEnabledGateways.length;i++)r.approvalEnabledGateways[i]===t.CARD_PAYMENT_TYPE&&n.isCardEnabledForApproval(!0),r.approvalEnabledGateways[i]===t.GIFT_CARD_PAYMENT_TYPE&&n.isGiftCardEnabledForApproval(!0),r.approvalEnabledGateways[i]===t.INVOICE_PAYMENT_TYPE&&n.isInvoiceEnabledForApproval(!0),r.approvalEnabledGateways[i]===t.CASH_PAYMENT_TYPE&&n.isCashEnabledForApproval(!0),r.approvalEnabledGateways[i]===t.PAYULATAM_CHECKOUT_TYPE&&n.isPayULEnabledForApproval(!0),r.approvalEnabledGateways[i]===t.PAYPAL_PAYMENT_TYPE&&n.isPaypalEnabledForApproval(!0)},n.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");n.customProperties=e.mapping.fromJS(r)},$.Topic(r.topicNames.ORDER_SUBMISSION_SUCCESS).subscribe(this.resetPaymentDetails),$.Topic(r.topicNames.USER_LOGOUT_SUBMIT).subscribe(this.resetPaymentDetails),$.Topic(r.topicNames.USER_SESSION_RESET).subscribe(this.resetPaymentDetails),$.Topic(r.topicNames.ORDER_SUBMISSION_FAIL).subscribe(this.resetCVV),n}return i.getInstance=function(e,t){return i.singleInstance||(i.singleInstance=new i(e,t)),t&&i.singleInstance.populatePaymentData(t),i.singleInstance},i}),define("viewModels/giftCardViewModel",["knockout","ccConstants","koValidate","ccKoValidateRules","storeKoExtensions","CCi18n","pageLayout/site","viewModels/paymentDetails"],function(e,t,r,i,a,o,n,s){"use strict";function c(){var r=this;if(r.giftCardNumber=e.observable(""),r.maskedGiftCardNumber=e.observable(""),r.giftCardPin=e.observable(""),r.amountInGiftCard=e.observable(""),r.paymentGroupId=e.observable(""),r.amountUsed=e.observable(0),r.isAmountRemaining=e.observable(!1),r.GIFTCARD_PIN_MAX_LENGTH=e.observable(4),r.GIFTCARD_NUMBER_MAX_LENGTH=e.observable(19),r.isPinCleared=e.observable(!1),r.isApplyGiftCardClicked=e.observable(!1),r.IS_GIFT_CARD_PIN_REQUIRED=e.observable(!0),c.prototype.setGiftCardNumberMaxLength=function(e){if(e){var t=this;t.GIFTCARD_NUMBER_MAX_LENGTH(e),t.giftCardNumber.extend({validatable:!1}),t.giftCardNumber.extend({required:{params:!0,message:o.t("ns.common:resources.giftCardNumberRequired",{})},maxLength:{params:t.GIFTCARD_NUMBER_MAX_LENGTH(),message:o.t("ns.common:resources.maxlengthValidationMsg",{maxLength:t.GIFTCARD_NUMBER_MAX_LENGTH(),fieldName:o.t("ns.common:resources.giftCardNumberText",{})})}})}},c.prototype.setGiftCardPinDetails=function(e,t){if(void 0!=e&&null!=e&&void 0!=t&&null!=t){var r=this;t<=0&&(e=!1,t=0),r.IS_GIFT_CARD_PIN_REQUIRED(e),r.GIFTCARD_PIN_MAX_LENGTH(t),r.giftCardPin.extend({validatable:!1}),r.giftCardPin.extend({required:{params:r.IS_GIFT_CARD_PIN_REQUIRED(),message:o.t("ns.common:resources.giftCardPinRequired",{})},maxLength:{params:r.GIFTCARD_PIN_MAX_LENGTH(),message:o.t("ns.common:resources.maxlengthValidationMsg",{maxLength:r.GIFTCARD_PIN_MAX_LENGTH(),fieldName:o.t("ns.common:resources.giftCardPinText",{})})}})}},s.getInstance()&&s.getInstance().enabledTypes&&s.getInstance().enabledTypes.indexOf(t.GIFT_CARD_PAYMENT_TYPE)>-1){var i=n.getInstance();for(var a in i.extensionSiteSettings){var l=i.extensionSiteSettings[a];if(l[t.PAYMENT_METHOD_TYPES]&&l[t.PAYMENT_METHOD_TYPES].indexOf(t.GIFT_CARD_PAYMENT_TYPE)!=-1){void 0!=l.giftCardMaxLength&&r.GIFTCARD_NUMBER_MAX_LENGTH(l.giftCardMaxLength),void 0!=l.giftCardPinRequired&&void 0!=l.giftCardPinMaxLength&&(r.IS_GIFT_CARD_PIN_REQUIRED(l.giftCardPinRequired),r.GIFTCARD_PIN_MAX_LENGTH(l.giftCardPinMaxLength));break}}}r.setGiftCardNumberMaxLength(r.GIFTCARD_NUMBER_MAX_LENGTH()),r.setGiftCardPinDetails(r.IS_GIFT_CARD_PIN_REQUIRED(),r.GIFTCARD_PIN_MAX_LENGTH()),r.isValid=function(){return r.giftCardNumber.isValid()&&r.giftCardPin.isValid()},r.validateNow=function(){return r.giftCardNumber.isModified(!0),r.giftCardPin.isModified(!0),r.isValid()},r.reset=function(){r.giftCardNumber(""),r.maskedGiftCardNumber(""),r.giftCardPin(""),r.amountInGiftCard(""),r.amountUsed(0),r.giftCardNumber.isModified(!1),r.giftCardPin.isModified(!1),r.isApplyGiftCardClicked(!1)},r.clearPin=function(){r.giftCardPin("")},r.createCustomProperties=function(t){var i={};for(var a in t)"string"==typeof t[a]&&(i[t[a]]="");r.customProperties=e.mapping.fromJS(i)}}return c}),define("ccStoreServerLogger",["knockout","pubsub","jquery","ccRestClient","ccConstants","storageApi","pageViewTracker"],function(e,t,r,i,a,o,n){"use strict";function s(){if(s.singleInstance)throw new Error("Cannot instantiate more than one CCStoreServerLogger. Use getInstance() method");var e=this;e.loggingEnabled=!0;var l="",u="",d=[],p=[],h=["debug","info","warning","error"],f={getPage:"0001",paymentTimeOut:"0002",createOrderFailure:"0003",updateOrderFailure:"0004",paymentGroupFailure:"0005",orderSubmissionFailure:"0006"},m={getPage:"Landed on __pageId__ page",paymentTimeOut:"Unable to Authorize payment due to time-out, while placing order for order ID __orderId__",createOrderFailure:"Unable to create order due to error code __errorCode__",updateOrderFailure:"Unable to update the order with order ID __orderId__ due to error code __errorCode__",paymentGroupFailure:"Unable to place order for order ID __orderId__ as the payment state is found to be __paymentState__ for the payment group ID __paymentGroupId__",orderSubmissionFailure:"Order Submission Failed for order with order ID __orderId__"},g={error:"[ERROR]",warning:"[WARN]",info:"[INFO]",debug:"[DEBUG]"},v=function(e){try{o.getInstance().setItem("logLevel",e)}catch(e){}},E=function(){var e=null;try{e=o.getInstance().getItem("logLevel")}catch(e){}return e},y=function(e){var t=[];switch(e){case"debug":t.push("debug");case"info":t.push("info");case"warning":t.push("warning");case"error":t.push("error");break;default:t=d}return t};e.setDefaultLogLevel=function(){"info"!=l&&(l="info",d=y(l),v(l))},e.setLogLevel=function(e){h.indexOf(e.toLowerCase())>-1&&l!=e.toLowerCase()&&(l=e.toLowerCase(),d=y(l),v(e))},E()?(l=E().toLowerCase(),d=y(l)):e.setDefaultLogLevel();var b=function(e){try{o.getInstance().setItem("pageIdListToLog",e)}catch(e){}},I=function(){var e=null;try{e=o.getInstance().getItem("pageIdListToLog"),e=e.split(",")}catch(e){}return e};if(e.setPagesToLog=function(e){null!=e&&(p=e,b(p))},e.addPageIdToLog=function(e){p.indexOf(e)<0&&(p.push(e),b(p))},e.disablePageIdToLog=function(e){var t=this;null!=e&&p.indexOf(e)>-1&&(p.splice(p.indexOf(e),1),t.setPagesToLog(p))},I())p=I();else{var T=["checkout","payment","confirmation"];e.setPagesToLog(T)}var S=function(e,t){var r={},o=function(e){},n=function(e){};null!=t&&null!=e&&(r={logLevel:e,messages:t},i.request(a.ENDPOINT_LOGS_CREATE_LOG,r,o,n))},_=function(e,t,r){var i=g[r];if(null!=i){var a=n.getVisitorId(),o=n.getVisitId(),s=e+"-"+i+" "+t+", "+o+", "+a,c={LogData:s},l=[];l.push(c),S(r,l)}},P=function(e,t,r,i,a){a.loggingEnabled&&d.indexOf(t)>-1&&p.indexOf(u)>-1&&null!=r&&(null!=e&&""!=e||(e=c),null==i&&(i=f[e],null==i&&(i=e)),_(i,r,t))};e.logInfo=function(e,t,r){var i=this,a="info";P(e,a,t,r,i)},e.logWarning=function(e,t,r){var i=this,a="warning";P(e,a,t,r,i)},e.logDebug=function(e,t,r){var i=this,a="debug";P(e,a,t,r,i)},e.logError=function(e,t,r){var i=this,a="error";P(e,a,t,r,i)},e.getMessage=function(e,t){var r="";if(null!=e){var i=m[e];if(null!=i)for(var a=0;a<Object.keys(t).length;a++)r=Object.keys(t)[a],i=i.replace("__"+r+"__",t[r])}return i};var A=function(e,t){u=t.pageId};r.Topic(t.topicNames.PAGE_LAYOUT_LOADED).subscribe(A)}var c="UnstatedEvent";return s.getInstance=function(){return s.singleInstance||(s.singleInstance=new s),s.singleInstance},s}),define("viewModels/cashViewModel",["knockout","pageLayout/site","ccConstants","viewModels/paymentDetails"],function(e,t,r,i){"use strict";function a(){if(a.singleInstance)throw new Error("Cannot instantiate more than one cashViewModels, use getInstance()");var n=this;n.isPayingByCash=e.observable(!1),n.isCashPaymentEnabled=e.observable(!1),n.paymentDetails=i.getInstance(),n.setCashEnabledCountries=function(){for(var e in t.getInstance().extensionSiteSettings){var i=t.getInstance().extensionSiteSettings[e];i[r.PAYMENT_METHOD_TYPES]&&i[r.PAYMENT_METHOD_TYPES].split(",").indexOf(r.CASH_PAYMENT_TYPE)!=-1&&i[r.SELECTED_COUNTRIES]&&(o=i[r.SELECTED_COUNTRIES])}},n.verifyCashPaymentToBeEnabled=function(e){n.paymentDetails.enabledTypes.indexOf(r.CASH_PAYMENT_TYPE)!=-1&&o.indexOf(e)!=-1?n.isCashPaymentEnabled(!0):(n.isCashPaymentEnabled(!1),n.isPayingByCash(!1))},n.createCustomProperties=function(t){var r={};for(var i in t)"string"==typeof t[i]&&(r[t[i]]="");n.customProperties=e.mapping.fromJS(r)}}var o=[];return a.getInstance=function(){return a.singleInstance||(a.singleInstance=new a),a.singleInstance},a}),define("ccClientErrorCodes",[],function(){
"use strict";function e(){}return e.SYNTAX_ERROR="15000",e.REFERENCE_ERROR="15001",e.TYPE_ERROR="15002",e.EVAL_ERROR="15003",e.RANGE_ERROR="15004",e.URI_ERROR="15005",e.GENERIC_ERROR="15006",e.NO_SPECIFIED_ERROR="15007",e}),define("sfExceptionHandler",["knockout","ccRestClient","ccConstants","ccClientErrorCodes","pubsub","pageViewTracker"],function(e,t,r,i,a,o){"use strict";function n(){}var s,c,l,u,d=[],p=0,h=10,f={},m=[],g="";return n.prototype.subscribe=function(){s=this,s.logWindowOnErrorBinding=s.logWindowOnError.bind(s),s.logExceptionErrorBinding=s.logExceptionError.bind(s),$.Topic(a.topicNames.EXCEPTION_HANDLER).subscribe(s.logExceptionErrorBinding),$.Topic(a.topicNames.ONERROR_EXCEPTION_HANDLER).subscribe(s.logWindowOnErrorBinding)},n.prototype.getErrorCode=function(e){return e?(e=e.toLowerCase(),l=e==="RangeError".toLowerCase()||e==="RangeError:".toLowerCase()?i.RANGE_ERROR:e==="TypeError".toLowerCase()||e==="TypeError:".toLowerCase()?i.TYPE_ERROR:e==="SyntaxError".toLowerCase()||e==="SyntaxError:".toLowerCase()?i.SYNTAX_ERROR:e==="ReferenceError".toLowerCase()||e==="ReferenceError:".toLowerCase()?i.REFERENCE_ERROR:e==="EvalError".toLowerCase()||e==="EvalError:".toLowerCase()?i.EVAL_ERROR:e==="URIError".toLowerCase()||e==="URIError:".toLowerCase()?i.URI_ERROR:i.GENERIC_ERROR):l=i.NO_SPECIFIED_ERROR,l},n.prototype.logExceptionError=function(e){s=this,s.errorCode=s.getErrorCode(e.name),s.errorUrl=location.href,s.errorLine="",s.errorMessage="";var t;for(t in e)"fileName"===t?s.errorUrl=e[t]:"lineNumber"===t&&(s.errorLine=e[t]);s.errorMessage=e.toString(),!s.errorLine&&e.line>0&&(s.errorLine=e.line),s.sendErrorReport(s.errorMessage,s.errorLine,s.errorUrl,s.errorCode)},n.prototype.logWindowOnError=function(e,t,r,i,a){s=this;var o,n,c,l=e.split(" ");for(n=0,c=l.length;n<c;n+=1)if(l[n].indexOf("Error")>=0){o=l[n];break}s.errorCode=s.getErrorCode(o),s.errorCode||(s.errorCode=" "),e?s.errorMessage=e:s.errorMessage=" ",t?s.errorUrl=t:s.errorUrl=" ",r?s.errorLine=r:s.errorLine=" ",i?s.errorCol=i:s.errorCol=" ",a&&(s.errorObj=a),s.sendErrorReport(s.errorMessage,s.errorLine,s.errorUrl,s.errorCode,s.errorCol,s.errorObj)},navigator.findBrowserVersion=function(){var e,t,r=navigator.appName,i=navigator.userAgent;return t=i.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),t&&null!==(e=i.match(/version\/([\.\d]+)/i))&&(t[2]=e[1]),t=t?[t[1],t[2]]:[r,navigator.appVersion,"-?"]}(),n.prototype.sendErrorReport=function(e,t,r,i,a,n){var s=o.getVisitorId(),l=o.getVisitId(),u=window.location.href,f=null;n&&(f=n.stack),"undefined"!=typeof e&&p<h&&(p+=1,c={message:e,url:r,browserURL:u,line:t,column:a,osVersion:window.navigator.platform,locale:window.navigator.language,browserVersion:navigator.findBrowserVersion[0]+" "+navigator.findBrowserVersion[1],time:(new Date).toISOString(),clientErrorCode:i,visitorId:s,visitId:l,stack:f},g=i+"#"+u+"#"+r+"#"+t+"#"+a,m.indexOf(g)<0&&(m.push(g),d.push(c),this.reportErrorsToServer()))},n.prototype.reportErrorsToServer=function(){d.length>0&&(u=r.ENDPOINT_ERRORLOGS_CREATE_ERRORLOG,f={},f={clientSideErrors:d},t.request(u,f,this.sendSuccess,this.sendError),d=[],p=0)},n.prototype.sendSuccess=function(e){},n.prototype.sendError=function(e){},n}),define("pageLayout/order",["knockout","pubsub","notifier","CCi18n","ccLogger","ccRestClient","ccConstants","jquery","navigation","spinner","viewModels/address","viewModels/paymentDetails","viewModels/giftCardViewModel","storageApi","viewModels/dynamicProperty","ccStoreServerLogger","viewModels/cashViewModel","pageViewTracker","sfExceptionHandler","ccStoreConfiguration"],function(e,t,r,i,a,o,n,s,c,l,u,d,p,h,f,m,g,v,E,y){"use strict";function b(a,l,p,h){if(b.prototype.singleInstance)throw new Error("Cannot instantiate more than one OrderViewModel, use OrderViewModel.getInstance(pAdapter, pCart, pData)");var f=this;return f.adapter=a,f.cart=l,f.schedule=e.observable(),f.showSchedule=e.observable(!1),f.id=e.observable(),f.billingAddress=e.observable(),f.shippingAddress=e.observable(),f.paymentDetails=e.observable(d.getInstance()),f.emailAddress=e.observable(),f.order=e.observable(),f.orderProfileId=e.observable(),f.paymentGateway=e.observable(),f.selectedShippingOption=e.observable(),f.isPaypalVerified=e.observable(!1),f.isPayULatamCheckout=e.observable(!1),f.op=e.observable(),f.giftCards=e.observableArray([]),f.amountRemaining=e.observable(),f.amountRemaining(null),f.isCashPayment=e.observable(!1),f.cashModel=e.observable(g.getInstance()),f.cashModel().isPayingByCash(f.isCashPayment()),f.isInvoicePayment=e.observable(!1),f.isPayLater=e.observable(!1),f.poNumber=e.observable(),f.isOrderValid=e.observable(!1),f.enableOrderButton=e.observable(!0),f.isOrderLocked=!1,f.isOrderEditable=e.observable(!0),f.isOrderSubmitted=!1,f.checkoutGuest=e.observable(n.GUEST),f.checkoutLogin=e.observable(n.LOGIN),f.checkoutOption=e.observable(n.GUEST).extend({throttle:400}),f.guestEmailAddress=e.observable(""),f.createAccount=e.observable(!1),f.user=h,f.registerUser=!1,f.webCheckoutShippingMethodValue=null,f.storeServerLog=m.getInstance(),f.exceptionHandler=new E,f.loadedOrderShippingAddress=null,f.payments=e.observableArray([]),f.approvalRequired=e.observable(!1),f.isAutherizeCalled=!1,f.validationCallbacks=[],f.fields=null,f.storeConfiguration=y.getInstance(),f.isCashPayment.subscribe(function(e){f.cashModel().isPayingByCash(e)}),f.guestEmailAddress.subscribe(function(e){f.guestEmailAddress.isValid()?f.cart().emailAddressForGuestUser=f.guestEmailAddress():f.cart().emailAddressForGuestUser=""}),f.updateBillingAddress=function(){f.billingAddress(this)},f.preparePayULatamDataForCreateOrder=function(e){f.paymentGateway(new R(e,f.cart().total(),f.cart().currency.currencyCode))},f.updateShippingAddress=function(){f.shippingAddress(this);var e={};e[n.SHIPPING_ADDRESS_FOR_METHODS]=f.shippingAddress(),e[n.PRODUCT_IDS_FOR_SHIPPING]=l().getProductIdsForItemsInCart(),l().updateShippingAddress.bind(e)()},f.updatePaypalPaymentType=function(e){var t;f.paymentGateway()&&f.paymentGateway().type===e&&f.paymentGateway().customProperties&&(t=f.paymentGateway().customProperties),f.paymentGateway(new C(e)),t&&(f.paymentGateway().customProperties=t)},f.updateShippingMethod=function(){if(this&&this.repositoryId){var e={};e.value=this.repositoryId,e.shippingOption=this,f.selectedShippingOption(e)}else f.selectedShippingOption("")},f.updateEmail=function(){f.emailAddress(this)},f.resetAddress=function(){f.billingAddress()&&f.billingAddress().reset(),f.shippingAddress()&&f.shippingAddress().reset()},f.updatePaymentDetails=function(){var e=this;if(f.paymentDetails&&f.paymentDetails())for(var t in e)f.paymentDetails()[t]&&f.paymentDetails()[t](e[t]);else f.paymentDetails(e)},f.updatePaymentGatewayData=function(e){var t=e.parameters;if(t){for(var r=t.split("&"),i={},a=0;a<r.length;a++){var o=r[a].split("=");i[o[0]]=o[1]}if(i[n.PAYMENT_ID]&&i[n.TOKEN]&&i[n.PAYER_ID])f.paymentGateway(new C(n.PAYPAL_CHECKOUT_TYPE,i[n.PAYMENT_ID],i[n.TOKEN],i[n.PAYER_ID])),f.isPaypalVerified(!0);else if(t.indexOf(n.PAYU_REFERENCE_POL)!=-1){f.createSpinner();var s=i[n.PAYU_TRANSACTION_STATE];if(s==n.PAYU_TRANSACTION_APPROVED_CODE||s==n.PAYU_TRANSACTION_PENDING_CODE||s==n.PAYU_TRANSACTION_DECLINED_CODE||s==n.PAYU_TRANSACTION_EXPIRED_CODE||s==n.PAYU_TRANSACTION_ERROR_CODE){var l=i[n.PAYU_REFERENCE_CODE],u=i[n.PAYU_TX_VALUE],d=i[n.CURRENCY],p=i[n.SIGNATURE];f.paymentGateway(new R(n.PAYULATAM_CHECKOUT_TYPE,u,d,l,s,n.PAYULATAM_RESPONSE_TYPE,p)),f.getOrder()}}else f.clearPaypalData()}else f.isPaypalVerified()&&c.getPathWithoutLocale()!=f.checkoutLink&&f.clearPaypalData()},f.loadOrderForSubmit=function(e){var a=this;if(e.pageId==n.PAGE_TYPE_CHECKOUT&&a.user()&&a.user().loggedIn()&&!a.user().isUserSessionExpired()&&a.cart().currentOrderId()){var e={},d={};d[n.ENDPOINT_KEY]=n.ENDPOINT_GET_ORDER,d[n.IDENTIFIER_KEY]="orderForSubmit";var p=a.storeConfiguration.getFilterToUse(d);p&&(e[n.FILTER_KEY]=p),o.request(n.ENDPOINT_GET_ORDER,e,function(e){var o=e.state;if(o==n.QUOTED_STATES||o==n.INCOMPLETE)a.cart().loadOrderForProfile(e,a.user),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),a.cart().shippingMethod(e.shippingMethod.value),a.user().orderId(a.cart().currentOrderId()),a.user().setLocalData("orderId");else if(o==n.PENDING_PAYMENTS||o==n.PENDING_PAYMENT_TEMPLATE){a.isOrderEditable(!1),a.cart().loadOrderForProfile(e,a.user);var d={translate:function(e,t){return i.t("ns.common:resources."+e,t)}},p=new u("cart-shipping-address","",d,a.contextData.page.shippingCountriesPriceListGroup,a.contextData.page.defaultShippingCountry);p.copyFrom(e.shippingGroups[0].shippingAddress,a.contextData.page.shippingCountriesPriceListGroup),p.resetModified(),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS).publishWith(p,[{message:"success"}]);var h={};h[n.SHIPPING_ADDRESS_FOR_METHODS]=a.shippingAddress(),h[n.PRODUCT_IDS_FOR_SHIPPING]=l().getProductIdsForItemsInCart(),s.Topic(t.topicNames.VERIFY_SHIPPING_METHODS).publishWith(h,[{message:"success"}]),a.cart().shippingMethod(e.shippingMethod.value),s.Topic(t.topicNames.LOADED_ORDER_SHIPPING_ADDRESS).publish(e.shippingAddress),a.loadedOrderShippingAddress=e.shippingAddress,a.amountRemaining(e.priceInfo.total),s.Topic(t.topicNames.CART_UPDATED_PENDING_PAYMENT).publish(a),e.scheduledOrder&&e.scheduledOrder.length>0&&(a.showSchedule(!0),a.schedule()&&a.schedule().fromJS(e.scheduledOrder[0])),a.user().orderId(a.cart().currentOrderId()),a.user().setLocalData("orderId"),a.isAutherizeCalled||r.sendWarning(N,i.t("ns.common:resources.orderCannotBeUpdatePendingPaymentText"),!0),!a.emailAddress()&&a.user().emailAddress()&&a.emailAddress(a.user().emailAddress())}else c.goTo(a.contextData.global.links[404].route)},function(e){c.goTo(a.contextData.global.links[404].route)},a.cart().currentOrderId())}a.isOrderEditable(!0)},f.updatePayments=function(e){f.payments([]);for(var t=e.length,r=0;r<t;r++)f.payments().push(e[r])},f.addPayment=function(e){f.payments.push(e)},f.hasPaymentType=function(e){for(var t=f.payments().length,r=0;r<t;r++)if(f.payments()[r].type===e)return!0;return!1},f.validateShippingGroupRelationships=function(){r.clearError("checkoutAddressBook-ShippingGroupRelationships"),this.cart().hasSplitShippingInformation()||(this.errorFlag=!0,r.sendError("checkoutAddressBook-ShippingGroupRelationships",i.t("ns.checkoutaddressbook:resources.checkoutErrorMsg"),!0))},f.validateShippingAddress=function(){r.clearError("checkoutAddressBook-Shipping"),f.shippingAddress&&(f.shippingAddress().validateNow()?this.shippingAddress().afterValidation=!0:(this.errorFlag=!0,r.sendError("checkoutAddressBook-Shipping",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateSchedule=function(){r.clearError("checkoutScheduledOrder-Schedule"),f.showSchedule()&&f.schedule&&(f.schedule().validateNow()?this.schedule().afterValidation=!0:(this.errorFlag=!0,r.sendError("checkoutScheduledOrder-Schedule",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateBillingAddress=function(){r.clearError("checkoutAddressBook-Billing"),f.billingAddress().phoneNumber.isValid()||f.billingAddress().phoneNumber(f.shippingAddress().phoneNumber()),f.billingAddress&&!f.isPaypalVerified()&&f.billingAddress()&&(f.billingAddress().validateNow()||(this.errorFlag=!0,r.sendError("checkoutAddressBook-Billing",i.t("ns.common:resources.checkoutErrorMsg"),!0)))},f.validateCheckoutCartSummary=function(){r.clearError("checkoutCartSummary"),0===f.cart().items().length&&(this.errorFlag=!0,r.sendError("checkoutCartSummary",i.t("ns.checkoutcartsummary:resources.checkoutErrorMsg"),!0))},f.validateCheckoutOrderSummary=function(){this.selectedShippingOption&&!this.selectedShippingOption()?(this.errorFlag=!0,r.sendError("checkoutOrderSummary",i.t("ns.ordersummary:resources.checkoutErrorMsg"),!0)):r.clearError("checkoutOrderSummary-shippingMethods")},f.validateCheckoutPaymentDetails=function(){r.clearError("checkoutPaymentDetails"),this.paymentDetails&&this.payments()<1&&(this.isPaypalVerified()||this.cashModel().isPayingByCash()||this.isPayULatamCheckout()||this.isInvoicePayment()||this.showSchedule()&&!this.paymentDetails().isCardEnabledForScheduledOrder()||(null==this.amountRemaining()||this.amountRemaining()>0)&&!this.paymentDetails().validatePaymentDetails()&&(this.errorFlag=!0,r.sendError("checkoutPaymentDetails",i.t("ns.checkoutpaymentdetails:resources.paymentDetailsError"),!0)))},f.validateGiftcards=function(){r.clearError("checkoutGiftCards"),this.giftCards&&this.giftCards().length>0&&(this.cart().validateGiftCards()||(s.Topic(t.topicNames.SHOW_GIFT_CARD_ERROR_PANEL).publish(),this.errorFlag=!0,r.sendError("checkoutGiftCards",i.t("ns.checkoutpaymentdetails:resources.paymentDetailsError"),!0)))},f.validatePaymentMethodsForScheduledOrder=function(){r.clearError("checkoutPaymentMethodsForScheduledOrder"),this.showSchedule()&&(this.cashModel().isPayingByCash()||this.paymentDetails&&this.paymentDetails().isCardEnabledForScheduledOrder()||this.giftCards&&this.giftCards().length>0||this.isInvoicePayment()||this.isPayULatamCheckout()||this.isPaypalVerified()||(this.errorFlag=!0,r.sendError("checkoutPaymentMethodsForScheduledOrder",i.t("ns.checkoutpaymentdetails:resources.paymentDetailsError"),!0)))},f.validateRegisteredUser=function(){this.user().validateLogin(),this.user().isLoginValid()?(s.Topic(t.topicNames.CHECKOUT_EMAIL_ADDRESS).publishWith(this.user().emailAddress(),[{message:"success"}]),s.Topic(t.topicNames.USER_PROFILE_UPDATE_SUBMIT).publishWith(this.user(),[{message:"success"}])):(this.errorFlag=!0,r.sendError("checkoutRegistration",i.t("ns.checkoutRegistration:resources.checkoutErrorMsg"),!0))},f.validateGuestUser=function(){if(this.guestEmailAddress.isValid()||this.createAccount()!==!1)if(this.user().isValid()||this.createAccount()!==!0){var e=o.getStoredValue(n.LOCAL_STORAGE_USER_CONTENT_LOCALE);null!=e&&(e=JSON.parse(e),s.Topic(t.topicNames.CHECKOUT_USER_LOCALE).publishWith(e[0].name,[{message:"success"}])),s.Topic(t.topicNames.CHECKOUT_EMAIL_ADDRESS).publishWith(this.guestEmailAddress(),[{message:"success"}])}else this.user().validateUser(),this.errorFlag=!0,r.sendError("checkoutRegistration",i.t("ns.checkoutRegistration:resources.checkoutErrorMsg"),!0);else this.guestEmailAddress.isModified(!0),this.errorFlag=!0,r.sendError("checkoutRegistration",i.t("ns.checkoutRegistration:resources.checkoutErrorMsg"),!0)},f.validateCheckoutRegistration=function(){r.clearError("checkoutRegistration"),this.user().loggedIn()||(this.checkoutOption()===this.checkoutLogin()?f.validateRegisteredUser():f.validateGuestUser())},f.isGiftCardDisabled=e.computed(function(){return!!f.approvalRequired()||!!(0==f.cart().items().length||0==f.amountRemaining()||f.isCashPayment()||f.isInvoicePayment()||f.showSchedule()&&!f.paymentDetails().isGiftCardEnabledForScheduledOrder()||f.approvalRequired()&&!f.paymentDetails().isGiftCardEnabledForApproval())}),f.validateDynamicProperties=function(){r.clearError("checkoutDynamicProperties");this.cart().validateDynamicProperties()||(this.errorFlag=!0,r.sendError("checkoutDynamicProperties",i.t("ns.common:resources.checkoutErrorMsg"),!0))},f.validatePlaceHolderItems=function(){r.clearError("placeHolderItems"),this.cart().placeHolderItems().length&&(this.errorFlag=!0,this.placeHolderItemsMsgDisplayed=!0,r.sendWarning("placeHolderItems",i.t("ns.common:resources.placeHolderItemsErrorMsg"),!0),this.cart().placeHolderItems.subscribe(function(){this.cart().placeHolderItems().length&&(this.placeHolderItemsMsgDisplayed=!1)},this))},f.reset=function(){this.user().reset(),this.createAccount(!1),this.guestEmailAddress.isModified&&this.guestEmailAddress.isModified(!1),this.guestEmailAddress(""),f.cart().emailAddressForGuestUser=""},f.checkSingleException=function(e){if(e.errorCode==n.CHECKOUT_SESSION_EXPIRED_ERROR)return r.sendError(n.CHECKOUT_SESSION_EXPIRED,e.message,!0),!0;if(e.errorCode==n.CREATE_ORDER_PRODUCT_NOT_FOUND||e.errorCode==n.CREATE_ORDER_SKU_NOT_FOUND||e.errorCode==n.PRODUCT_NOT_FOR_INDIVIDUAL_SALE)return f.cart().loadCart(),!0;if(e.errorCode==n.ORDER_CANNOT_BE_UPDATED){f.id("");var t=i.t("ns.common:resources.orderSubmissionFailed");return r.sendError(N,t,!0),!0}if(e.errorCode==n.COUPON_APPLY_ERROR)f.cart().handleCouponPricingError(e,null);else if(e.errorCode==n.PROCESS_COMPLETION_FAILED_CODE){var t=i.t("ns.common:resources.processCompletionFailed");e.message=t,r.sendError(N,t,!0)}else if(e.errorCode==n.CONFIGURABLE_PRODUCTS_NOT_ALLOWED_FAILURE_CODE){var t=i.t("ns.common:resources.orderPricingPromotionError");e.message=t,r.sendError(N,t,!0)}else if(e.errorCode==n.PAYMENT_REVERSAL_FAILED_CODE){f.id("");var t=i.t("ns.common:resources.paymentReversalFailed");e.message=t,r.sendError(N,t,!0)}else if(e.errorCode==n.INVALID_PROFILE_FOR_CHECKOUT){var a=i.t("ns.common:resources.invalidProfileForCheckout");e.message=a,r.sendError(N,a,!0)}else{if(e.status==n.HTTP_UNAUTHORIZED_ERROR){var t=i.t("ns.common:resources.orderSubmissionFailed");return r.sendError(N,t,!0),!1}if(!f.isPaypalVerified())return r.sendError(N,e.message,!0),!0}},s.Topic(t.topicNames.ORDER_CREATE).subscribe(this.createOrder.bind(this)),s.Topic(t.topicNames.CHECKOUT_EMAIL_ADDRESS).subscribe(f.updateEmail),s.Topic(t.topicNames.CHECKOUT_BILLING_ADDRESS).subscribe(f.updateBillingAddress),s.Topic(t.topicNames.CHECKOUT_SHIPPING_ADDRESS).subscribe(f.updateShippingAddress),s.Topic(t.topicNames.USER_PROFILE_ADDRESSES_REMOVED).subscribe(f.resetAddress),s.Topic(t.topicNames.CHECKOUT_PAYMENT_DETAILS).subscribe(f.updatePaymentDetails),s.Topic(t.topicNames.ORDER_CREATED).subscribe(this.authPayment.bind(this)),s.Topic(t.topicNames.PAYMENT_AUTH_SUCCESS).subscribe(this.paymentAuthorized.bind(this)),s.Topic(t.topicNames.PAYMENT_AUTH_DECLINED).subscribe(this.paymentDeclined),s.Topic(t.topicNames.PAYMENT_AUTH_TIMED_OUT).subscribe(this.paymentTimeout),s.Topic(t.topicNames.CHECKOUT_SHIPPING_METHOD).subscribe(f.updateShippingMethod),s.Topic(t.topicNames.ORDER_COMPLETED).subscribe(this.clear.bind(this)),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).subscribe(f.handleRedirect.bind(f)),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).subscribe(f.handleSubmissionSuccess.bind(f)),s.Topic(t.topicNames.SCHEDULED_ORDER_SUBMISSION_SUCCESS).subscribe(f.handleScheduledOrderSubmissionSuccess.bind(f)),s.Topic(t.topicNames.PAGE_CHANGED).subscribe(f.updatePaymentGatewayData.bind(f)),s.Topic(t.topicNames.PAGE_READY).subscribe(f.loadOrderForSubmit.bind(f)),s.Topic(t.topicNames.CONTINUE_TO_PAYPAL).subscribe(this.createOrder.bind(this)),s.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).subscribe(this.resetAddress.bind(this)),s.Topic(t.topicNames.GIFTCARD_UPDATE_FROM_CART).subscribe(this.updateGiftCards.bind(this)),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING).subscribe(this.updateAmountRemaining.bind(this)),s.Topic(t.topicNames.UPDATE_AMOUNT_REMAINING_PENDING_PAYMENT).subscribe(this.updateAmountRemainingPendingPayment.bind(this)),s.Topic(t.topicNames.USER_CREATION_FAILURE).subscribe(this.createOrderAfterRegistration.bind(this)),s.Topic(t.topicNames.AUTO_LOGIN_AND_GET_USER_DATA_SUCCESSFUL).subscribe(this.createOrderAfterRegistration.bind(this)),s.Topic(t.topicNames.USER_AUTO_LOGIN_FAILURE).subscribe(this.createOrderAfterRegistration.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_SUCCESSFUL).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_NOCHANGE).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_INVALID).subscribe(this.createOrderAfterProfileUpdate.bind(this)),s.Topic(t.topicNames.USER_PROFILE_UPDATE_FAILURE).subscribe(this.createOrderAfterProfileUpdate.bind(this)),f}function I(e,t,r,i,a,o,n,s,c,l,u,d,p,h,f,m){var g=this;e&&(g.id=e),g.shoppingCart=t,g.appliedPromotions=r,g.isAnonymousCheckout=l,g.combineLineItems=m,a&&(g.scheduleOnly=!0,g.schedule=a),f?g.shippingGroups=f:(o&&(g.shippingAddress=o),i&&(g.shippingMethod={value:i.value})),n&&(g.billingAddress=n),d&&(g.payments=d),g.visitorId=s,g.visitId=c,l||(g.profileId=u),g.op=p,g.giftWithPurchaseOrderMarkers=h}function T(e,t,r,i,a,o,n,s,c){var l=this;l.productId=e,l.catRefId=r,l.quantity=t,l.externalPrice=i,l.externalPriceQuantity=a,l.giftWithPurchaseCommerceItemMarkers=o,l.externalData=n,l.actionCode=s,l.commerceItemId=c}function S(e,t,r){var i=this;i.items=e,i.coupons=t,i.orderTotal=r}function _(e,t,r,i){var a=this;a.emailAddress=e,a.billingAddress=t,a.paymentDetails=r,a.orderDetails=i}function P(e){var t=this;t.nameOnCard=e.nameOnCard(),null==e.selectedCardType()?t.cardType=e.cardType():t.cardType=e.selectedCardType(),t.cardNumber=e.cardNumber(),t.cardCVV=e.cardCVV(),t.endMonth=e.endMonth(),t.endYear=e.endYear(),null==e.selectedCardType()?t.selectedCardType=e.cardType():t.selectedCardType=e.selectedCardType(),null==e.selectedEndMonth()?t.selectedEndMonth=e.endMonth():t.selectedEndMonth=e.selectedEndMonth(),null==e.selectedEndYear()?t.selectedEndYear=e.endYear():t.selectedEndYear=e.selectedEndYear()}function A(e){var t=this;t.nameOnCard=e.nameOnCard(),null==e.selectedCardType()?t.cardType=e.cardType():t.cardType=e.selectedCardType(),t.cardNumber=e.cardNumber(),t.cardCVV=e.cardCVV(),t.expiryMonth=e.endMonth(),t.expiryYear=e.endYear().toString(),null==e.selectedCardType()?t.selectedCardType=e.cardType():t.selectedCardType=e.selectedCardType(),null==e.selectedEndMonth()?t.selectedEndMonth=e.endMonth():t.selectedEndMonth=e.selectedEndMonth(),null==e.selectedEndYear()?t.selectedEndYear=e.endYear():t.selectedEndYear=e.selectedEndYear()}function C(e,t,r,i,a){var o=this;o.type=e,o[n.PAYMENT_ID]=t,o[n.TOKEN]=r,o[n.PAYER_ID]=i,o[n.PAYMENT_GROUP_ID]=a}function R(e,t,r,i,a,o,s){var c=this;c.type=e,c[n.AMOUNT]=t,c[n.CURRENCY]=r,c[n.PAYMENT_ID]=i,c[n.TRANSACTION_STATUS]=a,c[n.TRANSACTION_TYPE]=o,c[n.SIGNATURE]=s}function O(t,r,i,a,o){var n={};return n.msg=t.toString(),n.shoppingCartItems=r,n.emailId=i,n.visitorId=a,n.visitId=o,n.toJSON=function(){var t=e.toJS(n);return t},n}var N="OrderViewModel";return b.prototype.updateGiftCards=function(e){var t=this;t.giftCards([]);for(var r=0;r<e.length;r++){var i=e[r];t.giftCards.push(i)}},b.prototype.updateAmountRemaining=function(e){var t=this;t.amountRemaining(e)},b.prototype.updateAmountRemainingPendingPayment=function(e){var t=this,r=t.amountRemaining()+e;t.amountRemaining(r)},b.prototype.createOrderAfterRegistration=function(e){!this.registerUser||!this.contextData.global.guestCheckoutEnabled&&e&&e.errorCode===n.CREATE_PROFILE_USER_EXISTS?(this.destroySpinner(),this.enableOrderButton(!0),this.registerUser=!1,e&&r.sendError(N,e.message,!0),o.getStoredValue(n.PAYULATAM_CHECKOUT_REGISTRATION)===n.PAYULATAM_CHECKOUT_REGISTRATION_FAILURE&&o.clearStoredValue(n.PAYULATAM_CHECKOUT_REGISTRATION)):(this.createOrder(),this.registerUser=!1)},b.prototype.createOrderAfterProfileUpdate=function(){this.user&&!this.user().isUserSessionExpired()?(this.placeOrder&&(this.cart().currentOrderState()==n.PENDING_PAYMENTS?this.addPaymentsToOrder():this.createOrder(),this.enableOrderButton(!0),this.placeOrder=!1),this.destroySpinner()):this.destroySpinner()},b.prototype.handleSubmissionSuccess=function(e){var t=this;c.goTo(this.contextData.global.links.confirmation.route+"/"+e[0].uuid),t.isOrderSubmitted=!0,t.approvalRequired(!1),t.enableOrderButton(!0),t.isPaypalVerified()&&t.clearPaypalData(),t.user().loggedIn()||t.reset()},b.prototype.handleScheduledOrderSubmissionSuccess=function(e){var t=this;c.goTo(this.contextData.global.links.scheduledOrders.route+"/"+e[0].scheduleOrderId),t.isOrderSubmitted=!0,t.enableOrderButton(!0),t.isPaypalVerified()&&t.clearPaypalData(),t.user().loggedIn()||t.reset(),this.destroySpinner()},b.prototype.handleRedirect=function(e){var t=this;if(t.enableOrderButton(!0),c.getPathWithoutLocale()==t.cartLink&&(t.isPaypalVerified()||t.cart().checkoutWithPaypalClicked()))c.goTo(t.cartLink);else if(c.getPathWithoutLocale()==t.checkoutLink&&t.isPaypalVerified())c.goTo(t.checkoutLink);else{var i=c.getPathWithoutLocale().split("?");i[0]==t.checkoutLink&&c.getPathWithoutLocale().indexOf("orderId=")!=-1?c.goTo(c.getPathWithoutLocale()):c.goTo(t.checkoutLink)}e.data&&(t.isPaypalVerified()||t.cart().checkoutWithPaypalClicked())&&r.sendErrorToPage(n.PAYPAL_PLACE_ORDER_ERROR,e.data.message,!0,"checkout",!0),(t.isPaypalVerified()||t.cart().checkoutWithPaypalClicked())&&t.clearPaypalData()},b.prototype.handleCheckoutWithPaypal=function(){var e=this;e.cashModel().isPayingByCash(!1),e.shippingAddress()&&e.shippingAddress().address1()&&!e.emailAddress()&&c.getPathWithoutLocale()==e.checkoutLink&&!e.user().loggedIn()?s.Topic(t.topicNames.PAYPAL_EMAIL_VALIDATION).publishWith(e,[{message:"fail"}]):e.continueCheckoutWithPaypal()},b.prototype.continueCheckoutWithPaypal=function(){var e=this;!e.cart().shippingMethod()&&e.shippingAddress()&&e.shippingAddress().validateForShippingMethod()&&h.getInstance().setItem("checkoutAddressWithoutShippingMethod",JSON.stringify(e.shippingAddress().toJSON())),e.guestEmailAddress()&&h.getInstance().setItem("guestEmailAddress",e.guestEmailAddress()),e.updatePaypalPaymentType(n.PAYPAL_CHECKOUT_TYPE),e.cart().checkoutWithPaypalClicked(!0),e.cart().skipPriceChange(!0),e.cart().handleValidateCart(),e.id(null),e.op(n.ORDER_OP_INITIATE)},b.prototype.clear=function(){var e=this;e.id(null),e.emailAddress(""),e.order(null),e.orderProfileId(null),e.selectedShippingOption(null),e.op(null),e.giftCards([]),e.isInvoicePayment(!1),e.isPayLater(!1),e.poNumber(""),e.enableOrderButton(!0),e.createAccount(!1),e.guestEmailAddress.isModified&&e.guestEmailAddress.isModified(!1),e.guestEmailAddress(""),e.checkoutOption(n.GUEST),e.isOrderLocked=!1,e.isOrderSubmitted=!1,e.payments([]),e.amountRemaining(null),e.approvalRequired(!1),e.isAutherizeCalled=!1,e.loadedOrderShippingAddress=null,e.cart().currentOrderId(null),e.cart().currentOrderState(null)},b.prototype.clearPaypalData=function(){var e=this;e.paymentGateway(new C),e.cart().checkoutWithPaypalClicked(!1),e.isPaypalVerified(!1),e.id(null),e.op(null)},b.prototype.getOrder=function(){var e=this;e.giftCards([]),e.cart().giftCards([]),e.cart().dynamicProperties([]);var a=e.paymentGateway().type,l={};e.paymentGateway().type==n.PAYPAL_CHECKOUT_TYPE?(l[n.PAYER_ID]=e.paymentGateway().PayerID,l[n.TOKEN]=e.paymentGateway().token,l[n.PAYMENT_ID]=e.paymentGateway().paymentId):e.paymentGateway().type==n.PAYULATAM_CHECKOUT_TYPE?(l[n.AMOUNT]=e.paymentGateway().amount,l[n.CURRENCY]=e.paymentGateway().currency,l[n.PAYMENT_ID]=e.paymentGateway().paymentId,l[n.TRANSACTION_STATUS]=e.paymentGateway().transactionStatus,l[n.TRANSACTION_TYPE]=e.paymentGateway().transactionType,l[n.SIGNATURE]=e.paymentGateway().signature):e.payments().length>0&&(a=e.payments()[0].type,e.payments()[0].customProperties&&(l.customProperties=e.payments()[0].customProperties));var u={};u[n.ENDPOINT_KEY]=n.ENDPOINT_GET_INITIAL_ORDER,u[n.IDENTIFIER_KEY]="getOrder";var d=e.storeConfiguration.getFilterToUse(u);d&&(l[n.FILTER_KEY]=d),e.adapter.loadJSON(n.ENDPOINT_GET_INITIAL_ORDER,a,l,function(a){var l=!(!e.user()||!e.user().loggedIn());if(l)e.cart().emptyCart(),e.cart().mergeItems(a),e.cart().updateCartData(a,!1,l),e.cart().cartUpdated(),a.state==n.PENDING_PAYMENT&&(e.cart().currentOrderState(n.PENDING_PAYMENTS),e.cart().currentOrderId(a.id),e.cart().orderCurrency=a.priceListGroup.currency,e.cart().orderItems(a.shoppingCart.items),e.amountRemaining(a.priceInfo.total),e.isAutherizeCalled=!0,e.isOrderEditable(!1));else{e.cart().loadCart();var u=h.getInstance().getItem("guestEmailAddress");u&&(e.guestEmailAddress(u),h.getInstance().removeItem("guestEmailAddress"))}if(e.isPaypalVerified()){e.id(a.id);for(var d=a.payments,p="",f=0;f<d.length;f++)if(d[f]&&d[f].gatewayName==n.PAYPAL_GATEWAY_ID){p=d[f].paymentGroupId;var m=new C(n.PAYPAL_CHECKOUT_TYPE,e.paymentGateway().paymentId,e.paymentGateway().token,e.paymentGateway().PayerID,p);e.paymentGateway(m)}var g=h.getInstance().getItem("checkoutAddressWithoutShippingMethod");if(s.Topic(t.topicNames.PAYPAL_CHECKOUT_SHIPPING_ADDRESS).publish(a.shippingAddress),s.Topic(t.topicNames.EXTERNAL_CHECKOUT_BILLING_ADDRESS).publish(a.billingAddress),a.shippingMethod&&!g?s.Topic(t.topicNames.PAYPAL_CHECKOUT_SHIPPING_METHOD_VALUE).publishWith(a.shippingMethod.value):s.Topic(t.topicNames.PAYPAL_CHECKOUT_NO_SHIPPING_METHOD).publish(),a.dynamicProperties&&e.cart().updateDynamicProperties(a),1==d.length&&d[0]&&d[0].gatewayName==n.PAYPAL_GATEWAY_ID&&d[0].amount!=a.priceInfo.total){var v=i.t("ns.common:resources.reapplyGIftCards");r.sendError("GC",v,!0)}}else if(e.paymentGateway().type==n.PAYULATAM_CHECKOUT_TYPE){if(a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_APPROVED||a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_PENDING||a.payments[0].paymentState==n.PAYMENT_GROUP_STATE_SETTLED)s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:a.id,uuid:a.uuid}]);else if(a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_DECLINED||a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_EXPIRED||a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_ERROR){s.Topic(t.topicNames.WEB_CHECKOUT_SHIPPING_ADDRESS).publish(a.shippingAddress),a.shippingMethod&&(e.webCheckoutShippingMethodValue=a.shippingMethod.value),!e.user().loggedIn()&&a.shippingAddress.email&&e.guestEmailAddress(a.shippingAddress.email);var E="";a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_DECLINED?E=i.t("ns.paymentGatewayOptions:resources.paymentDeclinedMsg"):a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_EXPIRED?E=i.t("ns.paymentGatewayOptions:resources.paymentExpiredMsg"):a.payments[0].transactionStatusByQuery==n.PAYU_TRANSACTION_ERROR&&(E=i.t("ns.paymentGatewayOptions:resources.paymentErrorMsg")),o.clearStoredValue(n.PAYULATAM_CHECKOUT_REGISTRATION),c.goTo(e.checkoutLink),r.sendErrorToPage(N,E,!0,"checkout",!0),s("#CC-messages").attr("aria-live","assertive")}e.paymentGateway(null),e.destroySpinner()}s.Topic(t.topicNames.ORDER_RETRIEVED_INITIAL).publishWith(a,[{message:"success",order:a}])},function(i){e.destroySpinner(),e.clearPaypalData(),e.paymentGateway(null),e.payments([]),s.Topic(t.topicNames.GET_INITIAL_ORDER_FAIL).publish([{message:"fail"}]),r.sendError(N,i.message,!0)})},b.prototype.addPaymentsToOrder=function(){var t=this,r=void 0;t.billingAddress()&&(r=t.billingAddress().toJSON());var i="";if(t.op()==n.ORDER_OP_INITIATE)i=t.op();else var a=h.getInstance().getItem(n.PAYMENT_GROUP_AFTER_PAYPAL);var s=[];if(t.cashModel().isPayingByCash()){var c={};c.paymentMethodType=n.CASH_PAYMENT_TYPE,t.cashModel().customProperties&&Object.keys(t.cashModel().customProperties).length-1>0&&(c.customProperties=e.mapping.toJS(t.cashModel().customProperties)),c.billingAddress=r,c.amount=t.amountRemaining(),s.push(c),i=n.ORDER_OP_INITIATE}else{if(t.giftCards())for(var l=0;l<t.giftCards().length;l++){var c={};c.paymentMethodType=n.GIFT_CARD_PAYMENT_TYPE,c.giftCardNumber=t.giftCards()[l].giftCardNumber(),c.giftCardPin=t.giftCards()[l].giftCardPin(),t.giftCards()[l].isAmountRemaining()&&!t.isPaypalVerified()||(c.amount=t.giftCards()[l].amountUsed()),c.paymentGroupId=t.giftCards()[l].paymentGroupId,t.giftCards()[l].customProperties&&Object.keys(t.giftCards()[l].customProperties).length-1>0&&(c.customProperties=e.mapping.toJS(t.giftCards()[l].customProperties)),c.amount=t.giftCards()[l].amountUsed(),c.billingAddress=r,s.push(c)}if(t.payments().length>0)e.utils.arrayForEach(t.payments(),function(e){e.billingAddress=r,e.type&&(e.paymentMethodType=e.type,delete e.type),s.push(e)});else if(t.isPaypalVerified()||t.amountRemaining&&0!=t.amountRemaining())if(t.paymentGateway()&&t.paymentGateway().type){var c={};c.paymentMethodType=t.paymentGateway().type,c.billingAddress=r,""==i&&t.paymentGateway().type==n.PAYPAL_CHECKOUT_TYPE?(c.PayerID=t.paymentGateway().PayerID,c.token=t.paymentGateway().token,c.paymentId=t.paymentGateway().paymentId,c.paymentGroupId=a):t.paymentGateway().type==n.PAYULATAM_CHECKOUT_TYPE&&(c.currency=t.paymentGateway().currency),c.amount=t.amountRemaining(),
s.push(c),t.createSpinner()}else if(t.isInvoicePayment()){var c={};c={paymentMethodType:n.INVOICE_PAYMENT_TYPE,PONumber:t.poNumber()},c.billingAddress=r,c.amount=t.amountRemaining(),s.push(c)}else if(t.paymentDetails&&t.paymentDetails()){var c={};c=new A(t.paymentDetails()),t.paymentDetails().customProperties&&Object.keys(t.paymentDetails().customProperties).length-1>0&&(c.customProperties=e.mapping.toJS(t.paymentDetails().customProperties)),c.paymentMethodType=n.CARD_PAYMENT_TYPE,c.billingAddress=r,c.amount=t.amountRemaining(),s.push(c)}}if(t.user()&&t.user().orderId()&&t.user().loggedIn()&&!t.hasPaymentType(n.GENERIC_PAYMENT_TYPE)){var u="addPayments",d={};d.orderId=t.user().orderId(),""!=i&&(d.op=i),d.profileId=t.user().id(),d.payments=s,o.request(u,d,function(e){t.postPaymentOrderUpdateSuccess(e)},function(e){var r=new Object;r.orderId=t.id(),r.errorCode=e.errorCode,t.storeServerLog.logError("updateOrderFailure",t.storeServerLog.getMessage("updateOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e)})}},b.prototype.createOrder=function(){if(this.cart().isOrderSubmissionInProgress=!0,this.cart().currentOrderState()==n.PENDING_PAYMENTS)this.addPaymentsToOrder();else{for(var t=this,i=e.observableArray([]),a=t.cart().giftWithPurchaseOrderMarkers,o=t.cart().items,s=0;s<o().length;s++){var l=new T(o()[s].productId,o()[s].quantity,o()[s].productData().childSKUs[0].repositoryId,o()[s].externalPrice,o()[s].externalPriceQuantity,o()[s].giftWithPurchaseCommerceItemMarkers,o()[s].externalData(),o()[s].actionCode(),o()[s].commerceItemId);o()[s].childItems&&(l.childItems=o()[s].childItems,l.configuratorId=o()[s].configuratorId);for(var u=0;u<t.cart().lineAttributes().length;u++)l[t.cart().lineAttributes()[u].id()]=o()[s][t.cart().lineAttributes()[u].id()];i.push(l)}var d=new S(i,t.cart().coupons(),t.cart().total()),p=t.cart().createShippingGroups(),h=void 0;t.showSchedule()&&t.schedule()&&(h=t.schedule().toJSON());var f=void 0;if(t.shippingAddress())if(t.paymentGateway()&&t.paymentGateway().type===n.PAYPAL_CHECKOUT_TYPE&&c.isPathEqualTo(t.cartLink)){var m=t.shippingAddress().isValid();m&&(f=t.shippingAddress().toJSON())}else f=t.shippingAddress().toJSON();var g=void 0;t.billingAddress()&&(g=t.billingAddress().toJSON());var E=!0;if(t.user().loggedIn()&&(E=!1,!t.emailAddress()&&t.user().emailAddress()&&t.emailAddress(t.user().emailAddress())),t.emailAddress()){var y=t.emailAddress().toString();p?p.forEach(function(e){e.shippingAddress.email=y}):f&&(f.email=y)}for(var b=[],s=0;s<t.cart().orderDiscountDescList().length;s++)b.push(t.cart().orderDiscountDescList()[s].promotionId);for(var _=0;_<t.cart().claimedCouponMultiPromotions().length;_++)for(var A=0;A<t.cart().claimedCouponMultiPromotions()[_].promotions().length;A++)b.push(t.cart().claimedCouponMultiPromotions()[_].promotions()[A].promotionId());if(!t.isPayLater()){var C=[];if(t.cashModel().isPayingByCash()){var R={};R.type=n.CASH_PAYMENT_TYPE,t.cashModel().customProperties&&Object.keys(t.cashModel().customProperties).length-1>0&&(R.customProperties=e.mapping.toJS(t.cashModel().customProperties)),C.push(R)}else{if(t.giftCards())for(var s=0;s<t.giftCards().length;s++){var R={};R.type=n.GIFT_CARD_PAYMENT_TYPE,R.giftCardNumber=t.giftCards()[s].giftCardNumber(),R.giftCardPin=t.giftCards()[s].giftCardPin(),t.giftCards()[s].isAmountRemaining()&&!t.isPaypalVerified()||(R.amount=t.giftCards()[s].amountUsed()),R.paymentGroupId=t.giftCards()[s].paymentGroupId,t.giftCards()[s].customProperties&&Object.keys(t.giftCards()[s].customProperties).length-1>0&&(R.customProperties=e.mapping.toJS(t.giftCards()[s].customProperties)),C.push(R)}if(t.payments().length>0)e.utils.arrayForEach(t.payments(),function(e){C.push(e)});else if(t.isPaypalVerified()||t.amountRemaining&&0!=t.amountRemaining())if(t.paymentGateway()&&t.paymentGateway().type)C.push(t.paymentGateway()),t.createSpinner();else if(t.isInvoicePayment())C.push({type:n.INVOICE_PAYMENT_TYPE,PONumber:t.poNumber()});else if(t.paymentDetails&&t.paymentDetails()){var R={};t.isCardPaymentClientSide||(R=new P(t.paymentDetails()),t.paymentDetails().customProperties&&Object.keys(t.paymentDetails().customProperties).length-1>0&&(R.customProperties=e.mapping.toJS(t.paymentDetails().customProperties))),R.type=n.CARD_PAYMENT_TYPE,C.push(R)}}}var O="";O=t.op()!=n.ORDER_OP_INITIATE?n.ORDER_OP_COMPLETE:t.op(),r.clearError(N);var D=v.getVisitorId(),L=v.getVisitId();if(t.user()&&t.user().orderId()&&t.user().loggedIn()&&!t.user().loggedinAtCheckout()&&!t.hasPaymentType(n.GENERIC_PAYMENT_TYPE)){var w=e.observable(new I(t.user().orderId,d,b,t.selectedShippingOption(),h,f,g,D,L,E,null,C,O,a,p,t.cart().combineLineItems));t.adapter.persistUpdate("updateOrder",t.user().orderId(),t.addDynamicProperties(JSON.parse(e.toJSON(w))),function(e){t.postOrderCreateOrUpdateSuccess(e)},function(e){var r=new Object;e&&e.errors&&e.errors instanceof Array?(r.orderId=t.id(),r.errorCode="",e.errors.forEach(function(e){r.errorCode+=e.errorCode+", "}),r.errorCode=r.errorCode.slice(0,-2)):(r.orderId=t.id(),r.errorCode=e.errorCode),t.storeServerLog.logError("updateOrderFailure",t.storeServerLog.getMessage("updateOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e)})}else{t.paymentGateway()&&t.paymentGateway().type==n.PAYPAL_CHECKOUT_TYPE||t.hasPaymentType(n.PAYPAL_CHECKOUT_TYPE)||t.hasPaymentType(n.GENERIC_PAYMENT_TYPE)||t.id(""),t.cart().currentOrderId()&&t.id(t.cart().currentOrderId());var M=e.observable(new I(t.id(),d,b,t.selectedShippingOption(),h,f,g,D,L,E,t.user().id(),C,O,a,p,t.cart().combineLineItems));t.adapter.persistCreate("order","id",t.addDynamicProperties(JSON.parse(e.toJSON(M))),function(e){t.postOrderCreateOrUpdateSuccess(e)},function(e){var r=new Object;e&&e.errors&&e.errors instanceof Array?(r.errorCode="",e.errors.forEach(function(e){r.errorCode+=e.errorCode+", "}),r.errorCode=r.errorCode.slice(0,-2)):r.errorCode=e.errorCode,t.storeServerLog.logError("createOrderFailure",t.storeServerLog.getMessage("createOrderFailure",r)),t.postOrderCreateOrUpdateFailure(e)})}}},b.prototype.addDynamicProperties=function(e){for(var t=this,r=0;r<t.cart().dynamicProperties().length;r++){var i=t.cart().dynamicProperties()[r],a=i.id(),o=null;null!=i.value&&(o=i.value()),e[a]=o}return e},b.prototype.postOrderCreateOrUpdateSuccess=function(e){var a=this;if(a.cart().isOrderSubmissionInProgress=!1,a.id(e.id),a.order(e),a.orderProfileId(e.orderProfileId),a.op(""),a.user()&&a.user().loggedIn()&&a.user().id()==e.orderProfileId&&(a.user().orderId(e.id),a.user().setLocalData("orderId")),e.state==n.SUBMITTED)s.Topic(t.topicNames.ORDER_COMPLETED).publish({message:"success",id:e.id,uuid:e.uuid,payment:e.payments}),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e.id,uuid:e.uuid}]);else if(e.state==n.TEMPLATE)s.Topic(t.topicNames.ORDER_COMPLETED).publish({message:"success",id:e.id,uuid:e.uuid,payment:e.payments}),s.Topic(t.topicNames.SCHEDULED_ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e.id,scheduleOrderId:e.scheduledOrder.id?e.scheduledOrder.id:e.scheduledOrder[0].id,uuid:e.uuid}]);else if(e.state==n.PENDING_APPROVAL||e.state==n.PENDING_SCHEDULED_ORDER_APPROVAL)s.Topic(t.topicNames.ORDER_COMPLETED).publish({message:"success",id:e.id,uuid:e.uuid,payment:e.payments}),a.destroySpinner(),s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e.id,uuid:e.uuid}]);else{for(var o=e.payments,l=!1,u=!1,d=!1,p=0;p<o.length;p++)if(o[p].paymentState==n.PAYMENT_GROUP_STATE_AUTHORIZED_FAILED||o[p].paymentState==n.PAYMENT_GROUP_STATE_PAYMENT_REQUEST_FAILED){this.destroySpinner(),u=!0;var f="";if(o[p]&&o[p].message&&""!==o[p].message){f=o[p].message;var m={orderId:e.id,paymentState:o[p].paymentState,paymentGroupId:o[p].paymentGroupId};a.storeServerLog.logError("paymentGroupFailure",a.storeServerLog.getMessage("paymentGroupFailure",m))}else{var m={orderId:e.id};a.storeServerLog.logError("orderSubmissionFailure",a.storeServerLog.getMessage("orderSubmissionFailure",m)),f=i.t("ns.common:resources.orderSubmissionFailed")}r.sendError(N,f,!0),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publishWith(e,[{message:"fail",data:o[p]}]),l=!0,(a.isPaypalVerified()||a.cart().checkoutWithPaypalClicked())&&a.clearPaypalData();break}if(!l)for(var p=0;p<o.length;p++){if(o[p].gatewayName==n.PAYPAL_GATEWAY_ID&&o[p].uiIntervention==n.REDIRECT){u=!0,a.paymentGateway(null),h.getInstance().setItem(n.REDIRECTED_TO_WEB_PAYMENT,"true"),window.location=e.payments[p].REDIRECT;break}if(o[p].type===n.PAYPAL_PAYMENT_TYPE||o[p].type===n.GENERIC_PAYMENT_TYPE){d=!0,u=!0;break}if(o[p].gatewayName==n.CYBERSOURCE_GATEWAY_ID&&o[p].uiIntervention==n.SOP){u=!0,this.destroySpinner(),c.goTo(a.paymentLink,!0),s.Topic(t.topicNames.ORDER_CREATED).publish([{message:"success",id:e.id,uuid:e.uuid}]);break}if(o[p].uiIntervention==n.PAYER_AUTH_REQUIRED){u=!0,this.destroySpinner(),c.goTo(a.paymentLink,!0),s.Topic(t.topicNames.ORDER_CREATED).publish([{message:"success",id:e.id,uuid:e.uuid,customPaymentProperties:o[p].customPaymentProperties}]);break}if(o[p].gatewayName==n.PAYULATAM_GATEWAY_ID&&o[p].uiIntervention==n.SOP){u=!0,s.Topic(t.topicNames.PAYULATAM_WEB_CHECKOUT).publishWith(o[p],[{message:"success",id:e.id,uuid:e.uuid}]),h.getInstance().setItem(n.REDIRECTED_TO_WEB_PAYMENT,"true");break}}if(u)(e.state===n.INCOMPLETE||d)&&s.Topic(t.topicNames.ORDER_CREATED_INITIAL).publishWith(e,[{message:"success",order:e}]),this.destroySpinner();else{this.destroySpinner();var f=i.t("ns.common:resources.orderSubmissionFailed");r.sendError(N,f,!0),s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publishWith(e,[{message:"fail",data:e}])}}},b.prototype.postOrderCreateOrUpdateFailure=function(e){var a=this;if(this.destroySpinner(),a.cart().isOrderSubmissionInProgress=!1,e&&e.message&&""!==e.message)if(e.errorCode==n.INVENTORY_CONFIGURABLE_ITEM_CHECK_ERROR)e.message=i.t("ns.common:resources.orderPricingPromotionError"),r.sendError(N,e.message,!0);else if(e.errors instanceof Array){var o=!1;for(var c in e.errors){if(e.errors[c].errorCode==n.EXTERNAL_PRICE_CHANGED||e.errors[c].errorCode==n.EXTERNAL_PRICE_PARTIAL_FAILURE_ERROR){e.message=i.t("ns.common:resources.orderPricingPromotionError"),r.sendError(N,e.message,!0),o=!0;break}if(o=a.checkSingleException(e),1==o)break}}else a.checkSingleException(e);s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publishWith(e,[{message:"fail",data:e}])},b.prototype.authPayment=function(){var r=this,i=(r.order(),new _(r.emailAddress(),e.toJS(r.billingAddress()),r.paymentDetails(),r.order()));s.Topic(t.topicNames.ORDER_AUTHORIZE_PAYMENT).publish([{message:"success",details:i}])},b.prototype.paymentAuthorized=function(e){s.Topic(t.topicNames.ORDER_SUBMISSION_SUCCESS).publish([{message:"success",id:e[0].id,uuid:e[0].uuid}])},b.prototype.paymentDeclined=function(e){s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publish([{message:"fail"}])},b.prototype.paymentTimeout=function(e){s.Topic(t.topicNames.ORDER_SUBMISSION_FAIL).publish([{message:"fail"}])},b.prototype.setContext=function(e){this.contextData=e,this.paymentLink=this.contextData.global.links.payment.route,this.checkoutLink=this.contextData.global.links.checkout.route,this.cartLink=this.contextData.global.links.cart.route,this.isCardPaymentClientSide=this.contextData.page.payment.isCardPaymentClientSide,this.contextData&&this.contextData.global&&this.contextData.global.site&&this.contextData.global.site.extensionSiteSettings&&this.contextData.global.site.extensionSiteSettings.storeEndpointSettings&&this.contextData.global.site.extensionSiteSettings.storeEndpointSettings.cartFields&&(this.fields=this.contextData.global.site.extensionSiteSettings.storeEndpointSettings.cartFields)},b.prototype.destroySpinner=function(){s("#loadingModal").hide(),l.destroy()},b.prototype.createSpinner=function(e){var t={parent:"#loadingModal",posTop:"0",posLeft:"50%"},e=i.t("ns.common:resources.loadingText");s("#loadingModal").removeClass("hide"),s("#loadingModal").show(),t.loadingText=e,l.create(t)},b.prototype.addValidationCallback=function(e){e&&"function"==typeof e&&this.validationCallbacks.push(e)},b.prototype.triggerValidationCallbacks=function(){if(this.validationCallbacks.length>0)for(var e=this.validationCallbacks.length,t=0;t<e;t++)this.validationCallbacks[t]&&"function"==typeof this.validationCallbacks[t]&&this.validationCallbacks[t]()},b.prototype.addValidationError=function(e,t){this.errorFlag=!0;var a=t;a&&""!==a||(a=i.t("ns.common:resources.checkoutErrorMsg")),r.sendError(e,a,!0)},b.prototype.postPaymentOrderUpdateSuccess=function(e){for(var t=this,i=e.orderId,a=n.ENDPOINT_GET_ORDER,s=0;s<e.paymentResponses.length;s++)e.paymentResponses[s].type==n.PAYPAL_PAYMENT_TYPE&&h.getInstance().setItem(n.PAYMENT_GROUP_AFTER_PAYPAL,e.paymentResponses[s].paymentGroupId);o.request(a,null,function(r){for(var i=0;i<e.paymentResponses.length;i++)for(var a=0;a<r.payments.length;a++)if(e.paymentResponses[i].paymentGroupId==r.payments[a].paymentGroupId){r.payments[a].customPaymentProperties=e.paymentResponses[i].customPaymentProperties,r.payments[a].uiIntervention=e.paymentResponses[i].uiIntervention;break}t.postOrderCreateOrUpdateSuccess(r)},function(e){t.destroySpinner(),r.sendError(N,e.message,!0)},i)},b.prototype.handlePayments=function(){try{this.enableOrderButton(!1),this.errorFlag=!1,this.isOrderSubmitted=!1,this.isOrderLocked||this.isOrderSubmitted||(this.isOrderLocked=!0,this.triggerValidationCallbacks(),this.validateCheckoutPaymentDetails(),this.validateGiftcards(),this.validatePaymentMethodsForScheduledOrder(),this.validateBillingAddress(),this.validateDynamicProperties(),this.errorFlag?this.enableOrderButton(!0):(this.createSpinner(),this.isPayULatamCheckout()&&this.preparePayULatamDataForCreateOrder(n.PAYULATAM_CHECKOUT_TYPE),this.user().loggedIn()&&!this.user().isB2BUser()?(this.placeOrder=!0,this.user().handleUpdateProfile()):this.addPaymentsToOrder()),this.isOrderLocked=!1)}catch(r){var e=this.user().loggedIn()?this.user().emailAddress():this.emailAddress(),t=new O(r,this.cart().items(),e,v.getVisitorId(),v.getVisitId());this.exceptionHandler.logWindowOnError(JSON.stringify(t),"","")}},b.prototype.handlePlaceOrder=function(){try{if(this.enableOrderButton(!1),this.errorFlag=!1,this.isOrderSubmitted=!1,!this.isOrderLocked&&!this.isOrderSubmitted){if(this.isOrderLocked=!0,this.validateCheckoutRegistration(),this.validateCheckoutCartSummary(),this.showSchedule()&&this.validateSchedule(),this.cart().isSplitShipping()?this.validateShippingGroupRelationships():(this.validateShippingAddress(),this.validateCheckoutOrderSummary()),this.triggerValidationCallbacks(),this.isPayLater()?(r.clearError("checkoutPaymentDetails"),r.clearError("checkoutGiftCards"),r.clearError("checkoutPaymentMethodsForScheduledOrder")):(this.validateCheckoutPaymentDetails(),this.validateGiftcards(),this.validatePaymentMethodsForScheduledOrder()),this.validateBillingAddress(),this.validateDynamicProperties(),this.placeHolderItemsMsgDisplayed||this.validatePlaceHolderItems(),this.errorFlag)this.enableOrderButton(!0);else if(s.Topic(t.topicNames.CHECKOUT_SAVE_SHIPPING_ADDRESS).publishWith(this.shippingAddress(),[{message:"success"}]),this.createSpinner(),this.isPayULatamCheckout()&&this.preparePayULatamDataForCreateOrder(n.PAYULATAM_CHECKOUT_TYPE),this.createAccount()===!0){var e={widgetId:"checkoutRegistration"};this.user().updateLocalData(!0,!1),this.user().registerUser(e),this.registerUser=!0}else this.user().loggedIn()&&!this.user().isB2BUser()?(this.placeOrder=!0,this.user().handleUpdateProfile()):this.createOrder();this.isOrderLocked=!1}}catch(e){var i=this.user().loggedIn()?this.user().emailAddress():this.emailAddress(),a=new O(e,this.cart().items(),i,v.getVisitorId(),v.getVisitId());this.exceptionHandler.logWindowOnError(JSON.stringify(a),"","","",e),this.cart().isOrderSubmissionInProgress=!1}},b.prototype.checkOrderForApproval=function(e){var t=this,r={};r.orderId=e.orderId;var i="checkRequiresApproval";o.request(i,r,function(e){t.approvalRequired(e.requiresApproval)},function(e){})},b.getInstance=function(e,t,r,i,a){return b.prototype.singleInstance||(b.prototype.singleInstance=new b(e,t,r,a)),i&&b.prototype.singleInstance.setContext(i),b.prototype.singleInstance},b}),define("pageLayout/layout-mapping",["knockout"],function(e,t){"use strict";function r(t){var r=this;return this.ignore=["data"],this.regions={create:function(i){var a;return a=new t.RegionViewModel,e.mapping.fromJS(i.data,r,a),a.handleMetadata(),a}},this.widget={create:function(i){var a,o=null;return i.data.id&&(a=t.widgetCache.get("widget",i.data.id),void 0!==a&&void 0!==a.hit&&a.hit?o=a.result:(o=new t.WidgetViewModel(t.basePath),e.mapping.fromJS(i.data,r,o),t.initializeWidget(o,!0),t.widgetCache.set("widget",i.data.id,o))),o}},this.widgets={create:function(e){return r.widget.create(e)}},this}return r}),define("pageLayout/context-handler",["knockout"],function(e){"use strict";function t(){return this.values={global:{},page:{},user:{}},this.eventAnchor=$({}),this}return t.prototype.exclusiveSet=function(t,r,i){var a,o;if(i=i||"user",o=this.values[i],t){for(a in o)o.hasOwnProperty(a)&&a!==t&&this.values[a]&&(this.eventAnchor.trigger(t,null),e.isObservable(o[a])?o[a](null):(o[a]=e.observable(null),o[a].isData=!0));this.set(t,r,i)}},t.prototype.set=function(t,r,i){var a,o;i=i||"user",o=this.values[i],t&&o&&(a=e.utils.unwrapObservable(r),(!o[t]||a!==o[t]()&&(a||o[t]()))&&(o[t]?o[t](a):(o[t]=e.observable(a),o[t].isData=!0),this.eventAnchor.trigger(t,o[t])))},t.prototype.get=function(t,r){var i;return r=r||"user",i=this.values[r],t&&i?e.isObservable(i[t])?i[t]:(i[t]=e.observable(),i[t].isData=!0,i[t]):null},t.prototype.listen=function(e,t){e&&(this.eventAnchor.on(e,t),t(null,this.values[e]))},t.prototype.unlisten=function(e,t){e&&this.eventAnchor.off(e,t)},t.prototype.flush=function(t){var r;t&&(this.eventAnchor=$({}));for(r in this.values.page)this.values.page.hasOwnProperty(r)&&(t||this.eventAnchor.trigger(r,null),e.isObservable(this.values[r])?this.values.page[r](null):this.values.page[r]=null);for(r in this.values.user)this.values.user.hasOwnProperty(r)&&(t||this.eventAnchor.trigger(r,null),e.isObservable(this.values.user[r])?this.values.user[r](null):this.values.user[r]=null)},t}),define("pageLayout/view-model-builder",["knockout"],function(e){"use strict";return{page:{scope:"global",cachable:!0,load:!0},layout:{cachable:!1,load:function(t,r,i){var a;a=i&&i.model?i.model:new r.masterViewModel;var o={ignore:["data","regions"]};return e.mapping.fromJS(t,o,a),a.data=t.data,a}},region:{cachable:!1,load:function(t,r,i){var a,o=null;return null!==t.id&&void 0!==t.id&&(a=r.cache.get("region",t.id),void 0!==a&&void 0!==a.hit&&a.hit?o=a.result:(o=new r.RegionViewModel,e.mapping.fromJS(t,r.layoutMapping,o),r.cache.set("region",t.id,o))),o.handleMetadata(),o}},widgetDefinition:{cachable:!0,load:function(t,r,i){var a=!1,o=new r.WidgetViewModel(r.basePath);return i&&i.load===!0&&(a=!0),e.mapping.fromJS(t,{},o),r.initializeWidget(o,a),o}},widget:{cachable:!0,load:function(t,r,i){var a=!0,o=new r.WidgetViewModel(r.basePath);return i&&i.load===!1&&(a=!1),e.mapping.fromJS(t,{},o),r.initializeWidget(o,a),o}},category:{cachable:!0,load:!0},product:{cachable:!0,load:function(e,t,r){var i=!0;r&&r.load===!1&&(i=!1);var a=new t.ProductViewModel(e,r);return a.fetchSkuProperties(),a}},store:{scope:"global",cachable:!0,load:!0},links:{scope:"global",cachable:!1,load:!0},payment:{scope:"page",cachable:!1,create:!0,load:function(e,t,r){return t.PaymentDetails.getInstance(t.adapter,e)}},cart:{scope:"global",cachable:!1,load:function(e,t,r){return t.CartViewModel.getInstance(t.adapter,e,r,t.contextHandler.get("user","global"))}},order:{scope:"page",cachable:!1,load:function(e,t,r){return t.OrderViewModel.getInstance(t.adapter,t.contextHandler.get("cart","global"),e,r,t.contextHandler.get("user","global"))}},confirmation:{cachable:!0,load:!0},productList:{cachable:!0,load:function(e,t,r){return e.products}},categoryList:{cachable:!1,load:function(e,t,r){return e}},search:{scope:"global",cachable:!1,load:function(e,t,r){return t.SearchViewModel.getInstance(t.adapter,e,r)}},site:{scope:"global",cachable:!1,load:function(e,t,r){return t.SiteViewModel.getInstance(t.adapter,e,r)}},shippingmethods:{scope:"page",cachable:!1,load:function(e,t,r){return t.ShippingMethodsViewModel.getInstance(t.adapter,e)}},paymentauthorization:{scope:"page",cachable:!1,load:function(e,t,r){var i=new t.PaymentAuthResponseViewModel(t.adapter,e);return i}},space:{scope:"global",cachable:!1,load:function(e,t,r){return t.SpaceViewModel.getInstance(t.adapter,e,r)}},user:{scope:"global",cachable:!1,load:function(e,t,r){return t.UserViewModel.getInstance(t.adapter,e,r)}}}}),define("viewModels/searchResultDetails",["knockout","ccConstants","ccLogger"],function(e,t,r){"use strict";function i(){if(null!==a)throw new Error("Cannot instantiate more than one SearchResultDetails, use SearchResultDetails.getInstance()");this.initialize()}var a=null;return i.prototype={initialize:function(){this.searchResults=[],this.totalRecordsFound=0,this.recordsPerPage=t.DEFAULT_SEARCH_RECORDS_PER_PAGE,this.searchAdjustments={},this.breadcrumbs={},this.navigation={},this.pageCount=0,this.recordOffSet=0},update:function(e){var i=[],a=[];if(null!=e){if(e["@error"])return void r.error("An error occurred while searching -"+e["@error"]);if(e.resultsList){var o="records"in e.resultsList?e.resultsList.records:[];this.searchResults=this.formatSearchResults(o),this.totalRecordsFound="totalNumRecs"in e.resultsList?e.resultsList.totalNumRecs:0,this.recordsPerPage="totalNumRecs"in e.resultsList?e.resultsList.recsPerPage:t.DEFAULT_SEARCH_RECORDS_PER_PAGE,this.recordOffSet="firstRecNum"in e.resultsList?e.resultsList.firstRecNum-1:0;var n=this.totalRecordsFound%this.recordsPerPage>0?1:0;this.pageCount=this.totalRecordsFound>0?Math.floor(this.totalRecordsFound/this.recordsPerPage)+n:0,"pagingActionTemplate"in e.resultsList&&(this.pagingActionTemplate=e.resultsList.pagingActionTemplate)}e.searchAdjustments&&(e.searchAdjustments.originalTerms&&(i=e.searchAdjustments.originalTerms),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}),"undefined"!=typeof i[0]&&i[0]==t.PRODUCT_DISPLAYABLE&&i.splice(0,1),a=i.slice(),$.each(i,function(e,r){r.endsWith(t.SEARCH_WILDCARD)&&(i[e]=r.substr(0,r.length-1))}),e.searchAdjustments.originalTerms=i,e.searchAdjustments.originalSearchTerms=a),this.searchAdjustments=e.searchAdjustments,this.breadcrumbs=e.breadcrumbs,e.navigation&&(this.navigation=e.navigation.navigation)}},formatSearchResults:function(e){for(var t=[],r=0;r<e.length;r++){var i=this.formatRecord(e[r].records[0]);i.childSKUs=this.formatChildSkus(e[r].records);var a=["sku.maxActivePrice","sku.minActivePrice","product.repositoryId"];for(var o in e[r].attributes)a.indexOf(o)==-1&&(i[o]=e[r].attributes[o]);e[r].attributes["sku.maxActivePrice"]&&e[r].attributes["sku.maxActivePrice"][0]&&(i.maxActivePrice=e[r].attributes["sku.maxActivePrice"][0]),e[r].attributes["sku.minActivePrice"]&&e[r].attributes["sku.minActivePrice"][0]&&(i.minActivePrice=e[r].attributes["sku.minActivePrice"][0]),i.originalRecord=e[r],t.push(i)}return t},formatChildSkus:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i]={salePrice:e[i].attributes["sku.salePrice"]?e[i].attributes["sku.salePrice"][0]:null,listPrice:e[i].attributes["sku.listPrice"]?e[i].attributes["sku.listPrice"][0]:null,repositoryId:e[i].attributes["sku.repositoryId"],largeImage:{url:e[i].attributes["sku.listingLargeImageURL"]?e[i].attributes["sku.listingLargeImageURL"][0]:""},smallImage:{url:e[i].attributes["sku.listingSmallImageURL"]?e[i].attributes["sku.listingSmallImageURL"][0]:""},primaryThumbImageURL:e[i].attributes["sku.listingThumbImageURL"]?e[i].attributes["sku.listingThumbImageURL"][0]:""};return r},formatRecord:function(e){var t,r,i={},a=["product.repositoryId","product.displayName","product.shippingSurcharge","product.listPrice","product.salePrice","product.description","sku.styleProperty","product.avgCustRating","product.primaryImageAltText","product.primaryImageTitle","product.primaryLargeImageURL","product.primarySmallImageURL","product.primaryMediumImageURL","product.primaryFullImageURL","product.primaryThumbImageURL","sku.listingFullImageURL"];for(var o in e.attributes)a.indexOf(o)==-1&&(i[o]=e.attributes[o]);if(e.attributes["product.repositoryId"]?(i.id=e.attributes["product.repositoryId"],i.repositoryId=e.attributes["product.repositoryId"]):(i.id="",i.repositoryId=""),e.attributes["product.displayName"]?i.displayName=e.attributes["product.displayName"][0]:i.displayName="",e.attributes["product.shippingSurcharge"]?i.shippingSurcharge=Number(e.attributes["product.shippingSurcharge"]):i.shippingSurcharge=0,i.listPrice=Number(e.attributes["product.listPrice"]),i.salePrice=Number(e.attributes["product.salePrice"]),e.attributes["product.description"]?e.attributes["product.description"]instanceof Array&&e.attributes["product.description"].length>0?(i.description=e.attributes["product.description"][0],i.longDescription=e.attributes["product.description"][0]):(i.description=e.attributes["product.description"],i.longDescription=e.attributes["product.description"]):(i.description="",i.longDescription=""),i.route=e.attributes["product.route"]&&e.attributes["product.route"][0]?e.attributes["product.route"][0]:"",Array.isArray(e.attributes["sku.styleProperty"])&&(t=e.attributes["sku.styleProperty"][0],t&&(Array.isArray(e.attributes["sku."+t])&&(r=e.attributes["sku."+t][0]),r&&(i.listingSku={},i.listingSku.images=[],i.listingSku.route=i.route+"?variantName="+t+"&variantValue="+r))),e.attributes["product.avgCustRating"]&&(i.avgCustRating=e.attributes["product.avgCustRating"]),e.attributes["product.primaryImageAltText"]&&(i.primaryImageAltText=e.attributes["product.primaryImageAltText"]),e.attributes["product.primaryImageTitle"]&&(i.primaryImageTitle=e.attributes["product.primaryImageTitle"]),i.primaryLargeImageURL=e.attributes["product.primaryLargeImageURL"]&&e.attributes["product.primaryLargeImageURL"][0]?e.attributes["product.primaryLargeImageURL"][0]:"",i.primarySmallImageURL=e.attributes["product.primarySmallImageURL"]&&e.attributes["product.primarySmallImageURL"][0]?e.attributes["product.primarySmallImageURL"][0]:"",i.primaryThumbImageURL=e.attributes["product.primaryThumbImageURL"]&&e.attributes["product.primaryThumbImageURL"][0]?e.attributes["product.primaryThumbImageURL"][0]:"",i.primaryMediumImageURL=e.attributes["product.primaryMediumImageURL"]&&e.attributes["product.primaryMediumImageURL"][0]?e.attributes["product.primaryMediumImageURL"][0]:"",i.primaryFullImageURL=e.attributes["product.primaryFullImageURL"]&&e.attributes["product.primaryFullImageURL"][0]?e.attributes["product.primaryFullImageURL"][0]:"",e.attributes["sku.listingFullImageURL"]&&e.attributes["sku.listingFullImageURL"][0]){var n={};n.metadata={},i.listingSku||(i.listingSku={},i.listingSku.images=[],i.listingSku.route=i.route),i.listingSku.images.push(n),e.attributes["sku.listingLargeImageURL"]&&(i.listingSku.primaryLargeImageURL=e.attributes["sku.listingLargeImageURL"][0]),e.attributes["sku.listingSmallImageURL"]&&(i.listingSku.primarySmallImageURL=e.attributes["sku.listingSmallImageURL"][0]),e.attributes["sku.listingThumbImageURL"]&&(i.listingSku.primaryThumbImageURL=e.attributes["sku.listingThumbImageURL"][0]),e.attributes["sku.listingMediumImageURL"]&&(i.listingSku.primaryMediumImageURL=e.attributes["sku.listingMediumImageURL"][0]),e.attributes["sku.listingFullImageURL"]&&(i.listingSku.primaryFullImageURL=e.attributes["sku.listingFullImageURL"][0])}return i}},i.getInstance=function(){return null===a&&(a=new i),a},i.getInstance()}),define("pageLayout/search",["knockout","pubsub","ccLogger","viewModels/searchResultDetails","ccConstants","pageViewTracker","navigation","ccStoreConfiguration"],function(e,t,r,i,a,o,n,s){"use strict";function c(l,u){if(c.prototype.singleInstance)throw new Error("Cannot instantiate more than one SearchViewModel, use SearchViewModel.getInstance(pAdapter, data)");var d=this;return d.adapter=l,d.isNewSearch=!0,d.isCategorySearch=!1,d.isRequesting=!1,d.searchLocale=e.observable(),d.storeConfiguration=s.getInstance(),d.createSearch=function(t){var r,i,n,s=this;r=e.observableArray([]),s.getFromUrlParam&&(s=d);for(var c in this)this.hasOwnProperty(c)&&(s[c]=this[c]);if(n={},s.searchText&&(n[a.SEARCH_TERM_KEY]=s.searchText),s.recSearcKey&&(n[a.SEARCH_NAV_EREC_SEARCHES_KEY]=s.recSearchKey),s.recSpellCorrectionKey&&(n[a.SEARCH_DYM_SPELL_CORRECTION_KEY]=s.recSpellCorrectionKey),n[a.SEARCH_NAV_ERECS_OFFSET]=s.recordOffSet,n[a.SEARCH_REC_PER_PAGE_KEY]=s.recordsPerPage,"undefined"!=typeof s.navigationDescriptors&&""!=s.navigationDescriptors&&(n[a.SEARCH_NAV_DESCRIPTORS_KEY]=s.navigationDescriptors),s.suppressResults&&(n[a.SEARCH_SUPPRESS_RESULTS]=!0),s.sortDirectiveProperty){var l=s.sortDirectiveProperty;l+=void 0!==s.sortDirectiveOrder&&"desc"===s.sortDirectiveOrder?"|1":"|0",n[a.SEARCH_SORT_ORDER]=l}n[a.VISITOR_ID]=o.getVisitorId(),n[a.VISIT_ID]=o.getVisitId(),n[a.SEARCH_LANGUAGE]=d.searchLocale(),n[a.SEARCH_TYPE]=s.searchType,void 0!==s.newSearch?d.isNewSearch=s.newSearch:d.isNewSearch=!0,i="guidedsearch",d.isRequesting||(d.isRequesting=!0,void 0!==s.searchText?d.isCategorySearch=!1:d.isCategorySearch=!0,d.adapter.loadJSON("search",i,n,d.searchSuccess,d.searchError))},d.createSearchAndAddData=function(e){if(this.parameters.type==a.PARAMETERS_SEARCH_QUERY)if(null!=this.parameters.Ntt&&void 0!=this.parameters.Ntt?d.searchText=decodeURIComponent(this.parameters.Ntt):d.searchText="",null!=this.parameters.Nr&&void 0!=this.parameters.Nr&&(d.recSearchKey=decodeURIComponent(this.parameters.Nr)),"1"===this.parameters.Ntt&&null!=this.parameters.Ntk&&void 0!=this.parameters.Ntk&&(d.recSearchKey=decodeURIComponent(this.parameters.Ntk)),void 0===d.recSearchKey&&(d.recSearchKey=""),this.parameters.Nty?d.recDYMSuggestionKey=decodeURIComponent(this.parameters.Nty):d.recDYMSuggestionKey="",null!==this.parameters.N&&void 0!==this.parameters.N?d.navigationDescriptors=decodeURIComponent(this.parameters.N).replace(/\+/g," "):d.navigationDescriptors="",this.parameters.page&&"number"==typeof parseInt(this.parameters.page)?d.pageNumber=parseInt(this.parameters.page):d.pageNumber=1,"number"!=typeof parseInt(this.parameters.No)?d.recordOffSet=0+(d.pageNumber-1)*a.DEFAULT_SEARCH_RECORDS_PER_PAGE:d.recordOffSet=parseInt(this.parameters.No)+(d.pageNumber-1)*a.DEFAULT_SEARCH_RECORDS_PER_PAGE,"number"!=typeof parseInt(this.parameters.Nrpp)?d.recordsPerPage=a.DEFAULT_SEARCH_RECORDS_PER_PAGE:d.recordsPerPage=parseInt(this.parameters.Nrpp),this.parameters.Ns){var t=decodeURIComponent(this.parameters.Ns).split("|");2===t.length&&(d.sortDirectiveProperty=t[0],d.sortDirectiveOrder="1"==t[1]?"desc":"asc")}else d.sortDirectiveProperty="",d.sortDirectiveOrder=""},d.searchSuccess=function(e){if(e&&e["endeca:redirect"]&&e["endeca:redirect"].link&&e["endeca:redirect"].link.url){var o=e["endeca:redirect"].link.url;return"/"!==o.charAt(0)?window.location.replace(o):n.goTo(o,!1,!0),void(d.isRequesting=!1)}var s=[{message:a.SEARCH_MESSAGE_SUCCESS,requestor:d}];e["@error"]?(r.error("search error returned :"+e["@error"]),s=[{message:a.SEARCH_MESSAGE_FAIL}]):(i.update(e),i.isNewSearch=d.isNewSearch),d.isCategorySearch?$.Topic(t.topicNames.SEARCH_RESULTS_FOR_CATEGORY_UPDATED).publishWith(i,s):$.Topic(t.topicNames.SEARCH_RESULTS_UPDATED).publishWith(i,s),d.isRequesting=!1},d.searchError=function(e){if(d.isCategorySearch)$.Topic(t.topicNames.SEARCH_FAILED_TO_PERFORM).publish();else{var r=[{message:a.SEARCH_MESSAGE_FAIL}];$.Topic(t.topicNames.SEARCH_RESULTS_UPDATED).publishWith(e,r)}d.isRequesting=!1},d.typeaheadSearch=function(e){var t,r;this.searchText=this.searchText.trim();var i=o.getVisitorId(),n=o.getVisitId();r={},r[a.SEARCH_TERM_KEY]=this.searchText,r[a.SEARCH_NAV_EREC_SEARCHES_KEY]=a.TYPEAHEAD_SEARCH_INTERFACE,r[a.SEARCH_NAV_ERECS_OFFSET]=this.recordOffSet,
r[a.SEARCH_REC_PER_PAGE_KEY]=this.recordsPerPage,r[a.VISITOR_ID]=i,r[a.VISIT_ID]=n,r[a.SEARCH_TYPE]=a.SEARCH_TYPE_TYPEAHEAD,r[a.SEARCH_LANGUAGE]=d.searchLocale(),r[a.ASSEMBLER_PATH_QUERY_PARAM]=a.ASSEMBLER_DEFAULT_TYPEAHEAD_PATH,r[a.ASSEMBLER_REDIRECTS_QUERY_PARAM]="yes",r[a.ASSEMBLER_SITE_QUERY_PARAM]="default",void 0!==this.newSearch&&(d.isNewSearch=this.newSearch),t="assembler",d.adapter.loadJSON("assembler",t,r,d.typeaheadSuccess,d.typeaheadError)},d.typeaheadSuccess=function(e){var o=[{message:a.SEARCH_MESSAGE_SUCCESS}];e["@error"]&&(r.error("search error returned :"+e["@error"]),o=[{message:a.SEARCH_MESSAGE_FAIL}]);var n=[];if(e.resultsList&&e.resultsList.records){var s=[];n=e.resultsList.records,i.update(e),s.push(i.searchResults),s.push(n)}$.Topic(t.topicNames.SEARCH_TYPEAHEAD_UPDATED).publishWith(s,[{message:"success"}])},d.typeaheadError=function(e){var r=([{message:a.SEARCH_MESSAGE_FAIL}],[]);$.Topic(t.topicNames.SEARCH_TYPEAHEAD_UPDATED).publishWith(r,[{message:"success"}])},$.Topic(t.topicNames.SEARCH_CREATE_CATEGORY_LISTING).subscribe(d.createSearch),$.Topic(t.topicNames.SEARCH_CREATE).subscribe(d.createSearch),$.Topic(t.topicNames.PAGE_PARAMETERS).subscribe(d.createSearchAndAddData),$.Topic(t.topicNames.SEARCH_TYPEAHEAD).subscribe(d.typeaheadSearch),d}return c.prototype.setContext=function(e){var t=this;e.global.locale&&t.searchLocale(e.global.locale),t.contextData=e},c.getInstance=function(e,t,r){return c.prototype.singleInstance||(c.prototype.singleInstance=new c(e,t)),r&&c.prototype.singleInstance.setContext(r),c.prototype.singleInstance},c.prototype.getFilteredNavState=function(e){for(var t=[],r=[a.VISITOR_ID,a.VISIT_ID,a.SEARCH_LANGUAGE,a.SEARCH_TYPE],i=e.split("&"),o=0;o<i.length;o++){var n=i[o].split("=");r.indexOf(n[0])==-1&&t.push(i[o])}return t.join("&")},c}),define("viewModels/shippingMethodItemViewModel",["knockout","pubsub","ccStoreUtils"],function(e,t,r){"use strict";function i(i,a){var o=this;return r.fromJS(i,o,!0),o.cartValue=e.observable(a),o.estimatedCostText=e.computed(function(){var e=o.calcCorrectAmout(o.cartValue()),t=e.toFixed(2).toString();return t},o),o.shippingCost=e.computed(function(){var e=o.calcCorrectAmout(o.cartValue());return e},o),o.cartUpdatedMethod=function(e){o.cartValue(e.amount())},$.Topic(t.topicNames.CART_UPDATED).subscribe(o.cartUpdatedMethod),o}return i.prototype.calcCorrectAmout=function(e){for(var t=this,r=0,i=0;i<t.ranges.length;i++){var a=t.ranges[i].high,o=t.ranges[i].low;null==t.ranges[i].high&&(a=Number.MAX_VALUE),e>=o&&e<=a&&(r=t.ranges[i].amount)}return r},i}),define("pageLayout/shippingmethods",["knockout","pubsub","ccConstants","viewModels/shippingMethodItemViewModel","ccLogger","pageLayout/cart","jquery"],function(e,t,r,i,a,o,n){"use strict";function s(c,l){if(s.singleInstance)throw new Error("Cannot instantiate more than one ShippingMethodsViewModel, use getInstance(pAdapter, data)");var u=this;return u.adapter=c,u.shippingOptions=e.observableArray(),u.defaultShipping=e.observable(),u.defaultShippingName=e.observable(),u.loadShippingOptions=function(){var e={};u.cart=o.getInstance(null,null,null),e[r.PRODUCT_IDS_FOR_SHIPPING]=this[r.PRODUCT_IDS_FOR_SHIPPING],void 0!==this[r.PROFILE_ID]&&(e[r.PROFILE_ID]=this[r.PROFILE_ID]);var s=this[r.SHIPPING_ADDRESS_FOR_METHODS];e.priceInfo={amount:u.cart.amount(),total:u.cart.total(),shipping:u.cart.shipping(),totalWithoutTax:u.cart.totalWithoutTax(),currencyCode:u.cart.currencyCode(),shippingSurchargeValue:u.cart.shippingSurcharge(),tax:u.cart.tax(),subTotal:u.cart.subTotal(),orderDiscount:u.cart.orderDiscount(),coupons:u.cart.coupons()},e.items=[];for(var c=0;c<u.cart.items().length;c++){var l=u.cart.items()[c];l.price=l.itemTotal,e.items.push(l)}s&&(s.afterValidation&&u.cart.shippingMethod()||(e[r.SHIPPING_ADDRESS_FOR_METHODS]=s.toJSON(),e[r.POPULATE_SHIPPING_METHODS]=!0,u.adapter.persistCreate(r.ENDPOINT_SHIPPING_METHODS_LIST_SHIPPING_METHODS,"id",e,function(e){var a;if(u.shippingOptions.removeAll(),u.cart=o.getInstance(null,null,null),void 0!==e){for(a=0;a<e.length;a++)u.shippingOptions.push(new i(e[a],u.cart?u.cart.amount():0));u.setDefaultShipping()}var s=[{message:r.SEARCH_MESSAGE_SUCCESS}];n.Topic(t.topicNames.SHIPPING_METHODS_LOADED).publishWith(u,s),u.cart.shippingMethodsLoaded.call(u)},function(e){e&&e.message&&""!==e.message?a.error("order.loadShippingMethod"+e.message):a.error("order.loadShippingMethod - unknown error returned"),n.Topic(t.topicNames.LOAD_SHIPPING_METHODS_FAILED).publishWith(e)})),delete s.afterValidation)},n.Topic(t.topicNames.POPULATE_SHIPPING_METHODS).subscribe(u.loadShippingOptions),n.Topic(t.topicNames.RELOAD_SHIPPING_METHODS).subscribe(u.loadShippingOptions),u}return s.prototype.updateEstimatedTextCost=function(t){var r=this;e.utils.arrayForEach(r.shippingOptions(),function(e){e.cartValue(t)})},s.prototype.calcCorrectAmout=function(e,t){for(var r=0,i=0;i<e.ranges.length;i++){var a=e.ranges[i].high,o=e.ranges[i].low;null==e.ranges[i].high&&(a=Number.MAX_VALUE),t>=o&&t<=a&&(r=e.ranges[i].amount)}return r},s.prototype.setDefaultShipping=function(){var e=this;e.shippingOptions().length>=1&&(e.defaultShipping(e.shippingOptions()[0].repositoryId),e.defaultShippingName(e.shippingOptions()[0].displayName))},s.getInstance=function(e,t){return s.singleInstance||(s.singleInstance=new s(e,t)),s.singleInstance},s}),define("pageLayout/payment-auth-response",["pubsub","ccConstants","ccLogger","ccStoreServerLogger","ccStoreConfiguration"],function(e,t,r,i,a){"use strict";function o(r,o){var s=this;return s.adapter=r,s.numOfRetries=o.maxTries?o.maxTries:t.PAYMENT_AUTHORIZATION_DEFAULT_TRIES,s.delay=o.interval?o.interval:t.PAYMENT_AUTHORIZATION_DEFAULT_INTERVAL,s.storeServerLog=i.getInstance(),s.storeConfiguration=a.getInstance(),void 0!=n&&$.Topic(e.topicNames.PAYMENT_GET_AUTH_RESPONSE).unsubscribe(n),n=s.paymentAuthorizedRequest.bind(this),$.Topic(e.topicNames.PAYMENT_GET_AUTH_RESPONSE).subscribe(n),s}var n;return o.prototype.paymentAuthorizedRequest=function(e){var t=this;e[0].numOfRetries&&(t.numOfRetries=e[0].numOfRetries),e[0].delay&&(t.delay=e[0].delay),t.getPaymentAuthorization(e[0].transactionuuid,e[0].orderid,e[0].orderuuid,e[0].gatewayname,e[0].paymentGroupId)},o.prototype.getPaymentAuthorization=function(e,t,r,i,a){var o=this;o.checkForAuthorization(e,t,r,i,0,a)},o.prototype.checkForAuthorization=function(i,a,o,n,s,c){function l(){if(s<=d.numOfRetries)setTimeout(function(){d.checkForAuthorization(i,a,o,n,s+1,c)},d.delay);else{var t={orderId:a};d.storeServerLog.logError("paymentTimeOut",d.storeServerLog.getMessage("paymentTimeOut",t));var r=[{message:"fail",id:a,gatewayName:n}];$.Topic(e.topicNames.PAYMENT_AUTH_TIMED_OUT).publish(r)}}function u(e){var t;return e.length>0&&(t=e[e.length-1]),t}var d=this,p={},h={};h[t.ENDPOINT_KEY]=t.ENDPOINT_GET_PAYMENT_GROUP;var f=d.storeConfiguration.getFilterToUse(h);f&&(p[t.FILTER_KEY]=f),d.adapter.loadJSON("paymentGroup",c,p,function(r){if(r.stateAsString&&r.orderStatus)if(r.stateAsString===t.PAYMENT_GROUP_STATE_INITIAL)l();else if(r.stateAsString===t.PAYMENT_GROUP_STATE_REMOVED){var i=u(r.authorizationStatus);if(i){var s=[{message:"fail",id:a,uuid:o,responsedata:i,gatewayName:n}];s[0].responsedata.reasonCode=t.PROCESS_COMPLETION_FAILED,$.Topic(e.topicNames.PAYMENT_AUTH_DECLINED).publish(s)}}else if(r.stateAsString===t.PAYMENT_GROUP_STATE_AUTHORIZED||r.stateAsString===t.PAYMENT_GROUP_STATE_SETTLED){var i=u(r.authorizationStatus);if(i){var s=[{message:"success",id:a,uuid:o,responsedata:i,gatewayName:n}];i.authorizationDecision!==t.PAYMENT_AUTHORIZATION_ACCEPT&&1!=i.transactionSuccess||r.orderStatus!==t.SUBMITTED?i.authorizationDecision===t.PAYMENT_AUTHORIZATION_ACCEPT&&r.orderStatus==t.FAILED?(s[0].responsedata.reasonCode=t.PAYMENT_REVERSAL_FAILED,s[0].message="fail",$.Topic(e.topicNames.PAYMENT_AUTH_DECLINED).publish(s)):l():($.Topic(e.topicNames.ORDER_COMPLETED).publish(s),$.Topic(e.topicNames.PAYMENT_AUTH_SUCCESS).publish(s))}}else{var i=u(r.authorizationStatus);if(i){var s=[{message:"success",id:a,uuid:o,responsedata:i,gatewayName:n}];i.authorizationDecision===t.PAYMENT_AUTHORIZATION_ACCEPT?($.Topic(e.topicNames.ORDER_COMPLETED).publish(s),$.Topic(e.topicNames.PAYMENT_AUTH_SUCCESS).publish(s)):(s[0].message="fail",$.Topic(e.topicNames.PAYMENT_AUTH_DECLINED).publish(s))}}else l()},function(e,t,i){e&&e.message&&""!==e.message?r.error("PaymentAuthResponseViewModel.checkForAuthorization - error -"+e.message):r.error("PaymentAuthResponseViewModel.checkForAuthorization -unknown error returned"),l()})},o}),define("pageLayout/parent-organisation",["knockout"],function(e){"use strict";function t(){this.id=e.observable(""),this.name=e.observable(""),this.description=e.observable(""),this.organizationLogoURL=e.observable(""),this.organizationLogoAltText=e.observable(""),this.organizationLogoTitle=e.observable(""),this.delegateApprovalManagement=e.observable("")}return t}),define("pageLayout/organization",["knockout","ccConstants"],function(e,t){"use strict";function r(t,r){var i=this;return i.blockSize=20,i.sortProperty="email:asc",i.adapter=r,i.id=e.observable(""),i.active=e.observable(!1),i.relativeRoles=e.observable([]),i.approvalRequired=e.observable(!1),i.orderPriceLimit=e.observable(""),i.delegateApprovalManagement=e.observable(!1),i.numberOfActiveApprovers=e.observable(),t&&(i.id(t.id),i.active(t.active),i.relativeRoles(t.relativeRoles),i.approvalRequired(t.approvalRequired),i.orderPriceLimit(t.orderPriceLimit),i.delegateApprovalManagement(t.delegateApprovalManagement),i.updatenumberOfActiveApprovers()),i}return r.prototype.updatenumberOfActiveApprovers=function(){var e,r,i=this;r={},r[t.OFFSET]=0,r[t.LIMIT]=i.blockSize,r[t.SORTS]=i.sortProperty;for(var a=i.relativeRoles().length,o=0;o<a;o++)"approver"===i.relativeRoles()[o].function&&(e=i.relativeRoles()[o].repositoryId);r.q='roles.id eq "'+e+'" AND active eq "1"',i.adapter.loadJSON(t.ENDPOINT_LIST_CONTACTS_BY_ORGANIZATION,null,r,function(e){i.numberOfActiveApprovers(e.totalResults)},function(e){})},r}),define("pageLayout/user",["knockout","pubsub","notifier","CCi18n","ccRestClient","ccConstants","koValidate","ccKoValidateRules","storeKoExtensions","navigation","storageApi","pageLayout/parent-organisation","viewModels/dynamicProperty","pageLayout/organization","ccStoreConfiguration"],function(e,t,r,i,a,o,n,s,c,l,u,d,p,h,f){"use strict";function m(n,s){if(m.singleInstance)throw new Error("Cannot instantiate more than one UserViewModel, use getInstance(pAdapter, pUserData)");var c=this;return c.selectedPriceListGroup=e.observable(s.priceListGroup),c.currentOrganization=e.observable(),c.activePriceListGroups=e.observableArray([]),c.dynamicProperties=e.observableArray([]),e.mapping.fromJS(s,{ignore:["links","dynamicProperties"]},c),c.id=e.observable(""),c.login=e.observable(""),c.adapter=n,c.resetAll=e.observable(!1),c.emailAddress=e.observable(""),c.emailAddressForForgottenPwd=e.observable(""),c.emailMarketingMails=e.observable(!1),c.emailMarketingModified=e.observable(!1),c.firstName=e.observable(""),c.loggedInUserName=e.observable(""),c.lastName=e.observable(""),c.password=e.observable(""),c.newPassword=e.observable(""),c.confirmPassword=e.observable(""),c.shippingAddressBook=e.observableArray().extend({deferred:!0}),c.defaultShippingAddress=e.observable(),c.editShippingAddress=e.observable(),c.deleteShippingAddress=e.observable(!1),c.locale=e.observable(""),c.supportedLocales=[],c.client=e.observable(a),c.loginError=e.observable(""),c.loggedIn=e.observable(c.client().loggedIn),c.isLoginFailed=e.observable(!1),c.readyToDisplay=e.observable(!0),c.oldPassword=e.observable(""),c.emailAddress.isData=!0,c.firstName.isData=!0,c.lastName.isData=!0,c.password.isData=!0,c.newPassword.isData=!0,c.confirmPassword.isData=!0,c.oldPassword.isData=!0,c.emailAddressForForgottenPwd.isData=!0,c.locale.isData=!0,c.loggedinAtCheckout=e.observable(!1),c.loggedoutAtCheckout=e.observable(!1),c.persistedOrder=e.observable(),c.orderId=e.observable(""),c.countOfSubmittedOrders=e.observable(0),c.ignoreEmailValidation=e.observable(!0),c.ignorePasswordValidation=e.observable(!0),c.isUserProfileEdited=e.observable(!1),c.delaySuccessNotification=e.observable(!1),c.isSearchInitiatedWithUnsavedChanges=e.observable(!1),c.isUserSessionExpired=e.observable(!1),c.pageToRedirect=e.observable(),c.isSessionExpiredDuringSave=e.observable(!1),c.isUserLoggedOut=e.observable(!0),c.isPageRedirected=e.observable(!1),c.isResourcesLoaded=e.observable(!1),c.errorMessageKey=e.observable(""),c.successMessageKey=e.observable(""),c.passwordPolicies=e.observable(),c.isChangePassword=e.observable(!1),c.showCreateNewPasswordMsg=e.observable(!1),c.createNewPasswordError=e.observable(""),c.isPasswordExpired=e.observable(!1),c.hasFieldLevelError=e.observable(!1),c.ignoreConfirmPasswordValidation=e.observable(!0),c.forgotPasswordMsg=e.observable(""),c.myWishLists=e.observableArray(),c.joinedWishLists=e.observableArray(),c.isSesExpDuringPlaceOrder=e.observable(!1),c.parentOrganization=new d,s.parentOrganization&&e.mapping.fromJS(s.parentOrganization,{},c.parentOrganization),c.refreshPageAfterContactLogout=e.observable(!1),c.catalogId=e.observable(""),c.roles=e.observableArray([]),c.isDelegatedAdmin=e.observable(!1),c.isApprover=e.observable(!1),c.organizations=e.observableArray([]),c.defaultShippingAddressType=e.observable(),c.defaultBillingAddressType=e.observable(),c.redirectNotificationMessage=e.observable(""),c.sessionExpiredProfileRedirected=!1,c.approvalRequired=e.observable(!1),c.orderPurchaseLimit=e.observable(null),c.emailAddressFocused=function(){return c.ignoreEmailValidation(!0),!0},c.emailAddressLostFocus=function(){return c.ignoreEmailValidation(!1),!0},c.updatedShippingAddress=null,c.updatedShippingAddressBook=null,c.confirmPassword.subscribe(function(e){c.newPassword.isModified(!0)}),c.emailMarketingMails.subscribe(function(e){c.emailMarketingModified(!0)}),c.updateShippingAddress=function(e){c.shippingAddressBook()&&(this.isDefaultAddress(0===c.shippingAddressBook().length),!c.isAddressSaved(this)&&this.isValid()&&c.shippingAddressBook.push(this))},c.updateLocale=function(){c.locale(this)},c.updateLocaleToSupported=function(){if(void 0!==c.locale.isModified){for(var e=a.getStoredValue(o.LOCAL_STORAGE_USER_CONTENT_LOCALE),r=!1,i=[],n=0;n<c.supportedLocales.length;n++)i.push(c.supportedLocales[n].name);i.indexOf(c.contextData.global.user.locale)>-1?c.locale(c.contextData.global.user.locale):e?(c.locale(JSON.parse(e)[0].name),r=!0):(c.locale(c.contextData.global.locale),r=!0),c.locale.isModified(!0),r&&($.Topic(t.topicNames.USER_PROFILE_UPDATE_SUBMIT).publishWith(c,[{message:"success"}]),c.locale.isModified(!1),$.Topic(t.topicNames.UPDATE_USER_LOCALE_NOT_SUPPORTED_ERROR).publish())}},c.showExpiredPasswordErrorMsg=e.computed(function(){return!c.isPasswordExpired()||!(c.oldPassword.isModified()&&!c.oldPassword.isValid()||c.newPassword.isModified()&&!c.newPassword.isValid()||c.confirmPassword.isModified()&&!c.confirmPassword.isValid()||c.hasFieldLevelError())},c),c.validateUser=function(){return c.ignoreEmailValidation(!1),c.ignorePasswordValidation(!1),c.ignoreConfirmPasswordValidation(!1),c.emailAddress.isModified(!0),c.firstName.isModified(!0),c.lastName.isModified(!0),c.newPassword.isModified(!0),c.confirmPassword.isModified(!0),c.isValid()},c.isValid=function(){return c.emailAddress.isValid()&&c.firstName.isValid()&&c.lastName.isValid()&&c.newPassword.isValid()&&c.confirmPassword.isValid()},c.reset=function(){(c.isUserLoggedOut()||!c.loggedIn()&&!c.isUserSessionExpired())&&(c.login(""),c.isResourcesLoaded()&&c.login.isModified(!1),c.loggedInUserName("")),c.emailAddress(""),c.firstName(""),c.lastName(""),c.loginError(""),c.resetPassword(),c.isLoginFailed(!1),c.emailMarketingMails(!1),c.isResourcesLoaded()&&(c.lastName.isModified(!1),c.emailAddress.isModified(!1),c.firstName.isModified(!1))},c.resetPassword=function(){c.password(""),c.newPassword(""),c.confirmPassword(""),c.oldPassword(""),c.isResourcesLoaded()&&(c.password.isModified(!1),c.newPassword.isModified(!1),c.confirmPassword.isModified(!1),c.oldPassword.isModified(!1)),c.isChangePassword(!1)},c.resetDetails=function(){c.firstName(""),c.lastName(""),c.resetPassword(),c.emailMarketingMails(!1),c.firstName.isModified(!1),c.lastName.isModified(!1),c.emailMarketingModified(!1)},c.isLoginValid=function(){return c.ignoreEmailValidation(!1),this.login.isValid()&&this.password.isValid()},c.validateLogin=function(){var e=this;return e.login.isModified(!0),e.password.isModified(!0),e.isLoginValid()},c.resetLoginData=function(){var e=this;e.login(""),e.password(""),e.loginError(""),e.isLoginFailed(!1),e.isResourcesLoaded()&&(e.login.isModified(!1),e.password.isModified(!1))},c.resetModified=function(){var e=this;e.emailAddress.isModified(!1),e.firstName.isModified(!1),e.lastName.isModified(!1),e.oldPassword.isModified(!1),e.newPassword.isModified(!1),e.confirmPassword.isModified(!1),e.emailMarketingModified(!1)},c.resetShippingAddressBookModified=function(){var t=this;e.utils.arrayForEach(t.shippingAddressBook(),function(e){e.resetModified()})},c.isProfileModified=function(){return!!(c.firstName.isModified()||c.lastName.isModified()||c.emailAddress.isModified()||c.emailMarketingModified()||c.locale.isModified())},c.isPasswordModified=function(){return!!(c.oldPassword.isModified()||c.newPassword.isModified()||c.confirmPassword.isModified())},c.isPasswordValid=function(){return c.oldPassword.isModified(!0),c.newPassword.isModified(!0),c.confirmPassword.isModified(!0),!!(c.oldPassword.isValid()&&c.newPassword.isValid()&&c.confirmPassword.isValid())},c.isProfileValid=function(){return c.firstName.isModified(!0),c.lastName.isModified(!0),c.emailAddress.isModified(!0),c.ignoreEmailValidation(!1),!!(c.firstName.isValid()&&c.lastName.isValid()&&c.emailAddress.isValid())},c.isAddressSaved=function(e){for(var t=0;t<c.shippingAddressBook().length;t++)if(e.compare(c.shippingAddressBook()[t]))return!0;return!1},c.isB2BUser=function(){return!(!c.parentOrganization||!c.parentOrganization.name())},c.isShippingAddressBookModified=function(){if(c.deleteShippingAddress())return!0;for(var e=0;e<c.shippingAddressBook().length;e++)if(c.shippingAddressBook()[e].isModified())return!0;return!1},c.isShippingAddressBookValid=function(){for(var e=0;e<c.shippingAddressBook().length;e++)if(!c.shippingAddressBook()[e].isValid())return!1;return!0},c.isDynamicPropertiesModified=function(){for(var e=0;e<c.dynamicProperties().length;e++)if(c.dynamicProperties()[e].value.isModified())return!0;return!1},c.selectDefaultAddress=function(e){for(var t=0;t<c.shippingAddressBook().length;t++){var r=c.shippingAddressBook()[t];r.isDefaultAddress(r===e)}},c.sortShippingAddresses=function(){c.updatedShippingAddressBook&&c.updatedShippingAddressBook.length&&c.updatedShippingAddressBook.sort(function(e,t){return e.isDefaultAddress?-1:t.isDefaultAddress?1:e.lastName.toLowerCase()==t.lastName.toLowerCase()?e.address1.toLowerCase()==t.address1.toLowerCase()?0:e.address1.toLowerCase()<t.address1.toLowerCase()?-1:1:e.lastName.toLowerCase()<t.lastName.toLowerCase()?-1:1})},c.loginSuccessFunc=function(e){if(c.loggedIn(c.client().loggedIn),c.isUserSessionExpired(!1),c.isLoginFailed(!1),c.isSesExpDuringPlaceOrder(!1),c.isUserLoggedOut(!1),c.password(""),c.password.isModified(!1),r.clearError(c.WIDGET_ID),c.id(c.client().profileId),l.isPathEqualTo(c.myAccountHash)||c.pageToRedirect()!=c.myAccountHash||(c.sessionExpiredProfileRedirected=!0),c.pageToRedirect()&&""!=c.pageToRedirect()&&c.pageToRedirect()!=c.checkoutHash){var i=c.pageToRedirect();if(c.pageToRedirect(null),l.isPathEqualTo(i)){var a=c.getLocalData();a.login==c.login()&&l.isPathEqualTo(c.myAccountHash)&&!c.isPasswordExpired()&&c.isSessionExpiredDuringSave()||(c.getCurrentUser(e,!0),l.isPathEqualTo(c.myAccountHash)&&(c.isSessionExpiredDuringSave(!1),$.Topic(t.topicNames.USER_PROFILE_SESSION_RESET).publish()))}c.isPageRedirected(!0),l.goTo(i)}else c.getCurrentUser(e,!0);c.isPasswordExpired(!1)},c.loginErrorFunc=function(){c.isLoginFailed(!0),c.loginError(i.t("ns.common:resources.loginError")),c.password(""),c.password.isModified(!1)},c.processDynamicPropertiesMetadata=function(e){for(var t=this,r=[],i=0;i<e.length;i++){for(var a=!0,o=0;o<t.dynamicProperties().length&&a;o++)e[i].id===t.dynamicProperties()[o].id()&&(a=!1,t.dynamicProperties()[o].initializeMetadata(e[i],!1),t.dynamicProperties()[o].value(e[i].value));if(a){var n=new p;n.initializeMetadata(e[i],!0),n.value(e[i].value),r.push(n)}}for(var i=0;i<r.length;i++)t.dynamicProperties.push(r[i])},s.dynamicProperties&&c.processDynamicPropertiesMetadata(s.dynamicProperties),c.populateUserFromLocalData(!1),c.storeConfiguration=f.getInstance(),$.Topic(t.topicNames.USER_REGISTRATION_SUBMIT).subscribe(c.registerUser),$.Topic(t.topicNames.USER_LOGIN_SUBMIT).subscribe(c.handleLogin),$.Topic(t.topicNames.USER_LOGIN_CANCEL).subscribe(c.handleCancel),$.Topic(t.topicNames.LOCALE_READY).subscribe(c.loadResources.bind(c)),$.Topic(t.topicNames.USER_PROFILE_UPDATE_SUBMIT).subscribe(c.handleUpdateProfile),$.Topic(t.topicNames.USER_PROFILE_UPDATE_CANCEL).subscribe(c.handleUpdateCancel),$.Topic(t.topicNames.PAGE_LAYOUT_LOADED).subscribe(c.handlePageChanged.bind(c)),$.Topic(t.topicNames.PAGE_METADATA_CHANGED).subscribe(c.handlePageChanged.bind(c)),$.Topic(t.topicNames.USER_LOGOUT_SUBMIT).subscribe(c.handleLogout.bind(c)),$.Topic(t.topicNames.USER_SESSION_VALID).subscribe(c.handleSessionValid.bind(c)),$.Topic(t.topicNames.USER_SESSION_EXPIRED).subscribe(c.handleSessionExpired.bind(c)),$.Topic(t.topicNames.CHECKOUT_SAVE_SHIPPING_ADDRESS).subscribe(c.updateShippingAddress),$.Topic(t.topicNames.CHECKOUT_USER_LOCALE).subscribe(c.updateLocale),$.Topic(t.topicNames.USER_LOCALE_NOT_SUPPORTED).subscribe(c.updateLocaleToSupported),c}return m.prototype.loadResources=function(){var e=this;e.firstName.extend({required:{params:!0,message:i.t("ns.common:resources.firstNameRequired")}}),e.lastName.extend({required:{params:!0,message:i.t("ns.common:resources.lastNameRequired")}}),e.locale.extend({required:{params:!0,message:i.t("ns.common:resources.localeRequired")}}),e.emailAddressForForgottenPwd.extend({required:{params:!0,message:i.t("ns.common:resources.emailAddressRequired")},maxLength:{params:o.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:o.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()},message:i.t("ns.common:resources.emailAddressInvalid")}}),e.emailAddress.extend({required:{params:!0,message:i.t("ns.common:resources.emailAddressRequired")},maxLength:{params:o.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:o.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()},message:i.t("ns.common:resources.emailAddressInvalid")}}),e.login.extend({required:{params:!0,message:i.t("ns.common:resources.emailAddressRequired")},maxLength:{params:o.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH,message:i.t("ns.common:resources.maxLengthEmailAdd",{maxLength:o.CYBERSOURCE_EMAIL_MAXIMUM_LENGTH})},email:{params:!0,onlyIf:function(){return!e.ignoreEmailValidation()},message:i.t("ns.common:resources.emailAddressInvalid")}}),e.password.extend({required:{params:!0,message:i.t("ns.common:resources.passwordRequired")}}),e.newPassword.extend({password:{params:{policies:e.passwordPolicies,login:e.emailAddress,observable:e.newPassword,includePreviousNPasswordRule:e.isChangePassword},onlyIf:function(){return(!e.ignoreEmailValidation()||e.newPassword.isModified())&&!e.ignorePasswordValidation()},message:i.t("ns.common:resources.passwordPoliciesErrorText")},required:{params:!0,message:i.t("ns.common:resources.passwordRequired")}}),e.oldPassword.extend({required:{params:!0,message:i.t("ns.common:resources.currentPasswordRequired")}}),e.confirmPassword.extend({required:{params:!0,message:i.t("ns.common:resources.confirmPasswordRequired")},match:{params:e.newPassword,onlyIf:function(){return!e.ignoreConfirmPasswordValidation()},message:i.t("ns.common:resources.passwordUnmatched")}}),e.isResourcesLoaded(!0)},m.prototype.populateUserFromLocalData=function(e){var t=this,r=t.getLocalData();null!=r&&(t.loggedinAtCheckout(r.loggedinAtCheckout),t.loggedoutAtCheckout(r.loggedoutAtCheckout),t.orderId(r.orderId),e&&r.login&&(t.loggedInUserName(r.loggedInUserName),t.login(r.login),t.isUserSessionExpired(r.isUserSessionExpired),t.isUserLoggedOut(r.isUserLoggedOut)))},m.prototype.getLocalData=function(){var e=null;try{e=u.getInstance().getItem("user"),e&&(e=JSON.parse(e))}catch(e){}return e},m.prototype.setLocalData=function(e){var t=this;if(!e&&""==e)return!0;var r=t.getLocalData();switch(null==r&&(r={}),e){case"all":r={loggedinAtCheckout:t.loggedinAtCheckout(),loggedoutAtCheckout:t.loggedoutAtCheckout(),orderId:t.orderId(),loggedInUserName:t.loggedInUserName(),login:t.login(),isUserSessionExpired:t.isUserSessionExpired(),isUserLoggedOut:t.isUserLoggedOut()};break;case"checkoutFlag":r.loggedinAtCheckout=t.loggedinAtCheckout(),r.loggedoutAtCheckout=t.loggedoutAtCheckout();break;case"orderId":r.orderId=t.orderId();break;case"sessionExpiry":r.isUserSessionExpired=t.isUserSessionExpired(),r.isUserLoggedOut=t.isUserLoggedOut()}try{u.getInstance().setItem("user",JSON.stringify(r))}catch(e){}},m.prototype.updateLocalData=function(e,t){var r=this;r.loggedinAtCheckout(e),r.loggedoutAtCheckout(t),r.setLocalData("checkoutFlag")},m.prototype.removeLocalData=function(){try{u.getInstance().removeItem("user")}catch(e){}},m.prototype.resetForgotPassword=function(){var e=this,r={};r[o.LOGIN]=e.emailAddressForForgottenPwd(),e.adapter.persistCreate(o.ENDPOINT_FORGOT_PASSWORD,"id",r,null,function(e){$.Topic(t.topicNames.USER_RESET_PASSWORD_SUCCESS).publish(e)},function(e){$.Topic(t.topicNames.USER_RESET_PASSWORD_FAILURE).publish(e)})},m.prototype.handleLogin=function(){var e=this;return e.isLoginValid()?(a.setStoredValue(o.LOCAL_STORAGE_ORGANIZATION_ID,null),void e.client().login(this.login(),this.password(),function(){e.loginSuccessFunc(!1),$.Topic(t.topicNames.USER_LOGIN_SUCCESSFUL).publish()},function(r){r.error==o.PASSWORD_EXPIRED?(e.isPasswordExpired(!0),$.Topic(t.topicNames.USER_PASSWORD_EXPIRED).publish()):r.error==o.PASSWORD_GENERATED?(e.isPasswordExpired(!0),$.Topic(t.topicNames.USER_PASSWORD_GENERATED).publish()):(e.loginErrorFunc(),$.Topic(t.topicNames.USER_LOGIN_FAILURE).publish(r))})):(e.login.isModified(!0),e.password.isModified(!0),!1)},m.prototype.handleSamlLogin=function(){var e=this,r=l.getPathWithoutLocale();if(r.indexOf("?loggedIn=false")>-1){var i=r.indexOf("page=")+5;r=decodeURIComponent(r.substr(i)),r="/"===r.charAt(0)?r:"/"+r}else r=l.getRelativePath();e.client().setSessionStoredValue("SSO_RETURN_URL",r),e.client().generateSamlAuthnRequest(function(e){var t=$("<form/>",{action:e.authnRequestTarget,method:"POST"});t.append($("<input>",{type:"text",name:"SAMLRequest",value:e.authnRequest})),$(document.body).append(t),t.submit()},function(r){e.loginErrorFunc(),$.Topic(t.topicNames.USER_LOGIN_FAILURE).publish(r)})},m.prototype.handleLogout=function(){var e=this;$.Topic(t.topicNames.USER_CLEAR_CART).publish([{message:"success"}]);var r=function(){$.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).publish([{message:"success"}]),e.clearUserData(),e.profileRedirect(),e.refreshPageAfterContactLogout()&&(e.refreshPageAfterContactLogout(!1),window.location.assign(e.contextData.global.links.home.route))},i=function(t){e.clearUserData(),e.profileRedirect(),window.location.assign(e.contextData.global.links.home.route)};e.loggedIn()?(e.parentOrganization&&e.parentOrganization.name()&&e.refreshPageAfterContactLogout(!0),e.client().logout(r,i)):(e.clearUserData(),$.Topic(t.topicNames.USER_LOGOUT_SUCCESSFUL).publish([{message:"success"}]),e.profileRedirect())},m.prototype.profileRedirect=function(){var e=this;(l.isPathEqualTo(e.contextData.global.links.profile.route)||l.isPathEqualTo(e.contextData.global.links.orderHistory.route)||l.isPathEqualTo(e.contextData.global.links.orderDetails.route)||l.isPathEqualTo(e.contextData.global.links.scheduledOrders.route))&&l.goTo(e.contextData.global.links.home.route)},m.prototype.clearUserData=function(){var e=this;e.isUserSessionExpired(!1),e.isUserLoggedOut(!0),e.removeLocalData(),e.loggedIn(!1),e.editShippingAddress(null),e.deleteShippingAddress(!1),e.shippingAddressBook([]),e.resetLoginData(),e.reset(),e.updatedShippingAddress=null,e.updatedShippingAddressBook=null,e.id(null),e.parentOrganization=new d,e.organizations([]),e.locale(""),$.Topic(t.topicNames.USER_LOAD_SHIPPING).publish([{message:"success"}]);for(var r=0;r<e.dynamicProperties().length;r++)e.dynamicProperties()[r].reset()},m.prototype.handleCancel=function(){var e=this;e.resetLoginData(),r.clearError(e.WIDGET_ID)},m.prototype.registerUser=function(e){var r=this;r.receiveEmail=r.emailMarketingMails()?"yes":"no";var n={};if(n[o.PROFILE_EMAIL]=r.emailAddress(),n[o.PROFILE_PASSWORD]=r.newPassword(),n[o.PROFILE_FIRST_NAME]=r.firstName(),n[o.PROFILE_LAST_NAME]=r.lastName(),n[o.PROFILE_RECEIVE_EMAIL]=r.receiveEmail,null!==r.shippingAddressBook()&&void 0!=r.shippingAddressBook()&&r.isShippingAddressBookValid()&&(n[o.PROFILE_SHIPPING_ADDRESSES]=r.shippingAddressBook()),!r.locale()){var s=a.getStoredValue(o.LOCAL_STORAGE_USER_CONTENT_LOCALE);s&&r.locale(JSON.parse(s)[0].name)}n[o.PROFILE_LOCALE]=r.locale(),r.adapter.persistCreate(o.ENDPOINT_CREATE_PROFILE,o.ENDPOINT_CREATE_PROFILE,n,function(t){t.widgetId=e.widgetId,r.handleAutoLogin(e)},function(r){r.widgetId=e.widgetId,r.errorCode==o.CREATE_PROFILE_USER_EXISTS&&(r.message=i.t("ns.common:resources.accountAlreadyExists")),$.Topic(t.topicNames.USER_CREATION_FAILURE).publish(r)})},m.prototype.handleAutoLogin=function(e){var r=this;r.orderId(""),r.login(r.emailAddress()),a.setStoredValue(o.LOCAL_STORAGE_ORGANIZATION_ID,null),r.client().login(r.login(),r.newPassword(),function(){var i={};i.widgetId=e.widgetId,r.loginSuccessFunc(!0),$.Topic(t.topicNames.USER_AUTO_LOGIN_SUCCESSFUL).publish(i)},function(i){i.widgetId=e.widgetId,r.loginErrorFunc(),$.Topic(t.topicNames.USER_AUTO_LOGIN_FAILURE).publish(i)})},m.prototype.resetDynamicPropertiesValueIsModified=function(){for(var e=this,t=0;t<e.dynamicProperties().length;t++)e.dynamicProperties()[t].value.isModified&&e.dynamicProperties()[t].value.isModified(!1)},m.prototype.getCurrentUser=function(i,a){var n=this;n.redirectNotificationMessage("");var s={},c={};c[o.ENDPOINT_KEY]=o.ENDPOINT_GET_CURRENT_USER,c[o.IDENTIFIER_KEY]="userData";var u=n.storeConfiguration.getFilterToUse(c);u&&(s[o.FILTER_KEY]=u),n.adapter.loadJSON("getUser","getCurrentUser",s,function(r){n.currentOrganization(r.currentOrganization),e.mapping.fromJS(r,{ignore:["links","dynamicProperties"]},n),n.populateUserViewModel(r),n.resetModified(),n.readyToDisplay(!0),i?$.Topic(t.topicNames.AUTO_LOGIN_AND_GET_USER_DATA_SUCCESSFUL).publish():a&&!n.loggedinAtCheckout()?$.Topic(t.topicNames.CART_READY).subscribe(function(){$.Topic(t.topicNames.USER_LOAD_SHIPPING).publish([{message:"success"}]),$.Topic(t.topicNames.CART_READY).unsubscribe()}):$.Topic(t.topicNames.USER_LOAD_SHIPPING).publish([{message:"success"}]),n.sessionExpiredProfileRedirected&&(a=!0,n.sessionExpiredProfileRedirected=!1),a&&(r.parentOrganization&&r.parentOrganization.name&&(l.isPathEqualTo(n.checkoutHash)?n.navigateToPage(n.checkoutHash):$.Topic(t.topicNames.CART_READY).subscribe(n.navigateToHome())),$.Topic(t.topicNames.USER_LOAD_CART).publish(r))},function(e){e.status==o.HTTP_UNAUTHORIZED_ERROR&&(n.handleSessionExpired(),(l.isPathEqualTo(n.contextData.global.links.profile.route)||l.isPathEqualTo(n.contextData.global.links.orderHistory.route))&&l.doLogin(l.getPath(),n.contextData.global.links.home.route))}),n.navigateToHome=function(){setTimeout(function(){n.navigateToPage(n.contextData.global.links.home.route,function(){""!==n.redirectNotificationMessage()&&(r.sendWarningToPage("UserViewModel",n.redirectNotificationMessage(),!0,"home",!0),
n.redirectNotificationMessage(""))})},2e3)}},m.prototype.populateUserViewModel=function(t){var r=this;if(r.emailAddress(t.email),r.firstName(t.firstName),r.lastName(t.lastName),r.loggedInUserName(t.firstName),r.login(r.emailAddress()),r.id(t.id),r.approvalRequired(t.derivedApprovalRequired),r.orderPurchaseLimit(t.derivedOrderPriceLimit),r.locale(""),t.catalog&&r.catalogId(t.catalog.repositoryId),r.catalog&&(r.catalog=void 0),t.currentOrganization){r.currentOrganization(t.currentOrganization),null==r.parentOrganization&&(r.parentOrganization=new d),e.mapping.fromJS(t.currentOrganization,{},r.parentOrganization),r.parentOrganization.id(t.currentOrganization.repositoryId);var i=JSON.parse(a.getStoredValue(o.LOCAL_STORAGE_ORGANIZATION_ID));!i&&t.currentOrganization&&a.setStoredValue(o.LOCAL_STORAGE_ORGANIZATION_ID,e.toJSON(t.currentOrganization.repositoryId))}else t.parentOrganization&&(e.mapping.fromJS(t.parentOrganization,{},r.parentOrganization),r.parentOrganization.id(t.parentOrganization.repositoryId));if(t.roles){var n=t.roles.length;r.roles([]);for(var s=0;s<n;s++)r.roles.push(t.roles[s]),t.roles[s].relativeTo.repositoryId===r.currentOrganization().repositoryId&&("admin"===t.roles[s].function?r.isDelegatedAdmin(!0):"approver"===t.roles[s].function&&r.isApprover(!0))}r.isB2BUser()&&r.isDelegatedAdmin()&&(r.organizations([]),a.request(o.ENDPOINT_GET_ORGANIZATION,null,function(e){r.defaultShippingAddressType(e.derivedShippingAddressType),r.defaultBillingAddressType(e.derivedBillingAddressType),r.organizations.push(new h(e,r.adapter))},function(e){e.status==o.HTTP_UNAUTHORIZED_ERROR&&(r.handleSessionExpired(),(l.isPathEqualTo(r.contextData.global.links.profile.route)||l.isPathEqualTo(r.contextData.global.links.orderHistory.route))&&l.doLogin(l.getPath(),r.contextData.global.links.home.route))},r.parentOrganization.repositoryId())),r.selectedPriceListGroup(t.priceListGroup);var c=r.contextData.global.site.priceListGroup.activePriceListGroups;if(!r.isB2BUser()&&r.selectedPriceListGroup()){var u=!1;if(a.getStoredValue(o.LOCAL_STORAGE_PRICELISTGROUP_ID))for(var p=JSON.parse(a.getStoredValue(o.LOCAL_STORAGE_PRICELISTGROUP_ID)),f=0;f<c.length;f++)if(p&&p==c[f].id){r.selectedPriceListGroup(c[f]),u=!0;break}u||r.selectedPriceListGroup(r.contextData.global.site.priceListGroup.defaultPriceListGroup)}a.setStoredValue(o.LOCAL_STORAGE_PRICELISTGROUP_ID,e.toJSON(r.selectedPriceListGroup().id));var m=t.receiveEmail;if("yes"==m?r.emailMarketingMails(!0):r.emailMarketingMails(!1),r.deleteShippingAddress(!1),r.updatedShippingAddress=t.shippingAddress,r.updatedShippingAddress&&(r.updatedShippingAddress.isDefaultAddress=!0),r.updatedShippingAddressBook=t.shippingAddresses,r.updatedShippingAddressBook.length)if(null==r.updatedShippingAddress)r.updatedShippingAddressBook[0].isDefaultAddress=!0;else for(var g=0,v=r.updatedShippingAddressBook.length;g<v;g++)r.updatedShippingAddressBook[g].isDefaultAddress=r.updatedShippingAddressBook[g].repositoryId===r.updatedShippingAddress.repositoryId;r.organizationAddressBook=[];for(var E in t.secondaryAddresses){var y=t.secondaryAddresses[E];y.isDefaultAddress=!1,r.organizationAddressBook.push(t.secondaryAddresses[E])}r.contactShippingAddress=t.contactShippingAddress,r.contactBillingAddress=t.contactBillingAddress,r.sortShippingAddresses(),r.isUserSessionExpired(!1),r.isUserLoggedOut(!1),r.populateUserFromLocalData(!1),r.setLocalData("all");for(var f=0;f<this.supportedLocales.length;f++)t.locale===this.supportedLocales[f].name&&(r.locale(t.locale),void 0!==r.locale.isModified&&r.locale.isModified(!1));r.locale()||r.updateLocaleToSupported(),r.processDynamicPropertiesMetadata(t.dynamicProperties),r.resetDynamicPropertiesValueIsModified()},m.prototype.setContext=function(e){var t=this;t.contextData=e,t.myAccountHash=t.contextData.global.links.profile.route,t.checkoutHash=t.contextData.global.links.checkout.route,t.homeHash=t.contextData.global.links.home.route,t.passwordPolicies(e.global.passwordPolicies),t.readyToDisplay(!0),e.global.user.catalog&&t.catalogId(e.global.user.catalog.repositoryId),t.catalog&&(t.catalog=void 0),e.global.supportedLocales&&e.global.supportedLocales.length>0?t.supportedLocales=e.global.supportedLocales:t.supportedLocales=e.global.site.additionalLanguages,e.global.user.firstName?t.populateUserViewModel(e.global.user):(t.populateUserFromLocalData(!0),t.isUserLoggedOut()||t.loggedIn()||t.isUserSessionExpired()||void 0==t.login()||""==t.login()||t.handleSessionExpired())},m.prototype.handlePageChanged=function(){var e=this;e.isPageRedirected()||!e.loggedIn()||e.loggedinAtCheckout()||$.Topic(t.topicNames.REFRESH_USER_CART).publish(e),e.isPageRedirected(!1)},m.prototype.handleSessionExpired=function(){var e=this;e.isUserSessionExpired()||e.isUserLoggedOut()||(e.loggedIn(!1),l.isPathEqualTo(e.myAccountHash)||0!=e.isSesExpDuringPlaceOrder()||(e.resetLoginData(),e.reset(),e.id(null)),l.isPathEqualTo(e.checkoutHash)||l.getPath().indexOf(e.checkoutHash)>=0||$.Topic(t.topicNames.USER_CLEAR_CART).publish(e),e.populateUserFromLocalData(!0),e.orderId(""),e.loggedinAtCheckout(!1),e.loggedoutAtCheckout(!1),e.isUserSessionExpired(!0),e.isUserLoggedOut(!1),e.setLocalData("sessionExpiry"),e.client().clearRefreshInterval(),e.readyToDisplay(!0))},m.prototype.handleSessionValid=function(){var e=this;e.loggedIn(e.client().loggedIn),e.isUserSessionExpired(!1),e.isUserLoggedOut(!1),e.setLocalData("sessionExpiry"),e.readyToDisplay(!0)},m.prototype.validatePrivilagePageRequest=function(e,t){var r=this;if(r.isUserProfileEdited())return!0;var i=t.currentTarget.pathname,a=i.indexOf("#!");return a>=0&&(i=i.substring(a+2)),r.validateAndRedirectPage(i),!1},m.prototype.navigateToPage=function(e,r){if(l.isPathEqualTo(e)){var i={pageId:l.getPath()};$.Topic(t.topicNames.PAGE_VIEW_CHANGED).publish(i)}else l.goTo(e),r&&r()},m.prototype.validateAndRedirectPage=function(e){var r,i=this;if(e!=o.PAYPAL_CHECKOUT_TYPE&&(r=[{message:"success",linkToRedirect:e}]),!i.loggedIn()&&i.isUserSessionExpired())e==o.PAYPAL_CHECKOUT_TYPE&&l.isPathEqualTo(i.checkoutHash)?$.Topic(t.topicNames.CONTINUE_TO_PAYPAL).publish():l.doLogin(e);else if(i.loggedIn()){var a=function(){i.handleSessionValid(),i.pageToRedirect()&&""!=i.pageToRedirect()&&i.pageToRedirect()==e&&i.pageToRedirect(null),e==o.PAYPAL_CHECKOUT_TYPE?$.Topic(t.topicNames.CONTINUE_TO_PAYPAL).publish():l.goTo(e)},n=function(t){t&&(i.handleSessionExpired(),l.doLogin(e))};i.client().refresh(a,n)}else l.goTo(e);return!1},m.prototype.handleUpdateProfile=function(){var e=this,r=!1,i=!1,a=!1,n=!1,s=!1,c=!1;if(null!=e.editShippingAddress()&&($.inArray(e.editShippingAddress(),e.shippingAddressBook())<0&&e.shippingAddressBook.push(e.editShippingAddress()),1===e.shippingAddressBook().length&&e.shippingAddressBook()[0].isDefaultAddress(!0),e.editShippingAddress().isDefaultAddress()&&e.selectDefaultAddress(e.editShippingAddress())),e.isShippingAddressBookModified()){for(var l=0;l<e.shippingAddressBook().length;l++)if(!e.shippingAddressBook()[l].validateNow()){r=!0;break}a=!r,i=!0}if(e.isProfileModified()&&(e.isProfileValid()?n=!0:r=!0,i=!0),e.isPasswordModified()&&(e.isPasswordValid()?s=!0:r=!0,i=!0),e.dynamicProperties().length>0&&e.isDynamicPropertiesModified()){for(var u=0;u<e.dynamicProperties().length;u++){var d=e.dynamicProperties()[u];if(!d.isValid()){r=!0;break}}r||(c=!0),i=!0}if(!i)return void $.Topic(t.topicNames.USER_PROFILE_UPDATE_NOCHANGE).publish();if(r)return void $.Topic(t.topicNames.USER_PROFILE_UPDATE_INVALID).publish();e.receiveEmail=e.emailMarketingMails()?"yes":"no";var p={};if(p[o.PROFILE_EMAIL]=e.emailAddress(),p[o.PROFILE_FIRST_NAME]=e.firstName(),p[o.PROFILE_LAST_NAME]=e.lastName(),p[o.PROFILE_RECEIVE_EMAIL]=e.receiveEmail,p[o.PROFILE_LOCALE]=e.locale(),a&&(p[o.PROFILE_SHIPPING_ADDRESSES]=e.shippingAddressBook()),s&&(p[o.PROFILE_OLD_PASSWORD]=e.oldPassword(),p[o.PROFILE_NEW_PASSWORD]=e.newPassword(),p[o.PROFILE_CONFIRM_PASSWORD]=e.confirmPassword()),c){for(var u=0;u<e.dynamicProperties().length;u++)e.dynamicProperties()[u].value.isModified&&e.dynamicProperties()[u].value.isModified()&&(p[e.dynamicProperties()[u].id()]=e.dynamicProperties()[u].value());e.resetDynamicPropertiesValueIsModified()}e.adapter.loadJSON(o.ENDPOINT_UPDATE_PROFILE,e.id(),p,function(r){e.editShippingAddress(null),$.Topic(t.topicNames.USER_PROFILE_UPDATE_SUCCESSFUL).publish(r)},function(e){$.Topic(t.topicNames.USER_PROFILE_UPDATE_FAILURE).publish(e)}),e.resetPassword()},m.prototype.updateExpiredPassword=function(){var e=this,r={};r[o.PROFILE_LOGIN]=e.login(),r[o.PROFILE_OLD_PASSWORD]=e.oldPassword(),r[o.PROFILE_NEW_PASSWORD]=e.newPassword(),r[o.PROFILE_CONFIRM_PASSWORD]=e.confirmPassword(),e.adapter.persistCreate(o.ENDPOINT_UPDATE_EXPIRED_PASSWORD,"id",r,function(r){$.Topic(t.topicNames.USER_PROFILE_PASSWORD_UPDATE_SUCCESSFUL).publish(r);var i=e.newPassword();e.resetPassword(),e.password(i)},function(r){e.resetPassword(),$.Topic(t.topicNames.USER_PROFILE_PASSWORD_UPDATE_FAILURE).publish(r)})},m.getInstance=function(e,t,r){return m.singleInstance?!m.singleInstance.loggedInUserName()&&r.global.user.firstName&&m.singleInstance.loggedInUserName(r.global.user.firstName):m.singleInstance=new m(e,t),r&&m.singleInstance.setContext(r),m.singleInstance},m}),define("viewModels/skuPropertiesHandler",["knockout","ccRestClient","ccConstants","ccLogger","ccStoreConfiguration"],function(e,t,r,i,a){function o(){var e=this;return e.fetchSkuProperties=function(a,o,n,s,c){n.parent="sku";var l=function(e){e&&e.base&&e.base.forEach(function(e){"sku-base"===e.propertyType&&a().push(e)}),e&&e.specifications&&e.specifications.forEach(function(e){"sku-custom"===e.propertyType&&a().push(e)}),"function"==typeof s&&s(a)},u=function(e){i.error("Failed to fetch SKU properties for "+o,e),"function"==typeof c&&c()},d={};d[r.ENDPOINT_KEY]=r.ENDPOINT_GET_ITEM_TYPE;var p=e.storeConfiguration.getFilterToUse(d);p&&(n[r.FILTER_KEY]=p),t.request(r.ENDPOINT_GET_ITEM_TYPE,n,l,u,o)},e.getBase=function(t,r,i){e.fetchSkuProperties(t,"sku",{includeBase:!0},r,i)},e.getAll=function(t,r,i,a){r&&(r+"").trim()?e.fetchSkuProperties(t,"sku-"+r,{includeBase:!0},i,a):e.getBase(t,i,a)},e.getCustom=function(t,r,i,a){r&&(r+"").trim()?e.fetchSkuProperties(t,"sku-"+r,{includeBase:!1},i,a):e.fetchSkuProperties(t,"sku",{includeBase:!1},i,a)},e.storeConfiguration=a.getInstance(),e}return new o}),define("pageLayout/product",["knockout","ccRestClient","ccConstants","pubsub","CCi18n","ccLogger","viewModels/skuPropertiesHandler","ccStoreConfiguration"],function(e,t,r,i,a,o,n,s){"use strict";function c(t,r){var i=this;t.childSKUs||(t.childSKUs=[]),e.mapping.fromJS(t,{},i),i.product=t;var a=["id","salePrice","listPrice","primaryFullImageURL","primaryLargeImageURL","primaryMediumImageURL","primarySmallImageURL","primaryThumbImageURL","shippingSurcharge","type","displayName"],o=["childSKUs","thumbImageURLs","smallImageURLs","mediumImageURLs","largeImageURLs","fullImageURLs","sourceImageURLs","productImagesMetadata"];for(var n in a)void 0==i[a[n]]&&(i[a[n]]=e.observable(""));for(var n in o)void 0==i[o[n]]&&(i[o[n]]=e.observableArray([]));return i.minPrice=i.getMinimumPrice(),i.maxPrice=i.getMaximumPrice(!1),i.productSalePrice=i.getSalePrice(),i.productListPrice=i.getListPrice(),i.isOnSale=i.isOnSale(),i.hasPriceRange=i.hasRange(),i.stockStatus=e.observable(),i.variantName=e.observable(),i.variantValue=e.observable(),i.relatedProducts=t.relatedProducts,i.productVariantOptions&&i.productVariantOptions()&&(i.variantOptionsArray=i.populateVariantOptions(e.mapping.toJS(i.productVariantOptions()))),i.inStock=e.observable(!1),i.showStockStatus=e.observable(!1),i.filtered=e.observable(!1),i.skuProperties=e.observableArray([]),i.storeConfiguration=s.getInstance(),i}return c.prototype.getMinimumPrice=function(){var e,t,r,i,a,o=this,n=o.childSKUs()?o.childSKUs().length:0;if(o.minActivePrice)return o.minActivePrice();if(e=o.salePrice()||0===o.salePrice()?o.salePrice():o.listPrice(),o.childSKUs())if(n>0)for(var a in o.childSKUs())r=o.childSKUs()[a],i=r.salePrice()||0===r.salePrice()?r.salePrice():r.listPrice(),i||0==i||null==i||(i=e),(!t&&0!=t||i<t)&&(t=i);else t=e;return t},c.prototype.getMaximumPrice=function(e){var t,r,i,a,o,n=this,s=n.childSKUs().length;if(n.maxActivePrice&&!e)return n.maxActivePrice();if(t=e?n.listPrice():n.salePrice()||0===n.salePrice()?n.salePrice():n.listPrice(),n.childSKUs())if(s>0)for(var o in n.childSKUs())i=n.childSKUs()[o],a=e?i.listPrice():i.salePrice()||0===i.salePrice()?i.salePrice():i.listPrice(),a||0==a||null==a||(a=t),(!r&&0!=r||a>r)&&(r=a);else r=t;return r},c.prototype.isOnSale=function(){var e=this,t=e.childSKUs().length;if(!t&&e.product.salePrice)return!0;for(var r in e.childSKUs()){var i=e.childSKUs()[r];if(null!=i.salePrice()&&i.salePrice()>=0)return!0}return!1},c.prototype.hasRange=function(){var e=this;return e.minPrice=e.getMinimumPrice(),e.maxPrice=e.getMaximumPrice(!1),e.minPrice!=e.maxPrice&&!isNaN(parseFloat(e.minPrice))&&!isNaN(parseFloat(e.maxPrice))},c.prototype.getListPrice=function(){var e=this;return e.childSKUs().length>=1?e.getMaximumPrice(!0):e.listPrice()},c.prototype.getSalePrice=function(){var e=this;return!e.hasRange()&&e.isOnSale()?e.minPrice:e.salePrice()},c.prototype.getPrices=function(e,a){var o=this,n={},s=e,c={};c[r.ENDPOINT_KEY]=r.ENDPOINT_GET_PRODUCT_PRICES;var l=o.storeConfiguration.getFilterToUse(c);l&&(n[r.FILTER_KEY]=l);var u=r.ENDPOINT_GET_PRODUCT_PRICES;t.request(u,n,function(e){var t=function(e,t){e.levels(t.levels),e.numLevels(t.numLevels)};if(e.skuPrices)for(var a=o.childSKUs().length,n=e.skuPrices.length,s=0;s<a;s+=1)for(var c=0;c<n;c+=1)o.childSKUs()&&o.childSKUs()[s].repositoryId()==e.skuPrices[c].skuId&&(o.childSKUs()[s].listPrice(e.skuPrices[c].listPrice),o.childSKUs()[s].salePrice(e.skuPrices[c].salePrice),e.skuPrices[c].hasOwnProperty(r.LIST_VOLUME_PRICE)&&(e.skuPrices[c].listVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(o.childSKUs()[s].listVolumePrice.bulkPrice,e.skuPrices[c].listVolumePrice.bulkPrice):e.skuPrices[c].listVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(o.childSKUs()[s].listVolumePrice.tieredPrice,e.skuPrices[c].listVolumePrice.tieredPrice)),e.skuPrices[c].hasOwnProperty(r.SALE_VOLUME_PRICE)&&(e.skuPrices[c].saleVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(o.childSKUs()[s].saleVolumePrice.bulkPrice,e.skuPrices[c].saleVolumePrice.bulkPrice):e.skuPrices[c].saleVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(o.childSKUs()[s].saleVolumePrice.tieredPrice,e.skuPrices[c].saleVolumePrice.tieredPrice)));o.hasPriceRange=e.priceRange,e.priceRange===!0&&(o.maxPrice=e.priceMax,o.minPrice=e.priceMin),e.list&&o.listPrice(e.list),null===o.product.type&&e.skuPrices&&(o.childSKUs()&&o.childSKUs()[0]&&(o.childSKUs()[0].listPrice(e.skuPrices.listPrice||e.list),o.listPrice(e.skuPrices.listPrice||e.list)),e.skuPrices.hasOwnProperty(r.LIST_VOLUME_PRICE)&&(e.skuPrices.listVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(o.childSKUs()[0].listVolumePrice.bulkPrice,e.skuPrices.listVolumePrice.bulkPrice):e.skuPrices.listVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(o.childSKUs()[0].listVolumePrice.tieredPrice,e.skuPrices.listVolumePrice.tieredPrice)),e.skuPrices.hasOwnProperty(r.SALE_VOLUME_PRICE)&&(e.skuPrices.saleVolumePrice.hasOwnProperty(r.BULK_PRICE)?t(o.childSKUs()[0].saleVolumePrice.bulkPrice,e.skuPrices.saleVolumePrice.bulkPrice):e.skuPrices.saleVolumePrice.hasOwnProperty(r.TIERED_PRICE)&&t(o.childSKUs()[0].saleVolumePrice.tieredPrice,e.skuPrices.saleVolumePrice.tieredPrice))),e.sale||0===e.sale?o.salePrice(e.sale):o.salePrice(null),null===o.product.type&&e.skuPrices&&(o.childSKUs()&&o.childSKUs()[0]&&o.childSKUs()[0].salePrice(e.skuPrices.salePrice),o.salePrice(e.skuPrices.salePrice)),$.Topic(i.topicNames.PRODUCT_PRICE_CHANGED).publish()},function(e){},s)},c.prototype.getAvailability=function(e,i,a){var o=this,n={},s=e;n[r.SKU_ID]=i,n[r.CATALOG]=null==a?"":a;var c=r.ENDPOINT_GET_PRODUCT_AVAILABILITY,l={};l[r.ENDPOINT_KEY]=r.ENDPOINT_GET_PRODUCT_AVAILABILITY,l[r.IDENTIFIER_KEY]="productStockStatus";var u=o.storeConfiguration.getFilterToUse(l);u&&(n[r.FILTER_KEY]=u),t.request(c,n,function(e){if(null!=e.productSkuInventoryStatus)for(var t=e.productSkuInventoryStatus,r=o.product.childSKUs?o.product.childSKUs.length:0,i=0;i<r;i++){var a=o.product.childSKUs[i];a.quantity=t[a.repositoryId]}o.stockStatus(e)},function(e){var t={stockStatus:r.OUT_OF_STOCK};o.stockStatus(t)},s)},c.prototype.getSkuPrice=function(e){var t=this,r={};for(var i in t.childSKUs())t.childSKUs()[i].repositoryId()==e.repositoryId&&(r.listPrice=t.childSKUs()[i].listPrice(),r.salePrice=t.childSKUs()[i].salePrice(),r.listVolumePrice=t.childSKUs()[i].listVolumePrice,r.saleVolumePrice=t.childSKUs()[i].saleVolumePrice);return r},c.prototype.isConfigurable=function(){var e=this;if(e.configurable())return!0;for(var t in e.childSKUs())if(e.childSKUs()[t].configurable())return!0;return!1},c.prototype.fetchSkuProperties=function(){var e=this;e.skuProperties([]),n.getAll(e.skuProperties,e.product.type)},c.prototype.populateVariantOptions=function(e){var t=this;if(e&&null!==e&&e.length>0)for(var r,i,a=[],o=0;o<e.length;o++)r=t.mapOptionsToArray(e[o].optionValueMap),i=t.productVariantModel(e[o].optionName,e[o].mapKeyPropertyAttribute,r,e[o].optionId),a.push(i);else t.imgMetadata=t.productImagesMetadata;return a},c.prototype.mapOptionsToArray=function(t){var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push({key:i,value:t[i],visible:e.observable(!0)});return r},c.prototype.productVariantModel=function(t,r,i,o){var n=this,s={},c={};s.optionDisplayName=t,s.parent=this,s.optionId=r,s.originalOptionValues=e.observableArray(i),s.actualOptionId=o;var l=e.observable(!0);1===i.length&&l(n.checkOptionValueWithSkus(r,i[0].value)),l()&&(s.optionCaption=a.t("ns.common:resources.optionCaption",{optionName:t},!0)),s.selectedOptionValue=e.observable(),s.countVisibleOptions=e.computed(function(){for(var e=0,t=0;t<s.originalOptionValues().length;t++)1==i[t].visible()&&(e+=1);return e},s),s.disable=e.computed(function(){return 0==s.countVisibleOptions()},s),s.selectedOption=e.computed({write:function(e){n.filtered(!1),s.selectedOptionValue(e),n.filterOptionValues(s.optionId)},read:function(){return s.selectedOptionValue()},owner:s}),s.selectedOption.extend({required:{params:!0,message:a.t("ns.common:resources.optionRequiredMsg",{optionName:t},!0)}}),s.optionValues=e.computed({write:function(e){s.originalOptionValues(e)},read:function(){return e.utils.arrayFilter(s.originalOptionValues(),function(e){return 1==e.visible()})},owner:s}),c.thumbImageURLs=1==n.thumbImageURLs().length&&n.thumbImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:n.thumbImageURLs(),c.smallImageURLs=1==n.smallImageURLs().length&&n.smallImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:n.smallImageURLs(),c.mediumImageURLs=1==n.mediumImageURLs().length&&n.mediumImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:n.mediumImageURLs,c.largeImageURLs=1==n.largeImageURLs().length&&n.largeImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:n.largeImageURLs(),c.fullImageURLs=1==n.fullImageURLs().length&&n.fullImageURLs()[0].indexOf("/img/no-image.jpg&")>0?[]:n.fullImageURLs(),c.sourceImageURLs=1==n.sourceImageURLs().length&&n.sourceImageURLs()[0].indexOf("/img/no-image.jpg")>0?[]:n.sourceImageURLs();var u=[];if(n.thumbImageURLs&&n.thumbImageURLs().length>0)for(var d=0;d<n.thumbImageURLs().length;d++)u.push(n.productImagesMetadata[d]);return s},c.prototype.filterOptionValues=function(e){var t=this;if(!t.filtered()){for(var r=t.variantOptionsArray,i=0;i<r.length;i++){var a=r[i],o=t.getMatchingSKUs(r[i].optionId),n=t.updateOptionValuesFromSku(o,e,a);r[i].optionValues(n),t.filtered(!0)}t.updateSingleSelection(e)}},c.prototype.getMatchingSKUs=function(e){for(var t=this,r=t.childSKUs(),i=[],a=t.variantOptionsArray,o={},n=0;n<a.length;n++)a[n].optionId!=e&&void 0!=a[n].selectedOption()&&(o[a[n].optionId]=a[n].selectedOption().value);for(var s=0;s<r.length;s++){var c=!0;for(var l in o)if(o.hasOwnProperty(l)&&(!r[s].dynamicPropertyMapLong[l]||r[s].dynamicPropertyMapLong[l]()!=o[l])){c=!1;break}c&&i.push(r[s])}return i},c.prototype.updateOptionValuesFromSku=function(e,t,r){for(var i=r.optionId,a=[],o=r.originalOptionValues(),n=0;n<e.length;n++){var s=e[n].dynamicPropertyMapLong[i];void 0!=s&&a.push(s())}for(var c=0;c<o.length;c++){var l=o[c].value,u=!1,d=a.indexOf(l);d!=-1&&(u=!0),o[c].visible(u)}return o},c.prototype.updateSingleSelection=function(e){for(var t=this,r=t.variantOptionsArray,i=0;i<r.length;i++){var a=r[i].optionId;if(1==r[i].countVisibleOptions()&&void 0==r[i].selectedOption()&&a!=e)for(var o=(t.validForSingleSelection(a),r[i].originalOptionValues()),n=0;n<o.length;n++)if(1==o[n].visible()){r[i].selectedOption(o[n]);break}}},c.prototype.validForSingleSelection=function(e){for(var t=this,r=t.variantOptionsArray,i=0;i<r.length;i++){if(r[i].disable()||r[i].optionId!=e&&void 0!=r[i].selectedOption())return!0;if(r[i].optionId!=e&&void 0==r[i].selectedOption()&&1==r[i].countVisibleOptions())return!0}return!1},c.prototype.checkOptionValueWithSkus=function(e,t){for(var r=this,i=r.childSKUs(),a=i.length,o=0;o<a;o++)if(!i[o].dynamicPropertyMapLong[e]||void 0===i[o].dynamicPropertyMapLong[e]())return!0;return!1},c.prototype.getSelectedSkuOptions=function(e){for(var t=[],r=0;r<e.length;r++)e[r].disable()||t.push({optionName:e[r].optionDisplayName,optionValue:e[r].selectedOption().key,optionId:e[r].actualOptionId,optionValueId:e[r].selectedOption().value});return t},c}),define("swmRestClientConstructor",["jquery","ccRestClient","ccLogger","storageApi"],function(e,t,r,i){"use strict";function a(e,r){var a=this;a.isInitialized=!1,a.usingCCAuthentication=!1,a.isSynced=!1,a.unauthorizedCount=0,a.cors="withCredentials"in new XMLHttpRequest,a.corsFrameReady=!1,a.ccsyncInProgress=!1,a.ccsyncBlockedCallQue={items:[]},a.refreshTimeoutID=null,a.siteid="",a.apiuserid="",a.apiuserauth="";try{i.getInstance().removeItem("social.ccsyncprofileid"),i.getInstance().removeItem("social.ccsyncapiuserid")}catch(e){}a.ccrestapi=t,a.tenantid="",a.swmhost="",a.isPreview=!1,a.currentRequestId=0,a.commonSuccessCallback=e,a.commonErrorCallback=r,a.doRefresh=function(){if(a.usingCCAuthentication){var e=function(){},r=function(e){};a.refresh(e,r),t.storeRequestWasMade=!0}},a.stackedPostMessages={items:[]},a.setCorsFrameReady=function(){if(a.corsFrameReady=!0,a.stackedPostMessages&&a.stackedPostMessages.items.length>0){for(var e=0;e<a.stackedPostMessages.items.length;e++)a.proxyFrame.postMessage(a.stackedPostMessages.items[e].msgObj,a.swmhost);a.stackedPostMessages={items:[]}}}}return a.GET="GET",a.POST="POST",a.JSON="json",a.REQUEST_JSON_CONTENT_TYPE="application/json",a.REQUEST_FORM_URL_ENCODED="application/x-www-form-urlencoded",a.SWM_CCSYNC_ENDPOINT="/swm/rs/v1/users/cc",a.SWM_REFRESH_ENDPOINT="/swm/rs/v1/users/refresh",a.AUTH_HEADER_NAME="Authorization",a.CC_TENANTID_HEADER_NAME="X-CCTenantId",a.CC_ISPREVIEW_HEADER_NAME="X-CCIsPreview",a.ACCEPT_LANGUAGE_HEADER_NAME="Accept-Language",a.SWM_ACCESS_TOKEN="access_token",a.AUTH_HEADER_PREFIX="Bearer ",a.JWT_BEARER_GRANT_TYPE="urn:ietf:params:oauth:grant-type:jwt-bearer",a.TOKEN_REFRESH_TIMEOUT=5e3,a.IFRAME_ELEMENT="iframe",a.ZERO="0",a.IFRAME_STYLE="width: 0; height: 0; border: none;",a.IFRAME_NAME="swm_iframe",a.ID_ATTRIBUTE="id",a.NAME_ATTRIBUTE="name",a.WIDTH_ATTRIBUTE="width",a.HEIGHT_ATTRIBUTE="height",a.BORDER_ATTRIBUTE="border",a.STYLE_ATTRIBUTE="style",a.SRC_ATTRIBUTE="src",a.MAX_INT=4294967295,a.prototype.setSWMHost=function(e){this.swmhost=e},a.prototype.init=function(e,t,r){var i=this;if(i.tenantid=e,i.isPreview=1==t?"true":"false",i.locale=r,!i.cors&&!i.isInitialized){i.crossDomainUrl=i.swmhost+"/swm/pm/?tenantId="+e+"&isPreview="+i.isPreview,i.eventHandlerMap={},i.eventHandlerMap.initializedSWMFrame={success:i.setCorsFrameReady,error:i.setCorsFrameReady},i.initXDomainMessageListener();var a=i.createCrossDomainIFrame();null!=a&&(i.proxyFrame=a.contentWindow)}i.isInitialized=!0},a.prototype.createCrossDomainIFrame=function(){var e=this,t=a.IFRAME_NAME,r=document.createElement(a.IFRAME_ELEMENT);r.setAttribute(a.ID_ATTRIBUTE,t),r.setAttribute(a.NAME_ATTRIBUTE,t),r.setAttribute(a.WIDTH_ATTRIBUTE,a.ZERO),r.setAttribute(a.HEIGHT_ATTRIBUTE,a.ZERO),r.setAttribute(a.BORDER_ATTRIBUTE,a.ZERO),r.setAttribute(a.STYLE_ATTRIBUTE,a.IFRAME_STYLE),r.setAttribute(a.SRC_ATTRIBUTE,e.crossDomainUrl);var i=null;try{document.body.appendChild(r),window.frames[t].name=t,i=document.getElementById(t)}catch(e){}return i},a.prototype.initXDomainMessageListener=function(){var e=this;window.addEventListener("message",function(t){var r=t.origin;if(r===e.swmhost){var i;i="string"==typeof t.data?JSON.parse(t.data):t.data;var a=i.id,o=i.success,n=i.payload,s=e.eventHandlerMap[a];s&&(o?s.success(n):s.error(JSON.stringify(n)))}},!1)},a.prototype.proxyRequest=function(e,t,r,i,o,n){var s=this;s.currentRequestId>=a.MAX_INT?s.currentRequestId=0:s.currentRequestId++;var c=s.currentRequestId;s.eventHandlerMap[c]={success:i,error:o};var l=t.replace("{siteid}",s.siteid);l=s.swmhost+s.insertParamsIntoUri(l,n),l.indexOf(a.SWM_REFRESH_ENDPOINT)==-1&&l.indexOf(a.SWM_CCSYNC_ENDPOINT)==-1&&(null==s.refreshTimeoutID?s.refreshTimeoutID=setTimeout(s.doRefresh,a.TOKEN_REFRESH_TIMEOUT):(clearTimeout(s.refreshTimeoutID),s.refreshTimeoutID=setTimeout(s.doRefresh,a.TOKEN_REFRESH_TIMEOUT)));var u=0===t.indexOf(a.SWM_CCSYNC_ENDPOINT),d=(u?a.REQUEST_FORM_URL_ENCODED:a.REQUEST_JSON_CONTENT_TYPE,r?u?r:JSON.stringify(r):""),p={};p.id=c,p.pMethod=e,p.pUrl=l,p.pData=d,p.pIsPreview=s.isPreview,p.pTenantId=s.tenantid,p.pLocale=s.locale,p.pApiuserauth=s.apiuserauth,p.pAssertion=s.ccrestapi.tokenSecret,s.corsFrameReady?s.proxyFrame.postMessage(JSON.stringify(p),s.swmhost):s.stackedPostMessages.items.push({msgObj:JSON.stringify(p)})},a.prototype.syncCCUser=function(e,t){var r=this,o=function(t){r.isSynced=!0,r.siteid=t.siteId,r.apiuserid=t.userId,r.apiuserauth=t.access_token;try{i.getInstance().setItem("social.ccsyncprofileid",r.ccrestapi.profileId),i.getInstance().setItem("social.ccsyncapiuserid",t.userId)}catch(e){}e&&e(t)},n=function(e){r.isSynced=!1,null!=r.refreshTimeoutID&&clearTimeout(r.refreshTimeoutID),t&&t(e)};this.cors?this.corsRequest(a.POST,a.SWM_CCSYNC_ENDPOINT+"/{ccprofileid}","grant_type="+encodeURIComponent(a.JWT_BEARER_GRANT_TYPE)+"&assertion="+encodeURIComponent(r.ccrestapi.tokenSecret),o,n,{ccprofileid:r.ccrestapi.profileId}):this.proxyRequest(a.POST,a.SWM_CCSYNC_ENDPOINT+"/{ccprofileid}","grant_type="+encodeURIComponent(a.JWT_BEARER_GRANT_TYPE)+"&assertion="+encodeURIComponent(r.ccrestapi.tokenSecret),o,n,{ccprofileid:r.ccrestapi.profileId})},a.prototype.refresh=function(e,t){var r=this,i=function(t){r.isSynced=!0,r.apiuserauth=t.access_token,e&&e(t)},o=function(e){};r.apiuserauth?r.cors?r.corsRequest(a.POST,a.SWM_REFRESH_ENDPOINT,{},i,o):r.proxyRequest(a.POST,a.SWM_REFRESH_ENDPOINT,{},i,o):o()},a.prototype.clear=function(){var e=this;e.usingCCAuthentication=!1,e.isSynced=!1,e.siteid="",e.apiuserid="",e.apiuserauth="";try{i.getInstance().removeItem("social.ccsyncprofileid"),i.getInstance().removeItem("social.ccsyncapiuserid")}catch(e){}},a.prototype.request=function(e,t,a,o,n,s){var c=this,l=o,u=n;if(""==c.swmhost||!c.isInitialized)return void r.warn("rest client not initialized properly");null!=c.ccrestapi.profileId&&null!=c.ccrestapi.tokenSecret&&(c.usingCCAuthentication=!0);var d=i.getInstance().getItem("social.ccsyncprofileid"),p=i.getInstance().getItem("social.ccsyncapiuserid");if(d&&c.ccrestapi.profileId!==d||p&&c.apiuserid!==p){c.clear();var h='{"o:errorCode":"401.99"}';return void c.commonErrorCallback(h)}if(c.apiuserid===p&&c.ccrestapi.profileId===d||(c.isSynced=!1),c.usingCCAuthentication&&!c.isSynced){var f=function(r){c.ccsyncInProgress=!1,c.cors?c.corsRequest(e,t,a,l,u,s):c.proxyRequest(e,t,a,l,u,s),c.ccsyncBlockedCallQueExecution()},m=function(e){c.ccsyncInProgress=!1,null!=c.refreshTimeoutID&&clearTimeout(c.refreshTimeoutID),u&&u(e)};c.ccsyncInProgress?c.ccsyncBlockedCallQue.items.push({pMethod:e,pUrl:t,pData:a,pSuccessCallback:o,pErrorCallback:n,pJSONParams:s}):(c.ccsyncInProgress=!0,c.syncCCUser(f,m))}else c.cors?this.corsRequest(e,t,a,o,n,s):this.proxyRequest(e,t,a,o,n,s)},a.prototype.ccsyncBlockedCallQueExecution=function(){var e=this;if(e.ccsyncBlockedCallQue.items.length>0)for(var t=0;t<e.ccsyncBlockedCallQue.items.length;t++)e.cors?e.corsRequest(e.ccsyncBlockedCallQue.items[t].pMethod,e.ccsyncBlockedCallQue.items[t].pUrl,e.ccsyncBlockedCallQue.items[t].pData,e.ccsyncBlockedCallQue.items[t].pSuccessCallback,e.ccsyncBlockedCallQue.items[t].reqErrorCB,e.ccsyncBlockedCallQue.items[t].pJSONParams):e.proxyRequest(e.ccsyncBlockedCallQue.items[t].pMethod,e.ccsyncBlockedCallQue.items[t].pUrl,e.ccsyncBlockedCallQue.items[t].pData,e.ccsyncBlockedCallQue.items[t].pSuccessCallback,e.ccsyncBlockedCallQue.items[t].reqErrorCB,e.ccsyncBlockedCallQue.items[t].pJSONParams)},a.prototype.corsRequest=function(t,r,i,o,n,s){var c=this,l=t,u=r.replace("{siteid}",c.siteid);u=c.swmhost+c.insertParamsIntoUri(u,s),u.indexOf(a.SWM_REFRESH_ENDPOINT)==-1&&u.indexOf(a.SWM_CCSYNC_ENDPOINT)==-1&&(null==c.refreshTimeoutID?c.refreshTimeoutID=setTimeout(c.doRefresh,a.TOKEN_REFRESH_TIMEOUT):(clearTimeout(c.refreshTimeoutID),c.refreshTimeoutID=setTimeout(c.doRefresh,a.TOKEN_REFRESH_TIMEOUT)));var d=function(e){r.indexOf(a.SWM_CCSYNC_ENDPOINT)==-1&&(c.unauthorizedCount=0);var t=function(e,t){c.commonSuccessCallback(e,t),o(e,t)};t(e.data,e.textStatus)},p=function(e){var l=function(e,t,r){c.commonErrorCallback(e,t,r),n(e,t,r)};if(c.usingCCAuthentication)try{var u=JSON.parse(e.jqXHR.responseText);c.unauthorizedCount<=1&&401===u.status&&r.indexOf(a.SWM_CCSYNC_ENDPOINT)==-1?(c.isSynced=!1,c.unauthorizedCount++,c.request(t,r,i,o,n,s)):l(e.jqXHR.responseText,e.jqXHR.status,e.errorThrown)}catch(e){}else l(e.jqXHR.responseText,e.jqXHR.status,e.errorThrown)};l===a.GET&&(u=c.fixIECaching(u));var h=0===r.indexOf(a.SWM_CCSYNC_ENDPOINT),f=h?a.REQUEST_FORM_URL_ENCODED:a.REQUEST_JSON_CONTENT_TYPE,m=i?h?i:JSON.stringify(i):"",g={};g={dataType:a.JSON,contentType:f,type:l,url:u,data:m,processData:!1,success:function(e,t,r){d({data:e,textStatus:t,jqXHR:r})},error:function(e,t,r){p({jqXHR:e,textStatus:t,errorThrown:r})}};var v={};v[a.CC_ISPREVIEW_HEADER_NAME]=c.isPreview,v[a.ACCEPT_LANGUAGE_HEADER_NAME]=c.locale,h?v[a.CC_TENANTID_HEADER_NAME]=c.tenantid:c.apiuserauth&&c.apiuserauth.length>0&&(v[a.AUTH_HEADER_NAME]=a.AUTH_HEADER_PREFIX+c.apiuserauth),g.headers=v,e.ajax(g)},a.prototype.insertParamsIntoUri=function(e,t){var r=e;for(var i in t)t.hasOwnProperty(i)&&(r=r.replace("{"+i+"}",encodeURIComponent(t[i])));return r},a.prototype.fixIECaching=function(e){return e&&"Microsoft Internet Explorer"==navigator.appName&&(e+=(e.indexOf("?")!==-1?"&":"?")+"__ie__fix__="+(new Date).getTime()),e},a.getTimestamp=function(e){var t=new Date/1e3,r=parseInt(e,10),i=t+r;return parseInt(+i,10)},a}),define("swmRestClient",["swmRestClientConstructor","ccRestClient","ccLogger","pubsub","jquery","ccConstants","storageApi"],function(e,t,r,i,a,o,n){"use strict";var s=function(e){},c=function(e,t){try{var o=JSON.parse(e);if(o.error&&o.status)switch(o.status){case"400.12":a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({reason:"ccsync_failed"});break;default:a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({reason:"config"})}else 401===o.status?(a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({reason:"unauthorized"}),"401.99"===o["o:errorCode"]&&a.Topic(i.topicNames.SOCIAL_REFRESH_SPACES).publish({})):"403.1"!==o["o:errorCode"]&&"403.2"!==o["o:errorCode"]||n.getInstance().removeItem("social.currentSpaceId")}catch(e){r.warn("swm error occurred, response code: "+t),a.Topic(i.topicNames.SOCIAL_SPACE_UNAVAILABLE).publish({})}},l=new e(s,c);if(window.externalServiceData){var u=window.externalServiceData.social.scheme+"://"+window.externalServiceData.social.host;"0"!=window.externalServiceData.social.port&&(u+=":"+window.externalServiceData.social.port),l.setSWMHost(u);
}return l}),define("swmKoValidateRules",["knockout","jqueryui","koValidate"],function(e,t,r){"use strict";e.validation.rules.multiemail={validator:function(t,r){if(!r)return!0;var i=!0;if(!e.validation.utils.isEmptyVal(t)){var a=t.replace(/,/g,";").split(";");$(a).each(function(t){return i=e.validation.rules.email.validator($.trim(this),r)})}return i},message:"Please enter valid email addresses (separate multiple email addresses using a colon or semicolon)."},e.validation.rules.multiemailmax={validator:function(t,r){if(!r)return!1;if(!e.validation.utils.isEmptyVal(t)){var i=t.trim().replace(/,/g,";"),a=i.split(";"),o=a.length;if(";"==i.charAt(i.length-1)&&(o-=1),o>r)return!1}return!0},message:"Please limit the number of valid email addresses"},e.validation.rules.uniquespacename={validator:function(t,r){var i=e.utils.unwrapObservable(r),a=t.trim().replace(/\s+/g," ");if(Array.isArray(i))for(var o=0;o<i.length;o++){var n;if(n="string"==typeof i[o].spaceNameFull?i[o].spaceNameFull.toUpperCase():i[o].spaceNameFull().toUpperCase(),n==a.toUpperCase())return!1}return!0},message:"Name must be unique"},e.validation.rules.editSpaceNameUniqueRule={validator:function(t,r){var i=t.trim().replace(/\s+/g," "),a=r.currentSpaceId,o=e.utils.unwrapObservable(r.spaces);if(Array.isArray(o))for(var n=0;n<o.length;n++){var s;if(s="string"==typeof o[n].spaceNameFull?o[n].spaceNameFull.toUpperCase():o[n].spaceNameFull().toUpperCase(),s==i.toUpperCase()){if(o[n].spaceid==a)continue;return!1}}return!0},message:"Name must be unique"},e.validation.rules.badrequestinvalidemail={validator:function(e){return!1},message:"Please type in valid email addresses for your recipients."},e.validation.rules.badrequestspacename={validator:function(e){return!1},message:"Name must be unique"},e.validation.registerExtenders()}),define("pageLayout/space",["jquery","knockout","pubsub","notifier","ccLogger","CCi18n","swmRestClient","swmKoValidateRules"],function(e,t,r,i,a,o,n,s){"use strict";function c(e,r){if(c.singleInstance)throw new Error("Cannot instantiate more than one SpaceViewModel, use getInstance(pAdapter, pUserData, pParams)");var i=this;return i.adapter=e,i.id=t.observable(""),i.name=t.observable(""),i.ownerId=t.observable(""),i.ownerFirstName=t.observable(""),i.ownerLastName=t.observable(""),i.ownerMediaId=t.observable(""),i.ownerMediaUrl=t.observable(""),i.accessLevel=t.observable(""),i.siteName=t.observable(""),i.fbAppId=t.observable(""),i.inviteAcceptInProgress=t.observable(!1),i.members=t.observableArray([]),i.ownerFullName=t.computed(function(){return i.ownerFirstName()+" "+i.ownerLastName()},i),i.contextId=t.observable(""),i.showSpace=t.observable(!1),i.spaceProductMediaUrl=t.observable(""),i}return c.prototype.isSpaceOwner=function(e){var t=this;return t.ownerId()===e},c.prototype.isMember=function(t){var r=this,i=!1;return e.each(r.members(),function(e,r){if(r.userId==t)return i=!0,!1}),i},c.prototype.isPrivate=function(){var e=this,t=!1;return"0"===e.accessLevel()&&(t=!0),t},c.prototype.isGroup=function(){var e=this,t=!1;return"2"===e.accessLevel()&&(t=!0),t},c.prototype.isShared=function(){var e=this,t=!1;return"1"===e.accessLevel()&&(t=!0),t},c.prototype.isPrivateOrGroup=function(){var e=this,t=!1;return(e.isPrivate()||e.isGroup())&&(t=!0),t},c.prototype.updateSpace=function(e){var t=this;e.id&&t.id(e.id),e.name&&t.name(e.name),e.ownerId&&t.ownerId(e.ownerId),e.ownerFirstName&&t.ownerFirstName(e.ownerFirstName),e.ownerLastName&&t.ownerLastName(e.ownerLastName),e.ownerMediaId&&t.ownerMediaId(e.ownerMediaId),e.ownerMediaUrl&&t.ownerMediaUrl(e.ownerMediaUrl),e.accessLevel&&t.accessLevel(e.accessLevel),e.siteName&&t.siteName(e.siteName),e.fbAppId&&t.fbAppId(e.fbAppId),e.spaceProductMediaUrl&&t.spaceProductMediaUrl(e.spaceProductMediaUrl)},c.prototype.updateMembers=function(t){var i=this;i.members.removeAll(),i.members(t),e.Topic(r.topicNames.SOCIAL_SPACE_MODEL_MEMBERS_CHANGED).publish()},c.getInstance=function(e,t,r){return c.singleInstance||(c.singleInstance=new c(e,t)),c.singleInstance},c}),define("pageLayout/layout-container",["knockout","pageLayout/data","pageLayout/layout","pageLayout/region","pageLayout/widget","pageLayout/cart","pageLayout/order","pageLayout/layout-mapping","pageLayout/simple-cache","pageLayout/context-handler","pageLayout/view-model-builder","pageLayout/search","pageLayout/shippingmethods","pageLayout/payment-auth-response","pageLayout/user","pageLayout/product","pageLayout/space","pageViewTracker","viewModels/paymentDetails","pubsub","CCi18n","ccConstants","ccLogger","jquery","notifier","pageLayout/site","sfExceptionHandler","ccStoreServerLogger","viewportHelper","navigation","ccRestClient","ccPreviewBar","ccStoreConfiguration"],function(e,t,r,i,a,o,n,s,c,l,u,d,p,h,f,m,g,v,E,y,b,I,T,S,_,P,A,C,R,O,N,D,L){"use strict";function w(t,r){var i=this;this.isPreview,this.layoutMapping=new s(this),this.masterViewModel=e.observable(),this.basePath=r,this.adapter=t,this.cache=new c,this.widgetCache=new c,this.contextHandler=new l,this.viewModelBuilder=u,this.contextDataSet=S.Deferred(),this.contextDataSetSubscriber=this.contextDataSet.promise(),this.networkErrorMessage,this.networkErrorReloadText,i.storeServerLog=C.getInstance(),this.storeConfiguration=L.getInstance(),this.currentPage=null,this.pendingWidgets=e.observableArray().extend({deferred:!0}),S.Topic(y.topicNames.PAGE_VIEW_CHANGED).subscribe(i.pageViewChanged.bind(i)),S.Topic(y.topicNames.PAGE_CONTEXT_CHANGED).subscribe(i.pageContextChanged.bind(i)),S.Topic(y.topicNames.PAGE_PARAMETERS_CHANGED).subscribe(i.pageParametersChanged.bind(i)),S.Topic(y.topicNames.PAGE_READY).subscribe(i.pageReady.bind(i)),S.Topic(y.topicNames.RECORD_PAGINATION_PAGE_CHANGE).subscribe(i.pageReady.bind(i)),S.Topic(y.topicNames.USER_NETWORK_ERROR).subscribe(i.networkError.bind(i));var a=!0;return a&&(this.exceptionHandler=new A,this.exceptionHandler.subscribe&&this.exceptionHandler.subscribe()),this}function M(t,r){if(!t||!r)return!0;if(t.similarRegions&&Object.keys(t.similarRegions).length>0&&t.similarRegions.hasOwnProperty(r.id))return!1;if(r.similarRegions&&Object.keys(r.similarRegions).length>0&&r.similarRegions.hasOwnProperty(t.id))return!1;if(t.widgets){var i=e.isObservable(t.widgets)?t.widgets():t.widgets,a=i.length;if(r.widgets){if(a!==r.widgets.length)return!0;var o=e.isObservable(t.width)?t.width():t.width;if(o!==r.width)return!0;for(var n=0;n<a;n++){var s=e.isObservable(i[n].id)?i[n].id():i[n].id;if(s!==r.widgets[n].id)return!0}return!(!t.metadata()||!r.metadata||t.id()==r.id)}return!0}return!!r.widgets}function k(e,t){for(var r=-1,i=0;i<t.length;i++)if(!M(e,t[i])){r=i;break}return r}return w.prototype.getViewModelBuilder=function(e){var t=this.viewModelBuilder[e];return null==t&&(t={scope:"page",cacheable:!1,load:!0,create:!0}),t},w.prototype.setContextData=function(e){var t,r,i=0,a=this,o=function(){for(t=["global","page"],i=0;i<t.length;i++)for(r in e[t[i]])e[t[i]].hasOwnProperty(r)&&"__ko_mapping__"!==r&&a.loadCurrentFromJSON(r,e[t[i]][r],e);a.contextDataSet.resolve(),a.contextDataSet=S.Deferred(),a.contextDataSetSubscriber=a.contextDataSet.promise()},n=e.global.locale;n&&null!==n?b.setLocaleOnce(n,o):o()},w.prototype.pageContextChanged=function(e){var t=this;t.currentPage=e;var r=e.pageId,i={};i[I.PAGE_PARAM]=e.contextId,i[I.DATA_ONLY]=!0,this.load("layout",r,i,function(r){t.setContextData(r.data),t.updatePageEventData(r.data,e),r.data&&r.data.global&&r.data.global.site&&r.data.global.site.tenantId&&v.tenantId(r.data.global.site.tenantId),S.Topic(y.topicNames.PAGE_METADATA_CHANGED).publish(r),S.Topic(y.topicNames.PAGE_READY).publish(e)},t.handleServerError)},w.prototype.updatePageEventData=function(e,t){e.page&&e.page.repositoryId&&(t.pageRepositoryId=e.page.repositoryId)},w.prototype.handleServerError=function(e){this.networkError()},w.prototype.pageParametersChanged=function(e){var t=this.getParameterData(e.parameters);S.Topic(y.topicNames.PAGE_PARAMETERS).publishWith({pageId:e.pageId,seoslug:e.seoslug,parameters:t},[{message:"success"}])},w.prototype.pageViewChanged=function(e){var t=this;t.shouldPageBeRefreshed(),t.currentPage=e;var r="home/",i=null;e.pageId&&(r=e.pageId),e.contextId&&(r=e.pageId,i={},i[I.PAGE_PARAM]=e.contextId,i[I.DATA_ONLY]=!1),e.path&&(r=e.path);var a=window.location.href.split("?"),o=null,n=void 0;if(a.length>1&&(n=a[1],o=a[1].split("&")),o){null==i&&(i={});for(var s in o){var c=o[s].split("=");!e.path||"404"!==e.path||e.parameters&&""!==e.parameters?i[c[0]]=c[1]:"usePageId"!==c[0]&&"usePreviewData"!==c[0]&&(i[c[0]]=c[1])}}null==i&&(i={}),i.dataOnly||(i.dataOnly=!1),this.load("layout",r,i,function(r){t.isPreview=r.isPreview(),r.data.page.pageId&&(e.pageId=r.data.page.pageId),r.data.page.contextId&&(e.contextId=r.data.page.contextId);var i;t.setContextData(r.data),t.updatePageEventData(r.data,e),r.data&&r.data.global&&r.data.global.site&&r.data.global.site.tenantId&&v.tenantId(r.data.global.site.tenantId),e.parameters&&S.Topic(y.topicNames.PAGE_PARAMETERS).publishWith({pageId:e.pageId,seoslug:e.seoslug,parameters:t.getParameterData(e.parameters)},[{message:"success"}]),S.Topic(y.topicNames.PAGE_CHANGED).publish(e),S.Topic(y.topicNames.PAGE_LAYOUT_LOADED).publish(r,e);var a={pageId:e.pageId};t.storeServerLog.logInfo("getPage",t.storeServerLog.getMessage("getPage",a)),0===t.pendingWidgets().length?S.Topic(y.topicNames.PAGE_READY).publish(e):i=t.pendingWidgets.subscribe(function(t){0===t.length&&(S.Topic(y.topicNames.PAGE_READY).publish(e),i.dispose())})},t.handleServerError)},w.prototype.create=function(e,t,r,i,a,o,n){var s,c,l,u=this;if(S.isFunction(i)?(S.isFunction(a)?(n=o,o=a):n=a,a=i,i=null):S.isFunction(o)||(n=o,o=null),s=this.getViewModelBuilder(e),s&&s.create){if(s.cachable){var d=u.idAndParamsToCacheKey(t,i);u.cache.set(e,d,r)}if(c=s.create,!c)throw"Loading of resource type: "+e+" forbidden";l=c===!0?r:c(r,i,n),this.adapter.persistCreate(e,t,l,i,function(e){a&&a(e,n)},function(e){o&&o(e,n)})}},w.prototype.update=function(e,t,r,i,a,o,n){var s,c,l;if(S.isFunction(i)?(S.isFunction(a)?(n=o,o=a):n=a,a=i,i=null):S.isFunction(o)||(n=o,o=null),s=this.getViewModelBuilder(e),s&&s.update){if(c=s.update,!c)throw"Updating of resource type: "+e+" forbidden";l=c===!0?r:c(r,i,n),this.adapter.persistUpdate(e,t,l,i,function(e){a&&a(e,n)},function(e){o&&o(e,n)})}},w.prototype.remove=function(e,t,r,i,a,o){var n,s,c=this;if(S.isFunction(r)?(S.isFunction(i)?(o=a,a=i):o=i,i=r,r=null):S.isFunction(a)||(o=a,a=null),n=this.getViewModelBuilder(e),n&&n.remove){if(n.cachable){var l=c.idAndParamsToCacheKey(t,r);this.cache.set(e,l,null)}if(s=n.remove,!s)throw"Deleting of resource type: "+e+" forbidden";this.adapter.persistDelete(e,t,r,function(e){i&&i(e,o)},function(e){a&&a(e,o)})}},w.prototype.loadRequestForLayout=function(e,t,r,i,a,o,n){var s=S.Deferred(),c=this;return N.request(e,t,function(e){c.shouldPageBeRefreshed(),s.resolve(e)},function(e){s.reject(e),e.status==I.HTTP_NOT_FOUND&&O.goTo("/404",!0,!0)},r,i,a,o,n),s},e.observableArray.fn.setAt=function(e,t){this.valueWillMutate(),this()[e]=t,this.valueHasMutated()},w.prototype.loadDataForLayout=function(e,t,r,i,a,o){var n=this,s=e,c=a.load,l=S.extend({},e);l.hasOwnProperty(I.DATA_ONLY)&&delete l[I.DATA_ONLY];var u=R.viewportDesignation();if(n.storeConfiguration.enableLayoutsRenderedForLayout===!0){var d=n.storeConfiguration.getLayoutIdsRendered();d.length>0&&(l[I.LAYOUTS_RENDERED]=d.toString())}u&&(l.ccvp=u);var p=S.extend({},e,{cacheableDataOnly:!0}),h=!0;void 0!=n.contextHandler.get(I.PRODUCT_TYPES,"page")()&&(h=!1),p.productTypesRequired=h;var f={};f[I.ENDPOINT_KEY]=I.ENDPOINT_PAGES_GET_PAGE,f[I.PAGE_KEY]=t,f[I.IDENTIFIER_KEY]="layoutOnly";var m=n.storeConfiguration.getFilterToUse(f);m&&(l[I.FILTER_KEY]=m),N.previewMode&&(l[I.DISABLE_MINIFY]=D.getInstance().isDisableMinifyJs()),f[I.IDENTIFIER_KEY]="cachableData";var g=n.storeConfiguration.getFilterToUse(f);g&&(p[I.FILTER_KEY]=g);var v={currentDataOnly:!0};f[I.IDENTIFIER_KEY]="currentData";var E=n.storeConfiguration.getFilterToUse(f);E&&(v[I.FILTER_KEY]=E),S.when(this.loadRequestForLayout(I.ENDPOINT_GET_LAYOUT,l,t),this.loadRequestForLayout(I.ENDPOINT_PAGES_GET_PAGE,p,t),this.loadRequestForLayout(I.ENDPOINT_PAGES_GET_PAGE,S.extend({},e,{currentDataOnly:!0}),t)).done(function(e,l,u){if(r){u.data.global.user.parentOrganization&&(l.data.global.site.priceListGroup.defaultPriceListGroup=u.data.global.user.priceListGroup,l.data.global.site.priceListGroup.activePriceListGroups=[u.data.global.user.priceListGroup],l.data.global.site.currency=u.data.global.user.priceListGroup.currency);var d,p=S.extend(!0,e,l,u);if(s.pageId=t,!p.data.page||"product"!==p.data.page.pageId&&"category"!==p.data.page.pageId||0!=p.data.page.hasOwnProperty(I.PRODUCT_TYPES)||void 0==n.contextHandler.get(I.PRODUCT_TYPES,"page")()||(p.data.page[I.PRODUCT_TYPES]=n.contextHandler.get(I.PRODUCT_TYPES,"page")()),n.storeConfiguration.storeLayoutIdsRendered(e),c===!0)d=p;else{d=c(p,n,s);var h=n.masterViewModel().regions(),f=p.regions,m=0;h.length=f.length;var g=new Array(h.length);for(n.masterViewModel().regions.valueWillMutate(),m=0;m<h.length;m++){var v=M(h[m],f[m]);if(v){var E=k(h[m],f);if(E!=-1&&(g[E]=h[m]),!g[m]){var T=n.getViewModelBuilder("region"),_=T.load(f[m],n,s);h[m]=_}}else h[m].similarRegions[f[m].id]={}}for(m=0;m<g.length;m++)void 0!==g[m]&&(n.masterViewModel().regions()[m]=g[m]);n.masterViewModel().regions.valueHasMutated()}if(n.masterViewModel().title(d.title()),n.masterViewModel().keywords(d.keywords()),n.masterViewModel().description(d.description()),n.masterViewModel().metaTags(d.metaTags()),n.masterViewModel().isPreview(d.isPreview()),R.layoutViewports(d.viewports?d.viewports():""),S.Topic(y.topicNames.PAGE_LAYOUT_UPDATED).publish(p,s),p.data.page.category?n.masterViewModel().pageChangeMessage(b.t("ns.common:resources.categoryPageLoadedText",{collection:p.data.page.category.displayName})):p.data.page.product?n.masterViewModel().pageChangeMessage(b.t("ns.common:resources.productPageLoadedText",{product:p.data.page.product.displayName})):"userSpacesPage"===p.data.page.repositoryId?n.masterViewModel().pageChangeMessage(b.t("ns.common:resources.wishlistPageLoadedText")):"searchResultsPage"!=p.data.page.repositoryId&&n.masterViewModel().pageChangeMessage(b.t("ns.common:resources.pageLoadedText",{page:p.data.page.repositoryId})),""===n.masterViewModel().pageChangeMessage()&&n.masterViewModel().dataForPageChangeMessage(p.data),a.cachable){var P=n.idAndParamsToCacheKey(t,s);n.cache.set(type,P,d)}r(d,o)}else 404==d.status?O.goTo("/404",!0,!0):i&&pResult&&i(pResult,o)})},w.prototype.load=function(e,t,r,i,a,o){var n,s,c,l=this;if(S.isFunction(r)?(S.isFunction(i)?(o=a,a=i):o=i,i=r,r=null):S.isFunction(a)||(o=a,a=null),n=this.getViewModelBuilder(e),n&&n.load){if(n.cachable){var u=l.idAndParamsToCacheKey(t,r);if(c=this.cache.get(e,u),c.hit===!0)return void(i&&i(c.result,o))}if(s=n.load,!s)throw"Loading of resource type: "+e+" forbidden";var d=r?r:{};"layout"==e&&d.dataOnly===!1?this.loadDataForLayout(d,t,i,a,n,o):this.adapter.loadJSON(e,t,r,function(a){var c;if(c=s===!0?a:s(a,l,r),n.cachable){var u=l.idAndParamsToCacheKey(t,r);l.cache.set(e,u,c)}i&&i(c,o)},function(e){a&&a(e,o)})}},w.prototype.loadCurrentFromJSON=function(e,t,r,i){var a,o,n;if(o=this.getViewModelBuilder(e),!o)return null;if(a=o.scope?o.scope:"page",o.load){if(o.load===!0){if(this.contextHandler.set(e,t,a),i&&o.cachable){var s=self.idAndParamsToCacheKey(i,r);this.cache.set(e,s,n)}return t}if(n=o.load(t,this,r),this.contextHandler.set(e,n,a),i&&o.cachable){var s=self.idAndParamsToCacheKey(i,r);this.cache.set(e,s,n)}return n}return null},w.prototype.instantiateWidget=function(t){var r,i=new this.WidgetViewModel(this.basePath);for(r in t)t.hasOwnProperty(r)&&(e.isObservable(t[r])&&!e.isComputed(t[r])?t[r].remove?i[r]=e.observableArray(t[r]()):i[r]=e.observable(t[r]()):e.isComputed(t[r])||(i[r]=t[r]));return this.initializeWidget(i,!0),i},w.prototype.initializeWidget=function(e,t,r){var i=this;i.contextDataSetSubscriber.done(function(){i.runWidgetInitialization(e,t,r)})},w.prototype.runWidgetInitialization=function(t,r,i){var a,o,n,s,c=this;if(c.pendingWidgets.push(t),r&&t.imports)for(o=e.utils.unwrapObservable(t.imports),s=o.length-1;s>=0;s-=1)a=o[s],n=this.getViewModelBuilder(a),n&&(n=n.scope||"page"),t[a]=this.contextHandler.get(a,n);if(e.utils.unwrapObservable(t.javascript)){var l=t.jsPath()+"/",u=t.javascript();if(t.assetMappings){var d="/js/"+t.javascript()+".js",p=t.assetMappings[d];if(p){var h=p().lastIndexOf("/");l=p().substring(0,h),u=p()}}requirejs.s.contexts._.nextTick=function(e){e()};var f=requirejs.s.contexts._.config.map?requirejs.s.contexts._.config.map:{};f[u]={};for(var m in t.assetMappings)if(0===m.indexOf("/js/")&&m.indexOf(t.javascript()+".js")===-1){var g=m.indexOf(".js"),v=t.assetMappings[m](),E=m.substring(1,g);f[u][E]=v}require({baseUrl:l,map:f},[u],function(a){"function"==typeof a&&(a=a().bind(e));var o;for(o in a)a.hasOwnProperty(o)&&(e.isObservable(a[o])&&!e.isComputed(a[o])?a[o].remove?t[o]=e.observableArray(a[o]()):t[o]=e.observable(a[o]()):t[o]=a[o]);t.allPropertiesSet(t),a||T.warn("Failed to execute javascript for widget: "+t.javascript()),r&&a&&a.onLoad&&a.onLoad(t),r&&a&&a.resourcesLoaded&&(t.resources()&&a.resourcesLoaded(t),t.resources.subscribe(function(e){e&&a.resourcesLoaded(t)})),t.initialized(!0),i&&i.call(this,t),c.pendingWidgets.remove(t),t.hasBeforeAppear()&&S.Topic(y.topicNames.PAGE_READY).subscribe(t.maybeFireBeforeAppear.bind(t))}),requirejs.s.contexts._.nextTick=requirejs.nextTick}else c.pendingWidgets.remove(t),t.initialized(!0)},w.prototype.idAndParamsToCacheKey=function(e,t){if(null==t)return e;var r=new Array;return r.push(e),t[I.PAGE_PARAM]&&r.push(t[I.PAGE_PARAM]),t[I.DATA_ONLY]&&r.push(t[I.DATA_ONLY]),r},w.prototype.pageReady=function(){var e=this;if(!e.isServerSideProcess()&&!e.isPreview){var t=v.createPageViewEvent(1);v.recordPageChange(t)}},w.prototype.isServerSideProcess=function(){var e=!1,t=window.location.href;return t.indexOf(I.SERVERSIDE_PROCESS_STRING)!=-1&&(e=!0),e},w.prototype.getParameterData=function(e){for(var t=e.split("&"),r={},i=0;i<t.length;i++){var a=t[i].split("=");r[a[0]]=a[1]}return r},w.prototype.networkError=function(){var e=this;e.networkErrorMessage=b.t("ns.common:resources.networkConnectivityError",{}),e.networkErrorReloadText=b.t("ns.common:resources.reloadPage",{}),S(window).scrollTop("0"),S(".modal").modal("hide"),S("#loadingModal").hide(),S("body").removeClass("modal-open"),S(".modal-backdrop").remove(),_.sendTemplateInfo(I.LAYOUT_CONTAIER_ID,e,"notificationsNetworkError")},window.onerror=function(e,t,r,i,a){S.Topic(y.topicNames.ONERROR_EXCEPTION_HANDLER).publish(e,t,r,i,a)},w.prototype.LayoutViewModel=r,w.prototype.RegionViewModel=i,w.prototype.WidgetViewModel=a,w.prototype.CartViewModel=o,w.prototype.OrderViewModel=n,w.prototype.SearchViewModel=d,w.prototype.ShippingMethodsViewModel=p,w.prototype.PaymentDetails=E,w.prototype.PaymentAuthResponseViewModel=h,w.prototype.UserViewModel=f,w.prototype.ProductViewModel=m,w.prototype.SpaceViewModel=g,w.prototype.ServerData=t,w.prototype.SiteViewModel=P,w.prototype.shouldPageBeRefreshed=function(){N.isRefreshRequired&&window.location.reload()},w}),define("pageLayout/scheduled-order",["ccConstants","knockout","ccDate","pageLayout/rest-adapter","pubsub","ccStoreConfiguration"],function(e,t,r,i,a,o){"use strict";function n(e,t){return e-t}function s(e){var r=t.observable(!1);return{isDirty:t.computed(function(){return!!r()||(t.toJS(e),r(!0),!1)}),reset:function(){r(!1)}}}function c(){this.id=t.observable(),this.organizationId=t.observable(),this.name=t.observable(),this.state=t.observable(),this.scheduleType=t.observable(),this.occurrenceInDay=t.observable(),this.daysOfWeek=t.observableArray(),this.daysInMonth=t.observableArray(),this.weeksInMonth=t.observableArray(),this.monthsInYear=t.observableArray(),this.startDate=t.observable(),this.endDate=t.observable(),this.nextScheduledRun=t.observable(),this.profileId=t.observable(),this.templateOrderId=t.observable(),this.templateOrder=t.observable(),this.clonedOrders=t.observableArray(),this.lastError=t.observable(),this.suspend=t.observable(!1),this.scheduleMode=t.observable(),this.executionStatusList=t.observableArray(),this._adapter=new i("/ccstore/v1/"),this._scheduleModes=l,this._scheduleModePatterns=u,this._scheduleSeeds=d,this.dirtyFlag=s(this),this.subscriptions=[],this.storeConfiguration=o.getInstance()}var l=[e.SCHEDULE_MODE_QUARTERLY,e.SCHEDULE_MODE_BI_MONTHLY,e.SCHEDULE_MODE_ONCE_MONTHLY,e.SCHEDULE_MODE_TWICE_DAILY,e.SCHEDULE_MODE_ONCE_DAILY,e.SCHEDULE_MODE_WEEKLY],u={};u[e.SCHEDULE_MODE_QUARTERLY]={occurrenceInDay:/^1$/,daysOfWeek:/^$/,daysInMonth:/^1$/,weeksInMonth:/^$/,monthsInYear:/^([0-9]|1[0-1])(,([0-9]|(1[0-1]))){3,3}$/},u[e.SCHEDULE_MODE_BI_MONTHLY]={occurrenceInDay:/^1$/,daysOfWeek:/^$/,daysInMonth:/^1$/,weeksInMonth:/^$/,monthsInYear:/^([0-9]|1[0-1])(,([0-9]|(1[0-1]))){5,5}$/},u[e.SCHEDULE_MODE_ONCE_MONTHLY]={occurrenceInDay:/^1$/,daysOfWeek:/^$/,daysInMonth:/^1$/,weeksInMonth:/^$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/},u[e.SCHEDULE_MODE_TWICE_DAILY]={occurrenceInDay:/^2$/,daysOfWeek:/^.*$/,daysInMonth:/^$/,weeksInMonth:/^1,2,3,4,5$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/},u[e.SCHEDULE_MODE_ONCE_DAILY]={occurrenceInDay:/^1$/,daysOfWeek:/^1,2,3,4,5,6,7$/,daysInMonth:/^$/,weeksInMonth:/^1,2,3,4,5$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/},u[e.SCHEDULE_MODE_WEEKLY]={occurrenceInDay:/^1$/,daysOfWeek:/^([1-7])(,[1-7]){0,6}$/,daysInMonth:/^$/,weeksInMonth:/^([1-5])(,[1-5]){0,4}$/,monthsInYear:/^0,1,2,3,4,5,6,7,8,9,10,11$/};var d={};return d[e.SCHEDULE_MODE_QUARTERLY]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[1],weeksInMonth:[],monthsInYear:[0,3,6,9]},d[e.SCHEDULE_MODE_BI_MONTHLY]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[1],weeksInMonth:[],monthsInYear:[0,2,4,6,8,10]},d[e.SCHEDULE_MODE_ONCE_MONTHLY]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[1],weeksInMonth:[],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},d[e.SCHEDULE_MODE_TWICE_DAILY]={occurrenceInDay:2,daysOfWeek:[],daysInMonth:[],weeksInMonth:[1,2,3,4,5],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},d[e.SCHEDULE_MODE_ONCE_DAILY]={occurrenceInDay:1,daysOfWeek:[1,2,3,4,5,6,7],daysInMonth:[],weeksInMonth:[1,2,3,4,5],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},d[e.SCHEDULE_MODE_WEEKLY]={occurrenceInDay:1,daysOfWeek:[1],daysInMonth:[],weeksInMonth:[1,2,3,4,5],monthsInYear:[0,1,2,3,4,5,6,7,8,9,10,11]},d[e.SCHEDULE_MODE_CUSTOM]={occurrenceInDay:1,daysOfWeek:[],daysInMonth:[],weeksInMonth:[],monthsInYear:[]},c.prototype.subscribeForChanges=function(){this.subscriptions.push(this.scheduleMode.subscribe(this._setScheduleMode.bind(this),this))},c.prototype.dispose=function(){for(var e=this.subscriptions.length,t=0;t<e;t++)this.subscriptions[t].dispose()},c.prototype.save=function(e,t){var r=this.toJS(),i=function(t){this.fromJS(t),"function"==typeof e&&e(t)}.bind(this),a=function(e){"function"==typeof t&&t(e)}.bind(this);r.id?this._adapter.persistUpdate("scheduledOrder",r.id,r,null,i,a):this._adapter.persistCreate("scheduledOrder",null,r,null,i,a)},c.prototype.remove=function(e,t){var r=this.id(),i=function(t){"function"==typeof e&&e(t)}.bind(this),a=function(e){"function"==typeof t&&t(e)}.bind(this);this._adapter.persistRemove("scheduledOrder",r,null,i,a)},c.prototype.fromJS=function(e){e=e||{},e.schedule=e.schedule||{},this.id(e.id),this.organizationId(e.templateOrder.organizationId),this.name(e.name),this.state(e.state),this.scheduleType(e.scheduleType||"calendar"),this.occurrenceInDay(e.schedule.occurrenceInDay||1),this.daysOfWeek(e.schedule.daysOfWeek||[]),this.daysInMonth(e.schedule.daysInMonth||[]),this.weeksInMonth(e.schedule.weeksInMonth||[]),this.monthsInYear(e.schedule.monthsInYear||[]),this.startDate(e.startDate),this.endDate(e.endDate||""),this.nextScheduledRun(e.nextScheduledRun),this.profileId(e.profileId),this.templateOrderId(e.templateOrderId),this.templateOrder(e.templateOrder||{}),this.clonedOrders(e.clonedOrders||[]),this.lastError(e.lastError),this.executionStatusList(e.executionStatusList||[]),this.scheduleMode(this._getScheduleMode()),this.dirtyFlag.reset(),this.subscribeForChanges()},c.prototype.toJS=function(){var e={id:this.id(),name:this.name(),state:this.state(),scheduleType:this.scheduleType(),schedule:{occurrenceInDay:this.occurrenceInDay(),daysOfWeek:this.daysOfWeek(),daysInMonth:0!=this.daysInMonth().length?this.daysInMonth():void 0,weeksInMonth:this.weeksInMonth(),monthsInYear:this.monthsInYear()},startDate:r.dateTimeFormatter(this.startDate(),"YYYY-MM-DD",null),endDate:this.endDate()?r.dateTimeFormatter(this.endDate(),"YYYY-MM-DD",null):"",nextScheduledRun:this.nextScheduledRun(),profileId:this.profileId(),templateOrderId:this.templateOrderId(),clonedOrders:this.clonedOrders(),lastError:this.lastError()};return e},c.prototype._getScheduleMode=function(){var t=e.SCHEDULE_MODE_CUSTOM;for(var r in this._scheduleModes){var i=this._scheduleModes[r];if(this._testScheduleMode(i)){t=i;break}}return t},c.prototype._testScheduleMode=function(e){var t=this._scheduleModePatterns[e].occurrenceInDay.test(this.occurrenceInDay())&&this._scheduleModePatterns[e].daysOfWeek.test(this.daysOfWeek.sort(n)())&&this._scheduleModePatterns[e].daysInMonth.test(this.daysInMonth.sort(n)())&&this._scheduleModePatterns[e].weeksInMonth.test(this.weeksInMonth.sort(n)())&&this._scheduleModePatterns[e].monthsInYear.test(this.monthsInYear.sort(n)());return t},c.prototype._setScheduleMode=function(t){var r=this._scheduleSeeds[t]||this._scheduleSeeds[e.SCHEDULE_MODE_CUSTOM];if(this.occurrenceInDay(r.occurrenceInDay),this.daysOfWeek(r.daysOfWeek.slice(0)),this.daysInMonth(r.daysInMonth.slice(0)),this.weeksInMonth(r.weeksInMonth.slice(0)),t===e.SCHEDULE_MODE_BI_MONTHLY){for(var i=new Date(this.startDate()),a=[],o=0,s=i.getMonth();;){if(a[o]=s,s=(s+2)%12,s==i.getMonth())break;o++}this.monthsInYear(a.sort(n))}else this.monthsInYear(r.monthsInYear.slice(0))},c.prototype.reset=function(){var e=this;e.id(""),e.name(""),e.state(""),e.scheduleType(""),e.occurrenceInDay(""),e.daysOfWeek([]),e.daysInMonth([]),e.weeksInMonth([]),e.monthsInYear([]),e.startDate(""),e.endDate(""),e.nextScheduledRun(""),e.profileId(""),e.executionStatusList([]),e.templateOrderId(""),e.templateOrder(""),e.clonedOrders([]),e.lastError(""),e.suspend(""),e.dispose(),e.scheduleMode(""),e.dirtyFlag.reset()},c.prototype.load=function(t){var r=this,i={};i.orderDetails=!0;var o={};o[e.ENDPOINT_KEY]=e.ENDPOINT_GET_SCHEDULED_ORDER,o[e.IDENTIFIER_KEY]="loadOrder";var n=r.storeConfiguration.getFilterToUse(o);return n&&(i[e.FILTER_KEY]=n),r._adapter.loadJSON("scheduledOrder",t,i,function(e){r.fromJS(e);var t={message:e.errorMessages?e.errorMessages:void 0};$.Topic(a.topicNames.SCHEDULED_ORDER_LOAD_SCUCCESS).publishWith(t)},function(e){$.Topic(a.topicNames.SCHEDULED_ORDER_LOAD_ERROR).publishWith(e)}),this},c.getInstance=function(){return c.singleInstance||(c.singleInstance=new c),c.singleInstance},c}),define("viewModels/guidedNavigationViewModel",["knockout","pubsub","ccConstants","navigation","jquery","spinner","CCi18n","pageLayout/search","storageApi","pageLayout/site"],function(e,t,r,i,a,o,n,s,c,l){"use strict";function u(t,a,o,n){var s=this;s.displayWidget=e.observable(!0),s.maxDimensionCount=t,s.maxRefinementCount=a,s.dimensions=s.collapsibleList([],s.maxDimensionCount),s.allRefinementCrumbs=e.observableArray(),s.searchText=e.observable(""),s.categoryHref=e.observable(""),s.categoryName=e.observable(""),s.categoryDimensionId=e.observable(""),s.categoryRepositoryId=e.observable(""),s.priceRangeDimension=r.GUIDED_NAVIGATION_PRICERANGE,s.categoryDimension=r.GUIDED_NAVIGATION_CATEGORY,u.prototype.locale(o),u.prototype.searchResultsHash=n?n:r.SEARCH_RESULTS_HASH,s.initialize(),s.removeRefinement=function(e){if(u.prototype.createSpinner(),""===s.searchText()&&e.dimensionName===r.GUIDED_NAVIGATION_CATEGORY){for(var t=e.removeAction?e.removeAction.navigationState:void 0,a=t?t.split("&"):void 0,o=!1,n=0;n<a.length;n++)if(a[n].indexOf("N=")!==-1){var c=a[n].substring(a[n].indexOf("N=")+2),l=s.categoryDimensionId()+"+"+c;t=t.replace(c,l),o=!0}0==o?i.goTo(s.categoryHref()):i.goTo(s.searchResultsHash+t+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_GUIDED+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)}else i.goTo(s.searchResultsHash+e.removeAction.navigationState+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_GUIDED+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)},s.clearAllRefinements=function(){u.prototype.createSpinner(),s.searchText().trim()?i.goTo(s.searchResultsHash+"?"+r.SEARCH_TERM_KEY+"="+encodeURIComponent(s.searchText().trim())+"&"+r.SEARCH_DYM_SPELL_CORRECTION_KEY+"="+encodeURIComponent(r.DYM_ENABLED)+"&"+r.SEARCH_NAV_ERECS_OFFSET+"=0&"+r.SEARCH_REC_PER_PAGE_KEY+"="+r.DEFAULT_SEARCH_RECORDS_PER_PAGE+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_SIMPLE+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY):i.goTo(s.categoryHref())},s.checkForRange=function(e){var t="dimval.match_type";return!(!e||!e.properties||"range"!==e.properties[t])},s.checkIfUnboundRange=function(e){var t="DGraph.Spec";return!(!e||!e.properties||e.properties[t].indexOf("-unbounded")==-1)},s.getLowerBound=function(e){var t="dimval.prop.lowerBound";return e&&e.properties&&e.properties[t]?e.properties[t]:null},s.getUpperBound=function(e){var t="dimval.prop.upperBound";return e&&e.properties&&e.properties[t]?this.correctUpperBound(e.properties[t]):null},s.correctUpperBound=function(e){for(var t=1,r=0;r<l.getInstance().selectedPriceListGroup().currency.fractionalDigits;r++)t*=.1;return t=t.toFixed(l.getInstance().selectedPriceListGroup().currency.fractionalDigits),e-t},s.getUpperBoundText=function(e){return e.label?e.label.substr(e.label.indexOf(" ")):null}}function d(t,r){var i=this;i.dimensionName=t.dimensionName,i.isExpanded=e.observable(!1),i.shouldDimensionExpand=e.observable(!1),i.ariaLabelText=e.observable("expandText"),i.displayName=t.displayName,"Category"===i.displayName?i.displayName=n.t("ns.common:resources.categoryText"):"Price Range"===i.displayName&&(i.displayName=n.t("ns.common:resources.priceRangeText")),i.refinements=u.prototype.refinementList(t.refinements,r,i.dimensionName,t.multiSelect),i.ancestors=t.ancestors,t.shouldMultiSelectDimensionExpand&&(i.shouldDimensionExpand(!0),i.isExpanded(!0))}var p=s.getInstance();return u.prototype.isSpinnerStarted=e.observable("false"),u.prototype.locale=e.observable(""),u.prototype.searchResultsHash="",u.prototype.refinementIndicatorOptions={parent:"#loadingModal"},u.prototype.destroySpinner=function(){a("#loadingModal").hide(),o.destroy()},u.prototype.createSpinner=function(){a("#loadingModal").removeClass("hide"),a("#loadingModal").show(),u.prototype.isSpinnerStarted("true"),(a(window)[0].innerWidth||a(window).width())<r.VIEWPORT_TABLET_LOWER_WIDTH?(u.prototype.refinementIndicatorOptions.posLeft="40%",u.prototype.refinementIndicatorOptions.posTop="80px"):(a(window)[0].innerWidth||a(window).width())<r.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(u.prototype.refinementIndicatorOptions.posLeft="45%",u.prototype.refinementIndicatorOptions.posTop="100px"):(u.prototype.refinementIndicatorOptions.posLeft="50%",u.prototype.refinementIndicatorOptions.posTop="150px"),o.create(u.prototype.refinementIndicatorOptions)},u.prototype.updateWithSearchResultsData=function(i,o,n){var s=[];if(o&&o.breadcrumbs&&o.breadcrumbs.refinementCrumbs){s=o.breadcrumbs.refinementCrumbs.slice(0);for(var c=0;c<s.length;c++){if(1==s[c].multiSelect&&s[c].count>0){for(var l=!1,u=0;u<o.navigation.length;u++)if(o.navigation[u].dimensionName==s[c].dimensionName){o.navigation[u].shouldMultiSelectDimensionExpand=!0,s[c].isSelected=!0,l=!0,o.navigation[u].refinements&&o.navigation[u].refinements instanceof Array&&o.navigation[u].refinements.indexOf(s[c])<0&&o.navigation[u].refinements.push(s[c]);break}if(0==l){s[c].isSelected=!0;var p={multiSelect:!0,name:s[c].name,ancestors:[],shouldMultiSelectDimensionExpand:!0,displayName:s[c].displayName,dimensionName:s[c].dimensionName,
refinements:[s[c]]};o.navigation.push(p)}}""===n.searchText()&&s[c].dimensionName==r.GUIDED_NAVIGATION_CATEGORY&&a.Topic(t.topicNames.CATEGORY_CRUMB_UPDATED).publish(n.convertLabel(s[c]))}""===n.searchText()&&s.length>0&&s[0].dimensionName===r.GUIDED_NAVIGATION_CATEGORY&&s[0].properties&&n.categoryRepositoryId()===s[0].properties["dimval.prop.category.repositoryId"]?n.allRefinementCrumbs(s.slice(1)):n.allRefinementCrumbs(s.slice(0))}if(o.searchAdjustments&&o.searchAdjustments.originalTerms&&o.searchAdjustments.originalTerms.length>0&&n.searchText(o.searchAdjustments.originalSearchTerms[0]),i.message!==r.SEARCH_MESSAGE_FAIL&&(o.navigation&&o.navigation.length>0||s.length>0)){var h=-1;n.dimensions(e.utils.arrayMap(o.navigation,function(e){return new d(e,n.maxRefinementCount)}),n.maxDimensionCount),a.each(n.dimensions(),function(e,t){t.dimensionName===r.GUIDED_NAVIGATION_CATEGORY&&(h=e)}),h!=-1&&n.dimensions.unshift(n.dimensions.splice(h,1)[0]),n.dimensions.showAll(!1),n.displayWidget(!0)}else n.displayWidget(!1)},u.prototype.initialize=function(){var e=this;a.Topic(t.topicNames.SEARCH_RESULTS_UPDATED).subscribe(function(t){var r=this;u.prototype.updateWithSearchResultsData(t,r,e),u.prototype.checkSpinner()}),a.Topic(t.topicNames.SEARCH_RESULTS_FOR_CATEGORY_UPDATED).subscribe(function(t){var r=this;u.prototype.updateWithSearchResultsData(t,r,e),u.prototype.checkSpinner()}),a.Topic(t.topicNames.CATEGORY_UPDATED).subscribe(function(t){e.categoryHref(t.categoryRoute),e.categoryName(t.categoryName),e.categoryDimensionId(t.dimensionId),e.categoryRepositoryId(t.repositoryId),e.searchText("")}),a.Topic(t.topicNames.OVERLAYED_GUIDEDNAVIGATION_CLEAR).subscribe(function(){u.prototype.resetViewModel(e)}),e.searchText()||e.categoryName()||e.loadCategoryFromLocalData()},u.prototype.loadCategoryFromLocalData=function(){var e=this,t=null;t=c.getInstance().getItem("category"),t&&"string"==typeof t&&(t=JSON.parse(t)),null!=t&&(e.categoryHref(t.categoryRoute),e.categoryName(t.categoryName),e.categoryRepositoryId(t.repositoryId),e.categoryDimensionId(t.dimensionId))},u.prototype.convertLabel=function(e){var t=e.label,r="dimval.prop.displayName_"+u.prototype.locale();return e&&e.properties&&e.properties[r]&&(t=e.properties[r]),t},u.prototype.checkSpinner=function(){u.prototype.isSpinnerStarted()&&u.prototype.destroySpinner(),u.prototype.isSpinnerStarted("false")},u.prototype.resetViewModel=function(e){e.displayWidget(!1),e.dimensions.removeAll(),e.allRefinementCrumbs.removeAll()},u.prototype.refinementList=function(t,i,o,s){var c=this;a.each(t,function(t,r){r.label=c.convertLabel(r),r.refinementValue=n.t("ns.common:resources.refinementValueText",{dataLabel:r.label,dataCount:r.count}),1==this.multiSelect?(r.checkedValue=e.observable(!1),this.isSelected&&1==this.isSelected&&r.checkedValue(!0),r.checkedValue.subscribe(function(e){e||(this.navigationState=this.removeAction.navigationState),u.prototype.createSpinnerAndHandleRedirect(this.navigationState)},r)):r.clickRefinement=function(){u.prototype.createSpinnerAndHandleRedirect(this.navigationState)}});var l=c.collapsibleList(t,i);return o===r.GUIDED_NAVIGATION_CATEGORY?l.sort(function(e,t){return e.label==t.label?0:e.label<t.label?-1:1}):o!==r.GUIDED_NAVIGATION_PRICERANGE&&l.sort(function(e,t){return e.count==t.count?e.label<t.label?-1:1:e.count<t.count?1:-1}),l},u.prototype.createSpinnerAndHandleRedirect=function(e){var t=this;u.prototype.createSpinner(),i.goTo(t.searchResultsHash+p.getFilteredNavState(e)+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_GUIDED+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)},u.prototype.collapsibleList=function(t,r){var i=e.observableArray(t);return i.limit=e.observable(r),i.showAll=e.observable(!1),i.toggleShowAll=function(){i.showAll(!i.showAll())},i.display=e.computed(function(){return i.showAll()?i():i().slice(0,i.limit())},i),i},u}),define("ccPaginated",["knockout","pubsub","navigation","crossroads","ccConstants","ccNavState"],function(e,t,r,i,a,o){"use strict";function n(){var t=this;t.active=!1,t.pageNumber=1,t.pageId=e.observable(""),t.contextId=e.observable(""),t.paginationOnly=e.observable(!1),t.seoslug=e.observable(""),t.previousHash=e.observable(""),t.currentHash=e.observable(""),t.isMobileView=e.observable(!1),t.paginationType=e.observable(0),t.targetPage=1,t.clearOnLoad=!1,t.itemsPerPage=40,t.blockSize=40,t.pageBatchSize=1,t.data=e.observableArray().extend({deferred:!0}),t.pageWindowSize=5,t.startIndex=0,t.lastIndex=t.pageWindowSize-1,t.pageIndex=0,t.middlePageOffset=0,t.focusPage=!1,t.pages=e.computed(t.pagesFunction,t),t.scrollToTop=!0,t.currentPage(1),t.firstPageIndex(1),t.totalNumber(0),t.sortDirectiveProp("displayName"),t.sortDirectiveOrder("asc"),t.totalNumberOfPages(0),t.clickedPage(-1)}return n.prototype.sortOptions=e.observableArray([]),n.prototype.currentPage=e.observable(0),n.prototype.totalNumber=e.observable(0),n.prototype.firstPageIndex=e.observable(1),n.prototype.data=e.observableArray([]).extend({deferred:!0}),n.prototype.sortDirectiveProp=e.observable("displayName"),n.prototype.sortDirectiveOrder=e.observable("asc"),n.prototype.totalNumberOfPages=e.observable(0),n.prototype.pageStartIndex=e.observable(),n.prototype.pageEndIndex=e.observable(),n.prototype.clickedPage=e.observable(-1),n.prototype.updatePagination=function(e){var t="";if(a.ALLOW_HASHBANG&&(t+=a.URL_HASH_SIGN+a.URL_PREPEND_HASH),1==this.paginationType())return t=o.route()+"/"+e,r.getPathWithLocale(t);if(2==this.paginationType()){var n=i.addRoute("/searchresults?{parameters}"),s="",c=!1;for(var l in this.parameters)this.parameters.hasOwnProperty(l)&&("page"==l&&(this.parameters[l]=e,c=!0),s+=l+"="+this.parameters[l]+"&");return s=s.substring(0,s.length-1),c||(s+="&page="+e),t+=n.interpolate({parameters:s}),r.getPathWithLocale(t)}if(3==this.paginationType()){t=a.AGENT_BASE_CONTEXT+"/"+a.URL_HASH_SIGN+a.URL_PREPEND_HASH;var n=i.addRoute("/{pageId}/{contextId}?{parameters}"),s="",c=!1;for(var l in this.parameters)this.parameters.hasOwnProperty(l)&&("page"==l&&(this.parameters[l]=e,c=!0),s+=l+"="+this.parameters[l]+"&");return s=s.substring(0,s.length-1),c||(s&&(s+="&"),s+="page="+e),t+=n.interpolate({pageId:this.pageId(),contextId:this.contextId(),parameters:s}),r.getPathWithLocale(t)}return""},n.prototype.load=function(e){e?(this.clearData(),this.clearOnLoad=!0):(this.clearData(),this.pageNumber&&(this.totalNumberOfPages(this.pageNumber),this.firstPageIndex(null),this.currentPage(this.pageNumber),this.firstPageIndex(1))),this.getPage(this.pageNumber||this.currentPage()||1)},n.prototype.cleanPage=function(){if(1==this.paginationType())n=o.route(),r.goTo(n);else if(2==this.paginationType()){var e=i.addRoute("/searchresults?{parameters}"),t="";for(var a in this.parameters)this.parameters.hasOwnProperty(a)&&("page"==a||(t+=a+"="+this.parameters[a]+"&"));t=t.substring(0,t.length-1),n=e.interpolate({parameters:t}),r.goTo(n)}else if(3==this.paginationType()){var e=i.addRoute("/{pageId}/{contextId}?{parameters}"),t="";for(var a in this.parameters)this.parameters.hasOwnProperty(a)&&("page"==a||(t+=a+"="+this.parameters[a]+"&"));t=t.substring(0,t.length-1);var n=e.interpolate({pageId:this.pageId(),contextId:this.contextId(),parameters:t});r.goTo(n)}},n.prototype.firstPage=function(){return this.updatePagination(this.firstPageIndex())},n.prototype.goToFirstPageControls=function(){return this.initializeIndex(),!0},n.prototype.previousPage=function(){return this.currentPage()>this.startIndex+1?this.updatePagination(this.currentPage()-1):this.updatePagination(this.currentPage())},n.prototype.goToPage=function(e){return this.updatePagination(e.pageNumber)},n.prototype.nextPage=function(){return this.currentPage()<this.totalNumberOfPages()?this.updatePagination(this.currentPage()+1):this.updatePagination(this.currentPage())},n.prototype.lastPage=function(){return this.updatePagination(this.totalNumberOfPages())},n.prototype.incrementPage=function(){this.currentPage()<this.totalNumberOfPages()&&this.getPage(this.currentPage()+1)},n.prototype.getPage=function(e){if(this.totalNumberOfPages()>1&&this.adjustPageIndex(e),this.adjustStartAndEndPageIndex(e),e!==this.currentPage()&&e!==this.targetPage&&this.isMobileView()&&$.Topic(t.topicNames.RECORD_PAGINATION_PAGE_CHANGE).publish(),e!==this.currentPage()&&(this.targetPage=e),this.clearOnLoad)return this.fetchBlock(this.pageStartIndex()),this.clickedPage(e),void this.currentPage(e);for(var r=this.pageStartIndex();r<this.pageEndIndex();r+=1)if("undefined"==typeof this.data()[r])return e!==this.currentPage()&&(this.targetPage=e),void this.fetchBlock(this.pageStartIndex());this.currentPage(e)},n.prototype.pagesFunction=function(){var e,t,r,i,a,o,n,s,c,l=1;for(this.clearOnLoad&&this.adjustStartAndEndPageIndex(this.pageNumber),this.totalNumber()?(t=(this.totalNumber()-this.totalNumber()%this.itemsPerPage)/this.itemsPerPage,r=this.totalNumber()%this.itemsPerPage>0?1:0,e=t+r):e=0,this.prevTotalNumberOfPages=this.totalNumberOfPages(),this.totalNumberOfPages(e),this.adjustPageIndex(this.pageNumber),i=[],s=this.startIndex;s<=this.lastIndex&&s<this.totalNumberOfPages();s+=1)a=s+1,o=a===this.currentPage(),n=!!this.focusPage&&o,c=Math.abs(a-s-l),l+=1,i[c]={pageNumber:a,selected:o,focused:n};return!this.focusPage&&i.length>0&&(this.focusPage=!0),i},n.prototype.adjustPageIndex=function(e){var t=Math.floor(this.pageWindowSize/2);if(e>=this.totalNumberOfPages())e>this.totalNumberOfPages()&&(e=this.totalNumberOfPages()),e==this.totalNumberOfPages()&&(this.lastIndex=this.totalNumberOfPages()-1,this.lastIndex<this.pageWindowSize-1?this.startIndex=0:this.startIndex=this.lastIndex-(this.pageWindowSize-1));else if(e<=this.pageWindowSize)this.startIndex=0,this.totalNumberOfPages()<=this.pageWindowSize?this.lastIndex=this.totalNumberOfPages()-1:this.lastIndex=this.pageWindowSize-1;else{var r=this.totalNumberOfPages()-e;r>=t?(this.startIndex=e-1-t,this.lastIndex=e-1+t):(this.startIndex=e-1-t-r,this.lastIndex=e-1+t-r)}},n.prototype.sort=function(e){var t,r,i;this.sortDirectiveOrder(),e.order();if(!e.notReversible||this.sortDirectiveOrder()!=e.order()){for(e.maintainSortOrder&&e.maintainSortOrder===!0?r=e.order():e.id&&(r="none"===e.order()||"desc"===e.order()?"asc":"desc"),this.sortDirectiveOrder(r),t=0;t<this.sortOptions().length;t+=1)this.sortOptions()[t]===e?this.sortOptions()[t].order(r):this.sortOptions()[t].maintainSortOrder||this.sortOptions()[t].order("none");if(this.sortDirectiveProp(e.id),2==this.paginationType()||3==this.paginationType()){var o="product.relevance";"listPrice"===e.id&&(o="sku.activePrice",o+="desc"===r?"|1":"|0"),this.parameters[a.SEARCH_SORT_ORDER]=encodeURIComponent(o)}if(this.data().length<this.totalNumber()||e.serverOnly)return this.clearOnLoad=!0,this.cleanPage(),this.initializeIndex(),this.targetPage=1,void this.fetchBlock(0);if($.each(this.data(),function(e,t){if(!t)return i=!0,!1}),i)return this.clearOnLoad=!0,this.targetPage=1,void this.fetchBlock(0);this.data.sort(this.sortFunction.bind(this)),this.getPage(1)}},n.prototype.sortFunction=function(e,t){var r,i,a,o,n;for(n="desc"===this.sortDirectiveOrder()?-1:1,r=this.sortDirectiveProp()&&this.sortDirectiveProp().split("."),a=e,o=t,i=0;i<r.length;i+=1)$.isArray(a)&&(a=a[0]),$.isArray(a)&&(a=a[0]),a=a&&a[r[i]],$.isArray(o)&&(o=o[0]),o=o&&o[r[i]],$.isArray(o)&&(o=o[0]);return(a===o||"string"==typeof a&&a.toLowerCase()===o.toLowerCase())&&(e.displayName&&t.displayName?(a=e.displayName&&e.displayName.toString().toLowerCase(),o=t.displayName&&t.displayName.toString().toLowerCase()):e.dateTime&&t.dateTime&&(a=e.dateTime&&e.dateTime.toLowerCase(),o=t.dateTime&&t.dateTime.toLowerCase(),n=1)),a===o?0:isFinite(a)&&isFinite(o)?(parseFloat(a)-parseFloat(o))*n:a.toString().toLowerCase()>o.toString().toLowerCase()?n:-1*n},n.prototype.adjustStartAndEndPageIndex=function(e){this.pageEndIndex(e*this.itemsPerPage),this.totalNumber()&&this.pageEndIndex()>this.totalNumber()&&this.pageEndIndex(this.totalNumber()),this.pageStartIndex((e-1)*this.itemsPerPage)},n.prototype.initializeIndex=function(){this.startIndex=0,this.lastIndex=this.pageWindowSize-1,this.clickedPage(1)},n.prototype.clearData=function(){this.data([]),this.prevTotalNumber=this.totalNumber(),this.totalNumber(null)},n.prototype.addData=function(e,t,r){var i,a,o;if(this.pageStartIndex()>0&&(t<0||t===r)?(t=this.prevTotalNumber-this.blockSize>=0?this.prevTotalNumber-this.blockSize:0,this.removeLastPage()):t=t<0?0:t,this.totalNumber(t),a=r+this.blockSize*this.pageBatchSize,a>t&&(a=t),this.clearOnLoad?(i=[],this.initializeIndex()):i=this.data(),e)for(o=0;o<e.length;o+=1)i[o+r]=e[o];this.clearOnLoad?(this.data(i),this.clearOnLoad=!1):this.data.valueHasMutated(),this.targetPage?(1==this.targetPage&&this.initializeIndex(),this.adjustStartAndEndPageIndex(this.targetPage),this.scrollToTop===!0&&$(window).scrollTop(0),this.firstPageIndex(null),this.currentPage(this.targetPage),this.firstPageIndex(1),this.scrollToTop===!0&&$(window).scrollTop(0),this.targetPage=null):a<this.pageEndIndex()&&this.pageEndIndex(a)},n.prototype.fetchBlock=function(e){throw"Function Not Implemented!"},n.prototype.removeLastPage=function(){this.clearOnLoad=!1,this.startIndex=this.startIndex-1>=0?this.startIndex-1:this.startIndex,this.getPage(this.currentPage()-1)},n.prototype.sortReset=function(){this.sortDirectiveProp("displayName"),this.sortDirectiveOrder("asc"),$.each(this.sortOptions(),function(e,t){"displayName"===t.id?t.order("asc"):t.order("none")})},n}),define("viewModels/productListingViewModel",["knockout","ccPaginated","pubsub","ccRestClient","ccConstants","CCi18n","spinner","ccNumber","pageLayout/product","storageApi","pageLayout/site","navigation","ccStoreConfiguration"],function(e,t,r,i,a,o,n,s,c,l,u,d,p){"use strict";function h(i){var o=this;t.call(this),o.widget=i,o.catalog=e.observable(),o.display=e.observable(!0),o.showInactiveProducts=null,o.showInactiveSkus=null;o.spanClass=e.computed(function(){var e="",t=0,r=0,i=0,a=0;return this.itemsPerRowInPhoneView&&(t=12/this.itemsPerRowInPhoneView),this.itemsPerRowInTabletView&&(r=12/this.itemsPerRowInTabletView),this.itemsPerRowInDesktopView&&(i=12/this.itemsPerRowInDesktopView),this.itemsPerRowInLargeDesktopView&&(a=12/this.itemsPerRowInLargeDesktopView),t>0&&(e+="col-xs-"+t),r>0&&r!=t&&(e+=" col-sm-"+r),i>0&&i!=r&&(e+=" col-md-"+i),a>0&&a!=i&&(e+=" col-lg-"+a),e},o),o.type="ProductListingViewModel",this.productLoadingOptions={},this.productLoadingOptions.parent="#cc-product-spinner",this.productLoadingOptions.selector="#cc-product-spinner-area",this.removeSpinner=function(){setTimeout(function(){$("#cc-product-spinner-area").find(".cc-spinner").remove()},500)},this.handleSorting=function(e,t){setTimeout(this.doSort.bind(this,e,t),200)},this.doSort=function(e,t){this.sort(e),t&&t(arguments[3])},this.itemsPerPage=12,this.blockSize=60,this.widget&&this.widget.productsPerPage&&!isNaN(this.widget.productsPerPage())&&(this.itemsPerPage=parseInt(this.widget.productsPerPage())),this.widget&&this.widget.blockSize&&!isNaN(this.widget.blockSize())&&(this.blockSize=parseInt(this.widget.blockSize())),this.blockSize<=this.itemsPerPage&&(this.blockSize=this.itemsPerPage+1),this.recordsPerPage=e.observable(12),this.lruSize=100,this.numberOfElementsToDelete=20,this.currentProducts=e.computed(function(){if(this.widget&&"product"===this.widget.listType()){var e;if(($(window)[0].innerWidth||$(window).width())>a.VIEWPORT_TABLET_UPPER_WIDTH){var t,r;t=(this.currentPage()-1)*this.itemsPerPage,r=t+this.itemsPerPage,e=this.data.slice(t,r)}else{var t,r;t=(this.currentPage()-1)*this.itemsPerPage,r=t+this.itemsPerPage,e=this.data.slice(0,r)}for(var i,n,s,u,d,p=[],h=e.length,f=[],m=0;m<h;m++)if(e[m]){if(i=new c(e[m].product),(this.widget.shouldUseStyleBased()||"true"==this.widget.shouldUseStyleBased())&&window.history&&window.history.pushState){if(0==m&&this.category()){var s=l.getInstance().getItem(a.LISTING_OFFSET_MAP_KEY);if(s&&"string"==typeof s&&(s=JSON.parse(s)),s){if(u=Object.keys(s),d=u.length,d&&d>this.lruSize){f=u.sort(function(e,t){return s[e].timestamp-s[t].timestamp});for(var g=0;g<this.numberOfElementsToDelete;g++)delete s[f[g]]}}else s={};e[m].offsetMap.timestamp=Date.now(),s[this.category().route+"/"+this.pageNumber]=e[m].offsetMap,l.getInstance().setItem(a.LISTING_OFFSET_MAP_KEY,JSON.stringify(s))}n=o.widget.productListingTypes[i.type()],i.listingSku=e[m].listingSku,n&&(!n.variantBasedDisplay&&e[m].product.defaultProductListingSku&&e[m].product.defaultProductListingSku.images&&e[m].product.defaultProductListingSku.images.length>0&&(i.listingSku=e[m].product.defaultProductListingSku),i.listingSku&&(i.listingSku.route=e[m].product.route+"?variantName="+n.id+"&variantValue="+i.listingSku[n.id]))}p.push(i)}return p}},this).extend({deferred:!0}),this.checkResponsiveFeatures=function(e){e>a.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?o.viewportMode()!=a.LARGE_DESKTOP_VIEW&&(o.viewportMode(a.LARGE_DESKTOP_VIEW),o.handleViewportChange(a.LARGE_DESKTOP_VIEW)):e>a.VIEWPORT_TABLET_UPPER_WIDTH&&e<=a.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?o.viewportMode()!=a.DESKTOP_VIEW&&(o.viewportMode(a.DESKTOP_VIEW),o.handleViewportChange(a.DESKTOP_VIEW)):e>=a.VIEWPORT_TABLET_LOWER_WIDTH&&e<=a.VIEWPORT_TABLET_UPPER_WIDTH?o.viewportMode()!=a.TABLET_VIEW&&(o.viewportMode(a.TABLET_VIEW),o.handleViewportChange(a.TABLET_VIEW)):o.viewportMode()!=a.PHONE_VIEW&&(o.viewportMode(a.PHONE_VIEW),o.handleViewportChange(a.PHONE_VIEW))},this.handleResponsiveViewports=function(){o.viewportMode()==a.TABLET_VIEW&&(o.itemsPerRow(o.itemsPerRowInTabletView),o.scrollToTop=!1,o.isMobileView(!0)),o.viewportMode()==a.PHONE_VIEW&&(o.itemsPerRow(o.itemsPerRowInPhoneView),o.scrollToTop=!1,o.isMobileView(!0))},this.handleViewportChange=function(e){e!=o._internalViewportMode()&&(e&&o._internalViewportMode(e),o.viewportMode()==a.DESKTOP_VIEW?(o.itemsPerRow(o.itemsPerRowInDesktopView),o.clearOnLoad=!0,o.targetPage=1,o.fetchBlock(0),o.scrollToTop=!0,o.isMobileView(!1)):o.viewportMode()==a.LARGE_DESKTOP_VIEW&&(o.itemsPerRow(o.itemsPerRowInLargeDesktopView),o.clearOnLoad=!0,o.targetPage=1,o.fetchBlock(0),o.scrollToTop=!0,o.isMobileView(!1)),o.handleResponsiveViewports())},this.pageNumberDeferred=$.Deferred(),this.handleLinks=function(e,t){var i,a,o=e.totalNumberOfPages(),n=parseInt(t.page)||(t.paginationOnly?1:e.pageNumber);1==o||1==n?(a=null,i=""):(a="/"+(n-1),i="/"+n),$.Topic(r.topicNames.PAGE_PAGINATION_CALCULATED).publish({currPageNo:i,prevPageNo:a,nextPageNo:1==o||n==o?null:"/"+(n+1)})},this.handlePaginationChange=function(e){this.pageNumberDeferred.resolve(this,e),e.paginationOnly&&this.handleLinks(this,e)},$.Topic(r.topicNames.PAGE_PAGINATION_CHANGE).subscribe(this.handlePaginationChange.bind(this)),this.checkResponsiveFeatures($(window)[0].innerWidth||$(window).width()),this.handleResponsiveViewports(),this._internalViewportMode(this.viewportMode()),this.resultsText=e.computed(this.getResultsText,this),this.storeConfiguration=p.getInstance()}var f=function(){};return f.prototype=t.prototype,h.prototype=new f,h.prototype.constructor=h,h.prototype.category=e.observable(),h.prototype.selectedSort=e.observable(),h.prototype.resultsText=e.observable(),h.prototype.titleText=e.observable(),h.prototype.itemsPerRow=e.observable(4),h.prototype.itemsPerRowInTabletView=4,h.prototype.itemsPerRowInPhoneView=2,h.prototype.itemsPerRowInDesktopView=4,h.prototype.itemsPerRowInLargeDesktopView=4,h.prototype._internalViewportMode=e.observable(4),h.prototype.viewportMode=e.observable(4),h.prototype.spanClass=e.observable(),h.prototype.resetSortOptions=function(){var e=this.sortOptions()[0];this.selectedSort(e),this.sortDirectiveProp(e.id),this.sortDirectiveOrder(e.order("none"))},h.prototype.clearData=function(){this.data([]),this.prevTotalNumber=this.totalNumber(),this.totalNumber(null),this.actualOffset=0,this.expandedOffset=0},h.prototype.fetchBlock=function(e){var t,r;if(this.clearOnLoad&&(this.titleText(""),this.clearData()),r={},r[a.TOTAL_RESULTS]=!0,r[a.TOTAL_EXPANDED_RESULTS]=!0,this.catalog&&(r[a.CATALOG]=this.catalog()),this.widget.user&&this.widget.user().catalogId&&(r[a.CATALOG]=this.widget.user().catalogId()),(this.widget.shouldUseStyleBased()||"true"==this.widget.shouldUseStyleBased())&&window.history&&window.history.pushState){if(0==e)this.actualOffset=0,this.expandedOffset=0,r[a.OFFSET]=this.actualOffset;else if(this.pageNumber==Math.ceil(this.totalExpandedResults/this.itemsPerPage))this.actualOffset=this.totalResults-this.blockSize<0?0:this.totalResults-this.blockSize,this.expandedOffset=-1*this.totalExpandedResults,r[a.OFFSET]=this.actualOffset;else{for(var o=1;o<=this.blockSize;o++)if(this.data()[e+this.itemsPerPage-o]){this.actualOffset=this.data()[e+this.itemsPerPage-o].offsetMap.actualOffset+this.blockSize,this.expandedOffset=e+this.itemsPerPage+1-o,r[a.OFFSET]=this.actualOffset;break}if(void 0==r[a.OFFSET])for(var o=1;o<=this.blockSize;o++)if(this.data()[e+o]){this.actualOffset=this.data()[e+o].offsetMap.actualOffset-this.blockSize<0?0:this.data()[e+o].offsetMap.actualOffset-this.blockSize,this.expandedOffset=-1*(e+o-1),r[a.OFFSET]=this.actualOffset;break}}if(void 0==r[a.OFFSET]){var s,c;c=l.getInstance().getItem(a.LISTING_OFFSET_MAP_KEY),c&&"string"==typeof c&&(c=JSON.parse(c)),c&&(s=c[this.category().route+"/"+this.pageNumber]),s&&void 0!==s&&(this.actualOffset=s.actualOffset,this.expandedOffset=s.expandedOffset,r[a.OFFSET]=this.actualOffset)}}void 0==r[a.OFFSET]&&(this.actualOffset=e,this.expandedOffset=e,r[a.OFFSET]=this.actualOffset),r[a.LIMIT]=this.blockSize,"default"!==this.sortDirectiveProp()&&(r[a.SORTS]=this.sortDirectiveProp()+":"+this.sortDirectiveOrder()),t=a.ENDPOINT_PRODUCTS_LIST_PRODUCTS,this.category()&&(this.requesting||(this.requesting=!0,n.create(this.productLoadingOptions),r[a.CATEGORY]=this.category().id,r.includeChildren=!0,null!=this.showInactiveProducts&&null!=this.showInactiveSkus&&(r.showInactiveProducts=this.showInactiveProducts,r.showInactiveSkus=this.showInactiveSkus),this.widget&&this.widget.fields&&this.widget.fields()&&(r.fields=this.widget.fields()),this.requesting=!0,r[a.STORE_PRICELISTGROUP_ID]=u.getInstance().selectedPriceListGroup().id,this.widget&&this.widget.productListing&&this.widget.productListing.filterKey&&(r[a.FILTER_KEY]=this.widget.productListing.filterKey),i.request(t,r,this.successFunc.bind(this),this.errorFunc.bind(this))))},h.prototype.successFunc=function(e){if((this.widget.shouldUseStyleBased()||"true"==this.widget.shouldUseStyleBased())&&window.history&&window.history.pushState){this.totalExpandedResults=e.totalExpandedResults,this.totalResults=e.totalResults;var t={};t.actualOffset=e.offset;var r,i=this.expandProducts(e.items,t);r=this.expandedOffset>=0?this.expandedOffset:Math.abs(this.expandedOffset)-i.length,t.expandedOffset=r,i&&i.length>0?this.addData(i,e.totalExpandedResults<0?0:e.totalExpandedResults,r):d.goTo(this.widget.links()[404].route,!0,!0)}else{var a=[];if(e.items&&e.items.length>0)for(var o=0,n=e.items.length;o<n;o++){var s={};s.product=e.items[o],a[o]=s}else d.goTo(this.widget.links()[404].route,!0,!0);this.addData(a,e.totalResults<0?0:e.totalResults,e.offset)}$.when(this.pageNumberDeferred).done(this.handleLinks),this.removeSpinner(),this.titleText(this.getTitleText()),this.requesting=!1},h.prototype.errorFunc=function(e){this.removeSpinner(),this.requesting=!1},h.prototype.expandProducts=function(e,t){var r,i,a,o,n=[],s=this.widget.productListingTypes,c=[],l=[],u=0;if(e)for(var d=0,p=e.length;d<p;d++)if(r=e[d],r.childSKUs.length>0&&s[r.type]&&s[r.type].variantBasedDisplay){a={},o=s[r.type].id,l=r.variantValuesOrder[o],c=s[r.type].values;for(var h=0,f=r.childSKUs.length;h<f;h++)if(i=r.childSKUs[h],!a[i[o]]||i.productListingSku){var m={};m.product=e[d],m.listingSku=i,a[i[o]]=m}var g=[];g=l&&l.length>0?l:c;for(var v=0;v<g.length;v++)a[g[v]]&&(n[u]=a[g[v]],n[u].offsetMap=t,u++)}else{var m={};m.product=e[d],n[u]=m,n[u].offsetMap=t,u++}return n},h.prototype.getResultsText=function(){var e,t=this.pageStartIndex();return this.viewportMode()!==a.DESKTOP_VIEW&&this.viewportMode()!==a.LARGE_DESKTOP_VIEW&&(t=0),s.formatNumber(this.totalNumber())&&(e=this.totalNumber()>0?o.t("ns.common:resources.productresultsText",{startIndex:s.formatNumber(t+1),endIndex:s.formatNumber(this.pageEndIndex()),totalProducts:s.formatNumber(this.totalNumber())}):o.t("ns.common:resources.emptyProductresultsText")),"ns.common:resources.productresultsText"===e&&(e=""),e},h.prototype.getTitleText=function(){var e="";return e=this.category()?this.category().displayName:o.t("ns.common:resources.TitleText")},h}),define("viewModels/productListingSearchViewModel",["knockout","viewModels/productListingViewModel","pubsub","CCi18n","ccConstants","ccNumber","navigation","pageLayout/product","pageLayout/search"],function(e,t,r,i,a,o,n,s,c){"use strict";function l(r){var i=this;i.initializationComplete=e.observable(!1),t.call(this),i.widget=r,i.initialize(),i.itemsPerRowInDesktopView=4,i.itemsPerPage=12,i.blockSize=12,i.currentProducts=e.computed({read:this.getCurrentProducts,deferEvaluation:!0},this)}var u=c.getInstance(),d=function(){};return d.prototype=t.prototype,l.prototype=new d,l.prototype.constructor=l,l.base=t.prototype,l.prototype.itemsPerRowInTabletView=4,l.prototype.itemsPerRowInPhoneView=2,l.prototype.itemsPerRowInDesktopView=4,l.prototype.itemsPerRowInLargeDesktopView=4,l.prototype.itemsPerRow=e.observable(4),l.prototype.type="ProductListingSearchViewModel",l.prototype.searchFailed=e.observable(!1),l.prototype.idToSearchIdMap={displayName:"product.relevance",listPrice:"sku.activePrice"},l.prototype.category=e.observable(),l.prototype.initialize=function(){var t=this;t.searchResults=[],t.recordsPerPage=e.observable(a.DEFAULT_SEARCH_RECORDS_PER_PAGE),t.searchAdjustments={},t.breadcrumbs={},t.navigation={},t.pageCount=0,t.recordOffSet=0,t.searchTerms=e.observableArray([]),t.adjustedSearchTerms=e.observableArray([]),t.suggestedSearches=e.observableArray([]),t.navigationDescriptors=e.observable(),t.display=e.observable(!0),t.totalNumber(0),t.pageStartIndex(0),t.pageEndIndex(0),t.searchText=e.observable(),t.resultsText=e.observable(),t.categoryName=e.observable(),t.noSearchResultsText=e.observable(),t.pageLoadedText=e.observable();var i=function(e){for(var r=e.sortDirectiveOrder,i="sku.activePrice"===e.sortDirectiveProperty?"listPrice":"default",a=0;a<t.sortOptions().length;a+=1){var o=t.sortOptions()[a];if(o.id===i&&o.order()===r)return o}};$.Topic(r.topicNames.CATEGORY_CRUMB_UPDATED).subscribe(function(e){t.categoryName(e)}),$.Topic(r.topicNames.SEARCH_RESULTS_UPDATED).subscribe(function(e){if(t.noSearchResultsText(""),e.message===a.SEARCH_MESSAGE_FAIL)t.searchFailed(!0),n.goTo(t.widget.links().noSearchResults.route,!1,!0),$.Topic(r.topicNames.SEARCH_FAILED_TO_PERFORM).publish();else{if(0===this.totalRecordsFound&&!this.searchAdjustments.suggestedSearches)return n.goTo(t.widget.links().noSearchResults.route,!1,!0),$.Topic(r.topicNames.SEARCH_TERM).publishWith(this.searchAdjustments.originalTerms,[{message:"success"}]),void t.display(!1);if(t.display(!0),t.totalNumber(this.totalRecordsFound),t.searchTerms(this.searchAdjustments.originalTerms),this.searchAdjustments.adjustedSearches?t.adjustedSearchTerms(this.searchAdjustments.adjustedSearches[t.getSearchTerms()]):t.adjustedSearchTerms([]),this.searchAdjustments.suggestedSearches?(t.formatSuggestedSearches(this.searchAdjustments.suggestedSearches[t.getSearchTerms()]),t.suggestedSearches(this.searchAdjustments.suggestedSearches[t.getSearchTerms()])):t.suggestedSearches([]),t.searchFailed(!1),this.pagingActionTemplate&&t.navigationDescriptors(t.getParameterByName(this.pagingActionTemplate.navigationState,a.SEARCH_NAV_DESCRIPTORS_KEY)),this.isNewSearch===!0)t.clearOnLoad=!0,"displayName"!==t.sortDirectiveProp()&&t.selectedSort(t.sortOptions()[0]);else if(t.clearOnLoad=!1,e.requestor){var o=i(e.requestor);o?t.selectedSort(o):t.selectedSort(t.sortOptions()[0])}this.searchResults&&this.searchResults.length>0?t.addData(this.searchResults,t.totalNumber(),this.recordOffSet):(t.targetPage=1,this.searchAdjustments.suggestedSearches||n.goTo(t.widget.links()[404].route,!0,!0)),t.titleText(t.getTitleText(this.searchResults.length)),t.resultsText(t.getResultsText()),t.pageLoadedText(t.getPageLoadedText())}}),t.initializationComplete(!0)},l.prototype.getPageLoadedText=function(){var e=i.t("ns.common:resources.searchPageLoadedText",{results:this.resultsText(),searchTerm:this.searchTerms()[0]});return e},l.prototype.getCurrentProducts=function(){var e;if(($(window)[0].innerWidth||$(window).width())>a.VIEWPORT_TABLET_UPPER_WIDTH){var t,r;t=(this.currentPage()-1)*this.itemsPerPage,r=t+this.itemsPerPage,e=this.data.slice(t,r)}else e=this.data();for(var i,o=[],n=e.length,c=0;c<n;c++)e[c]&&(i=new s(e[c]),i.listingSku&&(i.listingSku.route=i.listingSku.route(),i.listingSku.images=i.listingSku.images()),o.push(i));return $("#typeaheadDropdown").hide(),this.setFocus(),o},l.prototype.getPage=function(e){this.resultsText(""),this.clickedPage(e),this.adjustStartAndEndPageIndex(e),e!==this.currentPage()&&e!==this.targetPage&&this.isMobileView()&&$.Topic(r.topicNames.RECORD_PAGINATION_PAGE_CHANGE).publish(),e!==this.currentPage()&&(this.targetPage=e),(this.parameters||"product.relevance"!==l.prototype.idToSearchIdMap[this.sortDirectiveProp()])&&this.fetchBlock(this.pageStartIndex()),this.setFocus()},l.prototype.getParameterByName=function(e,t){var r=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=r.exec(e);return null===i?"":i[1]},l.prototype.fetchBlock=function(e){this.initializationComplete()&&(this.recordOffSet=e,this.searchText(this.searchTerms().length>0?this.searchTerms()[0]:""),this.blockSize=this.recordsPerPage(),($(window)[0].innerWidth||$(window).width())<a.VIEWPORT_TABLET_UPPER_WIDTH&&(this.recordOffSet=0,this.blockSize=e+this.recordsPerPage()),this.submitSearch())},l.prototype.submitSearch=function(){var e="",t="";this.searchText().trim()&&(e=a.PRODUCT_DISPLAYABLE+a.SEARCH_PROPERTY_SEPARATOR+this.searchText().trim()),this.parameters&&this.parameters.searchType&&(t=this.parameters.searchType);var i={getFromUrlParam:!0,newSearch:!1,recordsPerPage:this.blockSize,recordOffSet:this.recordOffSet,recDYMSuggestionKey:this.recDYMSuggestionKey,searchType:t};if(this.parameters.Ns){var o=decodeURIComponent(this.parameters.Ns).split("|");2===o.length&&(i.sortDirectiveProperty=o[0],i.sortDirectiveOrder="1"==o[1]?"desc":"asc")}else this.sortDirectiveProp("displayName");"product.relevance"!==l.prototype.idToSearchIdMap[this.sortDirectiveProp()]&&(i.sortDirectiveProperty=l.prototype.idToSearchIdMap[this.sortDirectiveProp()],i.sortDirectiveOrder="product.relevance"==i.sortDirectiveProperty?"none":this.sortDirectiveOrder()),$.Topic(r.topicNames.SEARCH_CREATE).publishWith(i,[{message:"success"}])},l.prototype.getResultsText=function(){var e=this.pageStartIndex(),t="";if(0!==this.totalNumber()){if(this.viewportMode()!==a.DESKTOP_VIEW&&this.viewportMode()!==a.LARGE_DESKTOP_VIEW&&(e=0),this.searchFailed&&!this.searchFailed()){var r=this.getSearchTerms(),n="ns.common:resources.searchresultsText",s=this.pageEndIndex();this.pageEndIndex()>this.totalNumber()&&(s=this.totalNumber()),o.formatNumber(this.totalNumber())&&(t=i.t(n,{count:o.formatNumber(this.totalNumber()),searchterm:r,startIndex:o.formatNumber(e+1),endIndex:o.formatNumber(s)}))}else t=i.t("ns.common:resources.searchFailedText");return t}},l.prototype.getSearchTerms=function(){var t="",r=0;return this.searchTerms&&e.utils.arrayForEach(this.searchTerms(),function(e){t=0===r?e:t+" "+e,r++}),t},l.prototype.getTitleText=function(e){var t="";return""==this.getSearchTerms()?t=this.categoryName():this.adjustedSearchTerms().length>0?(t=i.t("ns.common:resources.searchText",{searchTerm:'"'+this.adjustedSearchTerms()[0].adjustedTerms+'"'}),this.noSearchResultsText(i.t("ns.common:resources.noSearchResultsText",{searchTerm:'"'+this.getSearchTerms()+'"'}))):this.suggestedSearches().length>0&&0===e?this.noSearchResultsText(i.t("ns.common:resources.noSearchResultsText",{searchTerm:'"'+this.getSearchTerms()+'"'
})):t=i.t("ns.common:resources.searchText",{searchTerm:'"'+this.getSearchTerms()+'"'}),t},l.prototype.pagesFunction=function(){var e,t,r,i;this.clearOnLoad&&this.adjustStartAndEndPageIndex(this.pageNumber),this.totalNumber()?(t=(this.totalNumber()-this.totalNumber()%this.itemsPerPage)/this.itemsPerPage,r=this.totalNumber()%this.itemsPerPage>0?1:0,e=t+r):e=0,u.contextData&&"/"+n.getPath()==u.contextData.global.links.searchresults.route&&this.totalNumberOfPages(e),this.adjustPageIndex(this.pageNumber);var a=[];for(i=0;i<e;i++){var o={};o.pageNumber=i+1,o.selected=o.pageNumber===this.currentPage(),a.push(o)}var s=[];if(this.pageWindowSize>=e)s=a.slice(0);else{var c=this.startIndex+this.pageWindowSize;c>e&&(c=e),s=a.slice(this.startIndex,c)}return s},l.prototype.formatSuggestedSearches=function(e){$.each(e,function(e,t){t.clickSuggestion=function(){n.goTo(a.SEARCH_RESULTS_HASH+u.getFilteredNavState(this.navigationState)+"&"+a.SEARCH_TYPE+"="+a.SEARCH_TYPE_SIMPLE+"&"+a.PARAMETERS_TYPE+"="+a.PARAMETERS_SEARCH_QUERY)}})},l.prototype.setFocus=function(){var e=$("#region-megaMenu").next().attr("id"),t="#"+e+" :focusable";$(t).first().focus()},l}),define("viewModels/productListingViewModelFactory",["viewModels/productListingViewModel","viewModels/productListingSearchViewModel","ccConstants"],function(e,t,r){"use strict";function i(){if(null!==a)throw new Error("Cannot instantiate more than one ProductListingViewModelFactory, use ProductListingViewModelFactory.getInstance()")}var a=null;return i.prototype={createListingViewModel:function(e){var t,i=e.listType();return i===r.LIST_VIEW_PRODUCTS&&(t=this.createProductListingViewModel(e)),i===r.LIST_VIEW_SEARCH&&(t=this.createProductListingSearchViewModel(e)),t},createProductListingViewModel:function(t){return new e(t)},createProductListingSearchViewModel:function(e){return new t(e)}},i.getInstance=function(){return null===a&&(a=new i),a},i.getInstance()}),define("viewModels/searchTypeahead",["knockout","pubsub","ccConstants","CCi18n","navigation","jquery","ccNumber","pageLayout/product","pageLayout/site","ccRestClient","bstypeahead","bootstrap"],function(e,t,r,i,a,o,n,s,c,l){"use strict";function u(e,t,i,a,o,n){if(null!==d)throw new Error("Cannot instantiate more than one SearchTypeahead, use SearchTypeahead.getInstance()");b=t.symbol,b.match(/^[0-9a-zA-Z]+$/)&&(b+=" "),I=t.fractionalDigits,this.productURLRoot=i?i:p,this.searchResultPage=a?a:r.SEARCH_RESULTS_HASH,A=null!=o&&o,P=null==n?null:n,this.initialize(e)}var d=null,p="/product/";r.ALLOW_HASHBANG&&(p="#!"+p);var h="ns.common:resources.",f="--noMatchesFound--",m="close",g="showall",v=2,E=l.getStoredValue(r.LOCAL_STORAGE_USER_CONTENT_LOCALE);E=null!=E?JSON.parse(E)[0].name:o(":root").attr("lang"),"zh_CN"!=E&&"zh_TW"!=E||(v=1);var y,b,I,T=5,S=300,_=10,P=e.observable(null),A=e.observable(!1),C=e.observable(!1),R=e.observable(!1);return o.fn.typeahead.Constructor.prototype.keyup=function(e){switch(e.keyCode){case 9:case 40:case 38:case 16:case 17:case 18:break;case 13:if(!this.shown)return;C(!0),this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},o.fn.typeahead.Constructor.prototype.move=function(e){if(this.shown){switch(e.keyCode){case 13:case 27:e.preventDefault();break;case 38:"keyup"==e.type&&(e.preventDefault(),this.prev());break;case 9:if(e.preventDefault(),e.stopPropagation(),e.shiftKey){var t=this.$menu.find(".active").removeClass("active"),r=t.prev();if(!r.length){if(!this.shown)return;this.hide()}r.addClass("active")}else{var t=this.$menu.find(".active").removeClass("active"),i=t.next();i.length||(0==i.prevObject.length&&this.$menu.find("li").length>1?i=o(this.$menu.find("li")[0]):this.$element.next().next().focus()),0===i.length?o("#desktopSearchSubmit").focus():i.addClass("active")}break;case 40:"keydown"==e.type&&(e.preventDefault(),this.next())}e.stopPropagation()}},o.fn.typeahead.Constructor.prototype.blur=function(e){if(this.focused=!1,!this.mousedover&&this.shown)return this.$menu.hide(),this},u.prototype={initialize:function(e){if(void 0===e)throw new Error("Cannot instantiate SearchTypeahead, without a selector");o(e).typeahead({source:this.typeaheadSource,minLength:v,items:T,matcher:this.typeaheadMatch,sorter:this.typeaheadSort,updater:this.typeaheadUpdater,highlighter:this.typeaheadHighlight,render:this.typeaheadRender,select:this.typeaheadSelect,hide:this.typeaheadHide,menu:"<ul id='typeaheadDropdown' class='typeahead dropdown-menu' aria-live='polite'></ul>",item:"<li class='typeaheadProduct'><a href='#' onclick = $('#typeaheadDropdown').hide()>                                           <img class='typeaheadProductThumbnail visible-md visible-lg img-responsive'/>                                           <span class='typeaheadProductName'></span>                                           <span class='typeaheadProductPrice'></span>                                         </a></li>"}),o.Topic(t.topicNames.SEARCH_TYPEAHEAD_UPDATED).subscribe(this.typeaheadResults),o.Topic(t.topicNames.SEARCH_TYPEAHEAD_CANCEL).subscribe(this.typeaheadCancel.bind(this))},typeaheadUpdater:function(e){return e},typeaheadSource:function(e,r){y=this,this.render=this.options.render||this.render,this.select=this.options.select||this.select,this.hide=this.options.hide||this.hide;var i=y.query;this.searchQuery="",this.$menu.css("width",this.$element.width()-_/2),this.$menu.css("margin-left",_),this.timer&&clearTimeout(this.timer);var a=function(){y.callback=r,y.query=y.query?y.query:i,y.searchQuery=y.query,o.Topic(t.topicNames.SEARCH_TYPEAHEAD).publishWith({searchText:y.query,recordsPerPage:T,recordOffSet:0},[{message:"success"}])};this.timer=setTimeout(a,S)},typeaheadResults:function(e){if(R()||"none"==o("#typeaheadDropdown").css("display")&&(o("#alert-modal-change").text(i.t("ns.common:resources.searchDropdownOpenedText")),R(!0)),y.options){var t,a,n=[],s=this[0]?this[0]:[],l=this[1]?this[1]:[],u=c.getInstance().noImageSrc();o.each(l,function(e,i){if(i.records[0]){var s=i.records[0],c={};c.id=s.attributes["product.repositoryId"][0],s.attributes["product.displayName"]?c.name=s.attributes["product.displayName"][0]:c.name="",(o(window)[0].innerWidth||o(window).width())>r.VIEWPORT_TABLET_LOWER_WIDTH&&(c.thumb=s.attributes["sku.listingThumbImageURL"]?s.attributes["sku.listingThumbImageURL"]:s.attributes["product.primaryThumbImageURL"]?s.attributes["product.primaryThumbImageURL"][0]:u),s.attributes["product.primaryImageTitle"]&&(c.primaryImageTitle=s.attributes["product.primaryImageTitle"][0]),(c.primaryImageAltText=s.attributes["product.primaryImageAltText"])&&(c.primaryImageAltText=s.attributes["product.primaryImageAltText"][0]),c.link=s.attributes["product.route"][0],Array.isArray(s.attributes["sku.styleProperty"])&&(t=s.attributes["sku.styleProperty"][0],t&&(Array.isArray(s.attributes["sku."+t])&&(a=s.attributes["sku."+t][0]),a&&(c.link=c.link+"?variantName="+t+"&variantValue="+a))),c.price="",n.push(c)}}),o.each(s,function(e,t){if(t.id[0]===n[e].id){var r=function(e){var t,r,i,a,o,n=e.childSKUs?e.childSKUs.length:0;if(e.minActivePrice)return e.minActivePrice;if(t=e.salePrice||0===e.salePrice?e.salePrice:e.listPrice,e.childSKUs)if(n>0)for(var o in e.childSKUs)i=e.childSKUs[o],a=i.salePrice||0===i.salePrice?i.salePrice:i.listPrice,a||0==a||(a=t),(!r&&0!=r||a<r)&&(r=a);else r=t;return r}(t);n[e].price=r}}),n.length||n.push({id:f,name:"",price:"",thumb:"",link:""}),y.callback&&"function"==typeof y.callback&&y.callback(n)}},typeaheadCancel:function(){y=this,y.timer&&clearTimeout(y.timer)},typeaheadMatch:function(e){return!0},typeaheadSort:function(e){return e},typeaheadHighlight:function(e){return e},typeaheadRender:function(e){if(1===e.length&&e[0].id===f){var t=i.t(h+"noMatchesFound");return this.$menu.html(o("<li class='typeaheadTop' disabled>").text(t)),this}var r='src="'+c.getInstance().noImageSrc()+'"';e=o(e).map(function(e,t){e=o(y.options.item).attr("data-value",t.name),A?null!=P&&e.find("a").attr("href","#").on("click",function(e){return P.getProductDetails.call(P,t.id,A),e.preventDefault(),!1}):e.find("a").attr("href",a.getPathWithLocale(t.link)).on("click",function(e){var t=o(this).attr("href");return a.goTo(t),e.preventDefault(),!1}),e.find("a").attr("title",t.name),e.find("a").attr("id",t.id),"/img/no-image.jpg"==t.thumb&&c.getInstance().noImageSrc()&&""!=c.getInstance().noImageSrc()?e.find(".typeaheadProductThumbnail").attr("src",c.getInstance().noImageSrc()):e.find(".typeaheadProductThumbnail").attr("src",t.thumb),e.find(".typeaheadProductThumbnail").attr("alt",t.primaryImageAltText),e.find(".typeaheadProductThumbnail").attr("title",t.primaryImageTitle),e.find(".typeaheadProductThumbnail").attr("onError",r),e.find(".typeaheadProductName").html(t.name);var s,l=parseFloat(t.price).toFixed(I).toString();if("NaN"===l||""===l||null===l)s=i.t(h+"priceUnavailable");else{var u=l.split(".");s=n.formatNumber(u[0],!0),0===I?s=s.substring(0,s.length-3):(s=s.substring(0,s.length-2),s+=u[1]),s=b+s}return e.find(".typeaheadProductPrice").text(s),e[0]}),e.first().addClass("firstResult");var s=i.t(h+"closeText"),l=i.t(h+"showAllResultsText");return this.$menu.html(e),this.$menu.prepend(o("<li/>").attr({class:"typeaheadClose","data-value":m}).append(o("<a/>").attr({href:"#",tabindex:"0"}).text(s))),this.$menu.prepend(o("<li/>").attr({class:"typeaheadAllProducts visible-lg visible-md","data-value":g}).append(o("<a/>").attr({href:"#",title:"Show all results"}).text(l))),this},typeaheadSelect:function(){var e=this.$menu.find(".active"),t=e.children("a").attr("href"),i=e.children("a").attr("id");if(t&&""!==t&&"#"!==t)window.location=t;else if(t&&"#"===t&&A&&null!=P&&null!=i)P.getProductDetails.call(P,i,A);else{var n=e.attr("data-value");if(n===g||!e.length){d.typeaheadCancel(),this.searchQuery=this.query;var s;C()?(s=o.trim(this.query),C(!1)):s=this.query.trim()+r.SEARCH_WILDCARD,0!=s.length&&a.goTo(d.searchResultPage+"?"+r.SEARCH_TERM_KEY+"="+encodeURIComponent(s)+"&"+r.SEARCH_DYM_SPELL_CORRECTION_KEY+"="+encodeURIComponent(r.DYM_ENABLED)+"&"+r.SEARCH_NAV_ERECS_OFFSET+"=0&"+r.SEARCH_REC_PER_PAGE_KEY+"="+r.DEFAULT_SEARCH_RECORDS_PER_PAGE+"&"+r.SEARCH_RANDOM_KEY+"="+Math.floor(1e3*Math.random())+"&"+r.SEARCH_TYPE+"="+r.SEARCH_TYPE_SIMPLE+"&"+r.PARAMETERS_TYPE+"="+r.PARAMETERS_SEARCH_QUERY)}}return this.hide()},typeaheadHide:function(){return this.$element.val()===this.searchQuery&&this.$element.val("").change(),this.$menu.hide(),this.shown=!1,R()&&"none"==o("#typeaheadDropdown").css("display")&&(o("#alert-modal-change").text(i.t("ns.common:resources.searchDropdownClosedText")),R(!1)),this}},u.getInstance=function(e,t,r,i,a,o){return d=null,d=new u(e,t,r,i,a,o)},u}),define("viewModels/giftProductListingViewModel",["knockout","pubsub","ccConstants","pageLayout/product","ccRestClient","ccStoreConfiguration"],function(e,t,r,i,a,o){"use strict";function n(e,t){var r=this;return r.products=r.getProductsInfo(e),r}return n.prototype.storeConfiguration=o.getInstance(),n.prototype.getProductsInfo=function(e){for(var t=[],a=0;a<e.length;a++){var o={};e[a].hasOwnProperty(r.INVENTORY_PRODUCT_TYPE)&&(o=new i(e[a][r.INVENTORY_PRODUCT_TYPE])),t[a]={},t[a]=o}return t},n.prototype.getGiftProductChoices=function(e){if(null!=e.giftWithPurchaseDetail&&null!=e.giftWithPurchaseType){var t,i={};i[r.GIFT_WITH_PURCHASE_DETAIL]=e.giftWithPurchaseDetail,i[r.GIFT_WITH_PURCHASE_TYPE]=e.giftWithPurchaseType;var o={};o[r.ENDPOINT_KEY]=r.ENDPOINT_GET_GIFT_CHOICES;var n=this.storeConfiguration.getFilterToUse(o);n&&(i[r.FILTER_KEY]=n),t=r.ENDPOINT_GET_GIFT_CHOICES,a.request(t,i,this.getGiftChoicesSuccessFunc.bind(this,e.id),this.getGiftChoicesFailureFunc.bind(this))}},n.prototype.getGiftChoicesSuccessFunc=function(e,r){if(r&&r.length>0){var i=new n(r);$.Topic(t.topicNames.GET_GIFT_CHOICES_SUCCESSFUL).publishWith([i,e],[{message:"success"}])}else $.Topic(t.topicNames.GIFT_CHOICES_NOT_AVAILABLE).publish()},n.prototype.getGiftChoicesFailureFunc=function(e){$.Topic(t.topicNames.GET_GIFT_CHOICES_FAILURE).publishWith(e,[{message:"failure"}])},n});
//# sourceMappingURL=main.js.map